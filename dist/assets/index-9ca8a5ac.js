(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ew(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function Sw(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Wt(i)?JO(i):Sw(i);if(s)for(const o in s)e[o]=s[o]}return e}else{if(Wt(t))return t;if(gt(t))return t}}const WO=/;(?![^(]*\))/g,YO=/:([^]+)/,QO=/\/\*.*?\*\//gs;function JO(t){const e={};return t.replace(QO,"").split(WO).forEach(n=>{if(n){const i=n.split(YO);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function kp(t){let e="";if(Wt(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const i=kp(t[n]);i&&(e+=i+" ")}else if(gt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const XO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ZO=Ew(XO);function JC(t){return!!t||t===""}const eM=t=>Wt(t)?t:t==null?"":_e(t)||gt(t)&&(t.toString===tA||!ke(t.toString))?JSON.stringify(t,XC,2):String(t),XC=(t,e)=>e&&e.__v_isRef?XC(t,e.value):nc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:ZC(e)?{[`Set(${e.size})`]:[...e.values()]}:gt(e)&&!_e(e)&&!nA(e)?String(e):e,ut={},tc=[],Ni=()=>{},tM=()=>!1,nM=/^on[^a-z]/,Rp=t=>nM.test(t),Tw=t=>t.startsWith("onUpdate:"),Cn=Object.assign,Cw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},iM=Object.prototype.hasOwnProperty,He=(t,e)=>iM.call(t,e),_e=Array.isArray,nc=t=>xp(t)==="[object Map]",ZC=t=>xp(t)==="[object Set]",ke=t=>typeof t=="function",Wt=t=>typeof t=="string",Aw=t=>typeof t=="symbol",gt=t=>t!==null&&typeof t=="object",eA=t=>gt(t)&&ke(t.then)&&ke(t.catch),tA=Object.prototype.toString,xp=t=>tA.call(t),rM=t=>xp(t).slice(8,-1),nA=t=>xp(t)==="[object Object]",kw=t=>Wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,kf=Ew(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},sM=/-(\w)/g,er=Dp(t=>t.replace(sM,(e,n)=>n?n.toUpperCase():"")),oM=/\B([A-Z])/g,Mc=Dp(t=>t.replace(oM,"-$1").toLowerCase()),Np=Dp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Iv=Dp(t=>t?`on${Np(t)}`:""),$l=(t,e)=>!Object.is(t,e),Rf=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Kf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},sy=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let eS;const aM=()=>eS||(eS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ri;class iA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ri,!e&&ri&&(this.index=(ri.scopes||(ri.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ri;try{return ri=this,e()}finally{ri=n}}}on(){ri=this}off(){ri=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function rA(t){return new iA(t)}function cM(t,e=ri){e&&e.active&&e.effects.push(t)}function sA(){return ri}function uM(t){ri&&ri.cleanups.push(t)}const Rw=t=>{const e=new Set(t);return e.w=0,e.n=0,e},oA=t=>(t.w&ms)>0,aA=t=>(t.n&ms)>0,lM=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ms},hM=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];oA(s)&&!aA(s)?s.delete(t):e[n++]=s,s.w&=~ms,s.n&=~ms}e.length=n}},zf=new WeakMap;let gl=0,ms=1;const oy=30;let Ci;const Eo=Symbol(""),ay=Symbol("");class xw{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,cM(this,i)}run(){if(!this.active)return this.fn();let e=Ci,n=ls;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ci,Ci=this,ls=!0,ms=1<<++gl,gl<=oy?lM(this):tS(this),this.fn()}finally{gl<=oy&&hM(this),ms=1<<--gl,Ci=this.parent,ls=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ci===this?this.deferStop=!0:this.active&&(tS(this),this.onStop&&this.onStop(),this.active=!1)}}function tS(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ls=!0;const cA=[];function Lc(){cA.push(ls),ls=!1}function Fc(){const t=cA.pop();ls=t===void 0?!0:t}function Yn(t,e,n){if(ls&&Ci){let i=zf.get(t);i||zf.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=Rw()),uA(s)}}function uA(t,e){let n=!1;gl<=oy?aA(t)||(t.n|=ms,n=!oA(t)):n=!t.has(Ci),n&&(t.add(Ci),Ci.deps.push(t))}function br(t,e,n,i,s,o){const c=zf.get(t);if(!c)return;let l=[];if(e==="clear")l=[...c.values()];else if(n==="length"&&_e(t)){const d=Number(i);c.forEach((f,g)=>{(g==="length"||g>=d)&&l.push(f)})}else switch(n!==void 0&&l.push(c.get(n)),e){case"add":_e(t)?kw(n)&&l.push(c.get("length")):(l.push(c.get(Eo)),nc(t)&&l.push(c.get(ay)));break;case"delete":_e(t)||(l.push(c.get(Eo)),nc(t)&&l.push(c.get(ay)));break;case"set":nc(t)&&l.push(c.get(Eo));break}if(l.length===1)l[0]&&cy(l[0]);else{const d=[];for(const f of l)f&&d.push(...f);cy(Rw(d))}}function cy(t,e){const n=_e(t)?t:[...t];for(const i of n)i.computed&&nS(i);for(const i of n)i.computed||nS(i)}function nS(t,e){(t!==Ci||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function dM(t,e){var n;return(n=zf.get(t))===null||n===void 0?void 0:n.get(e)}const fM=Ew("__proto__,__v_isRef,__isVue"),lA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Aw)),pM=Dw(),mM=Dw(!1,!0),gM=Dw(!0),iS=vM();function vM(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=qe(this);for(let o=0,c=this.length;o<c;o++)Yn(i,"get",o+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(qe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Lc();const i=qe(this)[e].apply(this,n);return Fc(),i}}),t}function yM(t){const e=qe(this);return Yn(e,"has",t),e.hasOwnProperty(t)}function Dw(t=!1,e=!1){return function(i,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?OM:mA:e?pA:fA).get(i))return i;const c=_e(i);if(!t){if(c&&He(iS,s))return Reflect.get(iS,s,o);if(s==="hasOwnProperty")return yM}const l=Reflect.get(i,s,o);return(Aw(s)?lA.has(s):fM(s))||(t||Yn(i,"get",s),e)?l:Lt(l)?c&&kw(s)?l:l.value:gt(l)?t?gA(l):Uc(l):l}}const wM=hA(),bM=hA(!0);function hA(t=!1){return function(n,i,s,o){let c=n[i];if(hc(c)&&Lt(c)&&!Lt(s))return!1;if(!t&&(!Gf(s)&&!hc(s)&&(c=qe(c),s=qe(s)),!_e(n)&&Lt(c)&&!Lt(s)))return c.value=s,!0;const l=_e(n)&&kw(i)?Number(i)<n.length:He(n,i),d=Reflect.set(n,i,s,o);return n===qe(o)&&(l?$l(s,c)&&br(n,"set",i,s):br(n,"add",i,s)),d}}function IM(t,e){const n=He(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&br(t,"delete",e,void 0),i}function _M(t,e){const n=Reflect.has(t,e);return(!Aw(e)||!lA.has(e))&&Yn(t,"has",e),n}function EM(t){return Yn(t,"iterate",_e(t)?"length":Eo),Reflect.ownKeys(t)}const dA={get:pM,set:wM,deleteProperty:IM,has:_M,ownKeys:EM},SM={get:gM,set(t,e){return!0},deleteProperty(t,e){return!0}},TM=Cn({},dA,{get:mM,set:bM}),Nw=t=>t,Pp=t=>Reflect.getPrototypeOf(t);function uf(t,e,n=!1,i=!1){t=t.__v_raw;const s=qe(t),o=qe(e);n||(e!==o&&Yn(s,"get",e),Yn(s,"get",o));const{has:c}=Pp(s),l=i?Nw:n?Mw:ql;if(c.call(s,e))return l(t.get(e));if(c.call(s,o))return l(t.get(o));t!==s&&t.get(e)}function lf(t,e=!1){const n=this.__v_raw,i=qe(n),s=qe(t);return e||(t!==s&&Yn(i,"has",t),Yn(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function hf(t,e=!1){return t=t.__v_raw,!e&&Yn(qe(t),"iterate",Eo),Reflect.get(t,"size",t)}function rS(t){t=qe(t);const e=qe(this);return Pp(e).has.call(e,t)||(e.add(t),br(e,"add",t,t)),this}function sS(t,e){e=qe(e);const n=qe(this),{has:i,get:s}=Pp(n);let o=i.call(n,t);o||(t=qe(t),o=i.call(n,t));const c=s.call(n,t);return n.set(t,e),o?$l(e,c)&&br(n,"set",t,e):br(n,"add",t,e),this}function oS(t){const e=qe(this),{has:n,get:i}=Pp(e);let s=n.call(e,t);s||(t=qe(t),s=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return s&&br(e,"delete",t,void 0),o}function aS(){const t=qe(this),e=t.size!==0,n=t.clear();return e&&br(t,"clear",void 0,void 0),n}function df(t,e){return function(i,s){const o=this,c=o.__v_raw,l=qe(c),d=e?Nw:t?Mw:ql;return!t&&Yn(l,"iterate",Eo),c.forEach((f,g)=>i.call(s,d(f),d(g),o))}}function ff(t,e,n){return function(...i){const s=this.__v_raw,o=qe(s),c=nc(o),l=t==="entries"||t===Symbol.iterator&&c,d=t==="keys"&&c,f=s[t](...i),g=n?Nw:e?Mw:ql;return!e&&Yn(o,"iterate",d?ay:Eo),{next(){const{value:v,done:y}=f.next();return y?{value:v,done:y}:{value:l?[g(v[0]),g(v[1])]:g(v),done:y}},[Symbol.iterator](){return this}}}}function Jr(t){return function(...e){return t==="delete"?!1:this}}function CM(){const t={get(o){return uf(this,o)},get size(){return hf(this)},has:lf,add:rS,set:sS,delete:oS,clear:aS,forEach:df(!1,!1)},e={get(o){return uf(this,o,!1,!0)},get size(){return hf(this)},has:lf,add:rS,set:sS,delete:oS,clear:aS,forEach:df(!1,!0)},n={get(o){return uf(this,o,!0)},get size(){return hf(this,!0)},has(o){return lf.call(this,o,!0)},add:Jr("add"),set:Jr("set"),delete:Jr("delete"),clear:Jr("clear"),forEach:df(!0,!1)},i={get(o){return uf(this,o,!0,!0)},get size(){return hf(this,!0)},has(o){return lf.call(this,o,!0)},add:Jr("add"),set:Jr("set"),delete:Jr("delete"),clear:Jr("clear"),forEach:df(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=ff(o,!1,!1),n[o]=ff(o,!0,!1),e[o]=ff(o,!1,!0),i[o]=ff(o,!0,!0)}),[t,n,e,i]}const[AM,kM,RM,xM]=CM();function Pw(t,e){const n=e?t?xM:RM:t?kM:AM;return(i,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(He(n,s)&&s in i?n:i,s,o)}const DM={get:Pw(!1,!1)},NM={get:Pw(!1,!0)},PM={get:Pw(!0,!1)},fA=new WeakMap,pA=new WeakMap,mA=new WeakMap,OM=new WeakMap;function MM(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LM(t){return t.__v_skip||!Object.isExtensible(t)?0:MM(rM(t))}function Uc(t){return hc(t)?t:Ow(t,!1,dA,DM,fA)}function FM(t){return Ow(t,!1,TM,NM,pA)}function gA(t){return Ow(t,!0,SM,PM,mA)}function Ow(t,e,n,i,s){if(!gt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const c=LM(t);if(c===0)return t;const l=new Proxy(t,c===2?i:n);return s.set(t,l),l}function hs(t){return hc(t)?hs(t.__v_raw):!!(t&&t.__v_isReactive)}function hc(t){return!!(t&&t.__v_isReadonly)}function Gf(t){return!!(t&&t.__v_isShallow)}function vA(t){return hs(t)||hc(t)}function qe(t){const e=t&&t.__v_raw;return e?qe(e):t}function dc(t){return Kf(t,"__v_skip",!0),t}const ql=t=>gt(t)?Uc(t):t,Mw=t=>gt(t)?gA(t):t;function yA(t){ls&&Ci&&(t=qe(t),uA(t.dep||(t.dep=Rw())))}function wA(t,e){t=qe(t);const n=t.dep;n&&cy(n)}function Lt(t){return!!(t&&t.__v_isRef===!0)}function Lw(t){return bA(t,!1)}function UM(t){return bA(t,!0)}function bA(t,e){return Lt(t)?t:new VM(t,e)}class VM{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:qe(e),this._value=n?e:ql(e)}get value(){return yA(this),this._value}set value(e){const n=this.__v_isShallow||Gf(e)||hc(e);e=n?e:qe(e),$l(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ql(e),wA(this))}}function ic(t){return Lt(t)?t.value:t}const BM={get:(t,e,n)=>ic(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Lt(s)&&!Lt(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function IA(t){return hs(t)?t:new Proxy(t,BM)}function jM(t){const e=_e(t)?new Array(t.length):{};for(const n in t)e[n]=qM(t,n);return e}class $M{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return dM(qe(this._object),this._key)}}function qM(t,e,n){const i=t[e];return Lt(i)?i:new $M(t,e,n)}var _A;class KM{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_A]=!1,this._dirty=!0,this.effect=new xw(e,()=>{this._dirty||(this._dirty=!0,wA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=qe(this);return yA(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_A="__v_isReadonly";function zM(t,e,n=!1){let i,s;const o=ke(t);return o?(i=t,s=Ni):(i=t.get,s=t.set),new KM(i,s,o||!s,n)}function ds(t,e,n,i){let s;try{s=i?t(...i):t()}catch(o){Op(o,e,n)}return s}function vi(t,e,n,i){if(ke(t)){const o=ds(t,e,n,i);return o&&eA(o)&&o.catch(c=>{Op(c,e,n)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(vi(t[o],e,n,i));return s}function Op(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const c=e.proxy,l=n;for(;o;){const f=o.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](t,c,l)===!1)return}o=o.parent}const d=e.appContext.config.errorHandler;if(d){ds(d,null,10,[t,c,l]);return}}GM(t,n,s,i)}function GM(t,e,n,i=!0){console.error(t)}let Kl=!1,uy=!1;const En=[];let qi=0;const rc=[];let dr=null,oo=0;const EA=Promise.resolve();let Fw=null;function Uw(t){const e=Fw||EA;return t?e.then(this?t.bind(this):t):e}function HM(t){let e=qi+1,n=En.length;for(;e<n;){const i=e+n>>>1;zl(En[i])<t?e=i+1:n=i}return e}function Vw(t){(!En.length||!En.includes(t,Kl&&t.allowRecurse?qi+1:qi))&&(t.id==null?En.push(t):En.splice(HM(t.id),0,t),SA())}function SA(){!Kl&&!uy&&(uy=!0,Fw=EA.then(CA))}function WM(t){const e=En.indexOf(t);e>qi&&En.splice(e,1)}function YM(t){_e(t)?rc.push(...t):(!dr||!dr.includes(t,t.allowRecurse?oo+1:oo))&&rc.push(t),SA()}function cS(t,e=Kl?qi+1:0){for(;e<En.length;e++){const n=En[e];n&&n.pre&&(En.splice(e,1),e--,n())}}function TA(t){if(rc.length){const e=[...new Set(rc)];if(rc.length=0,dr){dr.push(...e);return}for(dr=e,dr.sort((n,i)=>zl(n)-zl(i)),oo=0;oo<dr.length;oo++)dr[oo]();dr=null,oo=0}}const zl=t=>t.id==null?1/0:t.id,QM=(t,e)=>{const n=zl(t)-zl(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function CA(t){uy=!1,Kl=!0,En.sort(QM);const e=Ni;try{for(qi=0;qi<En.length;qi++){const n=En[qi];n&&n.active!==!1&&ds(n,null,14)}}finally{qi=0,En.length=0,TA(),Kl=!1,Fw=null,(En.length||rc.length)&&CA()}}function JM(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||ut;let s=n;const o=e.startsWith("update:"),c=o&&e.slice(7);if(c&&c in i){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:v,trim:y}=i[g]||ut;y&&(s=n.map(I=>Wt(I)?I.trim():I)),v&&(s=n.map(sy))}let l,d=i[l=Iv(e)]||i[l=Iv(er(e))];!d&&o&&(d=i[l=Iv(Mc(e))]),d&&vi(d,t,6,s);const f=i[l+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,vi(f,t,6,s)}}function AA(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const o=t.emits;let c={},l=!1;if(!ke(t)){const d=f=>{const g=AA(f,e,!0);g&&(l=!0,Cn(c,g))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!o&&!l?(gt(t)&&i.set(t,null),null):(_e(o)?o.forEach(d=>c[d]=null):Cn(c,o),gt(t)&&i.set(t,c),c)}function Mp(t,e){return!t||!Rp(e)?!1:(e=e.slice(2).replace(/Once$/,""),He(t,e[0].toLowerCase()+e.slice(1))||He(t,Mc(e))||He(t,e))}let ci=null,kA=null;function Hf(t){const e=ci;return ci=t,kA=t&&t.type.__scopeId||null,e}function vl(t,e=ci,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&yS(-1);const o=Hf(e);let c;try{c=t(...s)}finally{Hf(o),i._d&&yS(1)}return c};return i._n=!0,i._c=!0,i._d=!0,i}function _v(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[c],slots:l,attrs:d,emit:f,render:g,renderCache:v,data:y,setupState:I,ctx:A,inheritAttrs:b}=t;let S,C;const N=Hf(t);try{if(n.shapeFlag&4){const Y=s||i;S=$i(g.call(Y,Y,v,o,I,y,A)),C=d}else{const Y=e;S=$i(Y.length>1?Y(o,{attrs:d,slots:l,emit:f}):Y(o,null)),C=e.props?d:XM(d)}}catch(Y){Al.length=0,Op(Y,t,1),S=Ct(vr)}let O=S;if(C&&b!==!1){const Y=Object.keys(C),{shapeFlag:z}=O;Y.length&&z&7&&(c&&Y.some(Tw)&&(C=ZM(C,c)),O=gs(O,C))}return n.dirs&&(O=gs(O),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),S=O,Hf(N),S}const XM=t=>{let e;for(const n in t)(n==="class"||n==="style"||Rp(n))&&((e||(e={}))[n]=t[n]);return e},ZM=(t,e)=>{const n={};for(const i in t)(!Tw(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function eL(t,e,n){const{props:i,children:s,component:o}=t,{props:c,children:l,patchFlag:d}=e,f=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return i?uS(i,c,f):!!c;if(d&8){const g=e.dynamicProps;for(let v=0;v<g.length;v++){const y=g[v];if(c[y]!==i[y]&&!Mp(f,y))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===c?!1:i?c?uS(i,c,f):!0:!!c;return!1}function uS(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==t[o]&&!Mp(n,o))return!0}return!1}function tL({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const nL=t=>t.__isSuspense;function iL(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):YM(t)}function xf(t,e){if(Pt){let n=Pt.provides;const i=Pt.parent&&Pt.parent.provides;i===n&&(n=Pt.provides=Object.create(i)),n[t]=e}}function Ji(t,e,n=!1){const i=Pt||ci;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ke(e)?e.call(i.proxy):e}}const pf={};function Tl(t,e,n){return RA(t,e,n)}function RA(t,e,{immediate:n,deep:i,flush:s,onTrack:o,onTrigger:c}=ut){const l=sA()===(Pt==null?void 0:Pt.scope)?Pt:null;let d,f=!1,g=!1;if(Lt(t)?(d=()=>t.value,f=Gf(t)):hs(t)?(d=()=>t,i=!0):_e(t)?(g=!0,f=t.some(O=>hs(O)||Gf(O)),d=()=>t.map(O=>{if(Lt(O))return O.value;if(hs(O))return mo(O);if(ke(O))return ds(O,l,2)})):ke(t)?e?d=()=>ds(t,l,2):d=()=>{if(!(l&&l.isUnmounted))return v&&v(),vi(t,l,3,[y])}:d=Ni,e&&i){const O=d;d=()=>mo(O())}let v,y=O=>{v=C.onStop=()=>{ds(O,l,4)}},I;if(Hl)if(y=Ni,e?n&&vi(e,l,3,[d(),g?[]:void 0,y]):d(),s==="sync"){const O=eF();I=O.__watcherHandles||(O.__watcherHandles=[])}else return Ni;let A=g?new Array(t.length).fill(pf):pf;const b=()=>{if(C.active)if(e){const O=C.run();(i||f||(g?O.some((Y,z)=>$l(Y,A[z])):$l(O,A)))&&(v&&v(),vi(e,l,3,[O,A===pf?void 0:g&&A[0]===pf?[]:A,y]),A=O)}else C.run()};b.allowRecurse=!!e;let S;s==="sync"?S=b:s==="post"?S=()=>jn(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),S=()=>Vw(b));const C=new xw(d,S);e?n?b():A=C.run():s==="post"?jn(C.run.bind(C),l&&l.suspense):C.run();const N=()=>{C.stop(),l&&l.scope&&Cw(l.scope.effects,C)};return I&&I.push(N),N}function rL(t,e,n){const i=this.proxy,s=Wt(t)?t.includes(".")?xA(i,t):()=>i[t]:t.bind(i,i);let o;ke(e)?o=e:(o=e.handler,n=e);const c=Pt;fc(this);const l=RA(s,o.bind(i),n);return c?fc(c):So(),l}function xA(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function mo(t,e){if(!gt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Lt(t))mo(t.value,e);else if(_e(t))for(let n=0;n<t.length;n++)mo(t[n],e);else if(ZC(t)||nc(t))t.forEach(n=>{mo(n,e)});else if(nA(t))for(const n in t)mo(t[n],e);return t}function sL(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return MA(()=>{t.isMounted=!0}),LA(()=>{t.isUnmounting=!0}),t}const pi=[Function,Array],oL={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pi,onEnter:pi,onAfterEnter:pi,onEnterCancelled:pi,onBeforeLeave:pi,onLeave:pi,onAfterLeave:pi,onLeaveCancelled:pi,onBeforeAppear:pi,onAppear:pi,onAfterAppear:pi,onAppearCancelled:pi},setup(t,{slots:e}){const n=YA(),i=sL();let s;return()=>{const o=e.default&&NA(e.default(),!0);if(!o||!o.length)return;let c=o[0];if(o.length>1){for(const b of o)if(b.type!==vr){c=b;break}}const l=qe(t),{mode:d}=l;if(i.isLeaving)return Ev(c);const f=lS(c);if(!f)return Ev(c);const g=ly(f,l,i,n);hy(f,g);const v=n.subTree,y=v&&lS(v);let I=!1;const{getTransitionKey:A}=f.type;if(A){const b=A();s===void 0?s=b:b!==s&&(s=b,I=!0)}if(y&&y.type!==vr&&(!ao(f,y)||I)){const b=ly(y,l,i,n);if(hy(y,b),d==="out-in")return i.isLeaving=!0,b.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Ev(c);d==="in-out"&&f.type!==vr&&(b.delayLeave=(S,C,N)=>{const O=DA(i,y);O[String(y.key)]=y,S._leaveCb=()=>{C(),S._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=N})}return c}}},aL=oL;function DA(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function ly(t,e,n,i){const{appear:s,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:f,onEnterCancelled:g,onBeforeLeave:v,onLeave:y,onAfterLeave:I,onLeaveCancelled:A,onBeforeAppear:b,onAppear:S,onAfterAppear:C,onAppearCancelled:N}=e,O=String(t.key),Y=DA(n,t),z=(H,Se)=>{H&&vi(H,i,9,Se)},ne=(H,Se)=>{const Pe=Se[1];z(H,Se),_e(H)?H.every(ve=>ve.length<=1)&&Pe():H.length<=1&&Pe()},ee={mode:o,persisted:c,beforeEnter(H){let Se=l;if(!n.isMounted)if(s)Se=b||l;else return;H._leaveCb&&H._leaveCb(!0);const Pe=Y[O];Pe&&ao(t,Pe)&&Pe.el._leaveCb&&Pe.el._leaveCb(),z(Se,[H])},enter(H){let Se=d,Pe=f,ve=g;if(!n.isMounted)if(s)Se=S||d,Pe=C||f,ve=N||g;else return;let Qe=!1;const Oe=H._enterCb=vt=>{Qe||(Qe=!0,vt?z(ve,[H]):z(Pe,[H]),ee.delayedLeave&&ee.delayedLeave(),H._enterCb=void 0)};Se?ne(Se,[H,Oe]):Oe()},leave(H,Se){const Pe=String(t.key);if(H._enterCb&&H._enterCb(!0),n.isUnmounting)return Se();z(v,[H]);let ve=!1;const Qe=H._leaveCb=Oe=>{ve||(ve=!0,Se(),Oe?z(A,[H]):z(I,[H]),H._leaveCb=void 0,Y[Pe]===t&&delete Y[Pe])};Y[Pe]=t,y?ne(y,[H,Qe]):Qe()},clone(H){return ly(H,e,n,i)}};return ee}function Ev(t){if(Lp(t))return t=gs(t),t.children=null,t}function lS(t){return Lp(t)?t.children?t.children[0]:void 0:t}function hy(t,e){t.shapeFlag&6&&t.component?hy(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function NA(t,e=!1,n){let i=[],s=0;for(let o=0;o<t.length;o++){let c=t[o];const l=n==null?c.key:String(n)+String(c.key!=null?c.key:o);c.type===si?(c.patchFlag&128&&s++,i=i.concat(NA(c.children,e,l))):(e||c.type!==vr)&&i.push(l!=null?gs(c,{key:l}):c)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function PA(t){return ke(t)?{setup:t,name:t.name}:t}const Df=t=>!!t.type.__asyncLoader,Lp=t=>t.type.__isKeepAlive;function cL(t,e){OA(t,"a",e)}function uL(t,e){OA(t,"da",e)}function OA(t,e,n=Pt){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Fp(e,i,n),n){let s=n.parent;for(;s&&s.parent;)Lp(s.parent.vnode)&&lL(i,e,n,s),s=s.parent}}function lL(t,e,n,i){const s=Fp(e,t,i,!0);FA(()=>{Cw(i[e],s)},n)}function Fp(t,e,n=Pt,i=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...c)=>{if(n.isUnmounted)return;Lc(),fc(n);const l=vi(e,n,t,c);return So(),Fc(),l});return i?s.unshift(o):s.push(o),o}}const Tr=t=>(e,n=Pt)=>(!Hl||t==="sp")&&Fp(t,(...i)=>e(...i),n),hL=Tr("bm"),MA=Tr("m"),dL=Tr("bu"),fL=Tr("u"),LA=Tr("bum"),FA=Tr("um"),pL=Tr("sp"),mL=Tr("rtg"),gL=Tr("rtc");function vL(t,e=Pt){Fp("ec",t,e)}function dy(t,e){const n=ci;if(n===null)return t;const i=Bp(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[c,l,d,f=ut]=e[o];c&&(ke(c)&&(c={mounted:c,updated:c}),c.deep&&mo(l),s.push({dir:c,instance:i,value:l,oldValue:void 0,arg:d,modifiers:f}))}return t}function eo(t,e,n,i){const s=t.dirs,o=e&&e.dirs;for(let c=0;c<s.length;c++){const l=s[c];o&&(l.oldValue=o[c].value);let d=l.dir[i];d&&(Lc(),vi(d,n,8,[t.el,l,t,e]),Fc())}}const UA="components",yL="directives";function go(t,e){return VA(UA,t,!0,e)||t}const wL=Symbol();function bL(t){return VA(yL,t)}function VA(t,e,n=!0,i=!1){const s=ci||Pt;if(s){const o=s.type;if(t===UA){const l=JL(o,!1);if(l&&(l===e||l===er(e)||l===Np(er(e))))return o}const c=hS(s[t]||o[t],e)||hS(s.appContext[t],e);return!c&&i?o:c}}function hS(t,e){return t&&(t[e]||t[er(e)]||t[Np(er(e))])}function IL(t,e,n,i){let s;const o=n&&n[i];if(_e(t)||Wt(t)){s=new Array(t.length);for(let c=0,l=t.length;c<l;c++)s[c]=e(t[c],c,void 0,o&&o[c])}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,o&&o[c])}else if(gt(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,o&&o[l]));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,d=c.length;l<d;l++){const f=c[l];s[l]=e(t[f],f,l,o&&o[l])}}else s=[];return n&&(n[i]=s),s}const fy=t=>t?QA(t)?Bp(t)||t.proxy:fy(t.parent):null,Cl=Cn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fy(t.parent),$root:t=>fy(t.root),$emit:t=>t.emit,$options:t=>Bw(t),$forceUpdate:t=>t.f||(t.f=()=>Vw(t.update)),$nextTick:t=>t.n||(t.n=Uw.bind(t.proxy)),$watch:t=>rL.bind(t)}),Sv=(t,e)=>t!==ut&&!t.__isScriptSetup&&He(t,e),_L={get({_:t},e){const{ctx:n,setupState:i,data:s,props:o,accessCache:c,type:l,appContext:d}=t;let f;if(e[0]!=="$"){const I=c[e];if(I!==void 0)switch(I){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(Sv(i,e))return c[e]=1,i[e];if(s!==ut&&He(s,e))return c[e]=2,s[e];if((f=t.propsOptions[0])&&He(f,e))return c[e]=3,o[e];if(n!==ut&&He(n,e))return c[e]=4,n[e];py&&(c[e]=0)}}const g=Cl[e];let v,y;if(g)return e==="$attrs"&&Yn(t,"get",e),g(t);if((v=l.__cssModules)&&(v=v[e]))return v;if(n!==ut&&He(n,e))return c[e]=4,n[e];if(y=d.config.globalProperties,He(y,e))return y[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:o}=t;return Sv(s,e)?(s[e]=n,!0):i!==ut&&He(i,e)?(i[e]=n,!0):He(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},c){let l;return!!n[c]||t!==ut&&He(t,c)||Sv(e,c)||(l=o[0])&&He(l,c)||He(i,c)||He(Cl,c)||He(s.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:He(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let py=!0;function EL(t){const e=Bw(t),n=t.proxy,i=t.ctx;py=!1,e.beforeCreate&&dS(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:c,watch:l,provide:d,inject:f,created:g,beforeMount:v,mounted:y,beforeUpdate:I,updated:A,activated:b,deactivated:S,beforeDestroy:C,beforeUnmount:N,destroyed:O,unmounted:Y,render:z,renderTracked:ne,renderTriggered:ee,errorCaptured:H,serverPrefetch:Se,expose:Pe,inheritAttrs:ve,components:Qe,directives:Oe,filters:vt}=e;if(f&&SL(f,i,null,t.appContext.config.unwrapInjectedRef),c)for(const Re in c){const Je=c[Re];ke(Je)&&(i[Re]=Je.bind(n))}if(s){const Re=s.call(n,n);gt(Re)&&(t.data=Uc(Re))}if(py=!0,o)for(const Re in o){const Je=o[Re],An=ke(Je)?Je.bind(n,n):ke(Je.get)?Je.get.bind(n,n):Ni,dn=!ke(Je)&&ke(Je.set)?Je.set.bind(n):Ni,Un=ai({get:An,set:dn});Object.defineProperty(i,Re,{enumerable:!0,configurable:!0,get:()=>Un.value,set:Ut=>Un.value=Ut})}if(l)for(const Re in l)BA(l[Re],i,n,Re);if(d){const Re=ke(d)?d.call(n):d;Reflect.ownKeys(Re).forEach(Je=>{xf(Je,Re[Je])})}g&&dS(g,t,"c");function ae(Re,Je){_e(Je)?Je.forEach(An=>Re(An.bind(n))):Je&&Re(Je.bind(n))}if(ae(hL,v),ae(MA,y),ae(dL,I),ae(fL,A),ae(cL,b),ae(uL,S),ae(vL,H),ae(gL,ne),ae(mL,ee),ae(LA,N),ae(FA,Y),ae(pL,Se),_e(Pe))if(Pe.length){const Re=t.exposed||(t.exposed={});Pe.forEach(Je=>{Object.defineProperty(Re,Je,{get:()=>n[Je],set:An=>n[Je]=An})})}else t.exposed||(t.exposed={});z&&t.render===Ni&&(t.render=z),ve!=null&&(t.inheritAttrs=ve),Qe&&(t.components=Qe),Oe&&(t.directives=Oe)}function SL(t,e,n=Ni,i=!1){_e(t)&&(t=my(t));for(const s in t){const o=t[s];let c;gt(o)?"default"in o?c=Ji(o.from||s,o.default,!0):c=Ji(o.from||s):c=Ji(o),Lt(c)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>c.value,set:l=>c.value=l}):e[s]=c}}function dS(t,e,n){vi(_e(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function BA(t,e,n,i){const s=i.includes(".")?xA(n,i):()=>n[i];if(Wt(t)){const o=e[t];ke(o)&&Tl(s,o)}else if(ke(t))Tl(s,t.bind(n));else if(gt(t))if(_e(t))t.forEach(o=>BA(o,e,n,i));else{const o=ke(t.handler)?t.handler.bind(n):e[t.handler];ke(o)&&Tl(s,o,t)}}function Bw(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:c}}=t.appContext,l=o.get(e);let d;return l?d=l:!s.length&&!n&&!i?d=e:(d={},s.length&&s.forEach(f=>Wf(d,f,c,!0)),Wf(d,e,c)),gt(e)&&o.set(e,d),d}function Wf(t,e,n,i=!1){const{mixins:s,extends:o}=e;o&&Wf(t,o,n,!0),s&&s.forEach(c=>Wf(t,c,n,!0));for(const c in e)if(!(i&&c==="expose")){const l=TL[c]||n&&n[c];t[c]=l?l(t[c],e[c]):e[c]}return t}const TL={data:fS,props:io,emits:io,methods:io,computed:io,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,beforeUnmount:Nn,destroyed:Nn,unmounted:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:io,directives:io,watch:AL,provide:fS,inject:CL};function fS(t,e){return e?t?function(){return Cn(ke(t)?t.call(this,this):t,ke(e)?e.call(this,this):e)}:e:t}function CL(t,e){return io(my(t),my(e))}function my(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nn(t,e){return t?[...new Set([].concat(t,e))]:e}function io(t,e){return t?Cn(Cn(Object.create(null),t),e):e}function AL(t,e){if(!t)return e;if(!e)return t;const n=Cn(Object.create(null),t);for(const i in e)n[i]=Nn(t[i],e[i]);return n}function kL(t,e,n,i=!1){const s={},o={};Kf(o,Vp,1),t.propsDefaults=Object.create(null),jA(t,e,s,o);for(const c in t.propsOptions[0])c in s||(s[c]=void 0);n?t.props=i?s:FM(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function RL(t,e,n,i){const{props:s,attrs:o,vnode:{patchFlag:c}}=t,l=qe(s),[d]=t.propsOptions;let f=!1;if((i||c>0)&&!(c&16)){if(c&8){const g=t.vnode.dynamicProps;for(let v=0;v<g.length;v++){let y=g[v];if(Mp(t.emitsOptions,y))continue;const I=e[y];if(d)if(He(o,y))I!==o[y]&&(o[y]=I,f=!0);else{const A=er(y);s[A]=gy(d,l,A,I,t,!1)}else I!==o[y]&&(o[y]=I,f=!0)}}}else{jA(t,e,s,o)&&(f=!0);let g;for(const v in l)(!e||!He(e,v)&&((g=Mc(v))===v||!He(e,g)))&&(d?n&&(n[v]!==void 0||n[g]!==void 0)&&(s[v]=gy(d,l,v,void 0,t,!0)):delete s[v]);if(o!==l)for(const v in o)(!e||!He(e,v))&&(delete o[v],f=!0)}f&&br(t,"set","$attrs")}function jA(t,e,n,i){const[s,o]=t.propsOptions;let c=!1,l;if(e)for(let d in e){if(kf(d))continue;const f=e[d];let g;s&&He(s,g=er(d))?!o||!o.includes(g)?n[g]=f:(l||(l={}))[g]=f:Mp(t.emitsOptions,d)||(!(d in i)||f!==i[d])&&(i[d]=f,c=!0)}if(o){const d=qe(n),f=l||ut;for(let g=0;g<o.length;g++){const v=o[g];n[v]=gy(s,d,v,f[v],t,!He(f,v))}}return c}function gy(t,e,n,i,s,o){const c=t[n];if(c!=null){const l=He(c,"default");if(l&&i===void 0){const d=c.default;if(c.type!==Function&&ke(d)){const{propsDefaults:f}=s;n in f?i=f[n]:(fc(s),i=f[n]=d.call(null,e),So())}else i=d}c[0]&&(o&&!l?i=!1:c[1]&&(i===""||i===Mc(n))&&(i=!0))}return i}function $A(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const o=t.props,c={},l=[];let d=!1;if(!ke(t)){const g=v=>{d=!0;const[y,I]=$A(v,e,!0);Cn(c,y),I&&l.push(...I)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!o&&!d)return gt(t)&&i.set(t,tc),tc;if(_e(o))for(let g=0;g<o.length;g++){const v=er(o[g]);pS(v)&&(c[v]=ut)}else if(o)for(const g in o){const v=er(g);if(pS(v)){const y=o[g],I=c[v]=_e(y)||ke(y)?{type:y}:Object.assign({},y);if(I){const A=vS(Boolean,I.type),b=vS(String,I.type);I[0]=A>-1,I[1]=b<0||A<b,(A>-1||He(I,"default"))&&l.push(v)}}}const f=[c,l];return gt(t)&&i.set(t,f),f}function pS(t){return t[0]!=="$"}function mS(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function gS(t,e){return mS(t)===mS(e)}function vS(t,e){return _e(e)?e.findIndex(n=>gS(n,t)):ke(e)&&gS(e,t)?0:-1}const qA=t=>t[0]==="_"||t==="$stable",jw=t=>_e(t)?t.map($i):[$i(t)],xL=(t,e,n)=>{if(e._n)return e;const i=vl((...s)=>jw(e(...s)),n);return i._c=!1,i},KA=(t,e,n)=>{const i=t._ctx;for(const s in t){if(qA(s))continue;const o=t[s];if(ke(o))e[s]=xL(s,o,i);else if(o!=null){const c=jw(o);e[s]=()=>c}}},zA=(t,e)=>{const n=jw(e);t.slots.default=()=>n},DL=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=qe(e),Kf(e,"_",n)):KA(e,t.slots={})}else t.slots={},e&&zA(t,e);Kf(t.slots,Vp,1)},NL=(t,e,n)=>{const{vnode:i,slots:s}=t;let o=!0,c=ut;if(i.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:(Cn(s,e),!n&&l===1&&delete s._):(o=!e.$stable,KA(e,s)),c=e}else e&&(zA(t,e),c={default:1});if(o)for(const l in s)!qA(l)&&!(l in c)&&delete s[l]};function GA(){return{app:null,config:{isNativeTag:tM,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PL=0;function OL(t,e){return function(i,s=null){ke(i)||(i=Object.assign({},i)),s!=null&&!gt(s)&&(s=null);const o=GA(),c=new Set;let l=!1;const d=o.app={_uid:PL++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:tF,get config(){return o.config},set config(f){},use(f,...g){return c.has(f)||(f&&ke(f.install)?(c.add(f),f.install(d,...g)):ke(f)&&(c.add(f),f(d,...g))),d},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),d},component(f,g){return g?(o.components[f]=g,d):o.components[f]},directive(f,g){return g?(o.directives[f]=g,d):o.directives[f]},mount(f,g,v){if(!l){const y=Ct(i,s);return y.appContext=o,g&&e?e(y,f):t(y,f,v),l=!0,d._container=f,f.__vue_app__=d,Bp(y.component)||y.component.proxy}},unmount(){l&&(t(null,d._container),delete d._container.__vue_app__)},provide(f,g){return o.provides[f]=g,d}};return d}}function vy(t,e,n,i,s=!1){if(_e(t)){t.forEach((y,I)=>vy(y,e&&(_e(e)?e[I]:e),n,i,s));return}if(Df(i)&&!s)return;const o=i.shapeFlag&4?Bp(i.component)||i.component.proxy:i.el,c=s?null:o,{i:l,r:d}=t,f=e&&e.r,g=l.refs===ut?l.refs={}:l.refs,v=l.setupState;if(f!=null&&f!==d&&(Wt(f)?(g[f]=null,He(v,f)&&(v[f]=null)):Lt(f)&&(f.value=null)),ke(d))ds(d,l,12,[c,g]);else{const y=Wt(d),I=Lt(d);if(y||I){const A=()=>{if(t.f){const b=y?He(v,d)?v[d]:g[d]:d.value;s?_e(b)&&Cw(b,o):_e(b)?b.includes(o)||b.push(o):y?(g[d]=[o],He(v,d)&&(v[d]=g[d])):(d.value=[o],t.k&&(g[t.k]=d.value))}else y?(g[d]=c,He(v,d)&&(v[d]=c)):I&&(d.value=c,t.k&&(g[t.k]=c))};c?(A.id=-1,jn(A,n)):A()}}}const jn=iL;function ML(t){return LL(t)}function LL(t,e){const n=aM();n.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:c,createText:l,createComment:d,setText:f,setElementText:g,parentNode:v,nextSibling:y,setScopeId:I=Ni,insertStaticContent:A}=t,b=(_,T,D,P=null,U=null,W=null,Z=!1,K=null,Q=!!T.dynamicChildren)=>{if(_===T)return;_&&!ao(_,T)&&(P=G(_),Ut(_,U,W,!0),_=null),T.patchFlag===-2&&(Q=!1,T.dynamicChildren=null);const{type:j,ref:ge,shapeFlag:se}=T;switch(j){case Up:S(_,T,D,P);break;case vr:C(_,T,D,P);break;case Tv:_==null&&N(T,D,P,Z);break;case si:Qe(_,T,D,P,U,W,Z,K,Q);break;default:se&1?z(_,T,D,P,U,W,Z,K,Q):se&6?Oe(_,T,D,P,U,W,Z,K,Q):(se&64||se&128)&&j.process(_,T,D,P,U,W,Z,K,Q,Me)}ge!=null&&U&&vy(ge,_&&_.ref,W,T||_,!T)},S=(_,T,D,P)=>{if(_==null)i(T.el=l(T.children),D,P);else{const U=T.el=_.el;T.children!==_.children&&f(U,T.children)}},C=(_,T,D,P)=>{_==null?i(T.el=d(T.children||""),D,P):T.el=_.el},N=(_,T,D,P)=>{[_.el,_.anchor]=A(_.children,T,D,P,_.el,_.anchor)},O=({el:_,anchor:T},D,P)=>{let U;for(;_&&_!==T;)U=y(_),i(_,D,P),_=U;i(T,D,P)},Y=({el:_,anchor:T})=>{let D;for(;_&&_!==T;)D=y(_),s(_),_=D;s(T)},z=(_,T,D,P,U,W,Z,K,Q)=>{Z=Z||T.type==="svg",_==null?ne(T,D,P,U,W,Z,K,Q):Se(_,T,U,W,Z,K,Q)},ne=(_,T,D,P,U,W,Z,K)=>{let Q,j;const{type:ge,props:se,shapeFlag:le,transition:be,dirs:De}=_;if(Q=_.el=c(_.type,W,se&&se.is,se),le&8?g(Q,_.children):le&16&&H(_.children,Q,null,P,U,W&&ge!=="foreignObject",Z,K),De&&eo(_,null,P,"created"),ee(Q,_,_.scopeId,Z,P),se){for(const ze in se)ze!=="value"&&!kf(ze)&&o(Q,ze,null,se[ze],W,_.children,P,U,te);"value"in se&&o(Q,"value",null,se.value),(j=se.onVnodeBeforeMount)&&Bi(j,P,_)}De&&eo(_,null,P,"beforeMount");const tt=(!U||U&&!U.pendingBranch)&&be&&!be.persisted;tt&&be.beforeEnter(Q),i(Q,T,D),((j=se&&se.onVnodeMounted)||tt||De)&&jn(()=>{j&&Bi(j,P,_),tt&&be.enter(Q),De&&eo(_,null,P,"mounted")},U)},ee=(_,T,D,P,U)=>{if(D&&I(_,D),P)for(let W=0;W<P.length;W++)I(_,P[W]);if(U){let W=U.subTree;if(T===W){const Z=U.vnode;ee(_,Z,Z.scopeId,Z.slotScopeIds,U.parent)}}},H=(_,T,D,P,U,W,Z,K,Q=0)=>{for(let j=Q;j<_.length;j++){const ge=_[j]=K?rs(_[j]):$i(_[j]);b(null,ge,T,D,P,U,W,Z,K)}},Se=(_,T,D,P,U,W,Z)=>{const K=T.el=_.el;let{patchFlag:Q,dynamicChildren:j,dirs:ge}=T;Q|=_.patchFlag&16;const se=_.props||ut,le=T.props||ut;let be;D&&to(D,!1),(be=le.onVnodeBeforeUpdate)&&Bi(be,D,T,_),ge&&eo(T,_,D,"beforeUpdate"),D&&to(D,!0);const De=U&&T.type!=="foreignObject";if(j?Pe(_.dynamicChildren,j,K,D,P,De,W):Z||Je(_,T,K,null,D,P,De,W,!1),Q>0){if(Q&16)ve(K,T,se,le,D,P,U);else if(Q&2&&se.class!==le.class&&o(K,"class",null,le.class,U),Q&4&&o(K,"style",se.style,le.style,U),Q&8){const tt=T.dynamicProps;for(let ze=0;ze<tt.length;ze++){const ot=tt[ze],Kt=se[ot],rr=le[ot];(rr!==Kt||ot==="value")&&o(K,ot,Kt,rr,U,_.children,D,P,te)}}Q&1&&_.children!==T.children&&g(K,T.children)}else!Z&&j==null&&ve(K,T,se,le,D,P,U);((be=le.onVnodeUpdated)||ge)&&jn(()=>{be&&Bi(be,D,T,_),ge&&eo(T,_,D,"updated")},P)},Pe=(_,T,D,P,U,W,Z)=>{for(let K=0;K<T.length;K++){const Q=_[K],j=T[K],ge=Q.el&&(Q.type===si||!ao(Q,j)||Q.shapeFlag&70)?v(Q.el):D;b(Q,j,ge,null,P,U,W,Z,!0)}},ve=(_,T,D,P,U,W,Z)=>{if(D!==P){if(D!==ut)for(const K in D)!kf(K)&&!(K in P)&&o(_,K,D[K],null,Z,T.children,U,W,te);for(const K in P){if(kf(K))continue;const Q=P[K],j=D[K];Q!==j&&K!=="value"&&o(_,K,j,Q,Z,T.children,U,W,te)}"value"in P&&o(_,"value",D.value,P.value)}},Qe=(_,T,D,P,U,W,Z,K,Q)=>{const j=T.el=_?_.el:l(""),ge=T.anchor=_?_.anchor:l("");let{patchFlag:se,dynamicChildren:le,slotScopeIds:be}=T;be&&(K=K?K.concat(be):be),_==null?(i(j,D,P),i(ge,D,P),H(T.children,D,ge,U,W,Z,K,Q)):se>0&&se&64&&le&&_.dynamicChildren?(Pe(_.dynamicChildren,le,D,U,W,Z,K),(T.key!=null||U&&T===U.subTree)&&HA(_,T,!0)):Je(_,T,D,ge,U,W,Z,K,Q)},Oe=(_,T,D,P,U,W,Z,K,Q)=>{T.slotScopeIds=K,_==null?T.shapeFlag&512?U.ctx.activate(T,D,P,Z,Q):vt(T,D,P,U,W,Z,Q):Ee(_,T,Q)},vt=(_,T,D,P,U,W,Z)=>{const K=_.component=GL(_,P,U);if(Lp(_)&&(K.ctx.renderer=Me),HL(K),K.asyncDep){if(U&&U.registerDep(K,ae),!_.el){const Q=K.subTree=Ct(vr);C(null,Q,T,D)}return}ae(K,_,T,D,U,W,Z)},Ee=(_,T,D)=>{const P=T.component=_.component;if(eL(_,T,D))if(P.asyncDep&&!P.asyncResolved){Re(P,T,D);return}else P.next=T,WM(P.update),P.update();else T.el=_.el,P.vnode=T},ae=(_,T,D,P,U,W,Z)=>{const K=()=>{if(_.isMounted){let{next:ge,bu:se,u:le,parent:be,vnode:De}=_,tt=ge,ze;to(_,!1),ge?(ge.el=De.el,Re(_,ge,Z)):ge=De,se&&Rf(se),(ze=ge.props&&ge.props.onVnodeBeforeUpdate)&&Bi(ze,be,ge,De),to(_,!0);const ot=_v(_),Kt=_.subTree;_.subTree=ot,b(Kt,ot,v(Kt.el),G(Kt),_,U,W),ge.el=ot.el,tt===null&&tL(_,ot.el),le&&jn(le,U),(ze=ge.props&&ge.props.onVnodeUpdated)&&jn(()=>Bi(ze,be,ge,De),U)}else{let ge;const{el:se,props:le}=T,{bm:be,m:De,parent:tt}=_,ze=Df(T);if(to(_,!1),be&&Rf(be),!ze&&(ge=le&&le.onVnodeBeforeMount)&&Bi(ge,tt,T),to(_,!0),se&&xe){const ot=()=>{_.subTree=_v(_),xe(se,_.subTree,_,U,null)};ze?T.type.__asyncLoader().then(()=>!_.isUnmounted&&ot()):ot()}else{const ot=_.subTree=_v(_);b(null,ot,D,P,_,U,W),T.el=ot.el}if(De&&jn(De,U),!ze&&(ge=le&&le.onVnodeMounted)){const ot=T;jn(()=>Bi(ge,tt,ot),U)}(T.shapeFlag&256||tt&&Df(tt.vnode)&&tt.vnode.shapeFlag&256)&&_.a&&jn(_.a,U),_.isMounted=!0,T=D=P=null}},Q=_.effect=new xw(K,()=>Vw(j),_.scope),j=_.update=()=>Q.run();j.id=_.uid,to(_,!0),j()},Re=(_,T,D)=>{T.component=_;const P=_.vnode.props;_.vnode=T,_.next=null,RL(_,T.props,P,D),NL(_,T.children,D),Lc(),cS(),Fc()},Je=(_,T,D,P,U,W,Z,K,Q=!1)=>{const j=_&&_.children,ge=_?_.shapeFlag:0,se=T.children,{patchFlag:le,shapeFlag:be}=T;if(le>0){if(le&128){dn(j,se,D,P,U,W,Z,K,Q);return}else if(le&256){An(j,se,D,P,U,W,Z,K,Q);return}}be&8?(ge&16&&te(j,U,W),se!==j&&g(D,se)):ge&16?be&16?dn(j,se,D,P,U,W,Z,K,Q):te(j,U,W,!0):(ge&8&&g(D,""),be&16&&H(se,D,P,U,W,Z,K,Q))},An=(_,T,D,P,U,W,Z,K,Q)=>{_=_||tc,T=T||tc;const j=_.length,ge=T.length,se=Math.min(j,ge);let le;for(le=0;le<se;le++){const be=T[le]=Q?rs(T[le]):$i(T[le]);b(_[le],be,D,null,U,W,Z,K,Q)}j>ge?te(_,U,W,!0,!1,se):H(T,D,P,U,W,Z,K,Q,se)},dn=(_,T,D,P,U,W,Z,K,Q)=>{let j=0;const ge=T.length;let se=_.length-1,le=ge-1;for(;j<=se&&j<=le;){const be=_[j],De=T[j]=Q?rs(T[j]):$i(T[j]);if(ao(be,De))b(be,De,D,null,U,W,Z,K,Q);else break;j++}for(;j<=se&&j<=le;){const be=_[se],De=T[le]=Q?rs(T[le]):$i(T[le]);if(ao(be,De))b(be,De,D,null,U,W,Z,K,Q);else break;se--,le--}if(j>se){if(j<=le){const be=le+1,De=be<ge?T[be].el:P;for(;j<=le;)b(null,T[j]=Q?rs(T[j]):$i(T[j]),D,De,U,W,Z,K,Q),j++}}else if(j>le)for(;j<=se;)Ut(_[j],U,W,!0),j++;else{const be=j,De=j,tt=new Map;for(j=De;j<=le;j++){const Xt=T[j]=Q?rs(T[j]):$i(T[j]);Xt.key!=null&&tt.set(Xt.key,j)}let ze,ot=0;const Kt=le-De+1;let rr=!1,Wh=0;const Ls=new Array(Kt);for(j=0;j<Kt;j++)Ls[j]=0;for(j=be;j<=se;j++){const Xt=_[j];if(ot>=Kt){Ut(Xt,U,W,!0);continue}let Zt;if(Xt.key!=null)Zt=tt.get(Xt.key);else for(ze=De;ze<=le;ze++)if(Ls[ze-De]===0&&ao(Xt,T[ze])){Zt=ze;break}Zt===void 0?Ut(Xt,U,W,!0):(Ls[Zt-De]=j+1,Zt>=Wh?Wh=Zt:rr=!0,b(Xt,T[Zt],D,null,U,W,Z,K,Q),ot++)}const Fs=rr?FL(Ls):tc;for(ze=Fs.length-1,j=Kt-1;j>=0;j--){const Xt=De+j,Zt=T[Xt],Yh=Xt+1<ge?T[Xt+1].el:P;Ls[j]===0?b(null,Zt,D,Yh,U,W,Z,K,Q):rr&&(ze<0||j!==Fs[ze]?Un(Zt,D,Yh,2):ze--)}}},Un=(_,T,D,P,U=null)=>{const{el:W,type:Z,transition:K,children:Q,shapeFlag:j}=_;if(j&6){Un(_.component.subTree,T,D,P);return}if(j&128){_.suspense.move(T,D,P);return}if(j&64){Z.move(_,T,D,Me);return}if(Z===si){i(W,T,D);for(let se=0;se<Q.length;se++)Un(Q[se],T,D,P);i(_.anchor,T,D);return}if(Z===Tv){O(_,T,D);return}if(P!==2&&j&1&&K)if(P===0)K.beforeEnter(W),i(W,T,D),jn(()=>K.enter(W),U);else{const{leave:se,delayLeave:le,afterLeave:be}=K,De=()=>i(W,T,D),tt=()=>{se(W,()=>{De(),be&&be()})};le?le(W,De,tt):tt()}else i(W,T,D)},Ut=(_,T,D,P=!1,U=!1)=>{const{type:W,props:Z,ref:K,children:Q,dynamicChildren:j,shapeFlag:ge,patchFlag:se,dirs:le}=_;if(K!=null&&vy(K,null,D,_,!0),ge&256){T.ctx.deactivate(_);return}const be=ge&1&&le,De=!Df(_);let tt;if(De&&(tt=Z&&Z.onVnodeBeforeUnmount)&&Bi(tt,T,_),ge&6)L(_.component,D,P);else{if(ge&128){_.suspense.unmount(D,P);return}be&&eo(_,null,T,"beforeUnmount"),ge&64?_.type.remove(_,T,D,U,Me,P):j&&(W!==si||se>0&&se&64)?te(j,T,D,!1,!0):(W===si&&se&384||!U&&ge&16)&&te(Q,T,D),P&&Pr(_)}(De&&(tt=Z&&Z.onVnodeUnmounted)||be)&&jn(()=>{tt&&Bi(tt,T,_),be&&eo(_,null,T,"unmounted")},D)},Pr=_=>{const{type:T,el:D,anchor:P,transition:U}=_;if(T===si){na(D,P);return}if(T===Tv){Y(_);return}const W=()=>{s(D),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(_.shapeFlag&1&&U&&!U.persisted){const{leave:Z,delayLeave:K}=U,Q=()=>Z(D,W);K?K(_.el,W,Q):Q()}else W()},na=(_,T)=>{let D;for(;_!==T;)D=y(_),s(_),_=D;s(T)},L=(_,T,D)=>{const{bum:P,scope:U,update:W,subTree:Z,um:K}=_;P&&Rf(P),U.stop(),W&&(W.active=!1,Ut(Z,_,T,D)),K&&jn(K,T),jn(()=>{_.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},te=(_,T,D,P=!1,U=!1,W=0)=>{for(let Z=W;Z<_.length;Z++)Ut(_[Z],T,D,P,U)},G=_=>_.shapeFlag&6?G(_.component.subTree):_.shapeFlag&128?_.suspense.next():y(_.anchor||_.el),fe=(_,T,D)=>{_==null?T._vnode&&Ut(T._vnode,null,null,!0):b(T._vnode||null,_,T,null,null,null,D),cS(),TA(),T._vnode=_},Me={p:b,um:Ut,m:Un,r:Pr,mt:vt,mc:H,pc:Je,pbc:Pe,n:G,o:t};let ct,xe;return e&&([ct,xe]=e(Me)),{render:fe,hydrate:ct,createApp:OL(fe,ct)}}function to({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function HA(t,e,n=!1){const i=t.children,s=e.children;if(_e(i)&&_e(s))for(let o=0;o<i.length;o++){const c=i[o];let l=s[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[o]=rs(s[o]),l.el=c.el),n||HA(c,l)),l.type===Up&&(l.el=c.el)}}function FL(t){const e=t.slice(),n=[0];let i,s,o,c,l;const d=t.length;for(i=0;i<d;i++){const f=t[i];if(f!==0){if(s=n[n.length-1],t[s]<f){e[i]=s,n.push(i);continue}for(o=0,c=n.length-1;o<c;)l=o+c>>1,t[n[l]]<f?o=l+1:c=l;f<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,c=n[o-1];o-- >0;)n[o]=c,c=e[c];return n}const UL=t=>t.__isTeleport,si=Symbol(void 0),Up=Symbol(void 0),vr=Symbol(void 0),Tv=Symbol(void 0),Al=[];let Ai=null;function ki(t=!1){Al.push(Ai=t?null:[])}function VL(){Al.pop(),Ai=Al[Al.length-1]||null}let Gl=1;function yS(t){Gl+=t}function BL(t){return t.dynamicChildren=Gl>0?Ai||tc:null,VL(),Gl>0&&Ai&&Ai.push(t),t}function Ri(t,e,n,i,s,o){return BL(Ye(t,e,n,i,s,o,!0))}function yy(t){return t?t.__v_isVNode===!0:!1}function ao(t,e){return t.type===e.type&&t.key===e.key}const Vp="__vInternal",WA=({key:t})=>t??null,Nf=({ref:t,ref_key:e,ref_for:n})=>t!=null?Wt(t)||Lt(t)||ke(t)?{i:ci,r:t,k:e,f:!!n}:t:null;function Ye(t,e=null,n=null,i=0,s=null,o=t===si?0:1,c=!1,l=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&WA(e),ref:e&&Nf(e),scopeId:kA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ci};return l?($w(d,n),o&128&&t.normalize(d)):n&&(d.shapeFlag|=Wt(n)?8:16),Gl>0&&!c&&Ai&&(d.patchFlag>0||o&6)&&d.patchFlag!==32&&Ai.push(d),d}const Ct=jL;function jL(t,e=null,n=null,i=0,s=null,o=!1){if((!t||t===wL)&&(t=vr),yy(t)){const l=gs(t,e,!0);return n&&$w(l,n),Gl>0&&!o&&Ai&&(l.shapeFlag&6?Ai[Ai.indexOf(t)]=l:Ai.push(l)),l.patchFlag|=-2,l}if(XL(t)&&(t=t.__vccOpts),e){e=$L(e);let{class:l,style:d}=e;l&&!Wt(l)&&(e.class=kp(l)),gt(d)&&(vA(d)&&!_e(d)&&(d=Cn({},d)),e.style=Sw(d))}const c=Wt(t)?1:nL(t)?128:UL(t)?64:gt(t)?4:ke(t)?2:0;return Ye(t,e,n,i,s,c,o,!0)}function $L(t){return t?vA(t)||Vp in t?Cn({},t):t:null}function gs(t,e,n=!1){const{props:i,ref:s,patchFlag:o,children:c}=t,l=e?qL(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&WA(l),ref:e&&e.ref?n&&s?_e(s)?s.concat(Nf(e)):[s,Nf(e)]:Nf(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==si?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gs(t.ssContent),ssFallback:t.ssFallback&&gs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function wy(t=" ",e=0){return Ct(Up,null,t,e)}function $i(t){return t==null||typeof t=="boolean"?Ct(vr):_e(t)?Ct(si,null,t.slice()):typeof t=="object"?rs(t):Ct(Up,null,String(t))}function rs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:gs(t)}function $w(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),$w(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Vp in e)?e._ctx=ci:s===3&&ci&&(ci.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ke(e)?(e={default:e,_ctx:ci},n=32):(e=String(e),i&64?(n=16,e=[wy(e)]):n=8);t.children=e,t.shapeFlag|=n}function qL(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=kp([e.class,i.class]));else if(s==="style")e.style=Sw([e.style,i.style]);else if(Rp(s)){const o=e[s],c=i[s];c&&o!==c&&!(_e(o)&&o.includes(c))&&(e[s]=o?[].concat(o,c):c)}else s!==""&&(e[s]=i[s])}return e}function Bi(t,e,n,i=null){vi(t,e,7,[n,i])}const KL=GA();let zL=0;function GL(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||KL,o={uid:zL++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new iA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$A(i,s),emitsOptions:AA(i,s),emit:null,emitted:null,propsDefaults:ut,inheritAttrs:i.inheritAttrs,ctx:ut,data:ut,props:ut,attrs:ut,slots:ut,refs:ut,setupState:ut,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=JM.bind(null,o),t.ce&&t.ce(o),o}let Pt=null;const YA=()=>Pt||ci,fc=t=>{Pt=t,t.scope.on()},So=()=>{Pt&&Pt.scope.off(),Pt=null};function QA(t){return t.vnode.shapeFlag&4}let Hl=!1;function HL(t,e=!1){Hl=e;const{props:n,children:i}=t.vnode,s=QA(t);kL(t,n,s,e),DL(t,i);const o=s?WL(t,e):void 0;return Hl=!1,o}function WL(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=dc(new Proxy(t.ctx,_L));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?QL(t):null;fc(t),Lc();const o=ds(i,t,0,[t.props,s]);if(Fc(),So(),eA(o)){if(o.then(So,So),e)return o.then(c=>{wS(t,c,e)}).catch(c=>{Op(c,t,0)});t.asyncDep=o}else wS(t,o,e)}else JA(t,e)}function wS(t,e,n){ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gt(e)&&(t.setupState=IA(e)),JA(t,n)}let bS;function JA(t,e,n){const i=t.type;if(!t.render){if(!e&&bS&&!i.render){const s=i.template||Bw(t).template;if(s){const{isCustomElement:o,compilerOptions:c}=t.appContext.config,{delimiters:l,compilerOptions:d}=i,f=Cn(Cn({isCustomElement:o,delimiters:l},c),d);i.render=bS(s,f)}}t.render=i.render||Ni}fc(t),Lc(),EL(t),Fc(),So()}function YL(t){return new Proxy(t.attrs,{get(e,n){return Yn(t,"get","$attrs"),e[n]}})}function QL(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=YL(t))},slots:t.slots,emit:t.emit,expose:e}}function Bp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(IA(dc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Cl)return Cl[n](t)},has(e,n){return n in e||n in Cl}}))}function JL(t,e=!0){return ke(t)?t.displayName||t.name:t.name||e&&t.__name}function XL(t){return ke(t)&&"__vccOpts"in t}const ai=(t,e)=>zM(t,e,Hl);function XA(t,e,n){const i=arguments.length;return i===2?gt(e)&&!_e(e)?yy(e)?Ct(t,null,[e]):Ct(t,e):Ct(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&yy(n)&&(n=[n]),Ct(t,e,n))}const ZL=Symbol(""),eF=()=>Ji(ZL),tF="3.2.47",nF="http://www.w3.org/2000/svg",co=typeof document<"u"?document:null,IS=co&&co.createElement("template"),iF={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?co.createElementNS(nF,t):co.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>co.createTextNode(t),createComment:t=>co.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>co.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,o){const c=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{IS.innerHTML=i?`<svg>${t}</svg>`:t;const l=IS.content;if(i){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}e.insertBefore(l,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function rF(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function sF(t,e,n){const i=t.style,s=Wt(n);if(n&&!s){if(e&&!Wt(e))for(const o in e)n[o]==null&&by(i,o,"");for(const o in n)by(i,o,n[o])}else{const o=i.display;s?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const _S=/\s*!important$/;function by(t,e,n){if(_e(n))n.forEach(i=>by(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=oF(t,e);_S.test(n)?t.setProperty(Mc(i),n.replace(_S,""),"important"):t[i]=n}}const ES=["Webkit","Moz","ms"],Cv={};function oF(t,e){const n=Cv[e];if(n)return n;let i=er(e);if(i!=="filter"&&i in t)return Cv[e]=i;i=Np(i);for(let s=0;s<ES.length;s++){const o=ES[s]+i;if(o in t)return Cv[e]=o}return e}const SS="http://www.w3.org/1999/xlink";function aF(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(SS,e.slice(6,e.length)):t.setAttributeNS(SS,e,n);else{const o=ZO(e);n==null||o&&!JC(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function cF(t,e,n,i,s,o,c){if(e==="innerHTML"||e==="textContent"){i&&c(i,s,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const d=n??"";(t.value!==d||t.tagName==="OPTION")&&(t.value=d),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=JC(n):n==null&&d==="string"?(n="",l=!0):d==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ha(t,e,n,i){t.addEventListener(e,n,i)}function uF(t,e,n,i){t.removeEventListener(e,n,i)}function lF(t,e,n,i,s=null){const o=t._vei||(t._vei={}),c=o[e];if(i&&c)c.value=i;else{const[l,d]=hF(e);if(i){const f=o[e]=pF(i,s);Ha(t,l,f,d)}else c&&(uF(t,l,c,d),o[e]=void 0)}}const TS=/(?:Once|Passive|Capture)$/;function hF(t){let e;if(TS.test(t)){e={};let i;for(;i=t.match(TS);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mc(t.slice(2)),e]}let Av=0;const dF=Promise.resolve(),fF=()=>Av||(dF.then(()=>Av=0),Av=Date.now());function pF(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;vi(mF(i,n.value),e,5,[i])};return n.value=t,n.attached=fF(),n}function mF(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const CS=/^on[a-z]/,gF=(t,e,n,i,s=!1,o,c,l,d)=>{e==="class"?rF(t,i,s):e==="style"?sF(t,n,i):Rp(e)?Tw(e)||lF(t,e,n,i,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vF(t,e,i,s))?cF(t,e,i,o,c,l,d):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),aF(t,e,i,s))};function vF(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&CS.test(e)&&ke(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||CS.test(e)&&Wt(n)?!1:e in t}const yF={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};aL.props;const AS=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>Rf(e,n):e};function wF(t){t.target.composing=!0}function kS(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const RS={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t._assign=AS(s);const o=i||s.props&&s.props.type==="number";Ha(t,e?"change":"input",c=>{if(c.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=sy(l)),t._assign(l)}),n&&Ha(t,"change",()=>{t.value=t.value.trim()}),e||(Ha(t,"compositionstart",wF),Ha(t,"compositionend",kS),Ha(t,"change",kS))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(t._assign=AS(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(s||t.type==="number")&&sy(t.value)===e))return;const c=e??"";t.value!==c&&(t.value=c)}},bF=["ctrl","shift","alt","meta"],IF={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>bF.some(n=>t[`${n}Key`]&&!e.includes(n))},_F=(t,e)=>(n,...i)=>{for(let s=0;s<e.length;s++){const o=IF[e[s]];if(o&&o(n,e))return}return t(n,...i)},EF=Cn({patchProp:gF},iF);let xS;function SF(){return xS||(xS=ML(EF))}const TF=(...t)=>{const e=SF().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=CF(i);if(!s)return;const o=e._component;!ke(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const c=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},e};function CF(t){return Wt(t)?document.querySelector(t):t}var AF=!1;/*!
  * pinia v2.0.34
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let ZA;const jp=t=>ZA=t,ek=Symbol();function Iy(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var kl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(kl||(kl={}));function kF(){const t=rA(!0),e=t.run(()=>Lw({}));let n=[],i=[];const s=dc({install(o){jp(s),s._a=o,o.provide(ek,s),o.config.globalProperties.$pinia=s,i.forEach(c=>n.push(c)),i=[]},use(o){return!this._a&&!AF?i.push(o):n.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const tk=()=>{};function DS(t,e,n,i=tk){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),i())};return!n&&sA()&&uM(s),s}function ja(t,...e){t.slice().forEach(n=>{n(...e)})}function _y(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,i)=>t.set(i,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],s=t[n];Iy(s)&&Iy(i)&&t.hasOwnProperty(n)&&!Lt(i)&&!hs(i)?t[n]=_y(s,i):t[n]=i}return t}const RF=Symbol();function xF(t){return!Iy(t)||!t.hasOwnProperty(RF)}const{assign:is}=Object;function DF(t){return!!(Lt(t)&&t.effect)}function NF(t,e,n,i){const{state:s,actions:o,getters:c}=e,l=n.state.value[t];let d;function f(){l||(n.state.value[t]=s?s():{});const g=jM(n.state.value[t]);return is(g,o,Object.keys(c||{}).reduce((v,y)=>(v[y]=dc(ai(()=>{jp(n);const I=n._s.get(t);return c[y].call(I,I)})),v),{}))}return d=nk(t,f,e,n,i,!0),d}function nk(t,e,n={},i,s,o){let c;const l=is({actions:{}},n),d={deep:!0};let f,g,v=dc([]),y=dc([]),I;const A=i.state.value[t];!o&&!A&&(i.state.value[t]={}),Lw({});let b;function S(ee){let H;f=g=!1,typeof ee=="function"?(ee(i.state.value[t]),H={type:kl.patchFunction,storeId:t,events:I}):(_y(i.state.value[t],ee),H={type:kl.patchObject,payload:ee,storeId:t,events:I});const Se=b=Symbol();Uw().then(()=>{b===Se&&(f=!0)}),g=!0,ja(v,H,i.state.value[t])}const C=o?function(){const{state:H}=n,Se=H?H():{};this.$patch(Pe=>{is(Pe,Se)})}:tk;function N(){c.stop(),v=[],y=[],i._s.delete(t)}function O(ee,H){return function(){jp(i);const Se=Array.from(arguments),Pe=[],ve=[];function Qe(Ee){Pe.push(Ee)}function Oe(Ee){ve.push(Ee)}ja(y,{args:Se,name:ee,store:z,after:Qe,onError:Oe});let vt;try{vt=H.apply(this&&this.$id===t?this:z,Se)}catch(Ee){throw ja(ve,Ee),Ee}return vt instanceof Promise?vt.then(Ee=>(ja(Pe,Ee),Ee)).catch(Ee=>(ja(ve,Ee),Promise.reject(Ee))):(ja(Pe,vt),vt)}}const Y={_p:i,$id:t,$onAction:DS.bind(null,y),$patch:S,$reset:C,$subscribe(ee,H={}){const Se=DS(v,ee,H.detached,()=>Pe()),Pe=c.run(()=>Tl(()=>i.state.value[t],ve=>{(H.flush==="sync"?g:f)&&ee({storeId:t,type:kl.direct,events:I},ve)},is({},d,H)));return Se},$dispose:N},z=Uc(Y);i._s.set(t,z);const ne=i._e.run(()=>(c=rA(),c.run(()=>e())));for(const ee in ne){const H=ne[ee];if(Lt(H)&&!DF(H)||hs(H))o||(A&&xF(H)&&(Lt(H)?H.value=A[ee]:_y(H,A[ee])),i.state.value[t][ee]=H);else if(typeof H=="function"){const Se=O(ee,H);ne[ee]=Se,l.actions[ee]=H}}return is(z,ne),is(qe(z),ne),Object.defineProperty(z,"$state",{get:()=>i.state.value[t],set:ee=>{S(H=>{is(H,ee)})}}),i._p.forEach(ee=>{is(z,c.run(()=>ee({store:z,app:i._a,pinia:i,options:l})))}),A&&o&&n.hydrate&&n.hydrate(z.$state,A),f=!0,g=!0,z}function PF(t,e,n){let i,s;const o=typeof e=="function";typeof t=="string"?(i=t,s=o?n:e):(s=t,i=t.id);function c(l,d){const f=YA();return l=l||f&&Ji(ek,null),l&&jp(l),l=ZA,l._s.has(i)||(o?nk(i,e,s,l):NF(i,s,l)),l._s.get(i)}return c.$id=i,c}const OF=PF({id:"user",state:()=>({user:null}),actions:{setUser(t){this.user=t}}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},MF=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],c=t[n++],l=t[n++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},rk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],c=s+1<t.length,l=c?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,g=o>>2,v=(o&3)<<4|l>>4;let y=(l&15)<<2|f>>6,I=f&63;d||(I=64,c||(y=64)),i.push(n[g],n[v],n[y],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ik(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||f==null||v==null)throw new LF;const y=o<<2|l>>4;if(i.push(y),f!==64){const I=l<<4&240|f>>2;if(i.push(I),v!==64){const A=f<<6&192|v;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FF=function(t){const e=ik(t);return rk.encodeByteArray(e,!0)},Yf=function(t){return FF(t).replace(/\./g,"")},sk=function(t){try{return rk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!UF(n)||(t[n]=Qf(t[n],e[n]));return t}function UF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=()=>VF().__FIREBASE_DEFAULTS__,jF=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$F=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sk(t[1]);return e&&JSON.parse(e)},$p=()=>{try{return BF()||jF()||$F()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ok=t=>{var e,n;return(n=(e=$p())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qF=t=>{const e=ok(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},KF=()=>{var t;return(t=$p())===null||t===void 0?void 0:t.config},ak=t=>{var e;return(e=$p())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Yf(JSON.stringify(n)),Yf(JSON.stringify(c)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function qw(){var t;const e=(t=$p())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WF(){return typeof self=="object"&&self.self===self}function Kw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ck(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YF(){return!qw()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pc(){try{return typeof indexedDB=="object"}catch{return!1}}function uk(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function QF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="FirebaseError";class vn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=JF,Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cr.prototype.create)}}class Cr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?XF(o,i):"Error",l=`${this.serviceName}: ${c} (${s}).`;return new vn(s,l,i)}}function XF(t,e){return t.replace(ZF,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ZF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function eU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],c=e[s];if(PS(o)&&PS(c)){if(!Wl(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function PS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lk(t,e){const n=new tU(t,e);return n.subscribe.bind(n)}class tU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=kv),s.error===void 0&&(s.error=kv),s.complete===void 0&&(s.complete=kv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=1e3,rU=2,sU=4*60*60*1e3,oU=.5;function OS(t,e=iU,n=rU){const i=e*Math.pow(n,t),s=Math.round(oU*i*(Math.random()-.5)*2);return Math.min(sU,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t){return t&&t._delegate?t._delegate:t}class Qn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new zF;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uU(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&c.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cU(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cU(t){return t===ro?void 0:t}function uU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=[];var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const hk={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},hU=We.INFO,dU={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},fU=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=dU[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bh{constructor(e){this.name=e,this._logLevel=hU,this._logHandler=fU,this._userLogHandler=null,Gw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}function pU(t){Gw.forEach(e=>{e.setLogLevel(t)})}function mU(t,e){for(const n of Gw){let i=null;e&&e.level&&(i=hk[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,o,...c)=>{const l=c.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(i??s.logLevel)&&t({level:We[o].toLowerCase(),message:l,args:c,type:s.name})}}}const gU=(t,e)=>e.some(n=>t instanceof n);let MS,LS;function vU(){return MS||(MS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yU(){return LS||(LS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dk=new WeakMap,Ey=new WeakMap,fk=new WeakMap,Rv=new WeakMap,Hw=new WeakMap;function wU(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(fs(t.result)),s()},c=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&dk.set(n,t)}).catch(()=>{}),Hw.set(e,t),e}function bU(t){if(Ey.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});Ey.set(t,e)}let Sy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IU(t){Sy=t(Sy)}function _U(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(xv(this),e,...n);return fk.set(i,e.sort?e.sort():[e]),fs(i)}:yU().includes(t)?function(...e){return t.apply(xv(this),e),fs(dk.get(this))}:function(...e){return fs(t.apply(xv(this),e))}}function EU(t){return typeof t=="function"?_U(t):(t instanceof IDBTransaction&&bU(t),gU(t,vU())?new Proxy(t,Sy):t)}function fs(t){if(t instanceof IDBRequest)return wU(t);if(Rv.has(t))return Rv.get(t);const e=EU(t);return e!==t&&(Rv.set(t,e),Hw.set(e,t)),e}const xv=t=>Hw.get(t);function pk(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(t,e),l=fs(c);return i&&c.addEventListener("upgradeneeded",d=>{i(fs(c.result),d.oldVersion,d.newVersion,fs(c.transaction))}),n&&c.addEventListener("blocked",()=>n()),l.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}const SU=["get","getKey","getAll","getAllKeys","count"],TU=["put","add","delete","clear"],Dv=new Map;function FS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dv.get(e))return Dv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=TU.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||SU.includes(n)))return;const o=async function(c,...l){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&d.done]))[0]};return Dv.set(e,o),o}IU(t=>({...t,get:(e,n,i)=>FS(e,n)||t.get(e,n,i),has:(e,n)=>!!FS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AU(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function AU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ty="@firebase/app",US="0.9.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new bh("@firebase/app"),kU="@firebase/app-compat",RU="@firebase/analytics-compat",xU="@firebase/analytics",DU="@firebase/app-check-compat",NU="@firebase/app-check",PU="@firebase/auth",OU="@firebase/auth-compat",MU="@firebase/database",LU="@firebase/database-compat",FU="@firebase/functions",UU="@firebase/functions-compat",VU="@firebase/installations",BU="@firebase/installations-compat",jU="@firebase/messaging",$U="@firebase/messaging-compat",qU="@firebase/performance",KU="@firebase/performance-compat",zU="@firebase/remote-config",GU="@firebase/remote-config-compat",HU="@firebase/storage",WU="@firebase/storage-compat",YU="@firebase/firestore",QU="@firebase/firestore-compat",JU="firebase",XU="9.19.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]",ZU={[Ty]:"fire-core",[kU]:"fire-core-compat",[xU]:"fire-analytics",[RU]:"fire-analytics-compat",[NU]:"fire-app-check",[DU]:"fire-app-check-compat",[PU]:"fire-auth",[OU]:"fire-auth-compat",[MU]:"fire-rtdb",[LU]:"fire-rtdb-compat",[FU]:"fire-fn",[UU]:"fire-fn-compat",[VU]:"fire-iid",[BU]:"fire-iid-compat",[jU]:"fire-fcm",[$U]:"fire-fcm-compat",[qU]:"fire-perf",[KU]:"fire-perf-compat",[zU]:"fire-rc",[GU]:"fire-rc-compat",[HU]:"fire-gcs",[WU]:"fire-gcs-compat",[YU]:"fire-fst",[QU]:"fire-fst-compat","fire-js":"fire-js",[JU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Map,Yl=new Map;function Jf(t,e){try{t.container.addComponent(e)}catch(n){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mk(t,e){t.container.addOrOverwriteComponent(e)}function yi(t){const e=t.name;if(Yl.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;Yl.set(e,t);for(const n of ys.values())Jf(n,t);return!0}function Ar(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function e3(t,e,n=vs){Ar(t,e).clearInstance(n)}function t3(){Yl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},yr=new Cr("app","Firebase",n3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i3=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=XU;function qp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vs,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=KF()),!n)throw yr.create("no-options");const o=ys.get(s);if(o){if(Wl(n,o.options)&&Wl(i,o.config))return o;throw yr.create("duplicate-app",{appName:s})}const c=new lU(s);for(const d of Yl.values())c.addComponent(d);const l=new i3(n,i,c);return ys.set(s,l),l}function Kp(t=vs){const e=ys.get(t);if(!e&&t===vs)return qp();if(!e)throw yr.create("no-app",{appName:t});return e}function r3(){return Array.from(ys.values())}async function gk(t){const e=t.name;ys.has(e)&&(ys.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Ln(t,e,n){var i;let s=(i=ZU[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(l.join(" "));return}yi(new Qn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function vk(t,e){if(t!==null&&typeof t!="function")throw yr.create("invalid-log-argument");mU(t,e)}function yk(t){pU(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="firebase-heartbeat-database",o3=1,Ql="firebase-heartbeat-store";let Nv=null;function wk(){return Nv||(Nv=pk(s3,o3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ql)}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Nv}async function a3(t){try{return(await wk()).transaction(Ql).objectStore(Ql).get(bk(t))}catch(e){if(e instanceof vn)xo.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xo.warn(n.message)}}}async function VS(t,e){try{const i=(await wk()).transaction(Ql,"readwrite");return await i.objectStore(Ql).put(e,bk(t)),i.done}catch(n){if(n instanceof vn)xo.warn(n.message);else{const i=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xo.warn(i.message)}}}function bk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=1024,u3=30*24*60*60*1e3;class l3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=BS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=u3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=BS(),{heartbeatsToSend:n,unsentEntries:i}=h3(this._heartbeatsCache.heartbeats),s=Yf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function BS(){return new Date().toISOString().substring(0,10)}function h3(t,e=c3){const n=[];let i=t.slice();for(const s of t){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),jS(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class d3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pc()?uk().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await a3(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jS(t){return Yf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){yi(new Qn("platform-logger",e=>new CU(e),"PRIVATE")),yi(new Qn("heartbeat",e=>new l3(e),"PRIVATE")),Ln(Ty,US,t),Ln(Ty,US,"esm2017"),Ln("fire-js","")}f3("");const p3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:vn,SDK_VERSION:Ho,_DEFAULT_ENTRY_NAME:vs,_addComponent:Jf,_addOrOverwriteComponent:mk,_apps:ys,_clearComponents:t3,_components:Yl,_getProvider:Ar,_registerComponent:yi,_removeServiceInstance:e3,deleteApp:gk,getApp:Kp,getApps:r3,initializeApp:qp,onLog:vk,registerVersion:Ln,setLogLevel:yk},Symbol.toStringTag,{value:"Module"}));var m3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he,Ww=Ww||{},Ie=m3||self;function Xf(){}function zp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ih(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function g3(t){return Object.prototype.hasOwnProperty.call(t,Pv)&&t[Pv]||(t[Pv]=++v3)}var Pv="closure_uid_"+(1e9*Math.random()>>>0),v3=0;function y3(t,e,n){return t.call.apply(t.bind,arguments)}function w3(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Sn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Sn=y3:Sn=w3,Sn.apply(null,arguments)}function mf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function In(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,s,o){for(var c=Array(arguments.length-2),l=2;l<arguments.length;l++)c[l-2]=arguments[l];return e.prototype[s].apply(i,c)}}function ks(){this.s=this.s,this.o=this.o}var b3=0;ks.prototype.s=!1;ks.prototype.na=function(){!this.s&&(this.s=!0,this.M(),b3!=0)&&g3(this)};ks.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ik=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Yw(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function $S(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(zp(i)){const s=t.length||0,o=i.length||0;t.length=s+o;for(let c=0;c<o;c++)t[s+c]=i[c]}else t.push(i)}}function Tn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tn.prototype.h=function(){this.defaultPrevented=!0};var I3=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ie.addEventListener("test",Xf,e),Ie.removeEventListener("test",Xf,e)}catch{}return t}();function Zf(t){return/^[\s\xa0]*$/.test(t)}var qS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ov(t,e){return t<e?-1:t>e?1:0}function Gp(){var t=Ie.navigator;return t&&(t=t.userAgent)?t:""}function Ki(t){return Gp().indexOf(t)!=-1}function Qw(t){return Qw[" "](t),t}Qw[" "]=Xf;function _3(t){var e=T3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var E3=Ki("Opera"),mc=Ki("Trident")||Ki("MSIE"),_k=Ki("Edge"),Cy=_k||mc,Ek=Ki("Gecko")&&!(Gp().toLowerCase().indexOf("webkit")!=-1&&!Ki("Edge"))&&!(Ki("Trident")||Ki("MSIE"))&&!Ki("Edge"),S3=Gp().toLowerCase().indexOf("webkit")!=-1&&!Ki("Edge");function Sk(){var t=Ie.document;return t?t.documentMode:void 0}var ep;e:{var Mv="",Lv=function(){var t=Gp();if(Ek)return/rv:([^\);]+)(\)|;)/.exec(t);if(_k)return/Edge\/([\d\.]+)/.exec(t);if(mc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(S3)return/WebKit\/(\S+)/.exec(t);if(E3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Lv&&(Mv=Lv?Lv[1]:""),mc){var Fv=Sk();if(Fv!=null&&Fv>parseFloat(Mv)){ep=String(Fv);break e}}ep=Mv}var T3={};function C3(){return _3(function(){let t=0;const e=qS(String(ep)).split("."),n=qS("9").split("."),i=Math.max(e.length,n.length);for(let c=0;t==0&&c<i;c++){var s=e[c]||"",o=n[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s[0].length==0&&o[0].length==0)break;t=Ov(s[1].length==0?0:parseInt(s[1],10),o[1].length==0?0:parseInt(o[1],10))||Ov(s[2].length==0,o[2].length==0)||Ov(s[2],o[2]),s=s[3],o=o[3]}while(t==0)}return 0<=t})}var Ay;if(Ie.document&&mc){var KS=Sk();Ay=KS||parseInt(ep,10)||void 0}else Ay=void 0;var A3=Ay;function Jl(t,e){if(Tn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ek){e:{try{Qw(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:k3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jl.X.h.call(this)}}In(Jl,Tn);var k3={2:"touch",3:"pen",4:"mouse"};Jl.prototype.h=function(){Jl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var _h="closure_listenable_"+(1e6*Math.random()|0),R3=0;function x3(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++R3,this.ba=this.ea=!1}function Hp(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Jw(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Tk(t){const e={};for(const n in t)e[n]=t[n];return e}const zS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ck(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let o=0;o<zS.length;o++)n=zS[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Wp(t){this.src=t,this.g={},this.h=0}Wp.prototype.add=function(t,e,n,i,s){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var c=Ry(t,e,i,s);return-1<c?(e=t[c],n||(e.ea=!1)):(e=new x3(e,this.src,o,!!i,s),e.ea=n,t.push(e)),e};function ky(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=Ik(i,e),o;(o=0<=s)&&Array.prototype.splice.call(i,s,1),o&&(Hp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ry(t,e,n,i){for(var s=0;s<t.length;++s){var o=t[s];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==i)return s}return-1}var Xw="closure_lm_"+(1e6*Math.random()|0),Uv={};function Ak(t,e,n,i,s){if(i&&i.once)return Rk(t,e,n,i,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ak(t,e[o],n,i,s);return null}return n=tb(n),t&&t[_h]?t.N(e,n,Ih(i)?!!i.capture:!!i,s):kk(t,e,n,!1,i,s)}function kk(t,e,n,i,s,o){if(!e)throw Error("Invalid event type");var c=Ih(s)?!!s.capture:!!s,l=eb(t);if(l||(t[Xw]=l=new Wp(t)),n=l.add(e,n,i,c,o),n.proxy)return n;if(i=D3(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)I3||(s=c),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(Dk(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function D3(){function t(n){return e.call(t.src,t.listener,n)}const e=N3;return t}function Rk(t,e,n,i,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rk(t,e[o],n,i,s);return null}return n=tb(n),t&&t[_h]?t.O(e,n,Ih(i)?!!i.capture:!!i,s):kk(t,e,n,!0,i,s)}function xk(t,e,n,i,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)xk(t,e[o],n,i,s);else i=Ih(i)?!!i.capture:!!i,n=tb(n),t&&t[_h]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Ry(o,n,i,s),-1<n&&(Hp(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=eb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ry(e,n,i,s)),(n=-1<t?e[t]:null)&&Zw(n))}function Zw(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[_h])ky(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Dk(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=eb(e))?(ky(n,t),n.h==0&&(n.src=null,e[Xw]=null)):Hp(t)}}}function Dk(t){return t in Uv?Uv[t]:Uv[t]="on"+t}function N3(t,e){if(t.ba)t=!0;else{e=new Jl(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&Zw(t),t=n.call(i,e)}return t}function eb(t){return t=t[Xw],t instanceof Wp?t:null}var Vv="__closure_events_fn_"+(1e9*Math.random()>>>0);function tb(t){return typeof t=="function"?t:(t[Vv]||(t[Vv]=function(e){return t.handleEvent(e)}),t[Vv])}function an(){ks.call(this),this.i=new Wp(this),this.P=this,this.I=null}In(an,ks);an.prototype[_h]=!0;an.prototype.removeEventListener=function(t,e,n,i){xk(this,t,e,n,i)};function yn(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new Tn(e,t);else if(e instanceof Tn)e.target=e.target||t;else{var s=e;e=new Tn(i,t),Ck(e,s)}if(s=!0,n)for(var o=n.length-1;0<=o;o--){var c=e.g=n[o];s=gf(c,i,!0,e)&&s}if(c=e.g=t,s=gf(c,i,!0,e)&&s,s=gf(c,i,!1,e)&&s,n)for(o=0;o<n.length;o++)c=e.g=n[o],s=gf(c,i,!1,e)&&s}an.prototype.M=function(){if(an.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Hp(n[i]);delete t.g[e],t.h--}}this.I=null};an.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};an.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function gf(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ba&&c.capture==n){var l=c.listener,d=c.ha||c.src;c.ea&&ky(t.i,c),s=l.call(d,i)!==!1&&s}}return s&&!i.defaultPrevented}var nb=Ie.JSON.stringify;function P3(){var t=Ok;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class O3{constructor(){this.h=this.g=null}add(e,n){const i=Nk.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Nk=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new M3,t=>t.reset());class M3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function L3(t){Ie.setTimeout(()=>{throw t},0)}function Pk(t,e){xy||F3(),Dy||(xy(),Dy=!0),Ok.add(t,e)}var xy;function F3(){var t=Ie.Promise.resolve(void 0);xy=function(){t.then(U3)}}var Dy=!1,Ok=new O3;function U3(){for(var t;t=P3();){try{t.h.call(t.g)}catch(n){L3(n)}var e=Nk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Dy=!1}function Yp(t,e){an.call(this),this.h=t||1,this.g=e||Ie,this.j=Sn(this.lb,this),this.l=Date.now()}In(Yp,an);he=Yp.prototype;he.ca=!1;he.R=null;he.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),yn(this,"tick"),this.ca&&(ib(this),this.start()))}};he.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ib(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}he.M=function(){Yp.X.M.call(this),ib(this),delete this.g};function rb(t,e,n){if(typeof t=="function")n&&(t=Sn(t,n));else if(t&&typeof t.handleEvent=="function")t=Sn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ie.setTimeout(t,e||0)}function Mk(t){t.g=rb(()=>{t.g=null,t.i&&(t.i=!1,Mk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class V3 extends ks{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mk(this)}M(){super.M(),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xl(t){ks.call(this),this.h=t,this.g={}}In(Xl,ks);var GS=[];function Lk(t,e,n,i){Array.isArray(n)||(n&&(GS[0]=n.toString()),n=GS);for(var s=0;s<n.length;s++){var o=Ak(e,n[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Fk(t){Jw(t.g,function(e,n){this.g.hasOwnProperty(n)&&Zw(e)},t),t.g={}}Xl.prototype.M=function(){Xl.X.M.call(this),Fk(this)};Xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qp(){this.g=!0}Qp.prototype.Aa=function(){this.g=!1};function B3(t,e,n,i,s,o){t.info(function(){if(t.g)if(o)for(var c="",l=o.split("&"),d=0;d<l.length;d++){var f=l[d].split("=");if(1<f.length){var g=f[0];f=f[1];var v=g.split("_");c=2<=v.length&&v[1]=="type"?c+(g+"="+f+"&"):c+(g+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+c})}function j3(t,e,n,i,s,o,c){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+o+" "+c})}function Za(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+q3(t,n)+(i?" "+i:"")})}function $3(t,e){t.info(function(){return"TIMEOUT: "+e})}Qp.prototype.info=function(){};function q3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var c=1;c<s.length;c++)s[c]=""}}}}return nb(n)}catch{return e}}var Wo={},HS=null;function Jp(){return HS=HS||new an}Wo.Pa="serverreachability";function Uk(t){Tn.call(this,Wo.Pa,t)}In(Uk,Tn);function Zl(t){const e=Jp();yn(e,new Uk(e))}Wo.STAT_EVENT="statevent";function Vk(t,e){Tn.call(this,Wo.STAT_EVENT,t),this.stat=e}In(Vk,Tn);function Mn(t){const e=Jp();yn(e,new Vk(e,t))}Wo.Qa="timingevent";function Bk(t,e){Tn.call(this,Wo.Qa,t),this.size=e}In(Bk,Tn);function Eh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){t()},e)}var Xp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},jk={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function sb(){}sb.prototype.h=null;function WS(t){return t.h||(t.h=t.i())}function $k(){}var Sh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ob(){Tn.call(this,"d")}In(ob,Tn);function ab(){Tn.call(this,"c")}In(ab,Tn);var Ny;function Zp(){}In(Zp,sb);Zp.prototype.g=function(){return new XMLHttpRequest};Zp.prototype.i=function(){return{}};Ny=new Zp;function Th(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new Xl(this),this.O=K3,t=Cy?125:void 0,this.T=new Yp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qk}function qk(){this.i=null,this.g="",this.h=!1}var K3=45e3,Py={},tp={};he=Th.prototype;he.setTimeout=function(t){this.O=t};function Oy(t,e,n){t.K=1,t.v=tm(Ir(e)),t.s=n,t.P=!0,Kk(t,null)}function Kk(t,e){t.F=Date.now(),Ch(t),t.A=Ir(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),Xk(n.i,"t",i),t.C=0,n=t.l.H,t.h=new qk,t.g=wR(t.l,n?e:null,!t.s),0<t.N&&(t.L=new V3(Sn(t.La,t,t.g),t.N)),Lk(t.S,t.g,"readystatechange",t.ib),e=t.H?Tk(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Zl(),B3(t.j,t.u,t.A,t.m,t.U,t.s)}he.ib=function(t){t=t.target;const e=this.L;e&&fr(t)==3?e.l():this.La(t)};he.La=function(t){try{if(t==this.g)e:{const g=fr(this.g);var e=this.g.Ea();const v=this.g.aa();if(!(3>g)&&(g!=3||Cy||this.g&&(this.h.h||this.g.fa()||XS(this.g)))){this.I||g!=4||e==7||(e==8||0>=v?Zl(3):Zl(2)),em(this);var n=this.g.aa();this.Y=n;t:if(zk(this)){var i=XS(this.g);t="";var s=i.length,o=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vo(this),Rl(this);var c="";break t}this.h.i=new Ie.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=n==200,j3(this.j,this.u,this.A,this.m,this.U,g,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zf(l)){var f=l;break t}}f=null}if(n=f)Za(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,My(this,n);else{this.i=!1,this.o=3,Mn(12),vo(this),Rl(this);break e}}this.P?(Gk(this,g,c),Cy&&this.i&&g==3&&(Lk(this.S,this.T,"tick",this.hb),this.T.start())):(Za(this.j,this.m,c,null),My(this,c)),g==4&&vo(this),this.i&&!this.I&&(g==4?mR(this.l,this):(this.i=!1,Ch(this)))}else n==400&&0<c.indexOf("Unknown SID")?(this.o=3,Mn(12)):(this.o=0,Mn(13)),vo(this),Rl(this)}}}catch{}finally{}};function zk(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Gk(t,e,n){let i=!0,s;for(;!t.I&&t.C<n.length;)if(s=z3(t,n),s==tp){e==4&&(t.o=4,Mn(14),i=!1),Za(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Py){t.o=4,Mn(15),Za(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Za(t.j,t.m,s,null),My(t,s);zk(t)&&s!=tp&&s!=Py&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),pb(e),e.K=!0,Mn(11))):(Za(t.j,t.m,n,"[Invalid Chunked Response]"),vo(t),Rl(t))}he.hb=function(){if(this.g){var t=fr(this.g),e=this.g.fa();this.C<e.length&&(em(this),Gk(this,t,e),this.i&&t!=4&&Ch(this))}};function z3(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?tp:(n=Number(e.substring(n,i)),isNaN(n)?Py:(i+=1,i+n>e.length?tp:(e=e.substr(i,n),t.C=i+n,e)))}he.cancel=function(){this.I=!0,vo(this)};function Ch(t){t.V=Date.now()+t.O,Hk(t,t.O)}function Hk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Eh(Sn(t.gb,t),e)}function em(t){t.B&&(Ie.clearTimeout(t.B),t.B=null)}he.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?($3(this.j,this.A),this.K!=2&&(Zl(),Mn(17)),vo(this),this.o=2,Rl(this)):Hk(this,this.V-t)};function Rl(t){t.l.G==0||t.I||mR(t.l,t)}function vo(t){em(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,ib(t.T),Fk(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function My(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Ly(n.h,t))){if(!t.J&&Ly(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)rp(n),rm(n);else break e;fb(n),Mn(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Eh(Sn(n.cb,n),6e3));if(1>=tR(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else yo(n,11)}else if((t.J||n.g==t)&&rp(n),!Zf(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let f=s[e];if(n.T=f[0],f=f[1],n.G==2)if(f[0]=="c"){n.I=f[1],n.ka=f[2];const g=f[3];g!=null&&(n.ma=g,n.j.info("VER="+n.ma));const v=f[4];v!=null&&(n.Ca=v,n.j.info("SVER="+n.Ca));const y=f[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const I=t.g;if(I){const A=I.g?I.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var o=i.h;o.g||A.indexOf("spdy")==-1&&A.indexOf("quic")==-1&&A.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(cb(o,o.h),o.h=null))}if(i.D){const b=I.g?I.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(i.za=b,ft(i.F,i.D,b))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var c=t;if(i.sa=yR(i,i.H?i.ka:null,i.V),c.J){nR(i.h,c);var l=c,d=i.J;d&&l.setTimeout(d),l.B&&(em(l),Ch(l)),i.g=c}else fR(i);0<n.i.length&&sm(n)}else f[0]!="stop"&&f[0]!="close"||yo(n,7);else n.G==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?yo(n,7):db(n):f[0]!="noop"&&n.l&&n.l.wa(f),n.A=0)}}Zl(4)}catch{}}function G3(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zp(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function H3(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Wk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=H3(t),i=G3(t),s=i.length,o=0;o<s;o++)e.call(void 0,i[o],n&&n[o],t)}var Yk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var o=t[n].substring(0,i);s=t[n].substring(i+1)}else o=t[n];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function To(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof To){this.h=e!==void 0?e:t.h,np(this,t.j),this.s=t.s,this.g=t.g,ip(this,t.m),this.l=t.l,e=t.i;var n=new eh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YS(this,n),this.o=t.o}else t&&(n=String(t).match(Yk))?(this.h=!!e,np(this,n[1]||"",!0),this.s=wl(n[2]||""),this.g=wl(n[3]||"",!0),ip(this,n[4]),this.l=wl(n[5]||"",!0),YS(this,n[6]||"",!0),this.o=wl(n[7]||"")):(this.h=!!e,this.i=new eh(null,this.h))}To.prototype.toString=function(){var t=[],e=this.j;e&&t.push(bl(e,QS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(bl(e,QS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(bl(n,n.charAt(0)=="/"?J3:Q3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",bl(n,Z3)),t.join("")};function Ir(t){return new To(t)}function np(t,e,n){t.j=n?wl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ip(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YS(t,e,n){e instanceof eh?(t.i=e,eV(t.i,t.h)):(n||(e=bl(e,X3)),t.i=new eh(e,t.h))}function ft(t,e,n){t.i.set(e,n)}function tm(t){return ft(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function wl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Y3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Y3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var QS=/[#\/\?@]/g,Q3=/[#\?:]/g,J3=/[#\?]/g,X3=/[#\?@]/g,Z3=/#/g;function eh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Rs(t){t.g||(t.g=new Map,t.h=0,t.i&&W3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}he=eh.prototype;he.add=function(t,e){Rs(this),this.i=null,t=Bc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Qk(t,e){Rs(t),e=Bc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Jk(t,e){return Rs(t),e=Bc(t,e),t.g.has(e)}he.forEach=function(t,e){Rs(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};he.oa=function(){Rs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let o=0;o<s.length;o++)n.push(e[i])}return n};he.W=function(t){Rs(this);let e=[];if(typeof t=="string")Jk(this,t)&&(e=e.concat(this.g.get(Bc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};he.set=function(t,e){return Rs(this),this.i=null,t=Bc(this,t),Jk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};he.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Xk(t,e,n){Qk(t,e),0<n.length&&(t.i=null,t.g.set(Bc(t,e),Yw(n)),t.h+=n.length)}he.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var s=o;c[i]!==""&&(s+="="+encodeURIComponent(String(c[i]))),t.push(s)}}return this.i=t.join("&")};function Bc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function eV(t,e){e&&!t.j&&(Rs(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(Qk(this,i),Xk(this,s,n))},t)),t.j=e}var tV=class{constructor(e,n){this.h=e,this.g=n}};function Zk(t){this.l=t||nV,Ie.PerformanceNavigationTiming?(t=Ie.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ie.g&&Ie.g.Ga&&Ie.g.Ga()&&Ie.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nV=10;function eR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function tR(t){return t.h?1:t.g?t.g.size:0}function Ly(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function cb(t,e){t.g?t.g.add(e):t.h=e}function nR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Zk.prototype.cancel=function(){if(this.i=iR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function iR(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Yw(t.i)}function ub(){}ub.prototype.stringify=function(t){return Ie.JSON.stringify(t,void 0)};ub.prototype.parse=function(t){return Ie.JSON.parse(t,void 0)};function iV(){this.g=new ub}function rV(t,e,n){const i=n||"";try{Wk(t,function(s,o){let c=s;Ih(s)&&(c=nb(s)),e.push(i+o+"="+encodeURIComponent(c))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function sV(t,e){const n=new Qp;if(Ie.Image){const i=new Image;i.onload=mf(vf,n,i,"TestLoadImage: loaded",!0,e),i.onerror=mf(vf,n,i,"TestLoadImage: error",!1,e),i.onabort=mf(vf,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=mf(vf,n,i,"TestLoadImage: timeout",!1,e),Ie.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function vf(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function Ah(t){this.l=t.ac||null,this.j=t.jb||!1}In(Ah,sb);Ah.prototype.g=function(){return new nm(this.l,this.j)};Ah.prototype.i=function(t){return function(){return t}}({});function nm(t,e){an.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=lb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}In(nm,an);var lb=0;he=nm.prototype;he.open=function(t,e){if(this.readyState!=lb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,th(this)};he.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ie).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kh(this)),this.readyState=lb};he.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,th(this)),this.g&&(this.readyState=3,th(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rR(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function rR(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}he.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kh(this):th(this),this.readyState==3&&rR(this)}};he.Va=function(t){this.g&&(this.response=this.responseText=t,kh(this))};he.Ua=function(t){this.g&&(this.response=t,kh(this))};he.ga=function(){this.g&&kh(this)};function kh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,th(t)}he.setRequestHeader=function(t,e){this.v.append(t,e)};he.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};he.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function th(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(nm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var oV=Ie.JSON.parse;function kt(t){an.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sR,this.K=this.L=!1}In(kt,an);var sR="",aV=/^https?$/i,cV=["POST","PUT"];he=kt.prototype;he.Ka=function(t){this.L=t};he.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ny.g(),this.C=this.u?WS(this.u):WS(Ny),this.g.onreadystatechange=Sn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){JS(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),s=Ie.FormData&&t instanceof Ie.FormData,!(0<=Ik(cV,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of n)this.g.setRequestHeader(o,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cR(this),0<this.B&&((this.K=uV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.qa,this)):this.A=rb(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){JS(this,o)}};function uV(t){return mc&&C3()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}he.qa=function(){typeof Ww<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))};function JS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,oR(t),im(t)}function oR(t){t.D||(t.D=!0,yn(t,"complete"),yn(t,"error"))}he.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yn(this,"complete"),yn(this,"abort"),im(this))};he.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),im(this,!0)),kt.X.M.call(this)};he.Ha=function(){this.s||(this.F||this.v||this.l?aR(this):this.fb())};he.fb=function(){aR(this)};function aR(t){if(t.h&&typeof Ww<"u"&&(!t.C[1]||fr(t)!=4||t.aa()!=2)){if(t.v&&fr(t)==4)rb(t.Ha,0,t);else if(yn(t,"readystatechange"),fr(t)==4){t.h=!1;try{const l=t.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=l===0){var s=String(t.H).match(Yk)[1]||null;if(!s&&Ie.self&&Ie.self.location){var o=Ie.self.location.protocol;s=o.substr(0,o.length-1)}i=!aV.test(s?s.toLowerCase():"")}n=i}if(n)yn(t,"complete"),yn(t,"success");else{t.m=6;try{var c=2<fr(t)?t.g.statusText:""}catch{c=""}t.j=c+" ["+t.aa()+"]",oR(t)}}finally{im(t)}}}}function im(t,e){if(t.g){cR(t);const n=t.g,i=t.C[0]?Xf:null;t.g=null,t.C=null,e||yn(t,"ready");try{n.onreadystatechange=i}catch{}}}function cR(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ie.clearTimeout(t.A),t.A=null)}function fr(t){return t.g?t.g.readyState:0}he.aa=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}};he.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};he.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),oV(e)}};function XS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case sR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}he.Ea=function(){return this.m};he.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function uR(t){let e="";return Jw(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function hb(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=uR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ft(t,e,n))}function sl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function lR(t){this.Ca=0,this.i=[],this.j=new Qp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=sl("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=sl("baseRetryDelayMs",5e3,t),this.bb=sl("retryDelaySeedMs",1e4,t),this.$a=sl("forwardChannelMaxRetries",2,t),this.ta=sl("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Zk(t&&t.concurrentRequestLimit),this.Fa=new iV,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}he=lR.prototype;he.ma=8;he.G=1;function db(t){if(hR(t),t.G==3){var e=t.U++,n=Ir(t.F);ft(n,"SID",t.I),ft(n,"RID",e),ft(n,"TYPE","terminate"),Rh(t,n),e=new Th(t,t.j,e,void 0),e.K=2,e.v=tm(Ir(n)),n=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(n=Ie.navigator.sendBeacon(e.v.toString(),"")),!n&&Ie.Image&&(new Image().src=e.v,n=!0),n||(e.g=wR(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ch(e)}vR(t)}function rm(t){t.g&&(pb(t),t.g.cancel(),t.g=null)}function hR(t){rm(t),t.u&&(Ie.clearTimeout(t.u),t.u=null),rp(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ie.clearTimeout(t.m),t.m=null)}function sm(t){eR(t.h)||t.m||(t.m=!0,Pk(t.Ja,t),t.C=0)}function lV(t,e){return tR(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Eh(Sn(t.Ja,t,e),gR(t,t.C)),t.C++,!0)}he.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Th(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=Tk(o),Ck(o,this.S)):o=this.S),this.o!==null||this.N||(s.H=o,o=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=dR(this,s,e),n=Ir(this.F),ft(n,"RID",t),ft(n,"CVER",22),this.D&&ft(n,"X-HTTP-Session-Id",this.D),Rh(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(uR(o)))+"&"+e:this.o&&hb(n,this.o,o)),cb(this.h,s),this.Ya&&ft(n,"TYPE","init"),this.O?(ft(n,"$req",e),ft(n,"SID","null"),s.Z=!0,Oy(s,n,null)):Oy(s,n,e),this.G=2}}else this.G==3&&(t?ZS(this,t):this.i.length==0||eR(this.h)||ZS(this))};function ZS(t,e){var n;e?n=e.m:n=t.U++;const i=Ir(t.F);ft(i,"SID",t.I),ft(i,"RID",n),ft(i,"AID",t.T),Rh(t,i),t.o&&t.s&&hb(i,t.o,t.s),n=new Th(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=dR(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),cb(t.h,n),Oy(n,i,e)}function Rh(t,e){t.ia&&Jw(t.ia,function(n,i){ft(e,i,n)}),t.l&&Wk({},function(n,i){ft(e,i,n)})}function dR(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Sn(t.l.Ra,t.l,t):null;e:{var s=t.i;let o=-1;for(;;){const c=["count="+n];o==-1?0<n?(o=s[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let l=!0;for(let d=0;d<n;d++){let f=s[d].h;const g=s[d].g;if(f-=o,0>f)o=Math.max(0,s[d].h-100),l=!1;else try{rV(g,c,"req"+f+"_")}catch{i&&i(g)}}if(l){i=c.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function fR(t){t.g||t.u||(t.Z=1,Pk(t.Ia,t),t.A=0)}function fb(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Eh(Sn(t.Ia,t),gR(t,t.A)),t.A++,!0)}he.Ia=function(){if(this.u=null,pR(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Eh(Sn(this.eb,this),t)}};he.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Mn(10),rm(this),pR(this))};function pb(t){t.B!=null&&(Ie.clearTimeout(t.B),t.B=null)}function pR(t){t.g=new Th(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Ir(t.sa);ft(e,"RID","rpc"),ft(e,"SID",t.I),ft(e,"CI",t.L?"0":"1"),ft(e,"AID",t.T),ft(e,"TYPE","xmlhttp"),Rh(t,e),t.o&&t.s&&hb(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=tm(Ir(e)),n.s=null,n.P=!0,Kk(n,t)}he.cb=function(){this.v!=null&&(this.v=null,rm(this),fb(this),Mn(19))};function rp(t){t.v!=null&&(Ie.clearTimeout(t.v),t.v=null)}function mR(t,e){var n=null;if(t.g==e){rp(t),pb(t),t.g=null;var i=2}else if(Ly(t.h,e))n=e.D,nR(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;i=Jp(),yn(i,new Bk(i,n)),sm(t)}else fR(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(i==1&&lV(t,e)||i==2&&fb(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:yo(t,5);break;case 4:yo(t,10);break;case 3:yo(t,6);break;default:yo(t,2)}}}function gR(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function yo(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Sn(t.kb,t);n||(n=new To("//www.google.com/images/cleardot.gif"),Ie.location&&Ie.location.protocol=="http"||np(n,"https"),tm(n)),sV(n.toString(),i)}else Mn(2);t.G=0,t.l&&t.l.va(e),vR(t),hR(t)}he.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function vR(t){if(t.G=0,t.la=[],t.l){const e=iR(t.h);(e.length!=0||t.i.length!=0)&&($S(t.la,e),$S(t.la,t.i),t.h.i.length=0,Yw(t.i),t.i.length=0),t.l.ua()}}function yR(t,e,n){var i=n instanceof To?Ir(n):new To(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),ip(i,i.m);else{var s=Ie.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new To(null,void 0);i&&np(o,i),e&&(o.g=e),s&&ip(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.za,n&&e&&ft(i,n,e),ft(i,"VER",t.ma),Rh(t,i),i}function wR(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new kt(new Ah({jb:!0})):new kt(t.ra),e.Ka(t.H),e}function bR(){}he=bR.prototype;he.xa=function(){};he.wa=function(){};he.va=function(){};he.ua=function(){};he.Ra=function(){};function sp(){if(mc&&!(10<=Number(A3)))throw Error("Environmental error: no available transport.")}sp.prototype.g=function(t,e){return new hi(t,e)};function hi(t,e){an.call(this),this.g=new lR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Zf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zf(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new jc(this)}In(hi,an);hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Mn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=yR(t,null,t.V),sm(t)};hi.prototype.close=function(){db(this.g)};hi.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=nb(t),t=n);e.i.push(new tV(e.ab++,t)),e.G==3&&sm(e)};hi.prototype.M=function(){this.g.l=null,delete this.j,db(this.g),delete this.g,hi.X.M.call(this)};function IR(t){ob.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}In(IR,ob);function _R(){ab.call(this),this.status=1}In(_R,ab);function jc(t){this.g=t}In(jc,bR);jc.prototype.xa=function(){yn(this.g,"a")};jc.prototype.wa=function(t){yn(this.g,new IR(t))};jc.prototype.va=function(t){yn(this.g,new _R)};jc.prototype.ua=function(){yn(this.g,"b")};sp.prototype.createWebChannel=sp.prototype.g;hi.prototype.send=hi.prototype.u;hi.prototype.open=hi.prototype.m;hi.prototype.close=hi.prototype.close;Xp.NO_ERROR=0;Xp.TIMEOUT=8;Xp.HTTP_ERROR=6;jk.COMPLETE="complete";$k.EventType=Sh;Sh.OPEN="a";Sh.CLOSE="b";Sh.ERROR="c";Sh.MESSAGE="d";an.prototype.listen=an.prototype.N;kt.prototype.listenOnce=kt.prototype.O;kt.prototype.getLastError=kt.prototype.Oa;kt.prototype.getLastErrorCode=kt.prototype.Ea;kt.prototype.getStatus=kt.prototype.aa;kt.prototype.getResponseJson=kt.prototype.Sa;kt.prototype.getResponseText=kt.prototype.fa;kt.prototype.send=kt.prototype.da;kt.prototype.setWithCredentials=kt.prototype.Ka;var hV=function(){return new sp},dV=function(){return Jp()},Bv=Xp,fV=jk,pV=Wo,eT={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},mV=Ah,yf=$k,gV=kt;const tT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c="9.19.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new bh("@firebase/firestore");function Fy(){return ws.logLevel}function vV(t){ws.setLogLevel(t)}function B(t,...e){if(ws.logLevel<=We.DEBUG){const n=e.map(mb);ws.debug(`Firestore (${$c}): ${t}`,...n)}}function Ot(t,...e){if(ws.logLevel<=We.ERROR){const n=e.map(mb);ws.error(`Firestore (${$c}): ${t}`,...n)}}function _r(t,...e){if(ws.logLevel<=We.WARN){const n=e.map(mb);ws.warn(`Firestore (${$c}): ${t}`,...n)}}function mb(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function de(t,e){t||re()}function yV(t,e){t||re()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class bV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IV{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new on;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new on,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},l=d=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new on)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string"),new ER(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new sn(e)}}class _V{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class EV{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new _V(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TV{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.T;return this.T=o.token,B("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?s(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.T=n.token,new SV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=CV(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function Ce(t,e){return t<e?-1:t>e?1:0}function gc(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}function TR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new mt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new mt(0,0))}static max(){return new me(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,i){n===void 0?n=0:n>e.length&&re(),i===void 0?i=e.length-n:i>e.length-n&&re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return nh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nh?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),c=n.get(s);if(o<c)return-1;if(o>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends nh{construct(e,n,i){return new $e(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const AV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends nh{construct(e,n,i){return new Mt(e,n,i)}static isValidIdentifier(e){return AV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new V(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new V(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(o(),s++)}if(o(),c)throw new V(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J($e.fromString(e))}static fromName(e){return new J($e.fromString(e).popFirst(5))}static empty(){return new J($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,i,s){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=s}}function Uy(t){return t.fields.find(e=>e.kind===2)}function so(t){return t.fields.filter(e=>e.kind!==2)}CR.UNKNOWN_ID=-1;class kV{constructor(e,n){this.fieldPath=e,this.kind=n}}class op{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new op(0,di.min())}}function AR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(i===1e9?new mt(n+1,0):new mt(n,i));return new di(s,J.empty(),e)}function kR(t){return new di(t.readTime,t.key,-1)}class di{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new di(me.min(),J.empty(),-1)}static max(){return new di(me.max(),J.empty(),-1)}}function gb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==RR)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,i)=>{n(e)})}static reject(e){return new k((n,i)=>{i(e)})}static waitFor(e){return new k((n,i)=>{let s=0,o=0,c=!1;e.forEach(l=>{++s,l.next(()=>{++o,c&&o===s&&n()},d=>i(d))}),c=!0,o===s&&n()})}static or(e){let n=k.resolve(!1);for(const i of e)n=n.next(s=>s?k.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new k((i,s)=>{const o=e.length,c=new Array(o);let l=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{c[f]=g,++l,l===o&&i(c)},g=>s(g))}})}static doWhile(e,n){return new k((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.R=new on,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{n.error?this.R.reject(new xl(e,n.error)):this.R.resolve()},this.transaction.onerror=i=>{const s=vb(i.target.error);this.R.reject(new xl(e,s))}}static open(e,n,i,s){try{return new om(n,e.transaction(s,i))}catch(o){throw new xl(n,o)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new xV(n)}}class xi{constructor(e,n,i){this.name=e,this.version=n,this.V=i,xi.S(bt())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),uo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pc())return!1;if(xi.C())return!0;const e=bt(),n=xi.S(e),i=0<n&&n<10,s=xi.N(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static O(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async $(e){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;n(c)},s.onblocked=()=>{i(new xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new V(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new V(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new xl(e,c))},s.onupgradeneeded=o=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.V.M(c,s.transaction,o.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,s){const o=n==="readonly";let c=0;for(;;){++c;try{this.db=await this.$(e);const l=om.open(this.db,e,o?"readonly":"readwrite",i),d=s(l).next(f=>(l.P(),f)).catch(f=>(l.abort(f),k.reject(f))).toPromise();return d.catch(()=>{}),await l.v,d}catch(l){const d=l,f=d.name!=="FirebaseError"&&c<3;if(B("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}class RV{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return uo(this.L.delete())}}class xl extends V{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ds(t){return t.name==="IndexedDbTransactionError"}class xV{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),uo(i)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),uo(this.store.count())}j(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const s=this.cursor(i),o=[];return this.W(s,(c,l)=>{o.push(l)}).next(()=>o)}{const s=this.store.getAll(i.range);return new k((o,c)=>{s.onerror=l=>{c(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new k((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}J(e,n){B("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.Y=!1;const s=this.cursor(i);return this.W(s,(o,c,l)=>l.delete())}Z(e,n){let i;n?i=e:(i={},n=e);const s=this.cursor(i);return this.W(s,n)}X(e){const n=this.cursor({});return new k((i,s)=>{n.onerror=o=>{const c=vb(o.target.error);s(c)},n.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(l=>{l?c.continue():i()}):i()}})}W(e,n){const i=[];return new k((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const l=c.target.result;if(!l)return void s();const d=new RV(l),f=n(l.primaryKey,l.value,d);if(f instanceof k){const g=f.catch(v=>(d.done(),k.reject(v)));i.push(g)}d.isDone?s():d.K===null?l.continue():l.continue(d.K)}}).next(()=>k.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function uo(t){return new k((e,n)=>{t.onsuccess=i=>{const s=i.target.result;e(s)},t.onerror=i=>{const s=vb(i.target.error);n(s)}})}let nT=!1;function vb(t){const e=xi.S(bt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nT||(nT=!0,setTimeout(()=>{throw i},0)),i}}return t}class DV{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){B("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{B("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Ds(n)?B("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await xs(n)}await this.et(6e4)})}}class NV{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const i=new Set;let s=n,o=!0;return k.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!i.has(c))return B("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,s).next(l=>{s-=l,i.add(c)});o=!1})).next(()=>n-s)}it(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,i).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(s,o)).next(l=>(B("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>c.size)}))}rt(e,n){let i=e;return n.changes.forEach((s,o)=>{const c=kR(o);gb(c,i)>0&&(i=c)}),new di(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Kn.ct=-1;function xh(t){return t==null}function ih(t){return t===0&&1/t==-1/0}function DR(t){return typeof t=="number"&&Number.isInteger(t)&&!ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iT(e)),e=PV(t.get(n),e);return iT(e)}function PV(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function iT(t){return t+""}function Wi(t){const e=t.length;if(de(e>=2),e===2)return de(t.charAt(0)===""&&t.charAt(1)===""),$e.emptyPath();const n=e-2,i=[];let s="";for(let o=0;o<e;){const c=t.indexOf("",o);switch((c<0||c>n)&&re(),t.charAt(c+1)){case"":const l=t.substring(o,c);let d;s.length===0?d=l:(s+=l,d=s,s=""),i.push(d);break;case"":s+=t.substring(o,c),s+="\0";break;case"":s+=t.substring(o,c+1);break;default:re()}o=c+2}return new $e(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){return[t,Fn(e)]}function NR(t,e,n){return[t,Fn(e),n]}const OV={},MV=["prefixPath","collectionGroup","readTime","documentId"],LV=["prefixPath","collectionGroup","documentId"],FV=["collectionGroup","readTime","prefixPath","documentId"],UV=["canonicalId","targetId"],VV=["targetId","path"],BV=["path","targetId"],jV=["collectionId","parent"],$V=["indexId","uid"],qV=["uid","sequenceNumber"],KV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zV=["indexId","uid","orderedDocumentKey"],GV=["userId","collectionPath","documentId"],HV=["userId","collectionPath","largestBatchId"],WV=["userId","collectionGroup","largestBatchId"],PR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YV=[...PR,"documentOverlays"],OR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MR=OR,QV=[...MR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends xR{constructor(e,n){super(),this.at=e,this.currentSequenceNumber=n}}function ln(t,e){const n=X(t);return xi.O(n.at,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wf(this.root,e,this.comparator,!0)}}class wf{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new mn(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(t,e,n,i,s){return this}insert(t,e,n){return new mn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oT(this.data.getIterator())}getIteratorFrom(e){return new oT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class oT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $a(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new st(Mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JV("Invalid base64 string: "+s):s}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const ZV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(de(!!t),typeof t=="string"){let e=0;const n=ZV.exec(t);if(de(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Do(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function FR(t){const e=t.mapValue.fields.__previous_value__;return yb(e)?FR(e):e}function rh(t){const e=bs(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n,i,s,o,c,l,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=l,this.useFetchStreams=d}}class Is{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Is("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Is&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Of={nullValue:"NULL_VALUE"};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yb(t)?4:UR(t)?9007199254740991:10:re()}function tr(t,e){if(t===e)return!0;const n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rh(t).isEqual(rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bs(i.timestampValue),c=bs(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Do(i.bytesValue).isEqual(Do(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=At(i.doubleValue),c=At(s.doubleValue);return o===c?ih(o)===ih(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return gc(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(sT(o)!==sT(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!tr(o[l],c[l])))return!1;return!0}(t,e);default:return re()}}function sh(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function _s(t,e){if(t===e)return 0;const n=No(t),i=No(e);if(n!==i)return Ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=At(s.integerValue||s.doubleValue),l=At(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return aT(t.timestampValue,e.timestampValue);case 4:return aT(rh(t),rh(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(s,o){const c=Do(s),l=Do(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){const f=Ce(c[d],l[d]);if(f!==0)return f}return Ce(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=Ce(At(s.latitude),At(o.latitude));return c!==0?c:Ce(At(s.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const c=s.values||[],l=o.values||[];for(let d=0;d<c.length&&d<l.length;++d){const f=_s(c[d],l[d]);if(f)return f}return Ce(c.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cs.mapValue&&o===cs.mapValue)return 0;if(s===cs.mapValue)return 1;if(o===cs.mapValue)return-1;const c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){const v=Ce(l[g],f[g]);if(v!==0)return v;const y=_s(c[l[g]],d[f[g]]);if(y!==0)return y}return Ce(l.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function aT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=bs(t),i=bs(e),s=Ce(n.seconds,i.seconds);return s!==0?s:Ce(n.nanos,i.nanos)}function vc(t){return By(t)}function By(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=bs(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Do(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,J.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",o=!0;for(const c of i.values||[])o?o=!1:s+=",",s+=By(c);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const l of s)c?c=!1:o+=",",o+=`${l}:${By(i.fields[l])}`;return o+"}"}(t.mapValue):re();var e,n}function Po(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jy(t){return!!t&&"integerValue"in t}function oh(t){return!!t&&"arrayValue"in t}function cT(t){return!!t&&"nullValue"in t}function uT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function Dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Dl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function tB(t){return"nullValue"in t?Of:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Po(Is.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:re()}function nB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Po(Is.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?cs:re()}function lT(t,e){const n=_s(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function hT(t,e){const n=_s(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=Mt.emptyPath(),i={},s=[];e.forEach((c,l)=>{if(!n.isImmediateParentOf(l)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=l.popLast()}c?i[l.lastSegment()]=Dl(c):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Yo(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new gn(Dl(this.value))}}function VR(t){const e=[];return Yo(t.fields,(n,i)=>{const s=new Mt([n]);if(Mf(i)){const o=VR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,i,s,o,c,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=l}static newInvalidDocument(e){return new lt(e,0,me.min(),me.min(),me.min(),gn.empty(),0)}static newFoundDocument(e,n,i,s){return new lt(e,1,n,me.min(),i,s,0)}static newNoDocument(e,n){return new lt(e,2,n,me.min(),me.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,me.min(),me.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.position=e,this.inclusive=n}}function dT(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],c=t.position[s];if(o.field.isKeyField()?i=J.comparator(J.fromName(c.referenceValue),n.key):i=_s(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function fT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function iB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{}class Ue extends BR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new rB(e,n,i):n==="array-contains"?new aB(e,i):n==="in"?new GR(e,i):n==="not-in"?new cB(e,i):n==="array-contains-any"?new uB(e,i):new Ue(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new sB(e,i):new oB(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_s(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(_s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class rt extends BR{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new rt(e,n)}matches(e){return yc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function yc(t){return t.op==="and"}function $y(t){return t.op==="or"}function wb(t){return jR(t)&&yc(t)}function jR(t){for(const e of t.filters)if(e instanceof rt)return!1;return!0}function qy(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+vc(t.value);if(wb(t))return t.filters.map(e=>qy(e)).join(",");{const e=t.filters.map(n=>qy(n)).join(",");return`${t.op}(${e})`}}function $R(t,e){return t instanceof Ue?function(n,i){return i instanceof Ue&&n.op===i.op&&n.field.isEqual(i.field)&&tr(n.value,i.value)}(t,e):t instanceof rt?function(n,i){return i instanceof rt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,c)=>s&&$R(o,i.filters[c]),!0):!1}(t,e):void re()}function qR(t,e){const n=t.filters.concat(e);return rt.create(n,t.op)}function KR(t){return t instanceof Ue?function(e){return`${e.field.canonicalString()} ${e.op} ${vc(e.value)}`}(t):t instanceof rt?function(e){return e.op.toString()+" {"+e.getFilters().map(KR).join(" ,")+"}"}(t):"Filter"}class rB extends Ue{constructor(e,n,i){super(e,n,i),this.key=J.fromName(i.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class sB extends Ue{constructor(e,n){super(e,"in",n),this.keys=zR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oB extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=zR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>J.fromName(i.referenceValue))}class aB extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oh(n)&&sh(n.arrayValue,this.value)}}class GR extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sh(this.value.arrayValue,n)}}class cB extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sh(this.value.arrayValue,n)}}class uB extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>sh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n=null,i=[],s=[],o=null,c=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=l,this.ft=null}}function Ky(t,e=null,n=[],i=[],s=null,o=null,c=null){return new lB(t,e,n,i,s,o,c)}function Oo(t){const e=X(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>qy(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>vc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>vc(i)).join(",")),e.ft=n}return e.ft}function Dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$R(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fT(t.startAt,e.startAt)&&fT(t.endAt,e.endAt)}function ap(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function cp(t,e){return t.filters.filter(n=>n instanceof Ue&&n.field.isEqual(e))}function pT(t,e,n){let i=Of,s=!0;for(const o of cp(t,e)){let c=Of,l=!0;switch(o.op){case"<":case"<=":c=tB(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,l=!1;break;case"!=":case"not-in":c=Of}lT({value:i,inclusive:s},{value:c,inclusive:l})<0&&(i=c,s=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const c=n.position[o];lT({value:i,inclusive:s},{value:c,inclusive:n.inclusive})<0&&(i=c,s=n.inclusive);break}}return{value:i,inclusive:s}}function mT(t,e,n){let i=cs,s=!0;for(const o of cp(t,e)){let c=cs,l=!0;switch(o.op){case">=":case">":c=nB(o.value),l=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,l=!1;break;case"!=":case"not-in":c=cs}hT({value:i,inclusive:s},{value:c,inclusive:l})>0&&(i=c,s=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const c=n.position[o];hT({value:i,inclusive:s},{value:c,inclusive:n.inclusive})>0&&(i=c,s=n.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n=null,i=[],s=[],o=null,c="F",l=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=l,this.endAt=d,this.dt=null,this.wt=null,this.startAt,this.endAt}}function HR(t,e,n,i,s,o,c,l){return new kr(t,e,n,i,s,o,c,l)}function qc(t){return new kr(t)}function gT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function am(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Ib(t){return t.collectionGroup!==null}function Co(t){const e=X(t);if(e.dt===null){e.dt=[];const n=am(e),i=bb(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new sc(n)),e.dt.push(new sc(Mt.keyField(),"asc"));else{let s=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(s=!0);if(!s){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new sc(Mt.keyField(),o))}}}return e.dt}function Jn(t){const e=X(t);if(!e.wt)if(e.limitType==="F")e.wt=Ky(e.path,e.collectionGroup,Co(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of Co(e)){const c=o.dir==="desc"?"asc":"desc";n.push(new sc(o.field,c))}const i=e.endAt?new Es(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Es(e.startAt.position,e.startAt.inclusive):null;e.wt=Ky(e.path,e.collectionGroup,n,e.filters,e.limit,i,s)}return e.wt}function zy(t,e){e.getFirstInequalityField(),am(t);const n=t.filters.concat([e]);return new kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function up(t,e,n){return new kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nh(t,e){return Dh(Jn(t),Jn(e))&&t.limitType===e.limitType}function WR(t){return`${Oo(Jn(t))}|lt:${t.limitType}`}function Gy(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>KR(i)).join(", ")}]`),xh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>vc(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>vc(i)).join(",")),`Target(${n})`}(Jn(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):J.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Co(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,c){const l=dT(s,o,c);return s.inclusive?l<=0:l<0}(n.startAt,Co(n),i)||n.endAt&&!function(s,o,c){const l=dT(s,o,c);return s.inclusive?l>=0:l>0}(n.endAt,Co(n),i))}(t,e)}function YR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QR(t){return(e,n)=>{let i=!1;for(const s of Co(t)){const o=hB(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function hB(t,e,n){const i=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,c){const l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?_s(l,d):re()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return LR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=new Rt(J.comparator);function Gn(){return dB}const JR=new Rt(J.comparator);function Il(...t){let e=JR;for(const n of t)e=e.insert(n.key,n);return e}function XR(t){let e=JR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Yi(){return Nl()}function ZR(){return Nl()}function Nl(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const fB=new Rt(J.comparator),pB=new st(J.comparator);function Ae(...t){let e=pB;for(const n of t)e=e.add(n);return e}const mB=new st(Ce);function cm(){return mB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function tx(t){return{integerValue:""+t}}function nx(t,e){return DR(e)?tx(e):ex(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function gB(t,e,n){return t instanceof wc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Mo?rx(t,e):t instanceof Lo?sx(t,e):function(i,s){const o=ix(i,s),c=vT(o)+vT(i._t);return jy(o)&&jy(i._t)?tx(c):ex(i.serializer,c)}(t,e)}function vB(t,e,n){return t instanceof Mo?rx(t,e):t instanceof Lo?sx(t,e):n}function ix(t,e){return t instanceof bc?jy(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class wc extends um{}class Mo extends um{constructor(e){super(),this.elements=e}}function rx(t,e){const n=ox(e);for(const i of t.elements)n.some(s=>tr(s,i))||n.push(i);return{arrayValue:{values:n}}}class Lo extends um{constructor(e){super(),this.elements=e}}function sx(t,e){let n=ox(e);for(const i of t.elements)n=n.filter(s=>!tr(s,i));return{arrayValue:{values:n}}}class bc extends um{constructor(e,n){super(),this.serializer=e,this._t=n}}function vT(t){return At(t.integerValue||t.doubleValue)}function ox(t){return oh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.field=e,this.transform=n}}function yB(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Mo&&i instanceof Mo||n instanceof Lo&&i instanceof Lo?gc(n.elements,i.elements,tr):n instanceof bc&&i instanceof bc?tr(n._t,i._t):n instanceof wc&&i instanceof wc}(t.transform,e.transform)}class wB{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function ax(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zc(t.key,pt.none()):new Kc(t.key,t.data,pt.none());{const n=t.data,i=gn.empty();let s=new st(Mt.comparator);for(let o of e.fields)if(!s.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new Rr(t.key,i,new zn(s.toArray()),pt.none())}}function bB(t,e,n){t instanceof Kc?function(i,s,o){const c=i.value.clone(),l=wT(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Rr?function(i,s,o){if(!Lf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=wT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cx(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pl(t,e,n,i){return t instanceof Kc?function(s,o,c,l){if(!Lf(s.precondition,o))return c;const d=s.value.clone(),f=bT(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Rr?function(s,o,c,l){if(!Lf(s.precondition,o))return c;const d=bT(s.fieldTransforms,l,o),f=o.data;return f.setAll(cx(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,o,c){return Lf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function IB(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=ix(i.transform,s||null);o!=null&&(n===null&&(n=gn.empty()),n.set(i.field,o))}return n||null}function yT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&gc(n,i,(s,o)=>yB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kc extends lm{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends lm{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function wT(t,e,n){const i=new Map;de(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],c=o.transform,l=e.data.field(o.field);i.set(o.field,vB(c,l,n[s]))}return i}function bT(t,e,n){const i=new Map;for(const s of t){const o=s.transform,c=n.data.field(s.field);i.set(s.field,gB(o,c,e))}return i}class zc extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _b extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&bB(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Pl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Pl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ZR();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let l=this.applyToLocalView(c,o.mutatedFields);l=n.has(s.key)?null:l;const d=ax(c,l);d!==null&&i.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&gc(this.mutations,e.mutations,(n,i)=>yT(n,i))&&gc(this.baseMutations,e.baseMutations,(n,i)=>yT(n,i))}}class Sb{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){de(e.mutations.length===i.length);let s=fB;const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new Sb(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,je;function ux(t){switch(t){default:return re();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function lx(t){if(t===void 0)return Ot("GRPC error has no .code"),x.UNKNOWN;switch(t){case qt.OK:return x.OK;case qt.CANCELLED:return x.CANCELLED;case qt.UNKNOWN:return x.UNKNOWN;case qt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case qt.INTERNAL:return x.INTERNAL;case qt.UNAVAILABLE:return x.UNAVAILABLE;case qt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case qt.NOT_FOUND:return x.NOT_FOUND;case qt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case qt.ABORTED:return x.ABORTED;case qt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case qt.DATA_LOSS:return x.DATA_LOSS;default:return re()}}(je=qt||(qt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return bf}static getOrCreateInstance(){return bf===null&&(bf=new Cb),bf}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let bf=null;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Mh(me.min(),s,cm(),Gn(),Ae())}}class Lh{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lh(i,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i,s){this.It=e,this.removedTargetIds=n,this.key=i,this.Tt=s}}class hx{constructor(e,n){this.targetId=e,this.Et=n}}class dx{constructor(e,n,i=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class IT{constructor(){this.At=0,this.Rt=ET(),this.vt=Yt.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return this.At!==0}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Ae(),n=Ae(),i=Ae();return this.Rt.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:re()}}),new Lh(this.vt,this.bt,e,n,i)}xt(){this.Pt=!1,this.Rt=ET()}Nt(e,n){this.Pt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class EB{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Gn(),this.qt=_T(),this.Ut=new st(Ce)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}zt(e){this.forEachTarget(e,n=>{const i=this.jt(n);switch(e.state){case 0:this.Wt(n)&&i.Dt(e.resumeToken);break;case 1:i.$t(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.$t(),i.Vt||this.removeTarget(n);break;case 3:this.Wt(n)&&(i.Mt(),i.Dt(e.resumeToken));break;case 4:this.Wt(n)&&(this.Ht(n),i.Dt(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((i,s)=>{this.Wt(s)&&n(s)})}Jt(e){var n;const i=e.targetId,s=e.Et.count,o=this.Yt(i);if(o){const c=o.target;if(ap(c))if(s===0){const l=new J(c.path);this.Qt(i,l,lt.newNoDocument(l,me.min()))}else de(s===1);else{const l=this.Zt(i);l!==s&&(this.Ht(i),this.Ut=this.Ut.add(i),(n=Cb.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch({localCacheCount:l,existenceFilterCount:e.Et.count}))}}}Xt(e){const n=new Map;this.Bt.forEach((o,c)=>{const l=this.Yt(c);if(l){if(o.current&&ap(l.target)){const d=new J(l.target.path);this.Lt.get(d)!==null||this.te(c,d)||this.Qt(c,d,lt.newNoDocument(d,e))}o.St&&(n.set(c,o.Ct()),o.xt())}});let i=Ae();this.qt.forEach((o,c)=>{let l=!0;c.forEachWhile(d=>{const f=this.Yt(d);return!f||f.purpose===2||(l=!1,!1)}),l&&(i=i.add(o))}),this.Lt.forEach((o,c)=>c.setReadTime(e));const s=new Mh(e,n,this.Ut,this.Lt,i);return this.Lt=Gn(),this.qt=_T(),this.Ut=new st(Ce),s}Gt(e,n){if(!this.Wt(e))return;const i=this.te(e,n.key)?2:0;this.jt(e).Nt(n.key,i),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,i){if(!this.Wt(e))return;const s=this.jt(e);this.te(e,n)?s.Nt(n,1):s.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),i&&(this.Lt=this.Lt.insert(n,i))}removeTarget(e){this.Bt.delete(e)}Zt(e){const n=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let n=this.Bt.get(e);return n||(n=new IT,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new st(Ce),this.qt=this.qt.insert(e,n)),n}Wt(e){const n=this.Yt(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new IT),this.Ft.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.Ft.getRemoteKeysForTarget(e).has(n)}}function _T(){return new Rt(J.comparator)}function ET(){return new Rt(J.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),TB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),CB=(()=>({and:"AND",or:"OR"}))();class AB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kB(t,e){return Ic(t,e.toTimestamp())}function Ft(t){return de(!!t),me.fromTimestamp(function(e){const n=bs(e);return new mt(n.seconds,n.nanos)}(t))}function Ab(t,e){return function(n){return new $e(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function px(t){const e=$e.fromString(t);return de(Ex(e)),e}function ah(t,e){return Ab(t.databaseId,e.path)}function Xi(t,e){const n=px(e);if(n.get(1)!==t.databaseId.projectId)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(gx(n))}function Hy(t,e){return Ab(t.databaseId,e)}function mx(t){const e=px(t);return e.length===4?$e.emptyPath():gx(e)}function ch(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gx(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ST(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function vx(t,e,n){const i=Xi(t,e.name),s=Ft(e.updateTime),o=e.createTime?Ft(e.createTime):me.min(),c=new gn({mapValue:{fields:e.fields}}),l=lt.newFoundDocument(i,s,o,c);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function RB(t,e){return"found"in e?function(n,i){de(!!i.found),i.found.name,i.found.updateTime;const s=Xi(n,i.found.name),o=Ft(i.found.updateTime),c=i.found.createTime?Ft(i.found.createTime):me.min(),l=new gn({mapValue:{fields:i.found.fields}});return lt.newFoundDocument(s,o,c,l)}(t,e):"missing"in e?function(n,i){de(!!i.missing),de(!!i.readTime);const s=Xi(n,i.missing),o=Ft(i.readTime);return lt.newNoDocument(s,o)}(t,e):re()}function xB(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string"),Yt.fromBase64String(f||"")):(de(f===void 0||f instanceof Uint8Array),Yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,l=c&&function(d){const f=d.code===void 0?x.UNKNOWN:lx(d.code);return new V(f,d.message||"")}(c);n=new dx(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Xi(t,i.document.name),o=Ft(i.document.updateTime),c=i.document.createTime?Ft(i.document.createTime):me.min(),l=new gn({mapValue:{fields:i.document.fields}}),d=lt.newFoundDocument(s,o,c,l),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Ff(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Xi(t,i.document),o=i.readTime?Ft(i.readTime):me.min(),c=lt.newNoDocument(s,o),l=i.removedTargetIds||[];n=new Ff([],l,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Xi(t,i.document),o=i.removedTargetIds||[];n=new Ff([],o,s,null)}else{if(!("filter"in e))return re();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,o=new _B(s),c=i.targetId;n=new hx(c,o)}}return n}function uh(t,e){let n;if(e instanceof Kc)n={update:ST(t,e.key,e.value)};else if(e instanceof zc)n={delete:ah(t,e.key)};else if(e instanceof Rr)n={update:ST(t,e.key,e.data),updateMask:LB(e.fieldMask)};else{if(!(e instanceof _b))return re();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const c=o.transform;if(c instanceof wc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bc)return{fieldPath:o.field.canonicalString(),increment:c._t};throw re()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function Wy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?pt.updateTime(Ft(s.updateTime)):s.exists!==void 0?pt.exists(s.exists):pt.none()}(e.currentDocument):pt.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(o,c){let l=null;if("setToServerValue"in c)de(c.setToServerValue==="REQUEST_TIME"),l=new wc;else if("appendMissingElements"in c){const f=c.appendMissingElements.values||[];l=new Mo(f)}else if("removeAllFromArray"in c){const f=c.removeAllFromArray.values||[];l=new Lo(f)}else"increment"in c?l=new bc(o,c.increment):re();const d=Mt.fromServerFormat(c.fieldPath);return new Oh(d,l)}(t,s)):[];if(e.update){e.update.name;const s=Xi(t,e.update.name),o=new gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(l){const d=l.fieldPaths||[];return new zn(d.map(f=>Mt.fromServerFormat(f)))}(e.updateMask);return new Rr(s,o,c,n,i)}return new Kc(s,o,n,i)}if(e.delete){const s=Xi(t,e.delete);return new zc(s,n)}if(e.verify){const s=Xi(t,e.verify);return new _b(s,n)}return re()}function DB(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ft(i.updateTime):Ft(s);return o.isEqual(me.min())&&(o=Ft(s)),new wB(o,i.transformResults||[])}(n,e))):[]}function yx(t,e){return{documents:[Hy(t,e.path)]}}function wx(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Hy(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hy(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(d){if(d.length!==0)return _x(rt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Wa(g.field),direction:PB(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=function(d,f){return d.useProto3Json||xh(f)?f:{value:f}}(t,e.limit);var l;return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),n}function bx(t){let e=mx(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){de(i===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(g){const v=Ix(g);return v instanceof rt&&wb(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=n.orderBy.map(g=>function(v){return new sc(Ya(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g)));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,xh(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(g){const v=!!g.before,y=g.values||[];return new Es(y,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,y=g.values||[];return new Es(y,v)}(n.endAt)),HR(e,s,c,o,l,"F",d,f)}function NB(t,e){const n=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return re()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ix(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ya(e.unaryFilter.field);return Ue.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ya(e.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ya(e.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ya(e.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(e){return Ue.create(Ya(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return rt.create(e.compositeFilter.filters.map(n=>Ix(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return re()}}(e.compositeFilter.op))}(t):re()}function PB(t){return SB[t]}function OB(t){return TB[t]}function MB(t){return CB[t]}function Wa(t){return{fieldPath:t.canonicalString()}}function Ya(t){return Mt.fromServerFormat(t.fieldPath)}function _x(t){return t instanceof Ue?function(e){if(e.op==="=="){if(uT(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NAN"}};if(cT(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(uT(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NAN"}};if(cT(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(e.field),op:OB(e.op),value:e.value}}}(t):t instanceof rt?function(e){const n=e.getFilters().map(i=>_x(i));return n.length===1?n[0]:{compositeFilter:{op:MB(e.op),filters:n}}}(t):re()}function LB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ex(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,i,s,o=me.min(),c=me.min(),l=Yt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.se=e}}function FB(t,e){let n;if(e.document)n=vx(t.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=J.fromSegments(e.noDocument.path),s=Uo(e.noDocument.readTime);n=lt.newNoDocument(i,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{const i=J.fromSegments(e.unknownDocument.path),s=Uo(e.unknownDocument.version);n=lt.newUnknownDocument(i,s)}}return e.readTime&&n.setReadTime(function(i){const s=new mt(i[0],i[1]);return me.fromTimestamp(s)}(e.readTime)),n}function TT(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:ah(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ic(s,o.version.toTimestamp()),createTime:Ic(s,o.createTime.toTimestamp())}}(t.se,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Fo(e.version)};else{if(!e.isUnknownDocument())return re();i.unknownDocument={path:n.path.toArray(),version:Fo(e.version)}}return i}function lp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uo(t){const e=new mt(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function lo(t,e){const n=(e.baseMutations||[]).map(o=>Wy(t.se,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const l=e.mutations[o+1];c.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map(o=>Wy(t.se,o)),s=mt.fromMillis(e.localWriteTimeMs);return new Eb(e.batchId,s,n,i)}function _l(t){const e=Uo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Uo(t.lastLimboFreeSnapshotVersion):me.min();let i;var s;return t.query.documents!==void 0?(de((s=t.query).documents.length===1),i=Jn(qc(mx(s.documents[0])))):i=function(o){return Jn(bx(o))}(t.query),new ps(i,t.targetId,0,t.lastListenSequenceNumber,e,n,Yt.fromBase64String(t.resumeToken))}function Tx(t,e){const n=Fo(e.snapshotVersion),i=Fo(e.lastLimboFreeSnapshotVersion);let s;s=ap(e.target)?yx(t.se,e.target):wx(t.se,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function kb(t){const e=bx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?up(e,e.limit,"L"):e}function jv(t,e){return new Tb(e.largestBatchId,Wy(t.se,e.overlayMutation))}function CT(t,e){const n=e.path.lastSegment();return[t,Fn(e.path.popLast()),n]}function AT(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Fo(i.readTime),documentKey:Fn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{getBundleMetadata(e,n){return kT(e).get(n).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Uo(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return kT(e).put({bundleId:(i=n).id,createTime:Fo(Ft(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return RT(e).get(n).next(i=>{if(i)return{name:(s=i).name,query:kb(s.bundledQuery),readTime:Uo(s.readTime)};var s})}saveNamedQuery(e,n){return RT(e).put(function(i){return{name:i.name,readTime:Fo(Ft(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function kT(t){return ln(t,"bundles")}function RT(t){return ln(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.serializer=e,this.userId=n}static ie(e,n){const i=n.uid||"";return new hm(e,i)}getOverlay(e,n){return ol(e).get(CT(this.userId,n)).next(i=>i?jv(this.serializer,i):null)}getOverlays(e,n){const i=Yi();return k.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){const s=[];return i.forEach((o,c)=>{const l=new Tb(n,c);s.push(this.re(e,l))}),k.waitFor(s)}removeOverlaysForBatchId(e,n,i){const s=new Set;n.forEach(c=>s.add(Fn(c.getCollectionPath())));const o=[];return s.forEach(c=>{const l=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(ol(e).J("collectionPathOverlayIndex",l))}),k.waitFor(o)}getOverlaysForCollection(e,n,i){const s=Yi(),o=Fn(n),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ol(e).j("collectionPathOverlayIndex",c).next(l=>{for(const d of l){const f=jv(this.serializer,d);s.set(f.getKey(),f)}return s})}getOverlaysForCollectionGroup(e,n,i,s){const o=Yi();let c;const l=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ol(e).Z({index:"collectionGroupOverlayIndex",range:l},(d,f,g)=>{const v=jv(this.serializer,f);o.size()<s||v.largestBatchId===c?(o.set(v.getKey(),v),c=v.largestBatchId):g.done()}).next(()=>o)}re(e,n){return ol(e).put(function(i,s,o){const[c,l,d]=CT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:uh(i.se,o.mutation)}}(this.serializer,this.userId,n))}}function ol(t){return ln(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){}oe(e,n){this.ue(e,n),n.ce()}ue(e,n){if("nullValue"in e)this.ae(n,5);else if("booleanValue"in e)this.ae(n,10),n.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(n,15),n.he(At(e.integerValue));else if("doubleValue"in e){const i=At(e.doubleValue);isNaN(i)?this.ae(n,13):(this.ae(n,15),ih(i)?n.he(0):n.he(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ae(n,20),typeof i=="string"?n.le(i):(n.le(`${i.seconds||""}`),n.he(i.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,n),this.de(n);else if("bytesValue"in e)this.ae(n,30),n.we(Do(e.bytesValue)),this.de(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.ae(n,45),n.he(i.latitude||0),n.he(i.longitude||0)}else"mapValue"in e?UR(e)?this.ae(n,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,n),this.de(n)):"arrayValue"in e?(this.ge(e.arrayValue,n),this.de(n)):re()}fe(e,n){this.ae(n,25),this.ye(e,n)}ye(e,n){n.le(e)}me(e,n){const i=e.fields||{};this.ae(n,55);for(const s of Object.keys(i))this.fe(s,n),this.ue(i[s],n)}ge(e,n){const i=e.values||[];this.ae(n,50);for(const s of i)this.ue(s,n)}_e(e,n){this.ae(n,37),J.fromName(e).path.forEach(i=>{this.ae(n,60),this.ye(i,n)})}ae(e,n){e.he(n)}de(e){e.he(2)}}ho.pe=new ho;function VB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function xT(t){const e=64-function(n){let i=0;for(let s=0;s<8;++s){const o=VB(255&n[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class BB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Te(i.value),i=n.next();this.Ee()}Ae(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Re(i.value),i=n.next();this.ve()}be(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{const s=n.codePointAt(0);this.Te(240|s>>>18),this.Te(128|63&s>>>12),this.Te(128|63&s>>>6),this.Te(128|63&s)}}this.Ee()}Pe(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{const s=n.codePointAt(0);this.Re(240|s>>>18),this.Re(128|63&s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s)}}this.ve()}Ve(e){const n=this.Se(e),i=xT(n);this.De(1+i),this.buffer[this.position++]=255&i;for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Ce(e){const n=this.Se(e),i=xT(n);this.De(1+i),this.buffer[this.position++]=~(255&i);for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let s=1;s<n.length;++s)n[s]^=i?255:0;return n}Te(e){const n=255&e;n===0?(this.Ne(0),this.Ne(255)):n===255?(this.Ne(255),this.Ne(0)):this.Ne(n)}Re(e){const n=255&e;n===0?(this.Oe(0),this.Oe(255)):n===255?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class jB{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class $B{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class al{constructor(){this.Me=new BB,this.Fe=new jB(this.Me),this.Be=new $B(this.Me)}seed(e){this.Me.seed(e)}Le(e){return e===0?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,i,s){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=s}qe(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new fo(this.indexId,this.documentKey,this.arrayValue,i)}}function Xr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=DT(t.arrayValue,e.arrayValue),n!==0?n:(n=DT(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function DT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const n of e.filters){const i=n;i.isInequality()?this.Ge=i:this.Ke.push(i)}}Qe(e){de(e.collectionGroup===this.collectionId);const n=Uy(e);if(n!==void 0&&!this.ze(n))return!1;const i=so(e);let s=0,o=0;for(;s<i.length&&this.ze(i[s]);++s);if(s===i.length)return!0;if(this.Ge!==void 0){const c=i[s];if(!this.je(this.Ge,c)||!this.We(this.Ue[o++],c))return!1;++s}for(;s<i.length;++s){const c=i[s];if(o>=this.Ue.length||!this.We(this.Ue[o++],c))return!1}return!0}ze(e){for(const n of this.Ke)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){var e,n;if(de(t instanceof Ue||t instanceof rt),t instanceof Ue){if(t instanceof GR){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ue.create(t.field,"==",o)))||[];return rt.create(s,"or")}return t}const i=t.filters.map(s=>Cx(s));return rt.create(i,t.op)}function KB(t){if(t.getFilters().length===0)return[];const e=Jy(Cx(t));return de(Ax(e)),Yy(e)||Qy(e)?[e]:e.getFilters()}function Yy(t){return t instanceof Ue}function Qy(t){return t instanceof rt&&wb(t)}function Ax(t){return Yy(t)||Qy(t)||function(e){if(e instanceof rt&&$y(e)){for(const n of e.getFilters())if(!Yy(n)&&!Qy(n))return!1;return!0}return!1}(t)}function Jy(t){if(de(t instanceof Ue||t instanceof rt),t instanceof Ue)return t;if(t.filters.length===1)return Jy(t.filters[0]);const e=t.filters.map(i=>Jy(i));let n=rt.create(e,t.op);return n=hp(n),Ax(n)?n:(de(n instanceof rt),de(yc(n)),de(n.filters.length>1),n.filters.reduce((i,s)=>Rb(i,s)))}function Rb(t,e){let n;return de(t instanceof Ue||t instanceof rt),de(e instanceof Ue||e instanceof rt),n=t instanceof Ue?e instanceof Ue?function(i,s){return rt.create([i,s],"and")}(t,e):NT(t,e):e instanceof Ue?NT(e,t):function(i,s){if(de(i.filters.length>0&&s.filters.length>0),yc(i)&&yc(s))return qR(i,s.getFilters());const o=$y(i)?i:s,c=$y(i)?s:i,l=o.filters.map(d=>Rb(d,c));return rt.create(l,"or")}(t,e),hp(n)}function NT(t,e){if(yc(e))return qR(e,t.getFilters());{const n=e.filters.map(i=>Rb(t,i));return rt.create(n,"or")}}function hp(t){if(de(t instanceof Ue||t instanceof rt),t instanceof Ue)return t;const e=t.getFilters();if(e.length===1)return hp(e[0]);if(jR(t))return t;const n=e.map(s=>hp(s)),i=[];return n.forEach(s=>{s instanceof Ue?i.push(s):s instanceof rt&&(s.op===t.op?i.push(...s.filters):i.push(s))}),i.length===1?i[0]:rt.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.He=new xb}addToCollectionParentIndex(e,n){return this.He.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.He.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(di.min())}updateCollectionGroup(e,n,i){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class xb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new st($e.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new st($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Uint8Array(0);class GB{constructor(e,n){this.user=e,this.databaseId=n,this.Je=new xb,this.Ye=new Ns(i=>Oo(i),(i,s)=>Dh(i,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Je.has(n)){const i=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Je.add(n)});const o={collectionId:i,parent:Fn(s)};return PT(e).put(o)}return k.resolve()}getCollectionParents(e,n){const i=[],s=IDBKeyRange.bound([n,""],[TR(n),""],!1,!0);return PT(e).j(s).next(o=>{for(const c of o){if(c.collectionId!==n)break;i.push(Wi(c.parent))}return i})}addFieldIndex(e,n){const i=_f(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const o=i.add(s);if(n.indexState){const c=ul(e);return o.next(l=>{c.put(AT(l,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const i=_f(e),s=ul(e),o=cl(e);return i.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const i=cl(e);let s=!0;const o=new Map;return k.forEach(this.Ze(n),c=>this.Xe(e,c).next(l=>{s&&(s=!!l),o.set(c,l)})).next(()=>{if(s){let c=Ae();const l=[];return k.forEach(o,(d,f)=>{var g;B("IndexedDbIndexManager",`Using index ${g=d,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`} to execute ${Oo(n)}`);const v=function(O,Y){const z=Uy(Y);if(z===void 0)return null;for(const ne of cp(O,z.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null}(f,d),y=function(O,Y){const z=new Map;for(const ne of so(Y))for(const ee of cp(O,ne.fieldPath))switch(ee.op){case"==":case"in":z.set(ne.fieldPath.canonicalString(),ee.value);break;case"not-in":case"!=":return z.set(ne.fieldPath.canonicalString(),ee.value),Array.from(z.values())}return null}(f,d),I=function(O,Y){const z=[];let ne=!0;for(const ee of so(Y)){const H=ee.kind===0?pT(O,ee.fieldPath,O.startAt):mT(O,ee.fieldPath,O.startAt);z.push(H.value),ne&&(ne=H.inclusive)}return new Es(z,ne)}(f,d),A=function(O,Y){const z=[];let ne=!0;for(const ee of so(Y)){const H=ee.kind===0?mT(O,ee.fieldPath,O.endAt):pT(O,ee.fieldPath,O.endAt);z.push(H.value),ne&&(ne=H.inclusive)}return new Es(z,ne)}(f,d),b=this.tn(d,f,I),S=this.tn(d,f,A),C=this.en(d,f,y),N=this.nn(d.indexId,v,b,I.inclusive,S,A.inclusive,C);return k.forEach(N,O=>i.H(O,n.limit).next(Y=>{Y.forEach(z=>{const ne=J.fromSegments(z.documentKey);c.has(ne)||(c=c.add(ne),l.push(ne))})}))}).next(()=>l)}return k.resolve(null)})}Ze(e){let n=this.Ye.get(e);return n||(e.filters.length===0?n=[e]:n=KB(rt.create(e.filters,"and")).map(i=>Ky(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,n),n)}nn(e,n,i,s,o,c,l){const d=(n!=null?n.length:1)*Math.max(i.length,o.length),f=d/(n!=null?n.length:1),g=[];for(let v=0;v<d;++v){const y=n?this.sn(n[v/f]):If,I=this.rn(e,y,i[v%f],s),A=this.on(e,y,o[v%f],c),b=l.map(S=>this.rn(e,y,S,!0));g.push(...this.createRange(I,A,b))}return g}rn(e,n,i,s){const o=new fo(e,J.empty(),n,i);return s?o:o.qe()}on(e,n,i,s){const o=new fo(e,J.empty(),n,i);return s?o.qe():o}Xe(e,n){const i=new qB(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let c=null;for(const l of o)i.Qe(l)&&(!c||l.fields.length>c.fields.length)&&(c=l);return c})}getIndexType(e,n){let i=2;const s=this.Ze(n);return k.forEach(s,o=>this.Xe(e,o).next(c=>{c?i!==0&&c.fields.length<function(l){let d=new st(Mt.comparator),f=!1;for(const g of l.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:d=d.add(v.field));for(const g of l.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(o)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&i===2?1:i)}un(e,n){const i=new al;for(const s of so(e)){const o=n.data.field(s.fieldPath);if(o==null)return null;const c=i.Le(s.kind);ho.pe.oe(o,c)}return i.$e()}sn(e){const n=new al;return ho.pe.oe(e,n.Le(0)),n.$e()}cn(e,n){const i=new al;return ho.pe.oe(Po(this.databaseId,n),i.Le(function(s){const o=so(s);return o.length===0?0:o[o.length-1].kind}(e))),i.$e()}en(e,n,i){if(i===null)return[];let s=[];s.push(new al);let o=0;for(const c of so(e)){const l=i[o++];for(const d of s)if(this.an(n,c.fieldPath)&&oh(l))s=this.hn(s,c,l);else{const f=d.Le(c.kind);ho.pe.oe(l,f)}}return this.ln(s)}tn(e,n,i){return this.en(e,n,i.position)}ln(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].$e();return n}hn(e,n,i){const s=[...e],o=[];for(const c of i.arrayValue.values||[])for(const l of s){const d=new al;d.seed(l.$e()),ho.pe.oe(c,d.Le(n.kind)),o.push(d)}return o}an(e,n){return!!e.filters.find(i=>i instanceof Ue&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=_f(e),s=ul(e);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next(o=>{const c=[];return k.forEach(o,l=>s.get([l.indexId,this.uid]).next(d=>{c.push(function(f,g){const v=g?new op(g.sequenceNumber,new di(Uo(g.readTime),new J(Wi(g.documentKey)),g.largestBatchId)):op.empty(),y=f.fields.map(([I,A])=>new kV(Mt.fromServerFormat(I),A));return new CR(f.indexId,f.collectionGroup,y,v)}(l,d))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Ce(i.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const s=_f(e),o=ul(e);return this.fn(e).next(c=>s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>k.forEach(l,d=>o.put(AT(d.indexId,this.user,c,i)))))}updateIndexEntries(e,n){const i=new Map;return k.forEach(n,(s,o)=>{const c=i.get(s.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(i.set(s.collectionGroup,l),k.forEach(l,d=>this.dn(e,s,d).next(f=>{const g=this.wn(o,d);return f.isEqual(g)?k.resolve():this._n(e,o,d,f,g)}))))})}mn(e,n,i,s){return cl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.cn(i,n.key),documentKey:n.key.path.toArray()})}gn(e,n,i,s){return cl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.cn(i,n.key),n.key.path.toArray()])}dn(e,n,i){const s=cl(e);let o=new st(Xr);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.cn(i,n)])},(c,l)=>{o=o.add(new fo(i.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>o)}wn(e,n){let i=new st(Xr);const s=this.un(n,e);if(s==null)return i;const o=Uy(n);if(o!=null){const c=e.data.field(o.fieldPath);if(oh(c))for(const l of c.arrayValue.values||[])i=i.add(new fo(n.indexId,e.key,this.sn(l),s))}else i=i.add(new fo(n.indexId,e.key,If,s));return i}_n(e,n,i,s,o){B("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const c=[];return function(l,d,f,g,v){const y=l.getIterator(),I=d.getIterator();let A=$a(y),b=$a(I);for(;A||b;){let S=!1,C=!1;if(A&&b){const N=f(A,b);N<0?C=!0:N>0&&(S=!0)}else A!=null?C=!0:S=!0;S?(g(b),b=$a(I)):C?(v(A),A=$a(y)):(A=$a(y),b=$a(I))}}(s,o,Xr,l=>{c.push(this.mn(e,n,i,l))},l=>{c.push(this.gn(e,n,i,l))}),k.waitFor(c)}fn(e){let n=1;return ul(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,o)=>{o.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((c,l)=>Xr(c,l)).filter((c,l,d)=>!l||Xr(c,d[l-1])!==0);const s=[];s.push(e);for(const c of i){const l=Xr(c,e),d=Xr(c,n);if(l===0)s[0]=e.qe();else if(l>0&&d<0)s.push(c),s.push(c.qe());else if(d>0)break}s.push(n);const o=[];for(let c=0;c<s.length;c+=2){if(this.yn(s[c],s[c+1]))return[];const l=[s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,If,[]],d=[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,If,[]];o.push(IDBKeyRange.bound(l,d))}return o}yn(e,n){return Xr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OT)}getMinOffset(e,n){return k.mapArray(this.Ze(n),i=>this.Xe(e,i).next(s=>s||re())).next(OT)}}function PT(t){return ln(t,"collectionParents")}function cl(t){return ln(t,"indexEntries")}function _f(t){return ln(t,"indexConfiguration")}function ul(t){return ln(t,"indexState")}function OT(t){de(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;gb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new di(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $n{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),o=[],c=IDBKeyRange.only(n.batchId);let l=0;const d=i.Z({range:c},(g,v,y)=>(l++,y.delete()));o.push(d.next(()=>{de(l===1)}));const f=[];for(const g of n.mutations){const v=NR(e,g.key.path,n.batchId);o.push(s.delete(v)),f.push(g.key)}return k.waitFor(o).next(()=>f)}function dp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(41943040,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class dm{constructor(e,n,i,s){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=s,this.pn={}}static ie(e,n,i,s){de(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new dm(o,n,i,s)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).Z({index:"userMutationsIndex",range:i},(s,o,c)=>{n=!1,c.done()}).next(()=>n)}addMutationBatch(e,n,i,s){const o=Qa(e),c=Zr(e);return c.add({}).next(l=>{de(typeof l=="number");const d=new Eb(l,n,i,s),f=function(y,I,A){const b=A.baseMutations.map(C=>uh(y.se,C)),S=A.mutations.map(C=>uh(y.se,C));return{userId:I,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:b,mutations:S}}(this.serializer,this.userId,d),g=[];let v=new st((y,I)=>Ce(y.canonicalString(),I.canonicalString()));for(const y of s){const I=NR(this.userId,y.key.path,l);v=v.add(y.key.path.popLast()),g.push(c.put(f)),g.push(o.put(I,OV))}return v.forEach(y=>{g.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.pn[l]=d.keys()}),k.waitFor(g).next(()=>d)})}lookupMutationBatch(e,n){return Zr(e).get(n).next(i=>i?(de(i.userId===this.userId),lo(this.serializer,i)):null)}In(e,n){return this.pn[n]?k.resolve(this.pn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const s=i.keys();return this.pn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Zr(e).Z({index:"userMutationsIndex",range:s},(c,l,d)=>{l.userId===this.userId&&(de(l.batchId>=i),o=lo(this.serializer,l)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Zr(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,o,c)=>{i=o.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).j("userMutationsIndex",n).next(i=>i.map(s=>lo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Pf(this.userId,n.path),s=IDBKeyRange.lowerBound(i),o=[];return Qa(e).Z({range:s},(c,l,d)=>{const[f,g,v]=c,y=Wi(g);if(f===this.userId&&n.path.isEqual(y))return Zr(e).get(v).next(I=>{if(!I)throw re();de(I.userId===this.userId),o.push(lo(this.serializer,I))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(Ce);const s=[];return n.forEach(o=>{const c=Pf(this.userId,o.path),l=IDBKeyRange.lowerBound(c),d=Qa(e).Z({range:l},(f,g,v)=>{const[y,I,A]=f,b=Wi(I);y===this.userId&&o.path.isEqual(b)?i=i.add(A):v.done()});s.push(d)}),k.waitFor(s).next(()=>this.Tn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1,o=Pf(this.userId,i),c=IDBKeyRange.lowerBound(o);let l=new st(Ce);return Qa(e).Z({range:c},(d,f,g)=>{const[v,y,I]=d,A=Wi(y);v===this.userId&&i.isPrefixOf(A)?A.length===s&&(l=l.add(I)):g.done()}).next(()=>this.Tn(e,l))}Tn(e,n){const i=[],s=[];return n.forEach(o=>{s.push(Zr(e).get(o).next(c=>{if(c===null)throw re();de(c.userId===this.userId),i.push(lo(this.serializer,c))}))}),k.waitFor(s).next(()=>i)}removeMutationBatch(e,n){return kx(e.at,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.En(n.batchId)}),k.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();const i=IDBKeyRange.lowerBound([this.userId]),s=[];return Qa(e).Z({range:i},(o,c,l)=>{if(o[0]===this.userId){const d=Wi(o[1]);s.push(d)}else l.done()}).next(()=>{de(s.length===0)})})}containsKey(e,n){return Rx(e,this.userId,n)}An(e){return xx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rx(t,e,n){const i=Pf(e,n.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return Qa(t).Z({range:o,Y:!0},(l,d,f)=>{const[g,v,y]=l;g===e&&v===s&&(c=!0),f.done()}).next(()=>c)}function Zr(t){return ln(t,"mutations")}function Qa(t){return ln(t,"documentMutations")}function xx(t){return ln(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Vo(0)}static bn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Pn(e).next(n=>{const i=new Vo(n.highestTargetId);return n.highestTargetId=i.next(),this.Vn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(n=>me.fromTimestamp(new mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Pn(e).next(s=>(s.highestListenSequenceNumber=n,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Vn(e,s)))}addTargetData(e,n){return this.Sn(e,n).next(()=>this.Pn(e).next(i=>(i.targetCount+=1,this.Dn(n,i),this.Vn(e,i))))}updateTargetData(e,n){return this.Sn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>qa(e).delete(n.targetId)).next(()=>this.Pn(e)).next(i=>(de(i.targetCount>0),i.targetCount-=1,this.Vn(e,i)))}removeTargets(e,n,i){let s=0;const o=[];return qa(e).Z((c,l)=>{const d=_l(l);d.sequenceNumber<=n&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>k.waitFor(o)).next(()=>s)}forEachTarget(e,n){return qa(e).Z((i,s)=>{const o=_l(s);n(o)})}Pn(e){return LT(e).get("targetGlobalKey").next(n=>(de(n!==null),n))}Vn(e,n){return LT(e).put("targetGlobalKey",n)}Sn(e,n){return qa(e).put(Tx(this.serializer,n))}Dn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Pn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Oo(n),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return qa(e).Z({range:s,index:"queryTargetsIndex"},(c,l,d)=>{const f=_l(l);Dh(n,f.target)&&(o=f,d.done())}).next(()=>o)}addMatchingKeys(e,n,i){const s=[],o=os(e);return n.forEach(c=>{const l=Fn(c.path);s.push(o.put({targetId:i,path:l})),s.push(this.referenceDelegate.addReference(e,i,c))}),k.waitFor(s)}removeMatchingKeys(e,n,i){const s=os(e);return k.forEach(n,o=>{const c=Fn(o.path);return k.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){const i=os(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),s=os(e);let o=Ae();return s.Z({range:i,Y:!0},(c,l,d)=>{const f=Wi(c[1]),g=new J(f);o=o.add(g)}).next(()=>o)}containsKey(e,n){const i=Fn(n.path),s=IDBKeyRange.bound([i],[TR(i)],!1,!0);let o=0;return os(e).Z({index:"documentTargetsIndex",Y:!0,range:s},([c,l],d,f)=>{c!==0&&(o++,f.done())}).next(()=>o>0)}ne(e,n){return qa(e).get(n).next(i=>i?_l(i):null)}}function qa(t){return ln(t,"targets")}function LT(t){return ln(t,"targetGlobal")}function os(t){return ln(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT([t,e],[n,i]){const s=Ce(t,n);return s===0?Ce(e,i):s}class WB{constructor(e){this.Cn=e,this.buffer=new st(FT),this.xn=0}Nn(){return++this.xn}kn(e){const n=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();FT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YB{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.On=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return this.On!==null}$n(e){B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.On=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ds(n)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await xs(n)}await this.$n(3e5)})}}class QB{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.Fn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return k.resolve(Kn.ct);const i=new WB(n);return this.Mn.forEachTarget(e,s=>i.kn(s.sequenceNumber)).next(()=>this.Mn.Bn(e,s=>i.kn(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Mn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(MT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MT):this.Ln(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,n){let i,s,o,c,l,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,l=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),Fy()<=We.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(l-c)+`ms
	Removed ${o} targets in `+(d-l)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,n){this.db=e,this.garbageCollector=function(i,s){return new QB(i,s)}(this,n)}Fn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}qn(e){let n=0;return this.Bn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Bn(e,n){return this.Un(e,(i,s)=>n(s))}addReference(e,n,i){return Ef(e,i)}removeReference(e,n,i){return Ef(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Ef(e,n)}Kn(e,n){return function(i,s){let o=!1;return xx(i).X(c=>Rx(i,c,s).next(l=>(l&&(o=!0),k.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Un(e,(c,l)=>{if(l<=n){const d=this.Kn(e,c).next(f=>{if(!f)return o++,i.getEntry(e,c).next(()=>(i.removeEntry(c,me.min()),os(e).delete([0,Fn(c.path)])))});s.push(d)}}).next(()=>k.waitFor(s)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Ef(e,n)}Un(e,n){const i=os(e);let s,o=Kn.ct;return i.Z({index:"documentTargetsIndex"},([c,l],{path:d,sequenceNumber:f})=>{c===0?(o!==Kn.ct&&n(new J(Wi(s)),o),o=f,s=d):o=Kn.ct}).next(()=>{o!==Kn.ct&&n(new J(Wi(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ef(t,e){return os(t).put(function(n,i){return{targetId:0,path:Fn(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return no(e).put(i)}removeEntry(e,n,i){return no(e).delete(function(s,o){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],lp(o),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Gn(e,i)))}getEntry(e,n){let i=lt.newInvalidDocument(n);return no(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ll(n))},(s,o)=>{i=this.Qn(n,o)}).next(()=>i)}zn(e,n){let i={size:0,document:lt.newInvalidDocument(n)};return no(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ll(n))},(s,o)=>{i={document:this.Qn(n,o),size:dp(o)}}).next(()=>i)}getEntries(e,n){let i=Gn();return this.jn(e,n,(s,o)=>{const c=this.Qn(s,o);i=i.insert(s,c)}).next(()=>i)}Wn(e,n){let i=Gn(),s=new Rt(J.comparator);return this.jn(e,n,(o,c)=>{const l=this.Qn(o,c);i=i.insert(o,l),s=s.insert(o,dp(c))}).next(()=>({documents:i,Hn:s}))}jn(e,n,i){if(n.isEmpty())return k.resolve();let s=new st(BT);n.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(ll(s.first()),ll(s.last())),c=s.getIterator();let l=c.getNext();return no(e).Z({index:"documentKeyIndex",range:o},(d,f,g)=>{const v=J.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;l&&BT(l,v)<0;)i(l,null),l=c.getNext();l&&l.isEqual(v)&&(i(l,f),l=c.hasNext()?c.getNext():null),l?g.G(ll(l)):g.done()}).next(()=>{for(;l;)i(l,null),l=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,n,i,s){const o=n.path,c=[o.popLast().toArray(),o.lastSegment(),lp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return no(e).j(IDBKeyRange.bound(c,l,!0)).next(d=>{let f=Gn();for(const g of d){const v=this.Qn(J.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Ph(n,v)||s.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,n,i,s){let o=Gn();const c=VT(n,i),l=VT(n,di.max());return no(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,l,!0)},(d,f,g)=>{const v=this.Qn(J.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()}).next(()=>o)}newChangeBuffer(e){return new ZB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return UT(e).get("remoteDocumentGlobalKey").next(n=>(de(!!n),n))}Gn(e,n){return UT(e).put("remoteDocumentGlobalKey",n)}Qn(e,n){if(n){const i=FB(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(me.min())))return i}return lt.newInvalidDocument(e)}}function Nx(t){return new XB(t)}class ZB extends Dx{constructor(e,n){super(),this.Jn=e,this.trackRemovals=n,this.Yn=new Ns(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const n=[];let i=0,s=new st((o,c)=>Ce(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const l=this.Yn.get(o);if(n.push(this.Jn.removeEntry(e,o,l.readTime)),c.isValidDocument()){const d=TT(this.Jn.serializer,c);s=s.add(o.path.popLast());const f=dp(d);i+=f-l.size,n.push(this.Jn.addEntry(e,o,d))}else if(i-=l.size,this.trackRemovals){const d=TT(this.Jn.serializer,c.convertToNoDocument(me.min()));n.push(this.Jn.addEntry(e,o,d))}}),s.forEach(o=>{n.push(this.Jn.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.Jn.updateMetadata(e,i)),k.waitFor(n)}getFromCache(e,n){return this.Jn.zn(e,n).next(i=>(this.Yn.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Jn.Wn(e,n).next(({documents:i,Hn:s})=>(s.forEach((o,c)=>{this.Yn.set(o,{size:c,readTime:i.get(o).readTime})}),i))}}function UT(t){return ln(t,"remoteDocumentGlobal")}function no(t){return ln(t,"remoteDocumentsV14")}function ll(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VT(t,e){const n=e.documentKey.path.toArray();return[t,lp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BT(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(s=Ce(n[o],i[o]),s)return s;return s=Ce(n.length,i.length),s||(s=Ce(n[n.length-2],i[i.length-2]),s||Ce(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Pl(i.mutation,s,zn.empty(),mt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ae()){const s=Yi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let c=Il();return o.forEach((l,d)=>{c=c.insert(l,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=Yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,l)=>{n.set(c,l)})})}computeViews(e,n,i,s){let o=Gn();const c=Nl(),l=Nl();return n.forEach((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Rr)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Pl(g.mutation,f,g.mutation.getFieldMask(),mt.now())):c.set(f.key,zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var v;return l.set(f,new e4(g,(v=c.get(f))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Nl();let s=new Rt((c,l)=>c-l),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const l of c)l.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=i.get(d)||zn.empty();g=l.applyToLocalView(f,g),i.set(d,g);const v=(s.get(l.batchId)||Ae()).add(d);s=s.insert(l.batchId,v)})}).next(()=>{const c=[],l=s.getReverseIterator();for(;l.hasNext();){const d=l.getNext(),f=d.key,g=d.value,v=ZR();g.forEach(y=>{if(!o.has(y)){const I=ax(n.get(y),i.get(y));I!==null&&v.set(y,I),o=o.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return k.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ib(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):k.resolve(Yi());let l=-1,d=o;return c.next(f=>k.forEach(f,(g,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(g)?k.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{d=d.insert(g,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ae())).next(g=>({batchId:l,changes:XR(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(i=>{let s=Il();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const s=n.collectionGroup;let o=Il();return this.indexManager.getCollectionParents(e,s).next(c=>k.forEach(c,l=>{const d=function(f,g){return new kr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s))).next(o=>{s.forEach((l,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,lt.newInvalidDocument(f)))});let c=Il();return o.forEach((l,d)=>{const f=s.get(l);f!==void 0&&Pl(f.mutation,d,zn.empty(),mt.now()),Ph(n,d)&&(c=c.insert(l,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return k.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var i;return this.Zn.set(n.id,{id:(i=n).id,version:i.version,createTime:Ft(i.createTime)}),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(i){return{name:i.name,query:kb(i.bundledQuery),readTime:Ft(i.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.overlays=new Rt(J.comparator),this.ts=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Yi();return k.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.re(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.ts.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.ts.delete(i)),k.resolve()}getOverlaysForCollection(e,n,i){const s=Yi(),o=n.length+1,c=new J(n.child("")),l=this.overlays.getIteratorFrom(c);for(;l.hasNext();){const d=l.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return k.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Rt((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=Yi(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const l=Yi(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>l.set(f,g)),!(l.size()>=s)););return k.resolve(l)}re(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.ts.get(s.largestBatchId).delete(i.key);this.ts.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Tb(n,i));let o=this.ts.get(n);o===void 0&&(o=Ae(),this.ts.set(n,o)),this.ts.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.es=new st(rn.ns),this.ss=new st(rn.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,n){const i=new rn(e,n);this.es=this.es.add(i),this.ss=this.ss.add(i)}os(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.us(new rn(e,n))}cs(e,n){e.forEach(i=>this.removeReference(i,n))}hs(e){const n=new J(new $e([])),i=new rn(n,e),s=new rn(n,e+1),o=[];return this.ss.forEachInRange([i,s],c=>{this.us(c),o.push(c.key)}),o}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const n=new J(new $e([])),i=new rn(n,e),s=new rn(n,e+1);let o=Ae();return this.ss.forEachInRange([i,s],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new rn(e,0),i=this.es.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class rn{constructor(e,n){this.key=e,this.ds=n}static ns(e,n){return J.comparator(e.key,n.key)||Ce(e.ds,n.ds)}static rs(e,n){return Ce(e.ds,n.ds)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new st(rn.ns)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Eb(o,n,i,s);this.mutationQueue.push(c);for(const l of s)this._s=this._s.add(new rn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return k.resolve(c)}lookupMutationBatch(e,n){return k.resolve(this.gs(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ys(i),o=s<0?0:s;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new rn(n,0),s=new rn(n,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([i,s],c=>{const l=this.gs(c.ds);o.push(l)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(Ce);return n.forEach(s=>{const o=new rn(s,0),c=new rn(s,Number.POSITIVE_INFINITY);this._s.forEachInRange([o,c],l=>{i=i.add(l.ds)})}),k.resolve(this.ps(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;J.isDocumentKey(o)||(o=o.child(""));const c=new rn(new J(o),0);let l=new st(Ce);return this._s.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(d.ds)),!0)},c),k.resolve(this.ps(l))}ps(e){const n=[];return e.forEach(i=>{const s=this.gs(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.Is(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this._s;return k.forEach(n.mutations,s=>{const o=new rn(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this._s=i})}En(e){}containsKey(e,n){const i=new rn(n,0),s=this._s.firstAfterOrEqual(i);return k.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Is(e,n){return this.ys(e)}ys(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}gs(e){const n=this.ys(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Ts=e,this.docs=new Rt(J.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,c=this.Ts(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let i=Gn();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():lt.newInvalidDocument(s))}),k.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Gn();const c=n.path,l=new J(c.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||gb(kR(g),i)<=0||(s.has(g.key)||Ph(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,i,s){re()}Es(e,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new s4(this)}getSize(e){return k.resolve(this.size)}}class s4 extends Dx{constructor(e){super(),this.Jn=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Jn.addEntry(e,s)):this.Jn.removeEntry(i)}),k.waitFor(n)}getFromCache(e,n){return this.Jn.getEntry(e,n)}getAllFromCache(e,n){return this.Jn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.persistence=e,this.As=new Ns(n=>Oo(n),Dh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Db,this.targetCount=0,this.bs=Vo.vn()}forEachTarget(e,n){return this.As.forEach((i,s)=>n(s)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Rs&&(this.Rs=n),k.resolve()}Sn(e){this.As.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.bs=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,n){return this.Sn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Sn(n),k.resolve()}removeTargetData(e,n){return this.As.delete(n.target),this.vs.hs(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.As.forEach((c,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.As.delete(c),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),k.waitFor(o).next(()=>s)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const i=this.As.get(n)||null;return k.resolve(i)}addMatchingKeys(e,n,i){return this.vs.os(n,i),k.resolve()}removeMatchingKeys(e,n,i){this.vs.cs(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.vs.hs(n),k.resolve()}getMatchingKeysForTargetId(e,n){const i=this.vs.fs(n);return k.resolve(i)}containsKey(e,n){return k.resolve(this.vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.Ps={},this.overlays={},this.Vs=new Kn(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new o4(this),this.indexManager=new zB,this.remoteDocumentCache=function(i){return new r4(i)}(i=>this.referenceDelegate.Cs(i)),this.serializer=new Sx(n),this.xs=new t4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new n4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Ps[e.toKey()];return i||(i=new i4(n,this.referenceDelegate),this.Ps[e.toKey()]=i),i}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);const s=new a4(this.Vs.next());return this.referenceDelegate.Ns(),i(s).next(o=>this.referenceDelegate.ks(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Os(e,n){return k.or(Object.values(this.Ps).map(i=>()=>i.containsKey(e,n)))}}class a4 extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.$s=new Db,this.Ms=null}static Fs(e){return new fm(e)}get Bs(){if(this.Ms)return this.Ms;throw re()}addReference(e,n,i){return this.$s.addReference(i,n),this.Bs.delete(i.toString()),k.resolve()}removeReference(e,n,i){return this.$s.removeReference(i,n),this.Bs.add(i.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Bs.add(n.toString()),k.resolve()}removeTarget(e,n){this.$s.hs(n.targetId).forEach(s=>this.Bs.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Bs.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ns(){this.Ms=new Set}ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Bs,i=>{const s=J.fromPath(i);return this.Ls(e,s).next(o=>{o||n.removeEntry(s,me.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ls(e,n).next(i=>{i?this.Bs.delete(n.toString()):this.Bs.add(n.toString())})}Cs(e){return 0}Ls(e,n){return k.or([()=>k.resolve(this.$s.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.serializer=e}M(e,n,i,s){const o=new om("createOrUpgrade",n);i<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rT,{unique:!0}),l.createObjectStore("documentMutations")}(e),jT(e),function(l){l.createObjectStore("remoteDocuments")}(e));let c=k.resolve();return i<3&&s>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),jT(e)),c=c.next(()=>function(l){const d=l.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(o))),i<4&&s>=4&&(i!==0&&(c=c.next(()=>function(l,d){return d.store("mutations").j().next(f=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rT,{unique:!0});const g=d.store("mutations"),v=f.map(y=>g.put(y));return k.waitFor(v)})}(e,o))),c=c.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&s>=5&&(c=c.next(()=>this.qs(o))),i<6&&s>=6&&(c=c.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Us(o)))),i<7&&s>=7&&(c=c.next(()=>this.Ks(o))),i<8&&s>=8&&(c=c.next(()=>this.Gs(e,o))),i<9&&s>=9&&(c=c.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&s>=10&&(c=c.next(()=>this.Qs(o))),i<11&&s>=11&&(c=c.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&s>=12&&(c=c.next(()=>{(function(l){const d=l.createObjectStore("documentOverlays",{keyPath:GV});d.createIndex("collectionPathOverlayIndex",HV,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",WV,{unique:!1})})(e)})),i<13&&s>=13&&(c=c.next(()=>function(l){const d=l.createObjectStore("remoteDocumentsV14",{keyPath:MV});d.createIndex("documentKeyIndex",LV),d.createIndex("collectionGroupIndex",FV)}(e)).next(()=>this.zs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&s>=14&&(c=c.next(()=>this.js(e,o))),i<15&&s>=15&&(c=c.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:$V}).createIndex("sequenceNumberIndex",qV,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:KV}).createIndex("documentKeyIndex",zV,{unique:!1})}(e))),c}Us(e){let n=0;return e.store("remoteDocuments").Z((i,s)=>{n+=dp(s)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next(s=>k.forEach(s,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(l=>k.forEach(l,d=>{de(d.userId===o.userId);const f=lo(this.serializer,d);return kx(e,o.userId,f).next(()=>{})}))}))}Ks(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const o=[];return i.Z((c,l)=>{const d=new $e(c),f=function(g){return[0,Fn(g)]}(d);o.push(n.get(f).next(g=>g?k.resolve():(v=>n.put({targetId:0,path:Fn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>k.waitFor(o))})}Gs(e,n){e.createObjectStore("collectionParents",{keyPath:jV});const i=n.store("collectionParents"),s=new xb,o=c=>{if(s.add(c)){const l=c.lastSegment(),d=c.popLast();return i.put({collectionId:l,parent:Fn(d)})}};return n.store("remoteDocuments").Z({Y:!0},(c,l)=>{const d=new $e(c);return o(d.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([c,l,d],f)=>{const g=Wi(l);return o(g.popLast())}))}Qs(e){const n=e.store("targets");return n.Z((i,s)=>{const o=_l(s),c=Tx(this.serializer,o);return n.put(c)})}zs(e,n){const i=n.store("remoteDocuments"),s=[];return i.Z((o,c)=>{const l=n.store("remoteDocumentsV14"),d=(f=c,f.document?new J($e.fromString(f.document.name).popFirst(5)):f.noDocument?J.fromSegments(f.noDocument.path):f.unknownDocument?J.fromSegments(f.unknownDocument.path):re()).path.toArray();var f;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(l.put(g))}).next(()=>k.waitFor(s))}js(e,n){const i=n.store("mutations"),s=Nx(this.serializer),o=new Ox(fm.Fs,this.serializer.se);return i.j().next(c=>{const l=new Map;return c.forEach(d=>{var f;let g=(f=l.get(d.userId))!==null&&f!==void 0?f:Ae();lo(this.serializer,d).keys().forEach(v=>g=g.add(v)),l.set(d.userId,g)}),k.forEach(l,(d,f)=>{const g=new sn(f),v=hm.ie(this.serializer,g),y=o.getIndexManager(g),I=dm.ie(g,this.serializer,y,o.referenceDelegate);return new Px(s,I,v,y).recalculateAndSaveOverlaysForDocumentKeys(new Vy(n,Kn.ct),d).next()})})}}function jT(t){t.createObjectStore("targetDocuments",{keyPath:VV}).createIndex("documentTargetsIndex",BV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",UV,{unique:!0}),t.createObjectStore("targetGlobal")}const $v="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Nb{constructor(e,n,i,s,o,c,l,d,f,g,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Ws=o,this.window=c,this.document=l,this.Hs=f,this.Js=g,this.Ys=v,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=y=>Promise.resolve(),!Nb.D())throw new V(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JB(this,s),this.si=n+"main",this.serializer=new Sx(d),this.ii=new xi(this.si,this.Ys,new c4(this.serializer)),this.Ds=new HB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Nx(this.serializer),this.xs=new UB,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,g===!1&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(x.FAILED_PRECONDITION,$v);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Kn(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){return this.ni=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(async()=>{this.started&&await this.oi()}))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(n=>{n||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(n=>this.isPrimary&&!n?this.di(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ds(e))return B("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return hl(e).get("owner").next(n=>k.resolve(this._i(n)))}mi(e){return Sf(e).delete(this.clientId)}async gi(){if(this.isPrimary&&!this.yi(this.ei,18e5)){this.ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=ln(n,"clientMetadata");return i.j().next(s=>{const o=this.pi(s,18e5),c=s.filter(l=>o.indexOf(l)===-1);return k.forEach(c,l=>i.delete(l.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ri)for(const n of e)this.ri.removeItem(this.Ii(n.clientId))}}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?k.resolve(!0):hl(e).get("owner").next(n=>{if(n!==null&&this.yi(n.leaseTimestampMs,5e3)&&!this.Ti(n.ownerId)){if(this._i(n)&&this.networkEnabled)return!0;if(!this._i(n)){if(!n.allowTabSynchronization)throw new V(x.FAILED_PRECONDITION,$v);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sf(e).j().next(i=>this.pi(i,5e3).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(o||c&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),await this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Vy(e,Kn.ct);return this.di(n).next(()=>this.mi(n))}),this.ii.close(),this.vi()}pi(e,n){return e.filter(i=>this.yi(i.updateTimeMs,n)&&!this.Ti(i.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Sf(e).j().next(n=>this.pi(n,18e5).map(i=>i.clientId)))}get started(){return this.Ss}getMutationQueue(e,n){return dm.ie(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GB(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return hm.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,n,i){B("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",o=(c=this.Ys)===15?QV:c===14?MR:c===13?OR:c===12?YV:c===11?PR:void re();var c;let l;return this.ii.runTransaction(e,s,o,d=>(l=new Vy(d,this.Vs?this.Vs.next():Kn.ct),n==="readwrite-primary"?this.li(l).next(f=>!!f||this.fi(l)).next(f=>{if(!f)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new V(x.FAILED_PRECONDITION,RR);return i(l)}).next(f=>this.wi(l).next(()=>f)):this.Pi(l).next(()=>i(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Pi(e){return hl(e).get("owner").next(n=>{if(n!==null&&this.yi(n.leaseTimestampMs,5e3)&&!this.Ti(n.ownerId)&&!this._i(n)&&!(this.Js||this.allowTabSynchronization&&n.allowTabSynchronization))throw new V(x.FAILED_PRECONDITION,$v)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hl(e).put("owner",n)}static D(){return xi.D()}di(e){const n=hl(e);return n.get("owner").next(i=>this._i(i)?(B("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}yi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}ui(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground=this.document.visibilityState==="visible")}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ei();const n=/(?:Version|Mobile)\/1[456]/;YF()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var n;try{const i=((n=this.ri)===null||n===void 0?void 0:n.getItem(this.Ii(e)))!==null;return B("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ot("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hl(t){return ln(t,"owner")}function Sf(t){return ln(t,"clientMetadata")}function Pb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Vi=i,this.Si=s}static Di(e,n){let i=Ae(),s=Ae();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ob(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.Ci=!1}initialize(e,n){this.xi=e,this.indexManager=n,this.Ci=!0}getDocumentsMatchingQuery(e,n,i,s){return this.Ni(e,n).next(o=>o||this.ki(e,n,s,i)).next(o=>o||this.Oi(e,n))}Ni(e,n){if(gT(n))return k.resolve(null);let i=Jn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=up(n,null,"F"),i=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=Ae(...o);return this.xi.getDocuments(e,c).next(l=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.$i(n,l);return this.Mi(n,f,c,d.readTime)?this.Ni(e,up(n,null,"F")):this.Fi(e,f,n,d)}))})))}ki(e,n,i,s){return gT(n)||s.isEqual(me.min())?this.Oi(e,n):this.xi.getDocuments(e,i).next(o=>{const c=this.$i(n,o);return this.Mi(n,c,i,s)?this.Oi(e,n):(Fy()<=We.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gy(n)),this.Fi(e,c,n,AR(s,-1)))})}$i(e,n){let i=new st(QR(e));return n.forEach((s,o)=>{Ph(e,o)&&(i=i.add(o))}),i}Mi(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Oi(e,n){return Fy()<=We.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Gy(n)),this.xi.getDocumentsMatchingQuery(e,n,di.min())}Fi(e,n,i,s){return this.xi.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,i,s){this.persistence=e,this.Bi=n,this.serializer=s,this.Li=new Rt(Ce),this.qi=new Ns(o=>Oo(o),Dh),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(i)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Px(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Li))}}function Lx(t,e,n,i){return new u4(t,e,n,i)}async function Fx(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Gi(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],l=[];let d=Ae();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(f=>({Qi:f,removedBatchIds:c,addedBatchIds:l}))})})}function l4(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ki.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){const g=d.batch,v=g.keys();let y=k.resolve();return v.forEach(I=>{y=y.next(()=>f.getEntry(l,I)).next(A=>{const b=d.docVersions.get(I);de(b!==null),A.version.compareTo(b)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=Ae();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function Ux(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ds.getLastRemoteSnapshotVersion(n))}function h4(t,e){const n=X(t),i=e.snapshotVersion;let s=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Ki.newChangeBuffer({trackRemovals:!0});s=n.Li;const l=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;l.push(n.Ds.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.Ds.addMatchingKeys(o,g.addedDocuments,v)));let I=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.has(v)?I=I.withResumeToken(Yt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,i)),s=s.insert(v,I),function(A,b,S){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,I,g)&&l.push(n.Ds.updateTargetData(o,I))});let d=Gn(),f=Ae();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),l.push(Vx(o,c,e.documentUpdates).next(g=>{d=g.zi,f=g.ji})),!i.isEqual(me.min())){const g=n.Ds.getLastRemoteSnapshotVersion(o).next(v=>n.Ds.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(g)}return k.waitFor(l).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.Li=s,o))}function Vx(t,e,n){let i=Ae(),s=Ae();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let c=Gn();return n.forEach((l,d)=>{const f=o.get(l);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),d.isNoDocument()&&d.version.isEqual(me.min())?(e.removeEntry(l,d.readTime),c=c.insert(l,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(l,d)):B("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",d.version)}),{zi:c,ji:s}})}function d4(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _c(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ds.getTargetData(i,e).next(o=>o?(s=o,k.resolve(s)):n.Ds.allocateTargetId(i).next(c=>(s=new ps(e,c,0,i.currentSequenceNumber),n.Ds.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Li.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Li=n.Li.insert(i.targetId,i),n.qi.set(e,i.targetId)),i})}async function Ec(t,e,n){const i=X(t),s=i.Li.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Ds(c))throw c;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.Li=i.Li.remove(e),i.qi.delete(s.target)}function fp(t,e,n){const i=X(t);let s=me.min(),o=Ae();return i.persistence.runTransaction("Execute query","readonly",c=>function(l,d,f){const g=X(l),v=g.qi.get(f);return v!==void 0?k.resolve(g.Li.get(v)):g.Ds.getTargetData(d,f)}(i,c,Jn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Ds.getMatchingKeysForTargetId(c,l.targetId).next(d=>{o=d})}).next(()=>i.Bi.getDocumentsMatchingQuery(c,e,n?s:me.min(),n?o:Ae())).next(l=>($x(i,YR(e),l),{documents:l,Wi:o})))}function Bx(t,e){const n=X(t),i=X(n.Ds),s=n.Li.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,e).next(c=>c?c.target:null))}function jx(t,e){const n=X(t),i=n.Ui.get(e)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ki.getAllFromCollectionGroup(s,e,AR(i,-1),Number.MAX_SAFE_INTEGER)).then(s=>($x(n,e,s),s))}function $x(t,e,n){let i=t.Ui.get(e)||me.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ui.set(e,i)}async function f4(t,e,n,i){const s=X(t);let o=Ae(),c=Gn();for(const f of n){const g=e.Hi(f.metadata.name);f.document&&(o=o.add(g));const v=e.Ji(f);v.setReadTime(e.Yi(f.metadata.readTime)),c=c.insert(g,v)}const l=s.Ki.newChangeBuffer({trackRemovals:!0}),d=await _c(s,function(f){return Jn(qc($e.fromString(`__bundle__/docs/${f}`)))}(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",f=>Vx(f,l,c).next(g=>(l.apply(f),g)).next(g=>s.Ds.removeMatchingKeysForTargetId(f,d.targetId).next(()=>s.Ds.addMatchingKeys(f,o,d.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(f,g.zi,g.ji)).next(()=>g.zi)))}async function p4(t,e,n=Ae()){const i=await _c(t,Jn(kb(e.bundledQuery))),s=X(t);return s.persistence.runTransaction("Save named query","readwrite",o=>{const c=Ft(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.xs.saveNamedQuery(o,e);const l=i.withResumeToken(Yt.EMPTY_BYTE_STRING,c);return s.Li=s.Li.insert(l.targetId,l),s.Ds.updateTargetData(o,l).next(()=>s.Ds.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>s.Ds.addMatchingKeys(o,n,i.targetId)).next(()=>s.xs.saveNamedQuery(o,e))})}function $T(t,e){return`firestore_clients_${t}_${e}`}function qT(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function qv(t,e){return`firestore_targets_${t}_${e}`}class pp{constructor(e,n,i,s){this.user=e,this.batchId=n,this.state=i,this.error=s}static Zi(e,n,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new V(s.error.code,s.error.message))),c?new pp(e,n,s.state,o):(Ot("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ol{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Zi(e,n){const i=JSON.parse(n);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new Ol(e,i.state,s):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const i=JSON.parse(n);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=cm();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=DR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new mp(e,o):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Mb{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Mb(n.clientId,n.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xy{constructor(){this.activeTargetIds=cm()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kv{constructor(e,n,i,s,o){this.window=e,this.Ws=n,this.persistenceKey=i,this.nr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Rt(Ce),this.started=!1,this.ur=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=$T(this.persistenceKey,this.nr),this.ar=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new Xy),this.hr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._r=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.bi();for(const i of e){if(i===this.nr)continue;const s=this.getItem($T(this.persistenceKey,i));if(s){const o=mp.Zi(i,s);o&&(this.rr=this.rr.insert(o.clientId,o))}}this.mr();const n=this.storage.getItem(this.wr);if(n){const i=this.gr(n);i&&this.yr(i)}for(const i of this.ur)this.ir(i);this.ur=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let n=!1;return this.rr.forEach((i,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,n,i){this.Ir(e,n,i),this.Tr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(qv(this.persistenceKey,e));if(i){const s=Ol.Zi(e,i);s&&(n=s.state)}}return this.Er.tr(e),this.mr(),n}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qv(this.persistenceKey,e))}updateQueryState(e,n,i){this.Ar(e,n,i)}handleUserChange(e,n,i){n.forEach(s=>{this.Tr(s)}),this.currentUser=e,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B("SharedClientState","READ",e,n),n}setItem(e,n){B("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){B("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){const n=e;if(n.storageArea===this.storage){if(B("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.hr.test(n.key)){if(n.newValue==null){const i=this.br(n.key);return this.Pr(i,null)}{const i=this.Vr(n.key,n.newValue);if(i)return this.Pr(i.clientId,i)}}else if(this.lr.test(n.key)){if(n.newValue!==null){const i=this.Sr(n.key,n.newValue);if(i)return this.Dr(i)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const i=this.Cr(n.key,n.newValue);if(i)return this.Nr(i)}}else if(n.key===this.wr){if(n.newValue!==null){const i=this.gr(n.newValue);if(i)return this.yr(i)}}else if(n.key===this.ar){const i=function(s){let o=Kn.ct;if(s!=null)try{const c=JSON.parse(s);de(typeof c=="number"),o=c}catch(c){Ot("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(n.newValue);i!==Kn.ct&&this.sequenceNumberHandler(i)}else if(n.key===this._r){const i=this.kr(n.newValue);await Promise.all(i.map(s=>this.syncEngine.Or(s)))}}}else this.ur.push(n)})}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,n,i){const s=new pp(this.currentUser,e,n,i),o=qT(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Xi())}Tr(e){const n=qT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Rr(e){const n={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Ar(e,n,i){const s=qv(this.persistenceKey,e),o=new Ol(e,n,i);this.setItem(s,o.Xi())}vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this._r,n)}br(e){const n=this.hr.exec(e);return n?n[1]:null}Vr(e,n){const i=this.br(e);return mp.Zi(i,n)}Sr(e,n){const i=this.lr.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return pp.Zi(new sn(o),s,n)}Cr(e,n){const i=this.dr.exec(e),s=Number(i[1]);return Ol.Zi(s,n)}gr(e){return Mb.Zi(e)}kr(e){return JSON.parse(e)}async Dr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.$r(e.batchId,e.state,e.error);B("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,n){const i=n?this.rr.insert(e,n):this.rr.remove(e),s=this.pr(this.rr),o=this.pr(i),c=[],l=[];return o.forEach(d=>{s.has(d)||c.push(d)}),s.forEach(d=>{o.has(d)||l.push(d)}),this.syncEngine.Fr(c,l).then(()=>{this.rr=i})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let n=cm();return e.forEach((i,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class qx{constructor(){this.Br=new Xy,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,n,i){this.Lr[e]=n}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Xy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=null;function zv(){return Tf===null?Tf=268435456+Math.round(2147483648*Math.random()):Tf++,"0x"+Tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class y4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.ro=n+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,n,i,s,o){const c=zv(),l=this.ao(e,n);B("RestConnection",`Sending RPC '${e}' ${c}:`,l,i);const d={};return this.ho(d,s,o),this.lo(e,l,d,i).then(f=>(B("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw _r("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",l,"request:",i),f})}fo(e,n,i,s,o,c){return this.co(e,n,i,s,o)}ho(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+$c,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}ao(e,n){const i=g4[e];return`${this.ro}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,i,s){const o=zv();return new Promise((c,l)=>{const d=new gV;d.setWithCredentials(!0),d.listenOnce(fV.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bv.NO_ERROR:const g=d.getResponseJson();B(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Bv.TIMEOUT:B(_n,`RPC '${e}' ${o} timed out`),l(new V(x.DEADLINE_EXCEEDED,"Request time out"));break;case Bv.HTTP_ERROR:const v=d.getStatus();if(B(_n,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y==null?void 0:y.error;if(I&&I.status&&I.message){const A=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(S)>=0?S:x.UNKNOWN}(I.status);l(new V(A,I.message))}else l(new V(x.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new V(x.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{B(_n,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);B(_n,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,i,15)})}wo(e,n,i){const s=zv(),o=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=hV(),l=dV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new mV({})),this.ho(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const f=o.join("");B(_n,`Creating RPC '${e}' stream ${s}: ${f}`,d);const g=c.createWebChannel(f,d);let v=!1,y=!1;const I=new v4({Wr:b=>{y?B(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(B(_n,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),B(_n,`RPC '${e}' stream ${s} sending:`,b),g.send(b))},Hr:()=>g.close()}),A=(b,S,C)=>{b.listen(S,N=>{try{C(N)}catch(O){setTimeout(()=>{throw O},0)}})};return A(g,yf.EventType.OPEN,()=>{y||B(_n,`RPC '${e}' stream ${s} transport opened.`)}),A(g,yf.EventType.CLOSE,()=>{y||(y=!0,B(_n,`RPC '${e}' stream ${s} transport closed`),I.so())}),A(g,yf.EventType.ERROR,b=>{y||(y=!0,_r(_n,`RPC '${e}' stream ${s} transport errored:`,b),I.so(new V(x.UNAVAILABLE,"The operation could not be completed")))}),A(g,yf.EventType.MESSAGE,b=>{var S;if(!y){const C=b.data[0];de(!!C);const N=C,O=N.error||((S=N[0])===null||S===void 0?void 0:S.error);if(O){B(_n,`RPC '${e}' stream ${s} received error:`,O);const Y=O.status;let z=function(ee){const H=qt[ee];if(H!==void 0)return lx(H)}(Y),ne=O.message;z===void 0&&(z=x.INTERNAL,ne="Unknown error status: "+Y+" with message "+O.message),y=!0,I.so(new V(z,ne)),g.close()}else B(_n,`RPC '${e}' stream ${s} received:`,C),I.io(C)}}),A(l,pV.STAT_EVENT,b=>{b.stat===eT.PROXY?B(_n,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===eT.NOPROXY&&B(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.no()},0),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){return new AB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Ws=e,this.timerId=n,this._o=i,this.mo=s,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),s=Math.max(0,n-i);s>0&&B("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,i,s,o,c,l,d){this.Ws=e,this.bo=i,this.Po=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Lb(e,n)}xo(){return this.state===1||this.state===5||this.No()}No(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.ko()}async stop(){this.xo()&&await this.close(0)}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&this.So===null&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}async Mo(){if(this.No())return this.close(0)}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}async close(e,n){this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,e!==4?this.Co.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Vo===n&&this.Ko(i,s)},i=>{e(()=>{const s=new V(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Go(s)})})}Ko(e,n){const i=this.Uo(this.Vo);this.stream=this.Qo(e,n),this.stream.Jr(()=>{i(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(s=>{i(()=>this.Go(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}ko(){this.state=5,this.Co.Ao(async()=>{this.state=0,this.start()})}Go(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return n=>{this.Ws.enqueueAndForget(()=>this.Vo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w4 extends zx{constructor(e,n,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}Qo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.Co.reset();const n=xB(this.serializer,e),i=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Ft(o.readTime):me.min()}(e);return this.listener.zo(n,i)}jo(e){const n={};n.database=ch(this.serializer),n.addTarget=function(s,o){let c;const l=o.target;return c=ap(l)?{documents:yx(s,l)}:{query:wx(s,l)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=fx(s,o.resumeToken):o.snapshotVersion.compareTo(me.min())>0&&(c.readTime=Ic(s,o.snapshotVersion.toTimestamp())),c}(this.serializer,e);const i=NB(this.serializer,e);i&&(n.labels=i),this.Fo(n)}Wo(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.Fo(n)}}class b4 extends zx{constructor(e,n,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const n=DB(e.writeResults,e.commitTime),i=Ft(e.commitTime);return this.listener.Zo(i,n)}return de(!e.writeResults||e.writeResults.length===0),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=ch(this.serializer),this.Fo(e)}Yo(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>uh(this.serializer,i))};this.Fo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4 extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.eu=!1}nu(){if(this.eu)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.co(e,n,i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(x.UNKNOWN,s.toString())})}fo(e,n,i,s){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.fo(e,n,i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(x.UNKNOWN,o.toString())})}terminate(){this.eu=!0}}class _4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){this.su===0&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){this.state==="Online"?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,e==="Online"&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Ot(n),this.ru=!1):B("OnlineStateTracker",n)}hu(){this.iu!==null&&(this.iu.cancel(),this.iu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr(c=>{i.enqueueAndForget(async()=>{Ps(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const d=X(l);d.du.add(4),await Gc(d),d.mu.set("Unknown"),d.du.delete(4),await Uh(d)}(this))})}),this.mu=new _4(i,s)}}async function Uh(t){if(Ps(t))for(const e of t.wu)await e(!0)}async function Gc(t){for(const e of t.wu)await e(!1)}function pm(t,e){const n=X(t);n.fu.has(e.targetId)||(n.fu.set(e.targetId,e),Vb(n)?Ub(n):Wc(n).No()&&Fb(n,e))}function lh(t,e){const n=X(t),i=Wc(n);n.fu.delete(e),i.No()&&Gx(n,e),n.fu.size===0&&(i.No()?i.$o():Ps(n)&&n.mu.set("Unknown"))}function Fb(t,e){t.gu.Ot(e.targetId),Wc(t).jo(e)}function Gx(t,e){t.gu.Ot(e),Wc(t).Wo(e)}function Ub(t){t.gu=new EB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.fu.get(e)||null}),Wc(t).start(),t.mu.ou()}function Vb(t){return Ps(t)&&!Wc(t).xo()&&t.fu.size>0}function Ps(t){return X(t).du.size===0}function Hx(t){t.gu=void 0}async function S4(t){t.fu.forEach((e,n)=>{Fb(t,e)})}async function T4(t,e){Hx(t),Vb(t)?(t.mu.au(e),Ub(t)):t.mu.set("Unknown")}async function C4(t,e,n){if(t.mu.set("Online"),e instanceof dx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.fu.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.fu.delete(c),i.gu.removeTarget(c))}(t,e)}catch(i){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gp(t,i)}else if(e instanceof Ff?t.gu.Kt(e):e instanceof hx?t.gu.Jt(e):t.gu.zt(e),!n.isEqual(me.min()))try{const i=await Ux(t.localStore);n.compareTo(i)>=0&&await function(s,o){const c=s.gu.Xt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.fu.get(d);f&&s.fu.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach(l=>{const d=s.fu.get(l);if(!d)return;s.fu.set(l,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),Gx(s,l);const f=new ps(d.target,l,1,d.sequenceNumber);Fb(s,f)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(i){B("RemoteStore","Failed to raise snapshot:",i),await gp(t,i)}}async function gp(t,e,n){if(!Ds(e))throw e;t.du.add(1),await Gc(t),t.mu.set("Offline"),n||(n=()=>Ux(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.du.delete(1),await Uh(t)})}function Wx(t,e){return e().catch(n=>gp(t,n,e))}async function Hc(t){const e=X(t),n=Ss(e);let i=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;A4(e);)try{const s=await d4(e.localStore,i);if(s===null){e.lu.length===0&&n.$o();break}i=s.batchId,k4(e,s)}catch(s){await gp(e,s)}Yx(e)&&Qx(e)}function A4(t){return Ps(t)&&t.lu.length<10}function k4(t,e){t.lu.push(e);const n=Ss(t);n.No()&&n.Jo&&n.Yo(e.mutations)}function Yx(t){return Ps(t)&&!Ss(t).xo()&&t.lu.length>0}function Qx(t){Ss(t).start()}async function R4(t){Ss(t).tu()}async function x4(t){const e=Ss(t);for(const n of t.lu)e.Yo(n.mutations)}async function D4(t,e,n){const i=t.lu.shift(),s=Sb.from(i,e,n);await Wx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hc(t)}async function N4(t,e){e&&Ss(t).Jo&&await async function(n,i){if(s=i.code,ux(s)&&s!==x.ABORTED){const o=n.lu.shift();Ss(n).Oo(),await Wx(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Hc(n)}var s}(t,e),Yx(t)&&Qx(t)}async function zT(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const i=Ps(n);n.du.add(3),await Gc(n),i&&n.mu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.du.delete(3),await Uh(n)}async function Zy(t,e){const n=X(t);e?(n.du.delete(2),await Uh(n)):e||(n.du.add(2),await Gc(n),n.mu.set("Unknown"))}function Wc(t){return t.yu||(t.yu=function(e,n,i){const s=X(e);return s.nu(),new w4(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Jr:S4.bind(null,t),Zr:T4.bind(null,t),zo:C4.bind(null,t)}),t.wu.push(async e=>{e?(t.yu.Oo(),Vb(t)?Ub(t):t.mu.set("Unknown")):(await t.yu.stop(),Hx(t))})),t.yu}function Ss(t){return t.pu||(t.pu=function(e,n,i){const s=X(e);return s.nu(),new b4(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Jr:R4.bind(null,t),Zr:N4.bind(null,t),Xo:x4.bind(null,t),Zo:D4.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),await Hc(t)):(await t.pu.stop(),t.lu.length>0&&(B("RemoteStore",`Stopping write stream with ${t.lu.length} pending writes`),t.lu=[]))})),t.pu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,n,i,s,o){const c=Date.now()+i,l=new Bb(e,n,c,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yc(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),Ds(t))return new V(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.comparator=e?(n,i)=>e(n,i)||J.comparator(n.key,i.key):(n,i)=>J.comparator(n.key,i.key),this.keyedMap=Il(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new oc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new oc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.Iu=new Rt(J.comparator)}track(e){const n=e.doc.key,i=this.Iu.get(n);i?e.type!==0&&i.type===3?this.Iu=this.Iu.insert(n,e):e.type===3&&i.type!==1?this.Iu=this.Iu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Iu=this.Iu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Iu=this.Iu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Iu=this.Iu.remove(n):e.type===1&&i.type===2?this.Iu=this.Iu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Iu=this.Iu.insert(n,{type:2,doc:e.doc}):re():this.Iu=this.Iu.insert(n,e)}Tu(){const e=[];return this.Iu.inorderTraversal((n,i)=>{e.push(i)}),e}}class Sc{constructor(e,n,i,s,o,c,l,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,o){const c=[];return n.forEach(l=>{c.push({type:0,doc:l})}),new Sc(e,n,oc.emptySet(n),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.Eu=void 0,this.listeners=[]}}class O4{constructor(){this.queries=new Ns(e=>WR(e),Nh),this.onlineState="Unknown",this.Au=new Set}}async function jb(t,e){const n=X(t),i=e.query;let s=!1,o=n.queries.get(i);if(o||(s=!0,o=new P4),s)try{o.Eu=await n.onListen(i)}catch(c){const l=Yc(c,`Initialization of query '${Gy(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.listeners.push(e),e.Ru(n.onlineState),o.Eu&&e.vu(o.Eu)&&qb(n)}async function $b(t,e){const n=X(t),i=e.query;let s=!1;const o=n.queries.get(i);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),s=o.listeners.length===0)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function M4(t,e){const n=X(t);let i=!1;for(const s of e){const o=s.query,c=n.queries.get(o);if(c){for(const l of c.listeners)l.vu(s)&&(i=!0);c.Eu=s}}i&&qb(n)}function L4(t,e,n){const i=X(t),s=i.queries.get(e);if(s)for(const o of s.listeners)o.onError(n);i.queries.delete(e)}function qb(t){t.Au.forEach(e=>{e.next()})}class Kb{constructor(e,n,i){this.query=e,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Sc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),n=!0):this.Du(e,this.onlineState)&&(this.Cu(e),n=!0),this.Vu=e,n}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let n=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),n=!0),n}Du(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.xu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Su(e){if(e.docChanges.length>0)return!0;const n=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Cu(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.Nu=e,this.byteLength=n}ku(){return"metadata"in this.Nu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.serializer=e}Hi(e){return Xi(this.serializer,e)}Ji(e){return e.metadata.exists?vx(this.serializer,e.document,!1):lt.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Ft(e)}}class U4{constructor(e,n,i){this.Ou=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jx(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++n;const i=$e.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Mu(e){const n=new Map,i=new HT(this.serializer);for(const s of e)if(s.metadata.queries){const o=i.Hi(s.metadata.name);for(const c of s.metadata.queries){const l=(n.get(c)||Ae()).add(o);n.set(c,l)}}return n}async complete(){const e=await f4(this.localStore,new HT(this.serializer),this.documents,this.Ou.id),n=this.Mu(this.documents);for(const i of this.queries)await p4(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:e}}}function Jx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.key=e}}class Zx{constructor(e){this.key=e}}class eD{constructor(e,n){this.query=e,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ae(),this.mutatedKeys=Ae(),this.Ku=QR(e),this.Gu=new oc(this.Ku)}get Qu(){return this.Lu}zu(e,n){const i=n?n.ju:new GT,s=n?n.Gu:this.Gu;let o=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),I=Ph(this.query,v)?v:null,A=!!y&&this.mutatedKeys.has(y.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;y&&I?y.data.isEqual(I.data)?A!==b&&(i.track({type:3,doc:I}),S=!0):this.Wu(y,I)||(i.track({type:2,doc:I}),S=!0,(d&&this.Ku(I,d)>0||f&&this.Ku(I,f)<0)&&(l=!0)):!y&&I?(i.track({type:0,doc:I}),S=!0):y&&!I&&(i.track({type:1,doc:y}),S=!0,(d||f)&&(l=!0)),S&&(I?(c=c.add(I),o=b?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{Gu:c,ju:i,Mi:l,mutatedKeys:o}}Wu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.ju.Tu();o.sort((f,g)=>function(v,y){const I=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return I(v)-I(y)}(f.type,g.type)||this.Ku(f.doc,g.doc)),this.Hu(i);const c=n?this.Ju():[],l=this.Uu.size===0&&this.current?1:0,d=l!==this.qu;return this.qu=l,o.length!==0||d?{snapshot:new Sc(this.query,e.Gu,s,o,e.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),Yu:c}:{Yu:c}}Ru(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new GT,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Ae(),this.Gu.forEach(i=>{this.Zu(i.key)&&(this.Uu=this.Uu.add(i.key))});const n=[];return e.forEach(i=>{this.Uu.has(i)||n.push(new Zx(i))}),this.Uu.forEach(i=>{e.has(i)||n.push(new Xx(i))}),n}Xu(e){this.Lu=e.Wi,this.Uu=Ae();const n=this.zu(e.documents);return this.applyChanges(n,!0)}tc(){return Sc.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class V4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class B4{constructor(e){this.key=e,this.ec=!1}}class j4{constructor(e,n,i,s,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Ns(l=>WR(l),Nh),this.ic=new Map,this.rc=new Set,this.oc=new Rt(J.comparator),this.uc=new Map,this.cc=new Db,this.ac={},this.hc=new Map,this.lc=Vo.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function $4(t,e){const n=Yb(t);let i,s;const o=n.sc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),s=o.view.tc();else{const c=await _c(n.localStore,Jn(e));n.isPrimaryClient&&pm(n.remoteStore,c);const l=n.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,s=await zb(n,e,i,l==="current",c.resumeToken)}return s}async function zb(t,e,n,i,s){t.dc=(v,y,I)=>async function(A,b,S,C){let N=b.view.zu(S);N.Mi&&(N=await fp(A.localStore,b.query,!1).then(({documents:z})=>b.view.zu(z,N)));const O=C&&C.targetChanges.get(b.targetId),Y=b.view.applyChanges(N,A.isPrimaryClient,O);return ew(A,b.targetId,Y.Yu),Y.snapshot}(t,v,y,I);const o=await fp(t.localStore,e,!0),c=new eD(e,o.Wi),l=c.zu(o.documents),d=Lh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=c.applyChanges(l,t.isPrimaryClient,d);ew(t,n,f.Yu);const g=new V4(e,n,c);return t.sc.set(e,g),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),f.snapshot}async function q4(t,e){const n=X(t),i=n.sc.get(e),s=n.ic.get(i.targetId);if(s.length>1)return n.ic.set(i.targetId,s.filter(o=>!Nh(o,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ec(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),lh(n.remoteStore,i.targetId),Tc(n,i.targetId)}).catch(xs)):(Tc(n,i.targetId),await Ec(n.localStore,i.targetId,!0))}async function K4(t,e,n){const i=Qb(t);try{const s=await function(o,c){const l=X(o),d=mt.now(),f=c.reduce((y,I)=>y.add(I.key),Ae());let g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Gn(),A=Ae();return l.Ki.getEntries(y,f).next(b=>{I=b,I.forEach((S,C)=>{C.isValidDocument()||(A=A.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(b=>{g=b;const S=[];for(const C of c){const N=IB(C,g.get(C.key).overlayedDocument);N!=null&&S.push(new Rr(C.key,N,VR(N.value.mapValue),pt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,d,S,c)}).next(b=>{v=b;const S=b.applyToLocalDocumentSet(g,A);return l.documentOverlayCache.saveOverlays(y,b.batchId,S)})}).then(()=>({batchId:v.batchId,changes:XR(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,c,l){let d=o.ac[o.currentUser.toKey()];d||(d=new Rt(Ce)),d=d.insert(c,l),o.ac[o.currentUser.toKey()]=d}(i,s.batchId,n),await xr(i,s.changes),await Hc(i.remoteStore)}catch(s){const o=Yc(s,"Failed to persist write");n.reject(o)}}async function tD(t,e){const n=X(t);try{const i=await h4(n.localStore,e);e.targetChanges.forEach((s,o)=>{const c=n.uc.get(o);c&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?de(c.ec):s.removedDocuments.size>0&&(de(c.ec),c.ec=!1))}),await xr(n,i,e)}catch(i){await xs(i)}}function WT(t,e,n){const i=X(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.sc.forEach((o,c)=>{const l=c.view.Ru(e);l.snapshot&&s.push(l.snapshot)}),function(o,c){const l=X(o);l.onlineState=c;let d=!1;l.queries.forEach((f,g)=>{for(const v of g.listeners)v.Ru(c)&&(d=!0)}),d&&qb(l)}(i.eventManager,e),s.length&&i.nc.zo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function z4(t,e,n){const i=X(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.uc.get(e),o=s&&s.key;if(o){let c=new Rt(J.comparator);c=c.insert(o,lt.newNoDocument(o,me.min()));const l=Ae().add(o),d=new Mh(me.min(),new Map,new st(Ce),c,l);await tD(i,d),i.oc=i.oc.remove(o),i.uc.delete(e),Wb(i)}else await Ec(i.localStore,e,!1).then(()=>Tc(i,e,n)).catch(xs)}async function G4(t,e){const n=X(t),i=e.batch.batchId;try{const s=await l4(n.localStore,e);Hb(n,i,null),Gb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xr(n,s)}catch(s){await xs(s)}}async function H4(t,e,n){const i=X(t);try{const s=await function(o,c){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(de(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(i.localStore,e);Hb(i,e,n),Gb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await xr(i,s)}catch(s){await xs(s)}}async function W4(t,e){const n=X(t);Ps(n.remoteStore)||B("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(o){const c=X(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>c.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();const s=n.hc.get(i)||[];s.push(e),n.hc.set(i,s)}catch(i){const s=Yc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Gb(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function Hb(t,e,n){const i=X(t);let s=i.ac[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.ac[i.currentUser.toKey()]=s}}function Tc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.ic.get(e))t.sc.delete(i),n&&t.nc.wc(i,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.hs(e).forEach(i=>{t.cc.containsKey(i)||nD(t,i)})}function nD(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(lh(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),Wb(t))}function ew(t,e,n){for(const i of n)i instanceof Xx?(t.cc.addReference(i.key,e),Y4(t,i)):i instanceof Zx?(B("SyncEngine","Document no longer in limbo: "+i.key),t.cc.removeReference(i.key,e),t.cc.containsKey(i.key)||nD(t,i.key)):re()}function Y4(t,e){const n=e.key,i=n.path.canonicalString();t.oc.get(n)||t.rc.has(i)||(B("SyncEngine","New document in limbo: "+n),t.rc.add(i),Wb(t))}function Wb(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new J($e.fromString(e)),i=t.lc.next();t.uc.set(i,new B4(n)),t.oc=t.oc.insert(n,i),pm(t.remoteStore,new ps(Jn(qc(n.path)),i,2,Kn.ct))}}async function xr(t,e,n){const i=X(t),s=[],o=[],c=[];i.sc.isEmpty()||(i.sc.forEach((l,d)=>{c.push(i.dc(d,e,n).then(f=>{if((f||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(d.targetId,f!=null&&f.fromCache?"not-current":"current"),f){s.push(f);const g=Ob.Di(d.targetId,f);o.push(g)}}))}),await Promise.all(c),i.nc.zo(s),await async function(l,d){const f=X(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(d,v=>k.forEach(v.Vi,y=>f.persistence.referenceDelegate.addReference(g,v.targetId,y)).next(()=>k.forEach(v.Si,y=>f.persistence.referenceDelegate.removeReference(g,v.targetId,y)))))}catch(g){if(!Ds(g))throw g;B("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const v=g.targetId;if(!g.fromCache){const y=f.Li.get(v),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);f.Li=f.Li.insert(v,A)}}}(i.localStore,o))}async function Q4(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const i=await Fx(n.localStore,e);n.currentUser=e,function(s,o){s.hc.forEach(c=>{c.forEach(l=>{l.reject(new V(x.CANCELLED,o))})}),s.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xr(n,i.Qi)}}function J4(t,e){const n=X(t),i=n.uc.get(e);if(i&&i.ec)return Ae().add(i.key);{let s=Ae();const o=n.ic.get(e);if(!o)return s;for(const c of o){const l=n.sc.get(c);s=s.unionWith(l.view.Qu)}return s}}async function X4(t,e){const n=X(t),i=await fp(n.localStore,e.query,!0),s=e.view.Xu(i);return n.isPrimaryClient&&ew(n,e.targetId,s.Yu),s}async function Z4(t,e){const n=X(t);return jx(n.localStore,e).then(i=>xr(n,i))}async function ej(t,e,n,i){const s=X(t),o=await function(c,l){const d=X(c),f=X(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.In(g,l).next(v=>v?d.localDocuments.getDocuments(g,v):k.resolve(null)))}(s.localStore,e);o!==null?(n==="pending"?await Hc(s.remoteStore):n==="acknowledged"||n==="rejected"?(Hb(s,e,i||null),Gb(s,e),function(c,l){X(X(c).mutationQueue).En(l)}(s.localStore,e)):re(),await xr(s,o)):B("SyncEngine","Cannot apply mutation batch with id: "+e)}async function tj(t,e){const n=X(t);if(Yb(n),Qb(n),e===!0&&n.fc!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),s=await YT(n,i.toArray());n.fc=!0,await Zy(n.remoteStore,!0);for(const o of s)pm(n.remoteStore,o)}else if(e===!1&&n.fc!==!1){const i=[];let s=Promise.resolve();n.ic.forEach((o,c)=>{n.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then(()=>(Tc(n,c),Ec(n.localStore,c,!0))),lh(n.remoteStore,c)}),await s,await YT(n,i),function(o){const c=X(o);c.uc.forEach((l,d)=>{lh(c.remoteStore,d)}),c.cc.ls(),c.uc=new Map,c.oc=new Rt(J.comparator)}(n),n.fc=!1,await Zy(n.remoteStore,!1)}}async function YT(t,e,n){const i=X(t),s=[],o=[];for(const c of e){let l;const d=i.ic.get(c);if(d&&d.length!==0){l=await _c(i.localStore,Jn(d[0]));for(const f of d){const g=i.sc.get(f),v=await X4(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await Bx(i.localStore,c);l=await _c(i.localStore,f),await zb(i,iD(f),c,!1,l.resumeToken)}s.push(l)}return i.nc.zo(o),s}function iD(t){return HR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nj(t){const e=X(t);return X(X(e.localStore).persistence).bi()}async function ij(t,e,n,i){const s=X(t);if(s.fc)return void B("SyncEngine","Ignoring unexpected query state notification.");const o=s.ic.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const c=await jx(s.localStore,YR(o[0])),l=Mh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Yt.EMPTY_BYTE_STRING);await xr(s,c,l);break}case"rejected":await Ec(s.localStore,e,!0),Tc(s,e,i);break;default:re()}}async function rj(t,e,n){const i=Yb(t);if(i.fc){for(const s of e){if(i.ic.has(s)){B("SyncEngine","Adding an already active target "+s);continue}const o=await Bx(i.localStore,s),c=await _c(i.localStore,o);await zb(i,iD(o),c.targetId,!1,c.resumeToken),pm(i.remoteStore,c)}for(const s of n)i.ic.has(s)&&await Ec(i.localStore,s,!1).then(()=>{lh(i.remoteStore,s),Tc(i,s)}).catch(xs)}}function Yb(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z4.bind(null,e),e.nc.zo=M4.bind(null,e.eventManager),e.nc.wc=L4.bind(null,e.eventManager),e}function Qb(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H4.bind(null,e),e}function sj(t,e,n){const i=X(t);(async function(s,o,c){try{const l=await o.getMetadata();if(await function(v,y){const I=X(v),A=Ft(y.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",b=>I.xs.getBundleMetadata(b,y.id)).then(b=>!!b&&b.createTime.compareTo(A)>=0)}(s.localStore,l))return await o.close(),c._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(l)),Promise.resolve(new Set);c._updateProgress(Jx(l));const d=new U4(l,s.localStore,o.serializer);let f=await o._c();for(;f;){const v=await d.$u(f);v&&c._updateProgress(v),f=await o._c()}const g=await d.complete();return await xr(s,g.Bu,void 0),await function(v,y){const I=X(v);return I.persistence.runTransaction("Save bundle","readwrite",A=>I.xs.saveBundleMetadata(A,y))}(s.localStore,l),c._completeWith(g.progress),Promise.resolve(g.Fu)}catch(l){return _r("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(s=>{i.sharedClientState.notifyBundleLoaded(s)})}class tw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Lx(this.persistence,new Mx,e.initialUser,this.serializer)}createPersistence(e){return new Ox(fm.Fs,this.serializer)}createSharedClientState(e){return new qx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rD extends tw{constructor(e,n,i){super(),this.mc=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.mc.initialize(this,e),await Qb(this.mc.syncEngine),await Hc(this.mc.remoteStore),await this.persistence.hi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Lx(this.persistence,new Mx,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new YB(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new NV(n,this.persistence);return new DV(e.asyncQueue,i)}createPersistence(e){const n=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Nb(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,Kx(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new qx}}class oj extends rD{constructor(e,n){super(e,n,!1),this.mc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.mc.syncEngine;this.sharedClientState instanceof Kv&&(this.sharedClientState.syncEngine={$r:ej.bind(null,n),Mr:ij.bind(null,n),Fr:rj.bind(null,n),bi:nj.bind(null,n),Or:Z4.bind(null,n)},await this.sharedClientState.start()),await this.persistence.hi(async i=>{await tj(this.mc.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Kx();if(!Kv.D(n))throw new V(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kv(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Jb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q4.bind(null,this.syncEngine),await Zy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new O4}createDatastore(e){const n=Fh(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new y4(s));var s;return function(o,c,l,d){return new I4(o,c,l,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,s=e.asyncQueue,o=l=>WT(this.syncEngine,l,0),c=KT.D()?new KT:new m4,new E4(n,i,s,o,c);var n,i,s,o,c}createSyncEngine(e,n){return function(i,s,o,c,l,d,f){const g=new j4(i,s,o,c,l,d);return f&&(g.fc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=X(e);B("RemoteStore","RemoteStore shutting down."),n.du.add(5),await Gc(n),n._u.shutdown(),n.mu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.Ic=e,this.serializer=n,this.metadata=new on,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(i=>{i&&i.ku()?this.metadata.resolve(i.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Nu)}`))},i=>this.metadata.reject(i))}close(){return this.Ic.cancel()}async getMetadata(){return this.metadata.promise}async _c(){return await this.getMetadata(),this.Ec()}async Ec(){const e=await this.Ac();if(e===null)return null;const n=this.Tc.decode(e),i=Number(n);isNaN(i)&&this.Rc(`length string (${n}) is not valid number`);const s=await this.vc(i);return new F4(JSON.parse(s),e.length+i)}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ac(){for(;this.bc()<0&&!await this.Pc(););if(this.buffer.length===0)return null;const e=this.bc();e<0&&this.Rc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Pc()&&this.Rc("Reached the end of bundle when more is expected.");const n=this.Tc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pc(){const e=await this.Ic.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new V(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=X(i),c=ch(o.serializer)+"/documents",l={documents:s.map(v=>ah(o.serializer,v))},d=await o.fo("BatchGetDocuments",c,l,s.length),f=new Map;d.forEach(v=>{const y=RB(o.serializer,v);f.set(y.key.toString(),y)});const g=[];return s.forEach(v=>{const y=f.get(v.toString());de(!!y),g.push(y)}),g}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=J.fromPath(i);this.mutations.push(new _b(s,this.precondition(s)))}),await async function(n,i){const s=X(n),o=ch(s.serializer)+"/documents",c={writes:i.map(l=>uh(s.serializer,l))};await s.co("Commit",o,c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re();n=me.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new V(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(me.min())?pt.exists(!1):pt.updateTime(n):pt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(me.min()))throw new V(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(n)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,i,s,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=o,this.Vc=i.maxAttempts,this.Co=new Lb(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){this.Co.Ao(async()=>{const e=new cj(this.datastore),n=this.Dc(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Cc(s)}))}).catch(i=>{this.Cc(i)})})}Dc(e){try{const n=this.updateFunction(e);return!xh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ux(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=SR.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{B("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Yc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Fx(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xb(t);B("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(s=>zT(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,o)=>zT(e.remoteStore,o)),t._onlineComponents=e}function sD(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Xb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!sD(n))throw n;_r("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new tw)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await Vf(t,new tw);return t._offlineComponents}async function gm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await nw(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await nw(t,new Jb))),t._onlineComponents}function oD(t){return Xb(t).then(e=>e.persistence)}function Zb(t){return Xb(t).then(e=>e.localStore)}function aD(t){return gm(t).then(e=>e.remoteStore)}function e0(t){return gm(t).then(e=>e.syncEngine)}function hj(t){return gm(t).then(e=>e.datastore)}async function Cc(t){const e=await gm(t),n=e.eventManager;return n.onListen=$4.bind(null,e.syncEngine),n.onUnlisten=q4.bind(null,e.syncEngine),n}function dj(t){return t.asyncQueue.enqueue(async()=>{const e=await oD(t),n=await aD(t);return e.setNetworkEnabled(!0),function(i){const s=X(i);return s.du.delete(0),Uh(s)}(n)})}function fj(t){return t.asyncQueue.enqueue(async()=>{const e=await oD(t),n=await aD(t);return e.setNetworkEnabled(!1),async function(i){const s=X(i);s.du.add(0),await Gc(s),s.mu.set("Offline")}(n)})}function pj(t,e){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const c=await function(l,d){const f=X(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new V(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=Yc(c,`Failed to get document '${s} from cache`);o.reject(l)}}(await Zb(t),e,n)),n.promise}function cD(t,e,n={}){const i=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,d){const f=new mm({next:v=>{o.enqueueAndForget(()=>$b(s,g));const y=v.docs.has(c);!y&&v.fromCache?d.reject(new V(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&l&&l.source==="server"?d.reject(new V(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Kb(qc(c.path),f,{includeMetadataChanges:!0,xu:!0});return jb(s,g)}(await Cc(t),t.asyncQueue,e,n,i)),i.promise}function mj(t,e){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const c=await fp(i,s,!0),l=new eD(s,c.Wi),d=l.zu(c.documents),f=l.applyChanges(d,!1);o.resolve(f.snapshot)}catch(c){const l=Yc(c,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Zb(t),e,n)),n.promise}function uD(t,e,n={}){const i=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,d){const f=new mm({next:v=>{o.enqueueAndForget(()=>$b(s,g)),v.fromCache&&l.source==="server"?d.reject(new V(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new Kb(c,f,{includeMetadataChanges:!0,xu:!0});return jb(s,g)}(await Cc(t),t.asyncQueue,e,n,i)),i.promise}function gj(t,e){const n=new mm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).Au.add(s),s.next()}(await Cc(t),n)),()=>{n.yc(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).Au.delete(s)}(await Cc(t),n))}}function vj(t,e,n,i){const s=function(o,c){let l;return l=typeof o=="string"?new TextEncoder().encode(o):o,function(d,f){return new aj(d,f)}(function(d,f){if(d instanceof Uint8Array)return QT(d,f);if(d instanceof ArrayBuffer)return QT(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),c)}(n,Fh(e));t.asyncQueue.enqueueAndForget(async()=>{sj(await e0(t),s,i)})}function yj(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){const s=X(n);return s.persistence.runTransaction("Get named query","readonly",o=>s.xs.getNamedQuery(o,i))}(await Zb(t),e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e,n){if(!n)throw new V(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lD(t,e,n,i){if(e===!0&&i===!0)throw new V(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XT(t){if(!J.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZT(t){if(J.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ke(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new V(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hD(t,e){if(e<=0)throw new V(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new V(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new wV;switch(n.type){case"firstParty":return new EV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new V(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=JT.get(e);n&&(B("ComponentProvider","Removing Datastore"),JT.delete(e),n.terminate())}(this),Promise.resolve()}}function dD(t,e,n,i={}){var s;const o=(t=Ke(t,Vh))._getSettings();if(o.host!=="firestore.googleapis.com"&&o.host!==e&&_r("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=sn.MOCK_USER;else{c=GF(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new V(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new sn(d)}t._authCredentials=new bV(new ER(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class bn{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bn(this.firestore,e,this._query)}}class Zi extends bn{constructor(e,n,i){super(e,n,qc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new J(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function n0(t,e,...n){if(t=ue(t),t0("collection","path",e),t instanceof Vh){const i=$e.fromString(e,...n);return ZT(i),new Zi(t,null,i)}{if(!(t instanceof ht||t instanceof Zi))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child($e.fromString(e,...n));return ZT(i),new Zi(t.firestore,null,i)}}function wj(t,e){if(t=Ke(t,Vh),t0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bn(t,null,function(n){return new kr($e.emptyPath(),n)}(e))}function Di(t,e,...n){if(t=ue(t),arguments.length===1&&(e=SR.A()),t0("doc","path",e),t instanceof Vh){const i=$e.fromString(e,...n);return XT(i),new ht(t,null,new J(i))}{if(!(t instanceof ht||t instanceof Zi))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child($e.fromString(e,...n));return XT(i),new ht(t.firestore,t instanceof Zi?t.converter:null,new J(i))}}function fD(t,e){return t=ue(t),e=ue(e),(t instanceof ht||t instanceof Zi)&&(e instanceof ht||e instanceof Zi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pD(t,e){return t=ue(t),e=ue(e),t instanceof bn&&e instanceof bn&&t.firestore===e.firestore&&Nh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Lb(this,"async_queue_retry"),this.qc=()=>{const n=Uf();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Co.vo()};const e=Uf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const n=new on;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}async Gc(){if(this.kc.length!==0){try{await this.kc[0](),this.kc.shift(),this.Co.reset()}catch(e){if(!Ds(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.kc.length>0&&this.Co.Ao(()=>this.Gc())}}Kc(e){const n=this.Nc.then(()=>(this.Fc=!0,e().catch(i=>{this.Mc=i,this.Fc=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw Ot("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Fc=!1,i))));return this.Nc=n,n}enqueueAfterDelay(e,n,i){this.Uc(),this.Lc.indexOf(e)>-1&&(n=0);const s=Bb.createAndSchedule(this,e,n,i,o=>this.Qc(o));return this.$c.push(s),s}Uc(){this.Mc&&re()}verifyOperationInProgress(){}async zc(){let e;do e=this.Nc,await e;while(e!==this.Nc)}jc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function iw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ij{constructor(){this._progressObserver={},this._taskCompletionResolver=new on,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=-1;class It extends Vh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new bj,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mD(this),this._firestoreClient.terminate()}}function i0(t,e){const n=typeof t=="object"?t:Kp(),i=typeof t=="string"?t:e||"(default)",s=Ar(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=qF("firestore");o&&dD(s,...o)}return s}function Qt(t){return t._firestoreClient||mD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mD(t){var e,n,i;const s=t._freezeSettings(),o=function(c,l,d,f){return new eB(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new lj(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function Ej(t,e){vD(t=Ke(t,It));const n=Qt(t);if(n._uninitializedComponentsProvider)throw new V(x.FAILED_PRECONDITION,"SDK cache is already specified.");_r("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),s=new Jb;return gD(n,s,new rD(s,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Sj(t){vD(t=Ke(t,It));const e=Qt(t);if(e._uninitializedComponentsProvider)throw new V(x.FAILED_PRECONDITION,"SDK cache is already specified.");_r("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new Jb;return gD(e,i,new oj(i,n.cacheSizeBytes))}function gD(t,e,n){const i=new on;return t.asyncQueue.enqueue(async()=>{try{await Vf(t,n),await nw(t,e),i.resolve()}catch(s){const o=s;if(!sD(o))throw o;_r("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}}).then(()=>i.promise)}function Tj(t){if(t._initialized&&!t._terminated)throw new V(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new on;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!xi.D())return Promise.resolve();const i=n+"main";await xi.delete(i)}(Pb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Cj(t){return function(e){const n=new on;return e.asyncQueue.enqueueAndForget(async()=>W4(await e0(e),n)),n.promise}(Qt(t=Ke(t,It)))}function Aj(t){return dj(Qt(t=Ke(t,It)))}function kj(t){return fj(Qt(t=Ke(t,It)))}function Rj(t,e){const n=Qt(t=Ke(t,It)),i=new Ij;return vj(n,t._databaseId,e,i),i}function xj(t,e){return yj(Qt(t=Ke(t,It)),e).then(n=>n?new bn(t,null,n.query):null)}function vD(t){if(t._initialized||t._terminated)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nr(Yt.fromBase64String(e))}catch(n){throw new V(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nr(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=/^__.*__$/;class Nj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class yD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class wm{constructor(e,n,i,s,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Zc({path:i,ta:!1});return s.ea(e),s}na(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Zc({path:i,ta:!1});return s.Jc(),s}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return vp(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(e.length===0)throw this.ia("Document fields must not be empty");if(wD(this.Yc)&&Dj.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Fh(e)}ua(e,n,i,s=!1){return new wm({Yc:e,methodName:n,oa:i,path:Mt.emptyPath(),ta:!1,ra:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jo(t){const e=t._freezeSettings(),n=Fh(t._databaseId);return new Pj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bm(t,e,n,i,s,o={}){const c=t.ua(o.merge||o.mergeFields?2:0,e,n,s);a0("Data must be an object, but it was:",c,i);const l=_D(i,c);let d,f;if(o.merge)d=new zn(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const y=rw(e,v,n);if(!c.contains(y))throw new V(x.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);SD(g,y)||g.push(y)}d=new zn(g),f=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=c.fieldTransforms;return new Nj(new gn(l),d,f)}class Bh extends Qo{_toFieldTransform(e){if(e.Yc!==2)throw e.Yc===1?e.ia(`${this._methodName}() can only appear at the top level of your update data`):e.ia(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function bD(t,e,n){return new wm({Yc:3,oa:e.settings.oa,methodName:t._methodName,ta:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class r0 extends Qo{_toFieldTransform(e){return new Oh(e.path,new wc)}isEqual(e){return e instanceof r0}}class Oj extends Qo{constructor(e,n){super(e),this.ca=n}_toFieldTransform(e){const n=bD(this,e,!0),i=this.ca.map(o=>Xo(o,n)),s=new Mo(i);return new Oh(e.path,s)}isEqual(e){return this===e}}class Mj extends Qo{constructor(e,n){super(e),this.ca=n}_toFieldTransform(e){const n=bD(this,e,!0),i=this.ca.map(o=>Xo(o,n)),s=new Lo(i);return new Oh(e.path,s)}isEqual(e){return this===e}}class Lj extends Qo{constructor(e,n){super(e),this.aa=n}_toFieldTransform(e){const n=new bc(e.serializer,nx(e.serializer,this.aa));return new Oh(e.path,n)}isEqual(e){return this===e}}function s0(t,e,n,i){const s=t.ua(1,e,n);a0("Data must be an object, but it was:",s,i);const o=[],c=gn.empty();Yo(i,(d,f)=>{const g=c0(e,d,n);f=ue(f);const v=s.na(g);if(f instanceof Bh)o.push(g);else{const y=Xo(f,v);y!=null&&(o.push(g),c.set(g,y))}});const l=new zn(o);return new yD(c,l,s.fieldTransforms)}function o0(t,e,n,i,s,o){const c=t.ua(1,e,n),l=[rw(e,i,n)],d=[s];if(o.length%2!=0)throw new V(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)l.push(rw(e,o[y])),d.push(o[y+1]);const f=[],g=gn.empty();for(let y=l.length-1;y>=0;--y)if(!SD(f,l[y])){const I=l[y];let A=d[y];A=ue(A);const b=c.na(I);if(A instanceof Bh)f.push(I);else{const S=Xo(A,b);S!=null&&(f.push(I),g.set(I,S))}}const v=new zn(f);return new yD(g,v,c.fieldTransforms)}function ID(t,e,n,i=!1){return Xo(n,t.ua(i?4:3,e))}function Xo(t,e){if(ED(t=ue(t)))return a0("Unsupported field value:",e,t),_D(t,e);if(t instanceof Qo)return function(n,i){if(!wD(i.Yc))throw i.ia(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ia(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ta&&e.Yc!==4)throw e.ia("Nested arrays are not supported");return function(n,i){const s=[];let o=0;for(const c of n){let l=Xo(c,i.sa(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=ue(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nx(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=mt.fromDate(n);return{timestampValue:Ic(i.serializer,s)}}if(n instanceof mt){const s=new mt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,s)}}if(n instanceof ym)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nr)return{bytesValue:fx(i.serializer,n._byteString)};if(n instanceof ht){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.ia(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ab(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.ia(`Unsupported field value: ${vm(n)}`)}(t,e)}function _D(t,e){const n={};return LR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(i,s)=>{const o=Xo(s,e.Xc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function ED(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof ym||t instanceof nr||t instanceof ht||t instanceof Qo)}function a0(t,e,n){if(!ED(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=vm(n);throw i==="an object"?e.ia(t+" a custom object"):e.ia(t+" "+i)}}function rw(t,e,n){if((e=ue(e))instanceof Ts)return e._internalPath;if(typeof e=="string")return c0(t,e);throw vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fj=new RegExp("[~\\*/\\[\\]]");function c0(t,e,n){if(e.search(Fj)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ts(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vp(t,e,n,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${s}`),d+=")"),new V(x.INVALID_ARGUMENT,l+t+d)}function SD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Im("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uj extends hh{data(){return super.data()}}function Im(t,e){return typeof e=="string"?c0(t,e):e instanceof Ts?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}class jh extends u0{}function es(t,e,...n){let i=[];e instanceof u0&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof l0).length,c=s.filter(l=>l instanceof _m).length;if(o>1||o>0&&c>0)throw new V(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class _m extends jh{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new _m(e,n,i)}_apply(e){const n=this._parse(e);return AD(e._query,n),new bn(e.firestore,e.converter,zy(e._query,n))}_parse(e){const n=Jo(e.firestore);return function(s,o,c,l,d,f,g){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new V(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){nC(g,f);const y=[];for(const I of g)y.push(tC(l,s,I));v={arrayValue:{values:y}}}else v=tC(l,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||nC(g,f),v=ID(c,o,g,f==="in"||f==="not-in");return Ue.create(d,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vj(t,e,n){const i=e,s=Im("where",t);return _m._create(s,i,n)}class l0 extends u0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new l0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:rt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const l of c)AD(o,l),o=zy(o,l)}(e._query,n),new bn(e.firestore,e.converter,zy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h0 extends jh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new h0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new V(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new sc(s,o);return function(l,d){if(bb(l)===null){const f=am(l);f!==null&&kD(l,f,d.field)}}(i,c),c}(e._query,this._field,this._direction);return new bn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new kr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Bj(t,e="asc"){const n=e,i=Im("orderBy",t);return h0._create(i,n)}class Em extends jh{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Em(e,n,i)}_apply(e){return new bn(e.firestore,e.converter,up(e._query,this._limit,this._limitType))}}function jj(t){return hD("limit",t),Em._create("limit",t,"F")}function $j(t){return hD("limitToLast",t),Em._create("limitToLast",t,"L")}class Sm extends jh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Sm(e,n,i)}_apply(e){const n=CD(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(i,s){return new kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function qj(...t){return Sm._create("startAt",t,!0)}function Kj(...t){return Sm._create("startAfter",t,!1)}class Tm extends jh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Tm(e,n,i)}_apply(e){const n=CD(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(i,s){return new kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function zj(...t){return Tm._create("endBefore",t,!1)}function Gj(...t){return Tm._create("endAt",t,!0)}function CD(t,e,n,i){if(n[0]=ue(n[0]),n[0]instanceof hh)return function(s,o,c,l,d){if(!l)throw new V(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const g of Co(s))if(g.field.isKeyField())f.push(Po(o,l.key));else{const v=l.data.field(g.field);if(yb(v))throw new V(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const y=g.field.canonicalString();throw new V(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(v)}return new Es(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=Jo(t.firestore);return function(o,c,l,d,f,g){const v=o.explicitOrderBy;if(f.length>v.length)throw new V(x.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<f.length;I++){const A=f[I];if(v[I].field.isKeyField()){if(typeof A!="string")throw new V(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!Ib(o)&&A.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const b=o.path.child($e.fromString(A));if(!J.isDocumentKey(b))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new J(b);y.push(Po(c,S))}else{const b=ID(l,d,A);y.push(b)}}return new Es(y,g)}(t._query,t.firestore._databaseId,s,e,n,i)}}function tC(t,e,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new V(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ib(e)&&n.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child($e.fromString(n));if(!J.isDocumentKey(i))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Po(t,new J(i))}if(n instanceof ht)return Po(t,n._key);throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function nC(t,e){if(!Array.isArray(t)||t.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AD(t,e){if(e.isInequality()){const i=am(t),s=e.field;if(i!==null&&!i.isEqual(s))throw new V(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const o=bb(t);o!==null&&kD(t,s,o)}const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function kD(t,e,n){if(!n.isEqual(e))throw new V(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class d0{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw re()}}convertObject(e,n){const i={};return Yo(e.fields,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new ym(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=FR(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){const n=bs(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=$e.fromString(e);de(Ex(i));const s=new Is(i.get(1),i.get(3)),o=new J(i.popFirst(5));return s.isEqual(n)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Hj extends d0{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Er extends hh{constructor(e,n,i,s,o,c){super(e,n,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Im("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Ml extends Er{data(e={}){return super.data(e)}}class Cs{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ml(this._firestore,this._userDataWriter,i.key,i,new wo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const l=new Ml(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const l=new Ml(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Wj(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function RD(t,e){return t instanceof Er&&e instanceof Er?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Cs&&e instanceof Cs&&t._firestore===e._firestore&&pD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){t=Ke(t,ht);const e=Ke(t.firestore,It);return cD(Qt(e),t._key).then(n=>f0(e,t,n))}class Zo extends d0{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function Qj(t){t=Ke(t,ht);const e=Ke(t.firestore,It),n=Qt(e),i=new Zo(e);return pj(n,t._key).then(s=>new Er(e,i,t._key,s,new wo(s!==null&&s.hasLocalMutations,!0),t.converter))}function Jj(t){t=Ke(t,ht);const e=Ke(t.firestore,It);return cD(Qt(e),t._key,{source:"server"}).then(n=>f0(e,t,n))}function xD(t){t=Ke(t,bn);const e=Ke(t.firestore,It),n=Qt(e),i=new Zo(e);return TD(t._query),uD(n,t._query).then(s=>new Cs(e,i,t,s))}function Xj(t){t=Ke(t,bn);const e=Ke(t.firestore,It),n=Qt(e),i=new Zo(e);return mj(n,t._query).then(s=>new Cs(e,i,t,s))}function Zj(t){t=Ke(t,bn);const e=Ke(t.firestore,It),n=Qt(e),i=new Zo(e);return uD(n,t._query,{source:"server"}).then(s=>new Cs(e,i,t,s))}function yp(t,e,n){t=Ke(t,ht);const i=Ke(t.firestore,It),s=Cm(t.converter,e,n);return Qc(i,[bm(Jo(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pt.none())])}function sw(t,e,n,...i){t=Ke(t,ht);const s=Ke(t.firestore,It),o=Jo(s);let c;return c=typeof(e=ue(e))=="string"||e instanceof Ts?o0(o,"updateDoc",t._key,e,n,i):s0(o,"updateDoc",t._key,e),Qc(s,[c.toMutation(t._key,pt.exists(!0))])}function DD(t){return Qc(Ke(t.firestore,It),[new zc(t._key,pt.none())])}function e5(t,e){const n=Ke(t.firestore,It),i=Di(t),s=Cm(t.converter,e);return Qc(n,[bm(Jo(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,pt.exists(!1))]).then(()=>i)}function wp(t,...e){var n,i,s;t=ue(t);let o={includeMetadataChanges:!1},c=0;typeof e[c]!="object"||iw(e[c])||(o=e[c],c++);const l={includeMetadataChanges:o.includeMetadataChanges};if(iw(e[c])){const v=e[c];e[c]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[c+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,f,g;if(t instanceof ht)f=Ke(t.firestore,It),g=qc(t._key.path),d={next:v=>{e[c]&&e[c](f0(f,t,v))},error:e[c+1],complete:e[c+2]};else{const v=Ke(t,bn);f=Ke(v.firestore,It),g=v._query;const y=new Zo(f);d={next:I=>{e[c]&&e[c](new Cs(f,y,v,I))},error:e[c+1],complete:e[c+2]},TD(t._query)}return function(v,y,I,A){const b=new mm(A),S=new Kb(y,b,I);return v.asyncQueue.enqueueAndForget(async()=>jb(await Cc(v),S)),()=>{b.yc(),v.asyncQueue.enqueueAndForget(async()=>$b(await Cc(v),S))}}(Qt(f),g,l,d)}function t5(t,e){return gj(Qt(t=Ke(t,It)),iw(e)?e:{next:e})}function Qc(t,e){return function(n,i){const s=new on;return n.asyncQueue.enqueueAndForget(async()=>K4(await e0(n),i,s)),s.promise}(Qt(t),e)}function f0(t,e,n){const i=n.docs.get(e._key),s=new Zo(t);return new Er(t,s,e._key,i,new wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jo(e)}set(e,n,i){this._verifyNotCommitted();const s=as(e,this._firestore),o=Cm(s.converter,n,i),c=bm(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,pt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const o=as(e,this._firestore);let c;return c=typeof(n=ue(n))=="string"||n instanceof Ts?o0(this._dataReader,"WriteBatch.update",o._key,n,i,s):s0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(c.toMutation(o._key,pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=as(e,this._firestore);return this._mutations=this._mutations.concat(new zc(n._key,pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function as(t,e){if((t=ue(t)).firestore!==e)throw new V(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Jo(e)}get(e){const n=as(e,this._firestore),i=new Hj(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return re();const o=s[0];if(o.isFoundDocument())return new hh(this._firestore,i,o.key,o,n.converter);if(o.isNoDocument())return new hh(this._firestore,i,n._key,null,n.converter);throw re()})}set(e,n,i){const s=as(e,this._firestore),o=Cm(s.converter,n,i),c=bm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(e,n,i,...s){const o=as(e,this._firestore);let c;return c=typeof(n=ue(n))=="string"||n instanceof Ts?o0(this._dataReader,"Transaction.update",o._key,n,i,s):s0(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(e){const n=as(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=as(e,this._firestore),i=new Zo(this._firestore);return super.get(e).then(s=>new Er(this._firestore,i,n._key,s._document,new wo(!1,!1),n.converter))}}function r5(t,e,n){t=Ke(t,It);const i=Object.assign(Object.assign({},n5),n);return function(s){if(s.maxAttempts<1)throw new V(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,c){const l=new on;return s.asyncQueue.enqueueAndForget(async()=>{const d=await hj(s);new uj(s.asyncQueue,d,c,o,l).run()}),l.promise}(Qt(t),s=>e(new i5(t,s)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){return new Bh("deleteField")}function o5(){return new r0("serverTimestamp")}function a5(...t){return new Oj("arrayUnion",t)}function c5(...t){return new Mj("arrayRemove",t)}function u5(t){return new Lj("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){return Qt(t=Ke(t,It)),new ND(t,e=>Qc(t,e))}(function(t,e=!0){(function(n){$c=n})(Ho),yi(new Qn("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new It(new IV(n.getProvider("auth-internal")),new TV(n.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Is(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ln(tT,"3.10.0",t),Ln(tT,"3.10.0","esm2017")})();var h5="firebase",d5="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(h5,d5,"app");function p0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}const dl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ka={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function PD(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p5=f5,m5=PD,OD=new Cr("auth","Firebase",PD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new bh("@firebase/auth");function Bf(t,...e){iC.logLevel<=We.ERROR&&iC.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw m0(t,...e)}function wn(t,...e){return m0(t,...e)}function MD(t,e,n){const i=Object.assign(Object.assign({},m5()),{[e]:n});return new Cr("auth","Firebase",i).create(e,{appName:t.name})}function Jc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&cn(t,"argument-error"),MD(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return OD.create(t,...e)}function q(t,e,...n){if(!t)throw m0(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bf(e),new Error(e)}function Pi(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Map;function ui(t){Pi(t instanceof Function,"Expected a class definition");let e=rC.get(t);return e?(Pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rC.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t,e){const n=Ar(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Wl(o,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function v5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g0(){return sC()==="http:"||sC()==="https:"}function sC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g0()||Kw()||"connection"in navigator)?navigator.onLine:!0}function w5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=HF()||zw()}get(){return y5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t,e){Pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=new $h(3e4,6e4);function Jt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hn(t,e,n,i,s={}){return FD(t,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const l=Vc(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),LD.fetch()(UD(t,t.config.apiHost,n,l),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},o))})}async function FD(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},b5),e);try{const s=new _5(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw El(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const l=o.ok?c.errorMessage:c.error.message,[d,f]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw El(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw El(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw El(t,"user-disabled",c);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw MD(t,g,f);cn(t,g)}}catch(s){if(s instanceof vn)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function Dr(t,e,n,i,s={}){const o=await hn(t,e,n,i,s);return"mfaPendingCredential"in o&&cn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function UD(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?v0(t.config,s):`${t.config.apiScheme}://${s}`}class _5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(wn(this.auth,"network-request-failed")),I5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function El(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=wn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(t,e){return hn(t,"POST","/v1/accounts:delete",e)}async function S5(t,e){return hn(t,"POST","/v1/accounts:update",e)}async function T5(t,e){return hn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C5(t,e=!1){const n=ue(t),i=await n.getIdToken(e),s=Am(i);q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Ll(Gv(s.auth_time)),issuedAtTime:Ll(Gv(s.iat)),expirationTime:Ll(Gv(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Gv(t){return Number(t)*1e3}function Am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=sk(n);return s?JSON.parse(s):(Bf("Failed to decode base64 JWT payload"),null)}catch(s){return Bf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function A5(t){const e=Am(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof vn&&k5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function k5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Sr(t,T5(n,{idToken:i}));q(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?N5(o.providerUserInfo):[],l=D5(t.providerData,c),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),g=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new VD(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function x5(t){const e=ue(t);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D5(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function N5(t){return t.map(e=>{var{providerId:n}=e,i=p0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){const n=await FD(t,{},async()=>{const i=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,c=UD(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",LD.fetch()(c,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await P5(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,c=new ph;return i&&(q(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(q(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(q(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ph,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ao{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=p0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new VD(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Sr(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C5(this,e)}reload(){return x5(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ao(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Sr(this,E5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,c,l,d,f,g;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,I=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,C=(f=n.createdAt)!==null&&f!==void 0?f:void 0,N=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:Y,isAnonymous:z,providerData:ne,stsTokenManager:ee}=n;q(O&&ee,e,"internal-error");const H=ph.fromJSON(this.name,ee);q(typeof O=="string",e,"internal-error"),ts(v,e.name),ts(y,e.name),q(typeof Y=="boolean",e,"internal-error"),q(typeof z=="boolean",e,"internal-error"),ts(I,e.name),ts(A,e.name),ts(b,e.name),ts(S,e.name),ts(C,e.name),ts(N,e.name);const Se=new Ao({uid:O,auth:e,email:y,emailVerified:Y,displayName:v,isAnonymous:z,photoURL:A,phoneNumber:I,tenantId:b,stsTokenManager:H,createdAt:C,lastLoginAt:N});return ne&&Array.isArray(ne)&&(Se.providerData=ne.map(Pe=>Object.assign({},Pe))),S&&(Se._redirectEventId=S),Se}static async _fromIdTokenResponse(e,n,i=!1){const s=new ph;s.updateFromServerResponse(n);const o=new Ao({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await fh(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BD.type="NONE";const Ac=BD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e,n){return`firebase:${t}:${e}:${n}`}class ac{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=ko(this.userKey,s.apiKey,o),this.fullPersistenceKey=ko("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ao._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ac(ui(Ac),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ui(Ac);const c=ko(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const g=await f._get(c);if(g){const v=Ao._fromJSON(e,g);f!==o&&(l=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ac(o,e,i):(o=d[0],l&&await o._set(c,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new ac(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KD(e))return"Blackberry";if(zD(e))return"Webos";if(y0(e))return"Safari";if((e.includes("chrome/")||$D(e))&&!e.includes("edge/"))return"Chrome";if(qh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jD(t=bt()){return/firefox\//i.test(t)}function y0(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $D(t=bt()){return/crios\//i.test(t)}function qD(t=bt()){return/iemobile/i.test(t)}function qh(t=bt()){return/android/i.test(t)}function KD(t=bt()){return/blackberry/i.test(t)}function zD(t=bt()){return/webos/i.test(t)}function Xc(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O5(t=bt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function M5(t=bt()){var e;return Xc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L5(){return ck()&&document.documentMode===10}function GD(t=bt()){return Xc(t)||qh(t)||zD(t)||KD(t)||/windows phone/i.test(t)||qD(t)}function F5(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t,e=[]){let n;switch(t){case"Browser":n=oC(bt());break;case"Worker":n=`${oC(bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,l)=>{try{const d=e(o);c(d)}catch(d){l(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aC(this),this.idTokenSubscription=new aC(this),this.beforeStateQueue=new U5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OD,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ui(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===l)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ue(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ui(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),c=this._isInitialized?Promise.resolve():this._initializationPromise;return q(c,this,"internal-error"),c.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function un(t){return ue(t)}class aC{constructor(e){this.auth=e,this.observer=null,this.addObserver=lk(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function WD(t,e,n){const i=un(t);q(i._canInitEmulator,i,"emulator-config-failed"),q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=YD(e),{host:c,port:l}=B5(e),d=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${c}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||j5()}function YD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B5(t){const e=YD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:cC(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:cC(c)}}}function cC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e){return hn(t,"POST","/v1/accounts:resetPassword",Jt(t,e))}async function JD(t,e){return hn(t,"POST","/v1/accounts:update",e)}async function $5(t,e){return hn(t,"POST","/v1/accounts:update",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return Dr(t,"POST","/v1/accounts:signInWithPassword",Jt(t,e))}async function km(t,e){return hn(t,"POST","/v1/accounts:sendOobCode",Jt(t,e))}async function K5(t,e){return km(t,e)}async function z5(t,e){return km(t,e)}async function G5(t,e){return km(t,e)}async function H5(t,e){return km(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e){return Dr(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}async function Y5(t,e){return Dr(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Zc{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new mh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new mh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return q5(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return W5(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return JD(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Y5(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wr(t,e){return Dr(t,"POST","/v1/accounts:signInWithIdp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="http://localhost";class ir extends Zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=p0(n,["providerId","signInMethod"]);if(!i||!s)return null;const c=new ir(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return wr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wr(e,n)}buildRequest(){const e={requestUri:Q5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(t,e){return hn(t,"POST","/v1/accounts:sendVerificationCode",Jt(t,e))}async function X5(t,e){return Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e))}async function Z5(t,e){const n=await Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e));if(n.temporaryProof)throw El(t,"account-exists-with-different-credential",n);return n}const e6={USER_NOT_FOUND:"user-not-found"};async function t6(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Dr(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,n),e6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Zc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ro({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ro({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return X5(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Z5(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return t6(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:o}=e;return!i&&!n&&!s&&!o?null:new Ro({verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i6(t){const e=Xa(yl(t)).link,n=e?Xa(yl(e)).deep_link_id:null,i=Xa(yl(t)).deep_link_id;return(i?Xa(yl(i)).link:null)||i||n||e||t}class Rm{constructor(e){var n,i,s,o,c,l;const d=Xa(yl(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(i=d.oobCode)!==null&&i!==void 0?i:null,v=n6((s=d.mode)!==null&&s!==void 0?s:null);q(f&&g&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(l=d.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=i6(e);try{return new Rm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.providerId=Os.PROVIDER_ID}static credential(e,n){return mh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rm.parseLink(n);return q(i,"argument-error"),mh._fromEmailAndCode(e,i.code,i.tenantId)}}Os.PROVIDER_ID="password";Os.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Os.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Nr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cc extends eu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),ir._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),ir._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:l}=e;if(!i&&!s&&!n&&!o||!l)return null;try{return new cc(l)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends eu{constructor(){super("facebook.com")}static credential(e){return ir._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ir._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends eu{constructor(){super("github.com")}static credential(e){return ir._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="http://localhost";class kc extends Zc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return wr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,pendingToken:o}=n;return!i||!s||!o||i!==s?null:new kc(i,o)}static _create(e,n){return new kc(e,n)}buildRequest(){return{requestUri:r6,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="saml.";class bp extends Nr{constructor(e){q(e.startsWith(s6),"argument-error"),super(e)}static credentialFromResult(e){return bp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return bp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=kc.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return kc._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends eu{constructor(){super("twitter.com")}static credential(e,n){return ir._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Hi.credential(n,i)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e){return Dr(t,"POST","/v1/accounts:signUp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Ao._fromIdTokenResponse(e,i,s),c=uC(i);return new wi({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=uC(i);return new wi({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function uC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t){var e;const n=un(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new wi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await XD(n,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends vn{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ip.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Ip(e,n,i,s)}}function ZD(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ip._fromErrorAndOperation(t,o,e,i):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(t,e){const n=ue(t);await xm(!0,n,e);const{providerUserInfo:i}=await S5(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=e2(i||[]);return n.providerData=n.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function w0(t,e,n=!1){const i=await Sr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",i)}async function xm(t,e,n){await fh(e);const i=e2(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";q(i.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const o=await Sr(t,ZD(i,s,e,t),n);q(o.idToken,i,"internal-error");const c=Am(o.idToken);q(c,i,"internal-error");const{sub:l}=c;return q(t.uid===l,i,"user-mismatch"),wi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&cn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e,n=!1){const i="signIn",s=await ZD(t,i,e),o=await wi._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function Dm(t,e){return n2(un(t),e)}async function i2(t,e){const n=ue(t);return await xm(!1,n,e.providerId),w0(n,e)}async function r2(t,e){return t2(ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c6(t,e){return Dr(t,"POST","/v1/accounts:signInWithCustomToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(t,e){const n=un(t),i=await c6(n,{token:e,returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?b0._fromServerResponse(e,n):"totpInfo"in n?I0._fromServerResponse(e,n):cn(e,"internal-error")}}class b0 extends Kh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new b0(n)}}class I0 extends Kh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new I0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e,n){var i;q(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e,n){const i=ue(t),s={requestType:"PASSWORD_RESET",email:e};n&&Nm(i,s,n),await z5(i,s)}async function h6(t,e,n){await QD(ue(t),{oobCode:e,newPassword:n})}async function d6(t,e){await $5(ue(t),{oobCode:e})}async function s2(t,e){const n=ue(t),i=await QD(n,{oobCode:e}),s=i.requestType;switch(q(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(i.mfaInfo,n,"internal-error");default:q(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Kh._fromServerResponse(un(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function f6(t,e){const{data:n}=await s2(ue(t),e);return n.email}async function p6(t,e,n){const i=un(t),s=await XD(i,{returnSecureToken:!0,email:e,password:n}),o=await wi._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}function m6(t,e,n){return Dm(ue(t),Os.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(t,e,n){const i=ue(t),s={requestType:"EMAIL_SIGNIN",email:e};q(n.handleCodeInApp,i,"argument-error"),n&&Nm(i,s,n),await G5(i,s)}function v6(t,e){const n=Rm.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function y6(t,e,n){const i=ue(t),s=Os.credentialWithLink(e,n||dh());return q(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Dm(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(t,e){return hn(t,"POST","/v1/accounts:createAuthUri",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(t,e){const n=g0()?dh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:s}=await w6(ue(t),i);return s||[]}async function I6(t,e){const n=ue(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Nm(n.auth,s,e);const{email:o}=await K5(n.auth,s);o!==t.email&&await t.reload()}async function _6(t,e,n){const i=ue(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Nm(i.auth,o,n);const{email:c}=await H5(i.auth,o);c!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E6(t,e){return hn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ue(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Sr(i,E6(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const l=i.providerData.find(({providerId:d})=>d==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function T6(t,e){return o2(ue(t),e,null)}function C6(t,e){return o2(ue(t),null,e)}async function o2(t,e,n){const{auth:i}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const c=await Sr(t,JD(i,o));await t._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){var e,n;if(!t)return null;const{providerId:i}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const c=(n=(e=Am(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(c){const l=c!=="anonymous"&&c!=="custom"?c:null;return new uc(o,l)}}if(!i)return null;switch(i){case"facebook.com":return new k6(o,s);case"github.com":return new R6(o,s);case"google.com":return new x6(o,s);case"twitter.com":return new D6(o,s,t.screenName||null);case"custom":case"anonymous":return new uc(o,null);default:return new uc(o,i,s)}}class uc{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class a2 extends uc{constructor(e,n,i,s){super(e,n,i),this.username=s}}class k6 extends uc{constructor(e,n){super(e,"facebook.com",n)}}class R6 extends a2{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class x6 extends uc{constructor(e,n){super(e,"google.com",n)}}class D6 extends a2{constructor(e,n,i){super(e,"twitter.com",n,i)}}function N6(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:A6(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t,e){return ue(t).setPersistence(e)}function O6(t,e,n,i){return ue(t).onIdTokenChanged(e,n,i)}function M6(t,e,n){return ue(t).beforeAuthStateChanged(e,n)}function L6(t,e,n,i){return ue(t).onAuthStateChanged(e,n,i)}function F6(t){return ue(t).signOut()}class bo{constructor(e,n,i){this.type=e,this.credential=n,this.auth=i}static _fromIdtoken(e,n){return new bo("enroll",e,n)}static _fromMfaPendingCredential(e){return new bo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return bo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return bo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=un(e),s=n.customData._serverResponse,o=(s.mfaInfo||[]).map(l=>Kh._fromServerResponse(i,l));q(s.mfaPendingCredential,i,"internal-error");const c=bo._fromMfaPendingCredential(s.mfaPendingCredential);return new _0(c,o,async l=>{const d=await l._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const f=Object.assign(Object.assign({},s),{idToken:d.idToken,refreshToken:d.refreshToken});switch(n.operationType){case"signIn":const g=await wi._fromIdTokenResponse(i,n.operationType,f);return await i._updateCurrentUser(g.user),g;case"reauthenticate":return q(n.user,i,"internal-error"),wi._forOperation(n.user,n.operationType,f);default:cn(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function U6(t,e){var n;const i=ue(t),s=e;return q(e.customData.operationType,i,"argument-error"),q((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),_0._fromError(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:start",Jt(t,e))}function B6(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(t,e))}function j6(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(t,e))}class E0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Kh._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new E0(e)}async getSession(){return bo._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const i=e,s=await this.getSession(),o=await Sr(this.user,i._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const s=await Sr(this.user,j6(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Hv=new WeakMap;function $6(t){const e=ue(t);return Hv.has(e)||Hv.set(e,E0._fromUser(e)),Hv.get(e)}const _p="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_p,"1"),this.storage.removeItem(_p),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){const t=bt();return y0(t)||Xc(t)}const K6=1e3,z6=10;class u2 extends c2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=q6()&&F5(),this.fallbackToPolling=GD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(i);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);L5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z6):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},K6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}u2.type="LOCAL";const zh=u2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends c2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}l2.type="SESSION";const As=l2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Pm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(c).map(async f=>f(n.origin,o)),d=await G6(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((l,d)=>{const f=Gh("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(y.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return window}function W6(t){Ht().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return typeof Ht().WorkerGlobalScope<"u"&&typeof Ht().importScripts=="function"}async function Y6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function J6(){return S0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="firebaseLocalStorageDb",X6=1,Ep="firebaseLocalStorage",d2="fbase_key";class Hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Om(t,e){return t.transaction([Ep],e?"readwrite":"readonly").objectStore(Ep)}function Z6(){const t=indexedDB.deleteDatabase(h2);return new Hh(t).toPromise()}function ow(){const t=indexedDB.open(h2,X6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ep,{keyPath:d2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ep)?e(i):(i.close(),await Z6(),e(await ow()))})})}async function lC(t,e,n){const i=Om(t,!0).put({[d2]:e,value:n});return new Hh(i).toPromise()}async function e$(t,e){const n=Om(t,!1).get(e),i=await new Hh(n).toPromise();return i===void 0?null:i.value}function hC(t,e){const n=Om(t,!0).delete(e);return new Hh(n).toPromise()}const t$=800,n$=3;class f2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ow(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>n$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pm._getInstance(J6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Y6(),!this.activeServiceWorker)return;this.sender=new H6(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ow();return await lC(e,_p,"1"),await hC(e,_p),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>lC(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>e$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Om(s,!1).getAll();return new Hh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f2.type="LOCAL";const Rc=f2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t,e){return hn(t,"POST","/v2/accounts/mfaSignIn:start",Jt(t,e))}function r$(t,e){return hn(t,"POST","/v2/accounts/mfaSignIn:finalize",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s$(t){return(await hn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function p2(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=wn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",o$().appendChild(i)})}function m2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=500,c$=6e4,Cf=1e12;class u${constructor(e){this.auth=e,this.counter=Cf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new l$(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Cf;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Cf;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Cf;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class l${constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=h$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},c$)},a$))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function h$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=m2("rcb"),d$=new $h(3e4,6e4),f$="https://www.google.com/recaptcha/api.js?";class p${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ht().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(m$(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ht().grecaptcha):new Promise((i,s)=>{const o=Ht().setTimeout(()=>{s(wn(e,"network-request-failed"))},d$.get());Ht()[Wv]=()=>{Ht().clearTimeout(o),delete Ht()[Wv];const l=Ht().grecaptcha;if(!l){s(wn(e,"internal-error"));return}const d=l.render;l.render=(f,g)=>{const v=d(f,g);return this.counter++,v},this.hostLanguage=n,i(l)};const c=`${f$}?${Vc({onload:Wv,render:"explicit",hl:n})}`;p2(c).catch(()=>{clearTimeout(o),s(wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ht().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function m$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class g${async load(e){return new u$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="recaptcha",v$={theme:"light",type:"image"};let y$=class{constructor(e,n=Object.assign({},v$),i){this.parameters=n,this.type=g2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(i),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new g$:new p$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=Ht()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(g0()&&!S0(),this.auth,"internal-error"),await w$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await s$(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function w$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ro._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function b$(t,e,n){const i=un(t),s=await Mm(i,e,ue(n));return new T0(s,o=>Dm(i,o))}async function I$(t,e,n){const i=ue(t);await xm(!1,i,"phone");const s=await Mm(i.auth,e,ue(n));return new T0(s,o=>i2(i,o))}async function _$(t,e,n){const i=ue(t),s=await Mm(i.auth,e,ue(n));return new T0(s,o=>r2(i,o))}async function Mm(t,e,n){var i;const s=await n.verify();try{q(typeof s=="string",t,"argument-error"),q(n.type===g2,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const c=o.session;if("phoneNumber"in o)return q(c.type==="enroll",t,"internal-error"),(await V6(t,{idToken:c.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{q(c.type==="signin",t,"internal-error");const l=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return q(l,t,"missing-multi-factor-info"),(await i$(t,{mfaPendingCredential:c.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:c}=await J5(t,{phoneNumber:o.phoneNumber,recaptchaToken:s});return c}}finally{n._reset()}}async function E$(t,e){await w0(ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=class jf{constructor(e){this.providerId=jf.PROVIDER_ID,this.auth=un(e)}verifyPhoneNumber(e,n){return Mm(this.auth,e,ue(n))}static credential(e,n){return Ro._fromVerification(e,n)}static credentialFromResult(e){const n=e;return jf.credentialFromTaggedObject(n)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Ro._fromTokenResponse(n,i):null}};Bo.PROVIDER_ID="phone";Bo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e){return e?ui(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends Zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function S$(t){return n2(t.auth,new C0(t),t.bypassAuthState)}function T$(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),t2(n,new C0(t),t.bypassAuthState)}async function C$(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),w0(n,new C0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:c,type:l}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S$;case"linkViaPopup":case"linkViaRedirect":return C$;case"reauthViaPopup":case"reauthViaRedirect":return T$;default:cn(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=new $h(2e3,1e4);async function y2(t,e,n){const i=un(t);Jc(t,e,Nr);const s=ea(i,n);return new pr(i,"signInViaPopup",e,s).executeNotNull()}async function k$(t,e,n){const i=ue(t);Jc(i.auth,e,Nr);const s=ea(i.auth,n);return new pr(i.auth,"reauthViaPopup",e,s,i).executeNotNull()}async function R$(t,e,n){const i=ue(t);Jc(i.auth,e,Nr);const s=ea(i.auth,n);return new pr(i.auth,"linkViaPopup",e,s,i).executeNotNull()}class pr extends v2{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,pr.currentPopupAction&&pr.currentPopupAction.cancel(),pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Gh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,A$.get())};e()}}pr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$="pendingRedirect",Fl=new Map;class D$ extends v2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fl.get(this.auth._key());if(!e){try{const i=await N$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fl.set(this.auth._key(),e)}return this.bypassAuthState||Fl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N$(t,e){const n=b2(e),i=w2(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}async function A0(t,e){return w2(t)._set(b2(e),"true")}function P$(){Fl.clear()}function k0(t,e){Fl.set(t._key(),e)}function w2(t){return ui(t._redirectPersistence)}function b2(t){return ko(x$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(t,e,n){return M$(t,e,n)}async function M$(t,e,n){const i=un(t);Jc(t,e,Nr),await i._initializationPromise;const s=ea(i,n);return await A0(s,i),s._openRedirect(i,e,"signInViaRedirect")}function L$(t,e,n){return F$(t,e,n)}async function F$(t,e,n){const i=ue(t);Jc(i.auth,e,Nr),await i.auth._initializationPromise;const s=ea(i.auth,n);await A0(s,i.auth);const o=await I2(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",o)}function U$(t,e,n){return V$(t,e,n)}async function V$(t,e,n){const i=ue(t);Jc(i.auth,e,Nr),await i.auth._initializationPromise;const s=ea(i.auth,n);await xm(!1,i,e.providerId),await A0(s,i.auth);const o=await I2(i);return s._openRedirect(i.auth,e,"linkViaRedirect",o)}async function B$(t,e){return await un(t)._initializationPromise,Lm(t,e,!1)}async function Lm(t,e,n=!1){const i=un(t),s=ea(i,e),c=await new D$(i,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}async function I2(t){const e=Gh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=10*60*1e3;class _2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!E2(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j$&&this.cachedEventUids.clear(),this.cachedEventUids.has(dC(e))}saveEventToCache(e){this.cachedEventUids.add(dC(e)),this.lastProcessedEventTime=Date.now()}}function dC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function E2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e={}){return hn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K$=/^https?/;async function z$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await S2(t);for(const n of e)try{if(G$(n))return}catch{}cn(t,"unauthorized-domain")}function G$(t){const e=dh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!K$.test(n))return!1;if(q$.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=new $h(3e4,6e4);function fC(){const t=Ht().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function W$(t){return new Promise((e,n)=>{var i,s,o;function c(){fC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fC(),n(wn(t,"network-request-failed"))},timeout:H$.get()})}if(!((s=(i=Ht().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ht().gapi)===null||o===void 0)&&o.load)c();else{const l=m2("iframefcb");return Ht()[l]=()=>{gapi.load?c():n(wn(t,"network-request-failed"))},p2(`https://apis.google.com/js/api.js?onload=${l}`).catch(d=>n(d))}}).catch(e=>{throw $f=null,e})}let $f=null;function Y$(t){return $f=$f||W$(t),$f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$=new $h(5e3,15e3),J$="__/auth/iframe",X$="emulator/auth/iframe",Z$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tq(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v0(e,X$):`https://${t.config.authDomain}/${J$}`,i={apiKey:e.apiKey,appName:t.name,v:Ho},s=eq.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Vc(i).slice(1)}`}async function nq(t){const e=await Y$(t),n=Ht().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:tq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z$,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=wn(t,"network-request-failed"),l=Ht().setTimeout(()=>{o(c)},Q$.get());function d(){Ht().clearTimeout(l),s(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rq=500,sq=600,oq="_blank",aq="http://localhost";class pC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cq(t,e,n,i=rq,s=sq){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const d=Object.assign(Object.assign({},iq),{width:i.toString(),height:s.toString(),top:o,left:c}),f=bt().toLowerCase();n&&(l=$D(f)?oq:n),jD(f)&&(e=e||aq,d.scrollbars="yes");const g=Object.entries(d).reduce((y,[I,A])=>`${y}${I}=${A},`,"");if(M5(f)&&l!=="_self")return uq(e||"",l),new pC(null);const v=window.open(e||"",l,g);q(v,t,"popup-blocked");try{v.focus()}catch{}return new pC(v)}function uq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="__/auth/handler",hq="emulator/auth/handler";function aw(t,e,n,i,s,o){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ho,eventId:s};if(e instanceof Nr){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",eU(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(o||{}))c[d]=f}if(e instanceof eu){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(c.scopes=d.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];return`${dq(t)}?${Vc(l).slice(1)}`}function dq({config:t}){return t.emulator?v0(t,hq):`https://${t.authDomain}/${lq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="webStorageSupport";class fq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=Lm,this._overrideRedirectResult=k0}async _openPopup(e,n,i,s){var o;Pi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=aw(e,n,i,dh(),s);return cq(e,c,Gh())}async _openRedirect(e,n,i,s){return await this._originValidation(e),W6(aw(e,n,i,dh(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Pi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nq(e),i=new _2(e);return n.register("authEvent",s=>(q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yv,{type:Yv},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Yv];c!==void 0&&n(!!c),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=z$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GD()||y0()||Xc()}}const T2=fq;class pq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Qi("unexpected MultiFactorSessionType")}}}class R0 extends pq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new R0(e)}_finalizeEnroll(e,n,i){return B6(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return r$(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class C2{constructor(){}static assertion(e){return R0._fromCredential(e)}}C2.FACTOR_ID="phone";var mC="@firebase/auth",gC="0.22.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function vq(t){yi(new Qn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:o,authDomain:c}=i.options;return((l,d)=>{q(o&&!o.includes(":"),"invalid-api-key",{appName:l.name}),q(!(c!=null&&c.includes(":")),"argument-error",{appName:l.name});const f={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HD(t)},g=new V5(l,d,f);return v5(g,n),g})(i,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),yi(new Qn("auth-internal",e=>{const n=un(e.getProvider("auth").getImmediate());return(i=>new mq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(mC,gC,gq(t)),Ln(mC,gC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq=5*60,wq=ak("authIdTokenMaxAge")||yq;let vC=null;const bq=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>wq)return;const s=n==null?void 0:n.token;vC!==s&&(vC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function x0(t=Kp()){const e=Ar(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g5(t,{popupRedirectResolver:T2,persistence:[Rc,zh,As]}),i=ak("authTokenSyncURL");if(i){const o=bq(i);M6(n,o,()=>o(n.currentUser)),O6(n,c=>o(c))}const s=ok("auth");return s&&WD(n,`http://${s}`),n}vq("Browser");const A2="@firebase/installations",D0="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=1e4,R2=`w:${D0}`,x2="FIS_v2",Iq="https://firebaseinstallations.googleapis.com/v1",_q=60*60*1e3,Eq="installations",Sq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},jo=new Cr(Eq,Sq,Tq);function D2(t){return t instanceof vn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2({projectId:t}){return`${Iq}/projects/${t}/installations`}function P2(t){return{token:t.token,requestStatus:2,expiresIn:Aq(t.expiresIn),creationTime:Date.now()}}async function O2(t,e){const i=(await e.json()).error;return jo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function M2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Cq(t,{refreshToken:e}){const n=M2(t);return n.append("Authorization",kq(e)),n}async function L2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Aq(t){return Number(t.replace("s","000"))}function kq(t){return`${x2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=N2(t),s=M2(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:x2,appId:t.appId,sdkVersion:R2},l={method:"POST",headers:s,body:JSON.stringify(c)},d=await L2(()=>fetch(i,l));if(d.ok){const f=await d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:P2(f.authToken)}}else throw await O2("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=/^[cdef][\w-]{21}$/,cw="";function Nq(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Pq(t);return Dq.test(n)?n:cw}catch{return cw}}function Pq(t){return xq(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Map;function V2(t,e){const n=Fm(t);B2(n,e),Oq(n,e)}function B2(t,e){const n=U2.get(t);if(n)for(const i of n)i(e)}function Oq(t,e){const n=Mq();n&&n.postMessage({key:t,fid:e}),Lq()}let Io=null;function Mq(){return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=t=>{B2(t.data.key,t.data.fid)}),Io}function Lq(){U2.size===0&&Io&&(Io.close(),Io=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq="firebase-installations-database",Uq=1,$o="firebase-installations-store";let Qv=null;function N0(){return Qv||(Qv=pk(Fq,Uq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($o)}}})),Qv}async function Sp(t,e){const n=Fm(t),s=(await N0()).transaction($o,"readwrite"),o=s.objectStore($o),c=await o.get(n);return await o.put(e,n),await s.done,(!c||c.fid!==e.fid)&&V2(t,e.fid),e}async function j2(t){const e=Fm(t),i=(await N0()).transaction($o,"readwrite");await i.objectStore($o).delete(e),await i.done}async function Um(t,e){const n=Fm(t),s=(await N0()).transaction($o,"readwrite"),o=s.objectStore($o),c=await o.get(n),l=e(c);return l===void 0?await o.delete(n):await o.put(l,n),await s.done,l&&(!c||c.fid!==l.fid)&&V2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0(t){let e;const n=await Um(t.appConfig,i=>{const s=Vq(i),o=Bq(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===cw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Vq(t){const e=t||{fid:Nq(),registrationStatus:0};return $2(e)}function Bq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(jo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jq(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$q(t)}:{installationEntry:e}}async function jq(t,e){try{const n=await Rq(t,e);return Sp(t.appConfig,n)}catch(n){throw D2(n)&&n.customData.serverCode===409?await j2(t.appConfig):await Sp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $q(t){let e=await yC(t.appConfig);for(;e.registrationStatus===1;)await F2(100),e=await yC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await P0(t);return i||n}return e}function yC(t){return Um(t,e=>{if(!e)throw jo.create("installation-not-found");return $2(e)})}function $2(t){return qq(t)?{fid:t.fid,registrationStatus:0}:t}function qq(t){return t.registrationStatus===1&&t.registrationTime+k2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq({appConfig:t,heartbeatServiceProvider:e},n){const i=zq(t,n),s=Cq(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:R2,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},d=await L2(()=>fetch(i,l));if(d.ok){const f=await d.json();return P2(f)}else throw await O2("Generate Auth Token",d)}function zq(t,{fid:e}){return`${N2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(t,e=!1){let n;const i=await Um(t.appConfig,o=>{if(!q2(o))throw jo.create("not-registered");const c=o.authToken;if(!e&&Wq(c))return o;if(c.requestStatus===1)return n=Gq(t,e),o;{if(!navigator.onLine)throw jo.create("app-offline");const l=Qq(o);return n=Hq(t,l),l}});return n?await n:i.authToken}async function Gq(t,e){let n=await wC(t.appConfig);for(;n.authToken.requestStatus===1;)await F2(100),n=await wC(t.appConfig);const i=n.authToken;return i.requestStatus===0?O0(t,e):i}function wC(t){return Um(t,e=>{if(!q2(e))throw jo.create("not-registered");const n=e.authToken;return Jq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Hq(t,e){try{const n=await Kq(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Sp(t.appConfig,i),n}catch(n){if(D2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await j2(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sp(t.appConfig,i)}throw n}}function q2(t){return t!==void 0&&t.registrationStatus===2}function Wq(t){return t.requestStatus===2&&!Yq(t)}function Yq(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_q}function Qq(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Jq(t){return t.requestStatus===1&&t.requestTime+k2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq(t){const e=t,{installationEntry:n,registrationPromise:i}=await P0(e);return i?i.catch(console.error):O0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zq(t,e=!1){const n=t;return await e9(n),(await O0(n,e)).token}async function e9(t){const{registrationPromise:e}=await P0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t){if(!t||!t.options)throw Jv("App Configuration");if(!t.name)throw Jv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Jv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Jv(t){return jo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="installations",n9="installations-internal",i9=t=>{const e=t.getProvider("app").getImmediate(),n=t9(e),i=Ar(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},r9=t=>{const e=t.getProvider("app").getImmediate(),n=Ar(e,K2).getImmediate();return{getId:()=>Xq(n),getToken:s=>Zq(n,s)}};function s9(){yi(new Qn(K2,i9,"PUBLIC")),yi(new Qn(n9,r9,"PRIVATE"))}s9();Ln(A2,D0);Ln(A2,D0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="analytics",o9="firebase_id",a9="origin",c9=60*1e3,u9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",M0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new bh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},li=new Cr("analytics","Analytics",l9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t){if(!t.startsWith(M0)){const e=li.create("invalid-gtag-resource",{gtagURL:t});return Hn.warn(e.message),""}return t}function z2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function d9(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function f9(t,e){const n=d9("firebase-js-sdk-policy",{createScriptURL:h9}),i=document.createElement("script"),s=`${M0}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function p9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function m9(t,e,n,i,s,o){const c=i[s];try{if(c)await e[c];else{const d=(await z2(n)).find(f=>f.measurementId===s);d&&await e[d.appId]}}catch(l){Hn.error(l)}t("config",s,o)}async function g9(t,e,n,i,s){try{let o=[];if(s&&s.send_to){let c=s.send_to;Array.isArray(c)||(c=[c]);const l=await z2(n);for(const d of c){const f=l.find(v=>v.measurementId===d),g=f&&e[f.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,s||{})}catch(o){Hn.error(o)}}function v9(t,e,n,i){async function s(o,c,l){try{o==="event"?await g9(t,e,n,c,l):o==="config"?await m9(t,e,n,i,c,l):o==="consent"?t("consent","update",l):t("set",c)}catch(d){Hn.error(d)}}return s}function y9(t,e,n,i,s){let o=function(...c){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=v9(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function w9(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(M0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=30,I9=1e3;class _9{constructor(e={},n=I9){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const G2=new _9;function E9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function S9(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:E9(i)},o=u9.replace("{app-id}",n),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let l="";try{const d=await c.json();!((e=d.error)===null||e===void 0)&&e.message&&(l=d.error.message)}catch{}throw li.create("config-fetch-failed",{httpStatus:c.status,responseMessage:l})}return c.json()}async function T9(t,e=G2,n){const{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw li.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw li.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new k9;return setTimeout(async()=>{l.abort()},n!==void 0?n:c9),H2({appId:i,apiKey:s,measurementId:o},c,l,e)}async function H2(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=G2){var o;const{appId:c,measurementId:l}=t;try{await C9(i,e)}catch(d){if(l)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:c,measurementId:l};throw d}try{const d=await S9(t);return s.deleteThrottleMetadata(c),d}catch(d){const f=d;if(!A9(f)){if(s.deleteThrottleMetadata(c),l)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:l};throw d}const g=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?OS(n,s.intervalMillis,b9):OS(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(c,v),Hn.debug(`Calling attemptFetch again in ${g} millis`),H2(t,v,i,s)}}function C9(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),i(li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function A9(t){if(!(t instanceof vn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class k9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function R9(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const o=await e,c=Object.assign(Object.assign({},i),{send_to:o});t("event",n,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x9(){if(pc())try{await uk()}catch(t){return Hn.warn(li.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hn.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function D9(t,e,n,i,s,o,c){var l;const d=T9(t);d.then(I=>{n[I.measurementId]=I.appId,t.options.measurementId&&I.measurementId!==t.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Hn.error(I)),e.push(d);const f=x9().then(I=>{if(I)return i.getId()}),[g,v]=await Promise.all([d,f]);w9(o)||f9(o,g.measurementId),s("js",new Date);const y=(l=c==null?void 0:c.config)!==null&&l!==void 0?l:{};return y[a9]="firebase",y.update=!0,v!=null&&(y[o9]=v),s("config",g.measurementId,y),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.app=e}_delete(){return delete Ul[this.app.options.appId],Promise.resolve()}}let Ul={},bC=[];const IC={};let Xv="dataLayer",P9="gtag",_C,W2,EC=!1;function O9(){const t=[];if(Kw()&&t.push("This is a browser extension environment."),QF()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=li.create("invalid-analytics-context",{errorInfo:e});Hn.warn(n.message)}}function M9(t,e,n){O9();const i=t.options.appId;if(!i)throw li.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw li.create("no-api-key");if(Ul[i]!=null)throw li.create("already-exists",{id:i});if(!EC){p9(Xv);const{wrappedGtag:o,gtagCore:c}=y9(Ul,bC,IC,Xv,P9);W2=o,_C=c,EC=!0}return Ul[i]=D9(t,bC,IC,e,_C,Xv,n),new N9(t)}function L9(t=Kp()){t=ue(t);const e=Ar(t,Tp);return e.isInitialized()?e.getImmediate():F9(t)}function F9(t,e={}){const n=Ar(t,Tp);if(n.isInitialized()){const s=n.getImmediate();if(Wl(e,n.getOptions()))return s;throw li.create("already-initialized")}return n.initialize({options:e})}function U9(t,e,n,i){t=ue(t),R9(W2,Ul[t.app.options.appId],e,n,i).catch(s=>Hn.error(s))}const SC="@firebase/analytics",TC="0.9.5";function V9(){yi(new Qn(Tp,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return M9(i,s,n)},"PUBLIC")),yi(new Qn("analytics-internal",t,"PRIVATE")),Ln(SC,TC),Ln(SC,TC,"esm2017");function t(e){try{const n=e.getProvider(Tp).getImmediate();return{logEvent:(i,s,o)=>U9(n,i,s,o)}}catch(n){throw li.create("interop-component-reg-failed",{reason:n})}}}V9();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n){this._delegate=e,this.firebase=n,Jf(e,new Qn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),gk(this._delegate)))}_getService(e,n=vs){var i;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((i=s.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=vs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Jf(this._delegate,e)}_addOrOverwriteComponent(e){mk(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},CC=new Cr("app-compat","Firebase",j9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(t){const e={},n={__esModule:!0,initializeApp:o,app:s,registerVersion:Ln,setLogLevel:yk,onLog:vk,apps:null,SDK_VERSION:Ho,INTERNAL:{registerComponent:l,removeApp:i,useAsService:d,modularAPIs:p3}};n.default=n,Object.defineProperty(n,"apps",{get:c});function i(f){delete e[f]}function s(f){if(f=f||vs,!NS(e,f))throw CC.create("no-app",{appName:f});return e[f]}s.App=t;function o(f,g={}){const v=qp(f,g);if(NS(e,v.name))return e[v.name];const y=new t(v,n);return e[v.name]=y,y}function c(){return Object.keys(e).map(f=>e[f])}function l(f){const g=f.name,v=g.replace("-compat","");if(yi(f)&&f.type==="PUBLIC"){const y=(I=s())=>{if(typeof I[v]!="function")throw CC.create("invalid-app-argument",{appName:g});return I[v]()};f.serviceProps!==void 0&&Qf(y,f.serviceProps),n[v]=y,t.prototype[v]=function(...I){return this._getService.bind(this,g).apply(this,f.multipleInstances?I:[])}}return f.type==="PUBLIC"?n[v]:null}function d(f,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){const t=$9(B9);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Y2,extendNamespace:e,createSubscribe:lk,ErrorFactory:Cr,deepExtend:Qf});function e(n){Qf(t,n)}return t}const q9=Y2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new bh("@firebase/app-compat"),K9="@firebase/app-compat",z9="0.2.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t){Ln(K9,z9,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(WF()&&self.firebase!==void 0){AC.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&AC.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pe=q9;G9();const H9="@firebase/firestore-compat",W9="0.3.6";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function RC(){if(!XV())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gh{constructor(e){this._delegate=e}static fromBase64String(e){return RC(),new gh(nr.fromBase64String(e))}static fromUint8Array(e){return kC(),new gh(nr.fromUint8Array(e))}toBase64(){return RC(),this._delegate.toBase64()}toUint8Array(){return kC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){return Y9(t,["next","error","complete"])}function Y9(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{enableIndexedDbPersistence(e,n){return Ej(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Sj(e._delegate)}clearIndexedDbPersistence(e){return Tj(e._delegate)}}class Q2{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Is||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&_r("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){dD(this._delegate,e,n,i)}enableNetwork(){return Aj(this._delegate)}disableNetwork(){return kj(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,lD("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Cj(this._delegate)}onSnapshotsInSync(e){return t5(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xc(this,n0(this._delegate,e))}catch(n){throw On(n,"collection()","Firestore.collection()")}}doc(e){try{return new gi(this,Di(this._delegate,e))}catch(n){throw On(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pn(this,wj(this._delegate,e))}catch(n){throw On(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return r5(this._delegate,n=>e(new J2(this,n)))}batch(){return Qt(this._delegate),new X2(new ND(this._delegate,e=>Qc(this._delegate,e)))}loadBundle(e){return Rj(this._delegate,e)}namedQuery(e){return xj(this._delegate,e).then(n=>n?new Pn(this,n):null)}}class Vm extends d0{constructor(e){super(),this.firestore=e}convertBytes(e){return new gh(new nr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return gi.forKey(n,this.firestore,null)}}function J9(t){vV(t)}class J2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Vm(e)}get(e){const n=_o(e);return this._delegate.get(n).then(i=>new vh(this._firestore,new Er(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const s=_o(e);return i?(L0("Transaction.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const o=_o(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...s),this}delete(e){const n=_o(e);return this._delegate.delete(n),this}}class X2{constructor(e){this._delegate=e}set(e,n,i){const s=_o(e);return i?(L0("WriteBatch.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const o=_o(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...s),this}delete(e){const n=_o(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class qo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Ml(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=qo.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let o=s.get(n);return o||(o=new qo(e,new Vm(e),n),s.set(n,o)),o}}qo.INSTANCES=new WeakMap;class gi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vm(e)}static forPath(e,n,i){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gi(n,new ht(n._delegate,i,new J(e)))}static forKey(e,n,i){return new gi(n,new ht(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xc(this.firestore,n0(this._delegate,e))}catch(n){throw On(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ue(e),e instanceof ht?fD(this._delegate,e):!1}set(e,n){n=L0("DocumentReference.set",n);try{return n?yp(this._delegate,e,n):yp(this._delegate,e)}catch(i){throw On(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?sw(this._delegate,e):sw(this._delegate,e,n,...i)}catch(s){throw On(s,"updateDoc()","DocumentReference.update()")}}delete(){return DD(this._delegate)}onSnapshot(...e){const n=Z2(e),i=eN(e,s=>new vh(this.firestore,new Er(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return wp(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Qj(this._delegate):(e==null?void 0:e.source)==="server"?n=Jj(this._delegate):n=Yj(this._delegate),n.then(i=>new vh(this.firestore,new Er(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new gi(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function On(t,e,n){return t.message=t.message.replace(e,n),t}function Z2(t){for(const e of t)if(typeof e=="object"&&!uw(e))return e;return{}}function eN(t,e){var n,i;let s;return uw(t[0])?s=t[0]:uw(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:o=>{s.next&&s.next(e(o))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(i=s.complete)===null||i===void 0?void 0:i.bind(s)}}class vh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return RD(this._delegate,e._delegate)}}class yh extends vh{data(e){const n=this._delegate.data(e);return yV(n!==void 0),n}}class Pn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vm(e)}where(e,n,i){try{return new Pn(this.firestore,es(this._delegate,Vj(e,n,i)))}catch(s){throw On(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Pn(this.firestore,es(this._delegate,Bj(e,n)))}catch(i){throw On(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pn(this.firestore,es(this._delegate,jj(e)))}catch(n){throw On(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Pn(this.firestore,es(this._delegate,$j(e)))}catch(n){throw On(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pn(this.firestore,es(this._delegate,qj(...e)))}catch(n){throw On(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pn(this.firestore,es(this._delegate,Kj(...e)))}catch(n){throw On(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pn(this.firestore,es(this._delegate,zj(...e)))}catch(n){throw On(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pn(this.firestore,es(this._delegate,Gj(...e)))}catch(n){throw On(n,"endAt()","Query.endAt()")}}isEqual(e){return pD(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Xj(this._delegate):(e==null?void 0:e.source)==="server"?n=Zj(this._delegate):n=xD(this._delegate),n.then(i=>new lw(this.firestore,new Cs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=Z2(e),i=eN(e,s=>new lw(this.firestore,new Cs(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return wp(this._delegate,n,i)}withConverter(e){return new Pn(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class X9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new yh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Pn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new X9(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new yh(this._firestore,i))})}isEqual(e){return RD(this._delegate,e._delegate)}}class xc extends Pn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gi(this.firestore,e):null}doc(e){try{return e===void 0?new gi(this.firestore,Di(this._delegate)):new gi(this.firestore,Di(this._delegate,e))}catch(n){throw On(n,"doc()","CollectionReference.doc()")}}add(e){return e5(this._delegate,e).then(n=>new gi(this.firestore,n))}isEqual(e){return fD(this._delegate,e._delegate)}withConverter(e){return new xc(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _o(t){return Ke(t,ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(...e){this._delegate=new Ts(...e)}static documentId(){return new F0(Mt.keyField().canonicalString())}isEqual(e){return e=ue(e),e instanceof Ts?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._delegate=e}static serverTimestamp(){const e=o5();return e._methodName="FieldValue.serverTimestamp",new po(e)}static delete(){const e=s5();return e._methodName="FieldValue.delete",new po(e)}static arrayUnion(...e){const n=a5(...e);return n._methodName="FieldValue.arrayUnion",new po(n)}static arrayRemove(...e){const n=c5(...e);return n._methodName="FieldValue.arrayRemove",new po(n)}static increment(e){const n=u5(e);return n._methodName="FieldValue.increment",new po(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9={Firestore:Q2,GeoPoint:ym,Timestamp:mt,Blob:gh,Transaction:J2,WriteBatch:X2,DocumentReference:gi,DocumentSnapshot:vh,Query:Pn,QueryDocumentSnapshot:yh,QuerySnapshot:lw,CollectionReference:xc,FieldPath:F0,FieldValue:po,setLogLevel:J9,CACHE_SIZE_UNLIMITED:_j};function e8(t,e){t.INTERNAL.registerComponent(new Qn("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(Object.assign({},Z9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t){e8(t,(e,n)=>new Q2(e,n,new Q9)),t.registerVersion(H9,W9)}t8(pe);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=2e3;async function i8(t,e,n){var i;const{BuildInfo:s}=Ko();Pi(e.sessionId,"AuthEvent did not contain a session ID");const o=await c8(e.sessionId),c={};return Xc()?c.ibi=s.packageName:qh()?c.apn=s.packageName:cn(t,"operation-not-supported-in-this-environment"),s.displayName&&(c.appDisplayName=s.displayName),c.sessionId=o,aw(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,c)}async function r8(t){const{BuildInfo:e}=Ko(),n={};Xc()?n.iosBundleId=e.packageName:qh()?n.androidPackageName=e.packageName:cn(t,"operation-not-supported-in-this-environment"),await S2(t,n)}function s8(t){const{cordova:e}=Ko();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let s=null;i?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,O5()?"_blank":"_system","location=yes"),n(s)})})}async function o8(t,e,n){const{cordova:i}=Ko();let s=()=>{};try{await new Promise((o,c)=>{let l=null;function d(){var v;o();const y=(v=i.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof y=="function"&&y(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){l||(l=window.setTimeout(()=>{c(wn(t,"redirect-cancelled-by-user"))},n8))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(d),document.addEventListener("resume",f,!1),qh()&&document.addEventListener("visibilitychange",g,!1),s=()=>{e.removePassiveListener(d),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",g,!1),l&&window.clearTimeout(l)}})}finally{s()}}function a8(t){var e,n,i,s,o,c,l,d,f,g;const v=Ko();q(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((n=v==null?void 0:v.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((o=(s=(i=v==null?void 0:v.cordova)===null||i===void 0?void 0:i.plugins)===null||s===void 0?void 0:s.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((d=(l=(c=v==null?void 0:v.cordova)===null||c===void 0?void 0:c.plugins)===null||l===void 0?void 0:l.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((g=(f=v==null?void 0:v.cordova)===null||f===void 0?void 0:f.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function c8(t){const e=u8(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function u8(t){if(Pi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=20;class h8 extends _2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function d8(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:m8(),postBody:null,tenantId:t.tenantId,error:wn(t,"no-auth-event")}}function f8(t,e){return hw()._set(dw(t),e)}async function xC(t){const e=await hw()._get(dw(t));return e&&await hw()._remove(dw(t)),e}function p8(t,e){var n,i;const s=v8(e);if(s.includes("/__/auth/callback")){const o=qf(s),c=o.firebaseError?g8(decodeURIComponent(o.firebaseError)):null,l=(i=(n=c==null?void 0:c.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],d=l?wn(l):null;return d?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function m8(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<l8;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function hw(){return ui(zh)}function dw(t){return ko("authEvent",t.config.apiKey,t.name)}function g8(t){try{return JSON.parse(t)}catch{return null}}function v8(t){const e=qf(t),n=e.link?decodeURIComponent(e.link):void 0,i=qf(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qf(s).link||s||i||n||t}function qf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Xa(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=500;class w8{constructor(){this._redirectPersistence=As,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lm,this._overrideRedirectResult=k0}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new h8(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){cn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,s){a8(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),P$(),await this._originValidation(e);const c=d8(e,i,s);await f8(e,c);const l=await i8(e,c,n),d=await s8(l);return o8(e,o,d)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r8(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=Ko(),c=setTimeout(async()=>{await xC(e),n.onEvent(DC())},y8),l=async g=>{clearTimeout(c);const v=await xC(e);let y=null;v&&(g!=null&&g.url)&&(y=p8(v,g.url)),n.onEvent(y||DC())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,l);const d=s,f=`${o.packageName.toLowerCase()}://`;Ko().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(f)&&l({url:g}),typeof d=="function")try{d(g)}catch(v){console.error(v)}}}}const b8=w8;function DC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:wn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t,e){un(t)._logFramework(e)}var _8="@firebase/auth-compat",E8="0.3.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=1e3;function Vl(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function T8(){return Vl()==="http:"||Vl()==="https:"}function tN(t=bt()){return!!((Vl()==="file:"||Vl()==="ionic:"||Vl()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function C8(){return zw()||qw()}function A8(){return ck()&&(document==null?void 0:document.documentMode)===11}function k8(t=bt()){return/Edge\/\d+/.test(t)}function R8(t=bt()){return A8()||k8(t)}function nN(){try{const t=self.localStorage,e=Gh();if(t)return t.setItem(e,"1"),t.removeItem(e),R8()?pc():!0}catch{return U0()&&pc()}return!1}function U0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zv(){return(T8()||Kw()||tN())&&!C8()&&nN()&&!U0()}function iN(){return tN()&&typeof document<"u"}async function x8(){return iN()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},S8);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function D8(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={LOCAL:"local",NONE:"none",SESSION:"session"},fl=q,rN="persistence";function N8(t,e){if(fl(Object.values(oi).includes(e),t,"invalid-persistence-type"),zw()){fl(e!==oi.SESSION,t,"unsupported-persistence-type");return}if(qw()){fl(e===oi.NONE,t,"unsupported-persistence-type");return}if(U0()){fl(e===oi.NONE||e===oi.LOCAL&&pc(),t,"unsupported-persistence-type");return}fl(e===oi.NONE||nN(),t,"unsupported-persistence-type")}async function fw(t){await t._initializationPromise;const e=sN(),n=ko(rN,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function P8(t,e){const n=sN();if(!n)return[];const i=ko(rN,t,e);switch(n.getItem(i)){case oi.NONE:return[Ac];case oi.LOCAL:return[Rc,As];case oi.SESSION:return[As];default:return[]}}function sN(){var t;try{return((t=D8())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=q;class us{constructor(){this.browserResolver=ui(T2),this.cordovaResolver=ui(b8),this.underlyingResolver=null,this._redirectPersistence=As,this._completeRedirectFn=Lm,this._overrideRedirectResult=k0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,s)}async _openRedirect(e,n,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return iN()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return O8(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await x8();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){return t.unwrap()}function M8(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t){return aN(t)}function F8(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new U8(t,U6(t,e))}else if(i){const s=aN(e),o=e;s&&(o.credential=s,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function aN(t){const{_tokenResponse:e}=t instanceof vn?t.customData:t;if(!e)return null;if(!(t instanceof vn)&&"temporaryProof"in e&&"phoneNumber"in e)return Bo.credentialFromResult(t);const n=e.providerId;if(!n||n===dl.PASSWORD)return null;let i;switch(n){case dl.GOOGLE:i=mi;break;case dl.FACEBOOK:i=zi;break;case dl.GITHUB:i=Gi;break;case dl.TWITTER:i=Hi;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:l,nonce:d}=e;return!o&&!c&&!s&&!l?null:l?n.startsWith("saml.")?kc._create(n,l):ir._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:s,accessToken:o}):new cc(n).credential({idToken:s,accessToken:o,rawNonce:d})}return t instanceof vn?i.credentialFromError(t):i.credentialFromResult(t)}function qn(t,e){return e.catch(n=>{throw n instanceof vn&&F8(t,n),n}).then(n=>{const i=n.operationType,s=n.user;return{operationType:i,credential:L8(n),additionalUserInfo:N6(n),user:mr.getOrCreate(s)}})}async function pw(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>qn(t,n.confirm(i))}}class U8{constructor(e,n){this.resolver=n,this.auth=M8(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qn(oN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._delegate=e,this.multiFactor=$6(e)}static getOrCreate(e){return mr.USER_MAP.has(e)||mr.USER_MAP.set(e,new mr(e)),mr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qn(this.auth,i2(this._delegate,e))}async linkWithPhoneNumber(e,n){return pw(this.auth,I$(this._delegate,e,n))}async linkWithPopup(e){return qn(this.auth,R$(this._delegate,e,us))}async linkWithRedirect(e){return await fw(un(this.auth)),U$(this._delegate,e,us)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qn(this.auth,r2(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return pw(this.auth,_$(this._delegate,e,n))}reauthenticateWithPopup(e){return qn(this.auth,k$(this._delegate,e,us))}async reauthenticateWithRedirect(e){return await fw(un(this.auth)),L$(this._delegate,e,us)}sendEmailVerification(e){return I6(this._delegate,e)}async unlink(e){return await a6(this._delegate,e),this}updateEmail(e){return T6(this._delegate,e)}updatePassword(e){return C6(this._delegate,e)}updatePhoneNumber(e){return E$(this._delegate,e)}updateProfile(e){return S6(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return _6(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=q;class mw{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;pl(i,"invalid-api-key",{appName:e.name}),pl(i,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?us:void 0;this._delegate=n.initialize({options:{persistence:V8(i,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(p5),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){WD(this._delegate,e,n)}applyActionCode(e){return d6(this._delegate,e)}checkActionCode(e){return s2(this._delegate,e)}confirmPasswordReset(e,n){return h6(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return qn(this._delegate,p6(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return b6(this._delegate,e)}isSignInWithEmailLink(e){return v6(this._delegate,e)}async getRedirectResult(){pl(Zv(),this._delegate,"operation-not-supported-in-this-environment");const e=await B$(this._delegate,us);return e?qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){I8(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:s,error:o,complete:c}=NC(e,n,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(e,n,i){const{next:s,error:o,complete:c}=NC(e,n,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(e,n){return g6(this._delegate,e,n)}sendPasswordResetEmail(e,n){return l6(this._delegate,e,n||void 0)}async setPersistence(e){N8(this._delegate,e);let n;switch(e){case oi.SESSION:n=As;break;case oi.LOCAL:n=await ui(Rc)._isAvailable()?Rc:zh;break;case oi.NONE:n=Ac;break;default:return cn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qn(this._delegate,o6(this._delegate))}signInWithCredential(e){return qn(this._delegate,Dm(this._delegate,e))}signInWithCustomToken(e){return qn(this._delegate,u6(this._delegate,e))}signInWithEmailAndPassword(e,n){return qn(this._delegate,m6(this._delegate,e,n))}signInWithEmailLink(e,n){return qn(this._delegate,y6(this._delegate,e,n))}signInWithPhoneNumber(e,n){return pw(this._delegate,b$(this._delegate,e,n))}async signInWithPopup(e){return pl(Zv(),this._delegate,"operation-not-supported-in-this-environment"),qn(this._delegate,y2(this._delegate,e,us))}async signInWithRedirect(e){return pl(Zv(),this._delegate,"operation-not-supported-in-this-environment"),await fw(this._delegate),O$(this._delegate,e,us)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return f6(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}mw.Persistence=oi;function NC(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const s=i;return{next:c=>s(c&&mr.getOrCreate(c)),error:e,complete:n}}function V8(t,e){const n=P8(t,e);if(typeof self<"u"&&!n.includes(Rc)&&n.push(Rc),typeof window<"u")for(const i of[zh,As])n.includes(i)||n.push(i);return n.includes(Ac)||n.push(Ac),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.providerId="phone",this._delegate=new Bo(oN(pe.auth()))}static credential(e,n){return Bo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}V0.PHONE_SIGN_IN_METHOD=Bo.PHONE_SIGN_IN_METHOD;V0.PROVIDER_ID=Bo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=q;class j8{constructor(e,n,i=pe.app()){var s;B8((s=i.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new y$(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8="auth-compat";function q8(t){t.INTERNAL.registerComponent(new Qn($8,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new mw(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ka.EMAIL_SIGNIN,PASSWORD_RESET:Ka.PASSWORD_RESET,RECOVER_EMAIL:Ka.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ka.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ka.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ka.VERIFY_EMAIL}},EmailAuthProvider:Os,FacebookAuthProvider:zi,GithubAuthProvider:Gi,GoogleAuthProvider:mi,OAuthProvider:cc,SAMLAuthProvider:bp,PhoneAuthProvider:V0,PhoneMultiFactorGenerator:C2,RecaptchaVerifier:j8,TwitterAuthProvider:Hi,Auth:mw,AuthCredential:Zc,Error:vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(_8,E8)}q8(pe);var K8="firebase",z8="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pe.registerVersion(K8,z8,"app-compat");var gw={},G8={get exports(){return gw},set exports(t){gw=t}};(function(t){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(S,C){C=C||{};var N=document.createEvent("CustomEvent");return N.initCustomEvent(S,!!C.bubbles,!!C.cancelable,C.detail||null),N},e.prototype=window.Event.prototype);function n(b){for(;b&&b!==document.body;){var S=window.getComputedStyle(b),C=function(N,O){return!(S[N]===void 0||S[N]===O)};if(S.opacity<1||C("zIndex","auto")||C("transform","none")||C("mixBlendMode","normal")||C("filter","none")||C("perspective","none")||S.isolation==="isolate"||S.position==="fixed"||S.webkitOverflowScrolling==="touch")return!0;b=b.parentElement}return!1}function i(b){for(;b;){if(b.localName==="dialog")return b;b=b.parentElement}return null}function s(b){b&&b.blur&&b!==document.body&&b.blur()}function o(b,S){for(var C=0;C<b.length;++C)if(b[C]===S)return!0;return!1}function c(b){return!b||!b.hasAttribute("method")?!1:b.getAttribute("method").toLowerCase()==="dialog"}function l(b){if(this.dialog_=b,this.replacedStyleTop_=!1,this.openAsModal_=!1,b.hasAttribute("role")||b.setAttribute("role","dialog"),b.show=this.show.bind(this),b.showModal=this.showModal.bind(this),b.close=this.close.bind(this),"returnValue"in b||(b.returnValue=""),"MutationObserver"in window){var S=new MutationObserver(this.maybeHideModal.bind(this));S.observe(b,{attributes:!0,attributeFilter:["open"]})}else{var C=!1,N=function(){C?this.downgradeModal():this.maybeHideModal(),C=!1}.bind(this),O,Y=function(z){if(z.target===b){var ne="DOMNodeRemoved";C|=z.type.substr(0,ne.length)===ne,window.clearTimeout(O),O=window.setTimeout(N,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(z){b.addEventListener(z,Y)})}Object.defineProperty(b,"open",{set:this.setOpen.bind(this),get:b.hasAttribute.bind(b,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}l.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),d.dm.removeDialog(this))},setOpen:function(b){b?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(b){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var S=document.createElement("div");this.dialog_.insertBefore(S,this.dialog_.firstChild),S.tabIndex=-1,S.focus(),this.dialog_.removeChild(S)}var C=document.createEvent("MouseEvents");C.initMouseEvent(b.type,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget),this.dialog_.dispatchEvent(C),b.stopPropagation()},focus_:function(){var b=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!b&&this.dialog_.tabIndex>=0&&(b=this.dialog_),!b){var S=["button","input","keygen","select","textarea"],C=S.map(function(N){return N+":not([disabled])"});C.push('[tabindex]:not([disabled]):not([tabindex=""])'),b=this.dialog_.querySelector(C.join(", "))}s(document.activeElement),b&&b.focus()},updateZIndex:function(b,S){if(b<S)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=b,this.backdrop_.style.zIndex=S},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!d.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");n(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,d.needsCentering(this.dialog_)?(d.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(b){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),b!==void 0&&(this.dialog_.returnValue=b);var S=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(S)}};var d={};if(d.reposition=function(b){var S=document.body.scrollTop||document.documentElement.scrollTop,C=S+(window.innerHeight-b.offsetHeight)/2;b.style.top=Math.max(S,C)+"px"},d.isInlinePositionSetByStylesheet=function(b){for(var S=0;S<document.styleSheets.length;++S){var C=document.styleSheets[S],N=null;try{N=C.cssRules}catch{}if(N)for(var O=0;O<N.length;++O){var Y=N[O],z=null;try{z=document.querySelectorAll(Y.selectorText)}catch{}if(!(!z||!o(z,b))){var ne=Y.style.getPropertyValue("top"),ee=Y.style.getPropertyValue("bottom");if(ne&&ne!=="auto"||ee&&ee!=="auto")return!0}}}return!1},d.needsCentering=function(b){var S=window.getComputedStyle(b);return S.position!=="absolute"||b.style.top!=="auto"&&b.style.top!==""||b.style.bottom!=="auto"&&b.style.bottom!==""?!1:!d.isInlinePositionSetByStylesheet(b)},d.forceRegisterDialog=function(b){if((window.HTMLDialogElement||b.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",b),b.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new l(b)},d.registerDialog=function(b){b.showModal||d.forceRegisterDialog(b)},d.DialogManager=function(){this.pendingDialogStack=[];var b=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(S){this.forwardTab_=void 0,S.stopPropagation(),b([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=1e5+150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(S){var C=[];S.forEach(function(N){for(var O=0,Y;Y=N.removedNodes[O];++O){if(Y instanceof Element)Y.localName==="dialog"&&C.push(Y);else continue;C=C.concat(Y.querySelectorAll("dialog"))}}),C.length&&b(C)}))},d.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},d.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},d.DialogManager.prototype.updateStacking=function(){for(var b=this.zIndexHigh_,S=0,C;C=this.pendingDialogStack[S];++S)C.updateZIndex(--b,--b),S===0&&(this.overlay.style.zIndex=--b);var N=this.pendingDialogStack[0];if(N){var O=N.dialog.parentNode||document.body;O.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},d.DialogManager.prototype.containedByTopDialog_=function(b){for(;b=i(b);){for(var S=0,C;C=this.pendingDialogStack[S];++S)if(C.dialog===b)return S===0;b=b.parentElement}return!1},d.DialogManager.prototype.handleFocus_=function(b){if(!this.containedByTopDialog_(b.target)&&(b.preventDefault(),b.stopPropagation(),s(b.target),this.forwardTab_!==void 0)){var S=this.pendingDialogStack[0],C=S.dialog,N=C.compareDocumentPosition(b.target);return N&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?S.focus_():document.documentElement.focus()),!1}},d.DialogManager.prototype.handleKey_=function(b){if(this.forwardTab_=void 0,b.keyCode===27){b.preventDefault(),b.stopPropagation();var S=new e("cancel",{bubbles:!1,cancelable:!0}),C=this.pendingDialogStack[0];C&&C.dialog.dispatchEvent(S)&&C.dialog.close()}else b.keyCode===9&&(this.forwardTab_=!b.shiftKey)},d.DialogManager.prototype.checkDOM_=function(b){var S=this.pendingDialogStack.slice();S.forEach(function(C){b.indexOf(C.dialog)!==-1?C.downgradeModal():C.maybeHideModal()})},d.DialogManager.prototype.pushDialog=function(b){var S=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=S?!1:(this.pendingDialogStack.unshift(b)===1&&this.blockDocument(),this.updateStacking(),!0)},d.DialogManager.prototype.removeDialog=function(b){var S=this.pendingDialogStack.indexOf(b);S!==-1&&(this.pendingDialogStack.splice(S,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},d.dm=new d.DialogManager,d.formSubmitter=null,d.useValue=null,window.HTMLDialogElement===void 0){var f=document.createElement("form");if(f.setAttribute("method","dialog"),f.method!=="dialog"){var g=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(g){var v=g.get;g.get=function(){return c(this)?"dialog":v.call(this)};var y=g.set;g.set=function(b){return typeof b=="string"&&b.toLowerCase()==="dialog"?this.setAttribute("method",b):y.call(this,b)},Object.defineProperty(HTMLFormElement.prototype,"method",g)}}document.addEventListener("click",function(b){if(d.formSubmitter=null,d.useValue=null,!b.defaultPrevented){var S=b.target;if(!(!S||!c(S.form))){var C=S.type==="submit"&&["button","input"].indexOf(S.localName)>-1;if(!C){if(!(S.localName==="input"&&S.type==="image"))return;d.useValue=b.offsetX+","+b.offsetY}var N=i(S);N&&(d.formSubmitter=S)}}},!1);var I=HTMLFormElement.prototype.submit,A=function(){if(!c(this))return I.call(this);var b=i(this);b&&b.close()};HTMLFormElement.prototype.submit=A,document.addEventListener("submit",function(b){var S=b.target;if(c(S)){b.preventDefault();var C=i(S);if(C){var N=d.formSubmitter;N&&N.form===S?C.close(d.useValue||N.value):C.close(),d.formSubmitter=null}}},!0)}d.forceRegisterDialog=d.forceRegisterDialog,d.registerDialog=d.registerDialog,typeof t.exports=="object"?t.exports=d:window.dialogPolyfill=d})()})(G8);const H8=gw;/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};wt=function(){var t=[],e=[],n="mdlComponentConfigInternal_";function i(b,S){for(var C=0;C<t.length;C++)if(t[C].className===b)return typeof S<"u"&&(t[C]=S),t[C];return!1}function s(b){var S=b.getAttribute("data-upgraded");return S===null?[""]:S.split(",")}function o(b,S){var C=s(b);return C.indexOf(S)!==-1}function c(b,S,C){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(b,{bubbles:S,cancelable:C});var N=document.createEvent("Events");return N.initEvent(b,S,C),N}function l(b,S){if(typeof b>"u"&&typeof S>"u")for(var C=0;C<t.length;C++)l(t[C].className,t[C].cssClass);else{var N=b;if(typeof S>"u"){var O=i(N);O&&(S=O.cssClass)}for(var Y=document.querySelectorAll("."+S),z=0;z<Y.length;z++)d(Y[z],N)}}function d(b,S){if(!(typeof b=="object"&&b instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var C=c("mdl-componentupgrading",!0,!0);if(b.dispatchEvent(C),!C.defaultPrevented){var N=s(b),O=[];if(S)o(b,S)||O.push(i(S));else{var Y=b.classList;t.forEach(function(Qe){Y.contains(Qe.cssClass)&&O.indexOf(Qe)===-1&&!o(b,Qe.className)&&O.push(Qe)})}for(var z=0,ne=O.length,ee;z<ne;z++){if(ee=O[z],ee){N.push(ee.className),b.setAttribute("data-upgraded",N.join(","));var H=new ee.classConstructor(b);H[n]=ee,e.push(H);for(var Se=0,Pe=ee.callbacks.length;Se<Pe;Se++)ee.callbacks[Se](b);ee.widget&&(b[ee.className]=H)}else throw new Error("Unable to find a registered component for the given class.");var ve=c("mdl-componentupgraded",!0,!1);b.dispatchEvent(ve)}}}function f(b){Array.isArray(b)||(b instanceof Element?b=[b]:b=Array.prototype.slice.call(b));for(var S=0,C=b.length,N;S<C;S++)N=b[S],N instanceof HTMLElement&&(d(N),N.children.length>0&&f(N.children))}function g(b){var S=typeof b.widget>"u"&&typeof b.widget>"u",C=!0;S||(C=b.widget||b.widget);var N={classConstructor:b.constructor||b.constructor,className:b.classAsString||b.classAsString,cssClass:b.cssClass||b.cssClass,widget:C,callbacks:[]};if(t.forEach(function(Y){if(Y.cssClass===N.cssClass)throw new Error("The provided cssClass has already been registered: "+Y.cssClass);if(Y.className===N.className)throw new Error("The provided className has already been registered")}),b.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");var O=i(b.classAsString,N);O||t.push(N)}function v(b,S){var C=i(b);C&&C.callbacks.push(S)}function y(){for(var b=0;b<t.length;b++)l(t[b].className)}function I(b){if(b){var S=e.indexOf(b);e.splice(S,1);var C=b.element_.getAttribute("data-upgraded").split(","),N=C.indexOf(b[n].classAsString);C.splice(N,1),b.element_.setAttribute("data-upgraded",C.join(","));var O=c("mdl-componentdowngraded",!0,!1);b.element_.dispatchEvent(O)}}function A(b){var S=function(N){e.filter(function(O){return O.element_===N}).forEach(I)};if(b instanceof Array||b instanceof NodeList)for(var C=0;C<b.length;C++)S(b[C]);else if(b instanceof Node)S(b);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:l,upgradeElement:d,upgradeElements:f,upgradeAllRegistered:y,registerUpgradedCallback:v,register:g,downgradeElements:A}}();wt.ComponentConfigPublic;wt.ComponentConfig;wt.Component;wt.upgradeDom=wt.upgradeDom;wt.upgradeElement=wt.upgradeElement;wt.upgradeElements=wt.upgradeElements;wt.upgradeAllRegistered=wt.upgradeAllRegistered;wt.registerUpgradedCallback=wt.registerUpgradedCallback;wt.register=wt.register;wt.downgradeElements=wt.downgradeElements;window.componentHandler=wt;window.componentHandler=wt;window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),wt.upgradeAllRegistered()):(wt.upgradeElement=function(){},wt.register=function(){})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialButton=t,t.prototype.Constant_={},t.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},t.prototype.blurHandler_=function(e){e&&this.element_.blur()},t.prototype.disable=function(){this.element_.disabled=!0},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.element_.disabled=!1},t.prototype.enable=t.prototype.enable,t.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:t,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialSpinner=t,t.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},t.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},t.prototype.createLayer=function(e){var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),o.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var c=[i,s,o],l=0;l<c.length;l++){var d=document.createElement("div");d.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),c[l].appendChild(d)}n.appendChild(i),n.appendChild(s),n.appendChild(o),this.element_.appendChild(n)},t.prototype.createLayer=t.prototype.createLayer,t.prototype.stop=function(){this.element_.classList.remove("is-active")},t.prototype.stop=t.prototype.stop,t.prototype.start=function(){this.element_.classList.add("is-active")},t.prototype.start=t.prototype.start,t.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=t,t.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},t.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},t.prototype.onKeyDown_=function(e){var n=e.target.value.split(`
`).length;e.keyCode===13&&n>=this.maxRows&&e.preventDefault()},t.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},t.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.onReset_=function(e){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:t,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var t,e=typeof Object.create=="function"?Object.create:function(r){function a(){}return a.prototype=r,new a},n;if(typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var i;e:{var s={xb:!0},o={};try{o.__proto__=s,i=o.xb;break e}catch{}i=!1}n=i?function(r,a){if(r.__proto__=a,r.__proto__!==a)throw new TypeError(r+" is not extensible");return r}:null}var c=n;function l(r,a){if(r.prototype=e(a.prototype),r.prototype.constructor=r,c)c(r,a);else for(var u in a)if(u!="prototype")if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(a,u);h&&Object.defineProperty(r,u,h)}else r[u]=a[u];r.K=a.prototype}var d=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,u){r!=Array.prototype&&r!=Object.prototype&&(r[a]=u.value)},f=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function g(r,a){if(a){var u=f;r=r.split(".");for(var h=0;h<r.length-1;h++){var p=r[h];p in u||(u[p]={}),u=u[p]}r=r[r.length-1],h=u[r],a=a(h),a!=h&&a!=null&&d(u,r,{configurable:!0,writable:!0,value:a})}}g("Object.is",function(r){return r||function(a,u){return a===u?a!==0||1/a===1/u:a!==a&&u!==u}}),g("Array.prototype.includes",function(r){return r||function(a,u){var h=this;h instanceof String&&(h=String(h));var p=h.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var m=h[u];if(m===a||Object.is(m,a))return!0}return!1}});var v=this;function y(r){return r!==void 0}function I(r){return typeof r=="string"}var A=/^[\w+/_-]+[=]{0,2}$/,b=null;function S(){}function C(r){r.W=void 0,r.Xa=function(){return r.W?r.W:r.W=new r}}function N(r){var a=typeof r;if(a=="object")if(r){if(r instanceof Array)return"array";if(r instanceof Object)return a;var u=Object.prototype.toString.call(r);if(u=="[object Window]")return"object";if(u=="[object Array]"||typeof r.length=="number"&&typeof r.splice<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("splice"))return"array";if(u=="[object Function]"||typeof r.call<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("call"))return"function"}else return"null";else if(a=="function"&&typeof r.call>"u")return"object";return a}function O(r){return N(r)=="array"}function Y(r){var a=N(r);return a=="array"||a=="object"&&typeof r.length=="number"}function z(r){return N(r)=="function"}function ne(r){var a=typeof r;return a=="object"&&r!=null||a=="function"}var ee="closure_uid_"+(1e9*Math.random()>>>0),H=0;function Se(r,a,u){return r.call.apply(r.bind,arguments)}function Pe(r,a,u){if(!r)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,h),r.apply(a,p)}}return function(){return r.apply(a,arguments)}}function ve(r,a,u){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ve=Se:ve=Pe,ve.apply(null,arguments)}function Qe(r,a){var u=Array.prototype.slice.call(arguments,1);return function(){var h=u.slice();return h.push.apply(h,arguments),r.apply(this,h)}}function Oe(r,a){for(var u in a)r[u]=a[u]}var vt=Date.now||function(){return+new Date};function Ee(r,a){r=r.split(".");var u=v;r[0]in u||typeof u.execScript>"u"||u.execScript("var "+r[0]);for(var h;r.length&&(h=r.shift());)!r.length&&y(a)?u[h]=a:u[h]&&u[h]!==Object.prototype[h]?u=u[h]:u=u[h]={}}function ae(r,a){function u(){}u.prototype=a.prototype,r.K=a.prototype,r.prototype=new u,r.prototype.constructor=r,r.vc=function(h,p,m){for(var w=Array(arguments.length-2),E=2;E<arguments.length;E++)w[E-2]=arguments[E];return a.prototype[p].apply(h,w)}}function Re(r){if(Error.captureStackTrace)Error.captureStackTrace(this,Re);else{var a=Error().stack;a&&(this.stack=a)}r&&(this.message=String(r))}ae(Re,Error),Re.prototype.name="CustomError";var Je;function An(r,a){r=r.split("%s");for(var u="",h=r.length-1,p=0;p<h;p++)u+=r[p]+(p<a.length?a[p]:"%s");Re.call(this,u+r[h])}ae(An,Re),An.prototype.name="AssertionError";function dn(r,a){throw new An("Failure"+(r?": "+r:""),Array.prototype.slice.call(arguments,1))}var Un=Array.prototype.indexOf?function(r,a){return Array.prototype.indexOf.call(r,a,void 0)}:function(r,a){if(I(r))return I(a)&&a.length==1?r.indexOf(a,0):-1;for(var u=0;u<r.length;u++)if(u in r&&r[u]===a)return u;return-1},Ut=Array.prototype.forEach?function(r,a,u){Array.prototype.forEach.call(r,a,u)}:function(r,a,u){for(var h=r.length,p=I(r)?r.split(""):r,m=0;m<h;m++)m in p&&a.call(u,p[m],m,r)};function Pr(r,a){for(var u=I(r)?r.split(""):r,h=r.length-1;0<=h;--h)h in u&&a.call(void 0,u[h],h,r)}var na=Array.prototype.filter?function(r,a){return Array.prototype.filter.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=[],p=0,m=I(r)?r.split(""):r,w=0;w<u;w++)if(w in m){var E=m[w];a.call(void 0,E,w,r)&&(h[p++]=E)}return h},L=Array.prototype.map?function(r,a){return Array.prototype.map.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=Array(u),p=I(r)?r.split(""):r,m=0;m<u;m++)m in p&&(h[m]=a.call(void 0,p[m],m,r));return h},te=Array.prototype.some?function(r,a){return Array.prototype.some.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=I(r)?r.split(""):r,p=0;p<u;p++)if(p in h&&a.call(void 0,h[p],p,r))return!0;return!1};function G(r,a){return 0<=Un(r,a)}function fe(r,a){a=Un(r,a);var u;return(u=0<=a)&&Me(r,a),u}function Me(r,a){return Array.prototype.splice.call(r,a,1).length==1}function ct(r,a){e:{for(var u=r.length,h=I(r)?r.split(""):r,p=0;p<u;p++)if(p in h&&a.call(void 0,h[p],p,r)){a=p;break e}a=-1}0<=a&&Me(r,a)}function xe(r,a){var u=0;Pr(r,function(h,p){a.call(void 0,h,p,r)&&Me(r,p)&&u++})}function _(r){return Array.prototype.concat.apply([],arguments)}function T(r){var a=r.length;if(0<a){for(var u=Array(a),h=0;h<a;h++)u[h]=r[h];return u}return[]}function D(r,a,u){return 2>=arguments.length?Array.prototype.slice.call(r,a):Array.prototype.slice.call(r,a,u)}var P=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]},U=/&/g,W=/</g,Z=/>/g,K=/"/g,Q=/'/g,j=/\x00/g,ge=/[\x00&<>"']/;function se(r,a){return r<a?-1:r>a?1:0}function le(r){return ge.test(r)&&(r.indexOf("&")!=-1&&(r=r.replace(U,"&amp;")),r.indexOf("<")!=-1&&(r=r.replace(W,"&lt;")),r.indexOf(">")!=-1&&(r=r.replace(Z,"&gt;")),r.indexOf('"')!=-1&&(r=r.replace(K,"&quot;")),r.indexOf("'")!=-1&&(r=r.replace(Q,"&#39;")),r.indexOf("\0")!=-1&&(r=r.replace(j,"&#0;"))),r}function be(r,a,u){for(var h in r)a.call(u,r[h],h,r)}function De(r){var a={},u;for(u in r)a[u]=r[u];return a}var tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(r,a){for(var u,h,p=1;p<arguments.length;p++){h=arguments[p];for(u in h)r[u]=h[u];for(var m=0;m<tt.length;m++)u=tt[m],Object.prototype.hasOwnProperty.call(h,u)&&(r[u]=h[u])}}var ot="StopIteration"in v?v.StopIteration:{message:"StopIteration",stack:""};function Kt(){}Kt.prototype.next=function(){throw ot},Kt.prototype.ha=function(){return this};function rr(r){if(r instanceof Kt)return r;if(typeof r.ha=="function")return r.ha(!1);if(Y(r)){var a=0,u=new Kt;return u.next=function(){for(;;){if(a>=r.length)throw ot;if(a in r)return r[a++];a++}},u}throw Error("Not implemented")}function Wh(r,a){if(Y(r))try{Ut(r,a,void 0)}catch(u){if(u!==ot)throw u}else{r=rr(r);try{for(;;)a.call(void 0,r.next(),void 0,r)}catch(u){if(u!==ot)throw u}}}function Ls(r){if(Y(r))return T(r);r=rr(r);var a=[];return Wh(r,function(u){a.push(u)}),a}function Fs(r,a){this.g={},this.a=[],this.j=this.h=0;var u=arguments.length;if(1<u){if(u%2)throw Error("Uneven number of arguments");for(var h=0;h<u;h+=2)this.set(arguments[h],arguments[h+1])}else if(r)if(r instanceof Fs)for(u=r.ja(),h=0;h<u.length;h++)this.set(u[h],r.get(u[h]));else for(h in r)this.set(h,r[h])}t=Fs.prototype,t.la=function(){Xt(this);for(var r=[],a=0;a<this.a.length;a++)r.push(this.g[this.a[a]]);return r},t.ja=function(){return Xt(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0};function Xt(r){if(r.h!=r.a.length){for(var a=0,u=0;a<r.a.length;){var h=r.a[a];Zt(r.g,h)&&(r.a[u++]=h),a++}r.a.length=u}if(r.h!=r.a.length){var p={};for(u=a=0;a<r.a.length;)h=r.a[a],Zt(p,h)||(r.a[u++]=h,p[h]=1),a++;r.a.length=u}}t.get=function(r,a){return Zt(this.g,r)?this.g[r]:a},t.set=function(r,a){Zt(this.g,r)||(this.h++,this.a.push(r),this.j++),this.g[r]=a},t.forEach=function(r,a){for(var u=this.ja(),h=0;h<u.length;h++){var p=u[h],m=this.get(p);r.call(a,m,p,this)}},t.ha=function(r){Xt(this);var a=0,u=this.j,h=this,p=new Kt;return p.next=function(){if(u!=h.j)throw Error("The map has changed since the iterator was created");if(a>=h.a.length)throw ot;var m=h.a[a++];return r?m:h.g[m]},p};function Zt(r,a){return Object.prototype.hasOwnProperty.call(r,a)}var Yh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function SN(r,a){if(r){r=r.split("&");for(var u=0;u<r.length;u++){var h=r[u].indexOf("="),p=null;if(0<=h){var m=r[u].substring(0,h);p=r[u].substring(h+1)}else m=r[u];a(m,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}function q0(r,a,u,h){for(var p=u.length;0<=(a=r.indexOf(u,a))&&a<h;){var m=r.charCodeAt(a-1);if((m==38||m==63)&&(m=r.charCodeAt(a+p),!m||m==61||m==38||m==35))return a;a+=p+1}return-1}var K0=/#|$/;function Qh(r,a){var u=r.search(K0),h=q0(r,0,a,u);if(0>h)return null;var p=r.indexOf("&",h);return(0>p||p>u)&&(p=u),h+=a.length+1,decodeURIComponent(r.substr(h,p-h).replace(/\+/g," "))}var TN=/[?&]($|#)/;function Or(r,a){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var u;r instanceof Or?(this.i=y(a)?a:r.i,qm(this,r.j),this.A=r.A,this.h=r.h,Km(this,r.C),this.g=r.g,zm(this,H0(r.a)),this.s=r.s):r&&(u=String(r).match(Yh))?(this.i=!!a,qm(this,u[1]||"",!0),this.A=tu(u[2]||""),this.h=tu(u[3]||"",!0),Km(this,u[4]),this.g=tu(u[5]||"",!0),zm(this,u[6]||"",!0),this.s=tu(u[7]||"")):(this.i=!!a,this.a=new iu(null,this.i))}Or.prototype.toString=function(){var r=[],a=this.j;a&&r.push(nu(a,z0,!0),":");var u=this.h;return(u||a=="file")&&(r.push("//"),(a=this.A)&&r.push(nu(a,z0,!0),"@"),r.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.C,u!=null&&r.push(":",String(u))),(u=this.g)&&(this.h&&u.charAt(0)!="/"&&r.push("/"),r.push(nu(u,u.charAt(0)=="/"?kN:AN,!0))),(u=this.a.toString())&&r.push("?",u),(u=this.s)&&r.push("#",nu(u,xN)),r.join("")};function qm(r,a,u){r.j=u?tu(a,!0):a,r.j&&(r.j=r.j.replace(/:$/,""))}function Km(r,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);r.C=a}else r.C=null}function zm(r,a,u){a instanceof iu?(r.a=a,DN(r.a,r.i)):(u||(a=nu(a,RN)),r.a=new iu(a,r.i))}function Gm(r){return r instanceof Or?new Or(r):new Or(r,void 0)}function tu(r,a){return r?a?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function nu(r,a,u){return I(r)?(r=encodeURI(r).replace(a,CN),u&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function CN(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var z0=/[#\/\?@]/g,AN=/[#\?:]/g,kN=/[#\?]/g,RN=/[#\?@]/g,xN=/#/g;function iu(r,a){this.g=this.a=null,this.h=r||null,this.j=!!a}function Mr(r){r.a||(r.a=new Fs,r.g=0,r.h&&SN(r.h,function(a,u){r.add(decodeURIComponent(a.replace(/\+/g," ")),u)}))}t=iu.prototype,t.add=function(r,a){Mr(this),this.h=null,r=ia(this,r);var u=this.a.get(r);return u||this.a.set(r,u=[]),u.push(a),this.g+=1,this};function Us(r,a){Mr(r),a=ia(r,a),Zt(r.a.g,a)&&(r.h=null,r.g-=r.a.get(a).length,r=r.a,Zt(r.g,a)&&(delete r.g[a],r.h--,r.j++,r.a.length>2*r.h&&Xt(r)))}t.clear=function(){this.a=this.h=null,this.g=0};function G0(r,a){return Mr(r),a=ia(r,a),Zt(r.a.g,a)}t.forEach=function(r,a){Mr(this),this.a.forEach(function(u,h){Ut(u,function(p){r.call(a,p,h,this)},this)},this)},t.ja=function(){Mr(this);for(var r=this.a.la(),a=this.a.ja(),u=[],h=0;h<a.length;h++)for(var p=r[h],m=0;m<p.length;m++)u.push(a[h]);return u},t.la=function(r){Mr(this);var a=[];if(I(r))G0(this,r)&&(a=_(a,this.a.get(ia(this,r))));else{r=this.a.la();for(var u=0;u<r.length;u++)a=_(a,r[u])}return a},t.set=function(r,a){return Mr(this),this.h=null,r=ia(this,r),G0(this,r)&&(this.g-=this.a.get(r).length),this.a.set(r,[a]),this.g+=1,this},t.get=function(r,a){return r?(r=this.la(r),0<r.length?String(r[0]):a):a},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var r=[],a=this.a.ja(),u=0;u<a.length;u++){var h=a[u],p=encodeURIComponent(String(h));h=this.la(h);for(var m=0;m<h.length;m++){var w=p;h[m]!==""&&(w+="="+encodeURIComponent(String(h[m]))),r.push(w)}}return this.h=r.join("&")};function H0(r){var a=new iu;return a.h=r.h,r.a&&(a.a=new Fs(r.a),a.g=r.g),a}function ia(r,a){return a=String(a),r.j&&(a=a.toLowerCase()),a}function DN(r,a){a&&!r.j&&(Mr(r),r.h=null,r.a.forEach(function(u,h){var p=h.toLowerCase();h!=p&&(Us(this,h),Us(this,p),0<u.length&&(this.h=null,this.a.set(ia(this,p),T(u)),this.g+=u.length))},r)),r.j=a}function Vs(r){this.a=Gm(r)}function NN(r,a){a?r.a.a.set(Vt.Sa,a):Us(r.a.a,Vt.Sa)}function PN(r,a){a!==null?r.a.a.set(Vt.Qa,a?"1":"0"):Us(r.a.a,Vt.Qa)}function W0(r){return r.a.a.get(Vt.Pa)||null}function Y0(r,a){a?r.a.a.set(Vt.PROVIDER_ID,a):Us(r.a.a,Vt.PROVIDER_ID)}Vs.prototype.toString=function(){return this.a.toString()};var Vt={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},ra;e:{var Q0=v.navigator;if(Q0){var J0=Q0.userAgent;if(J0){ra=J0;break e}}ra=""}function Le(r){return ra.indexOf(r)!=-1}function X0(){return(Le("Chrome")||Le("CriOS"))&&!Le("Edge")}function Hm(r){return Hm[" "](r),r}Hm[" "]=S;function ON(r,a){var u=FN;return Object.prototype.hasOwnProperty.call(u,r)?u[r]:u[r]=a(r)}var Z0=Le("Opera"),_t=Le("Trident")||Le("MSIE"),Lr=Le("Edge"),MN=Lr||_t,bi=Le("Gecko")&&!(ra.toLowerCase().indexOf("webkit")!=-1&&!Le("Edge"))&&!(Le("Trident")||Le("MSIE"))&&!Le("Edge"),kn=ra.toLowerCase().indexOf("webkit")!=-1&&!Le("Edge"),LN=kn&&Le("Mobile"),Fr=Le("Macintosh");function e1(){var r=v.document;return r?r.documentMode:void 0}var Jh;e:{var Wm="",Ym=function(){var r=ra;if(bi)return/rv:([^\);]+)(\)|;)/.exec(r);if(Lr)return/Edge\/([\d\.]+)/.exec(r);if(_t)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r);if(kn)return/WebKit\/(\S+)/.exec(r);if(Z0)return/(?:Version)[ \/]?(\S+)/.exec(r)}();if(Ym&&(Wm=Ym?Ym[1]:""),_t){var Qm=e1();if(Qm!=null&&Qm>parseFloat(Wm)){Jh=String(Qm);break e}}Jh=Wm}var FN={};function Bs(r){return ON(r,function(){for(var a=0,u=P(String(Jh)).split("."),h=P(String(r)).split("."),p=Math.max(u.length,h.length),m=0;a==0&&m<p;m++){var w=u[m]||"",E=h[m]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],E=/(\d*)(\D*)(.*)/.exec(E)||["","","",""],w[0].length==0&&E[0].length==0)break;a=se(w[1].length==0?0:parseInt(w[1],10),E[1].length==0?0:parseInt(E[1],10))||se(w[2].length==0,E[2].length==0)||se(w[2],E[2]),w=w[3],E=E[3]}while(a==0)}return 0<=a})}var ru,t1=v.document;ru=t1&&_t?e1()||(t1.compatMode=="CSS1Compat"?parseInt(Jh,10):5):void 0;function sa(r,a){this.a=r===i1&&a||"",this.g=n1}sa.prototype.ma=!0,sa.prototype.ka=function(){return this.a},sa.prototype.toString=function(){return"Const{"+this.a+"}"};var n1={},i1={};function js(){this.a="",this.h=s1}js.prototype.ma=!0,js.prototype.ka=function(){return this.a.toString()},js.prototype.g=function(){return 1},js.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function r1(r){return r instanceof js&&r.constructor===js&&r.h===s1?r.a:(dn("expected object of type TrustedResourceUrl, got '"+r+"' of type "+N(r)),"type_error:TrustedResourceUrl")}function UN(){var r=RP;r instanceof sa&&r.constructor===sa&&r.g===n1?r=r.a:(dn("expected object of type Const, got '"+r+"'"),r="type_error:Const");var a=new js;return a.a=r,a}var s1={};function Xn(){this.a="",this.h=c1}Xn.prototype.ma=!0,Xn.prototype.ka=function(){return this.a.toString()},Xn.prototype.g=function(){return 1},Xn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Ur(r){return r instanceof Xn&&r.constructor===Xn&&r.h===c1?r.a:(dn("expected object of type SafeUrl, got '"+r+"' of type "+N(r)),"type_error:SafeUrl")}var o1=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Xh(r){return r instanceof Xn?r:(r=typeof r=="object"&&r.ma?r.ka():String(r),o1.test(r)||(r="about:invalid#zClosurez"),Jm(r))}function a1(r){return r instanceof Xn?r:(r=typeof r=="object"&&r.ma?r.ka():String(r),o1.test(r)||(r="about:invalid#zClosurez"),Jm(r))}var c1={};function Jm(r){var a=new Xn;return a.a=r,a}Jm("about:blank");function oa(){this.a="",this.g=u1}oa.prototype.ma=!0;var u1={};oa.prototype.ka=function(){return this.a},oa.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function Vr(){this.a="",this.j=l1,this.h=null}Vr.prototype.g=function(){return this.h},Vr.prototype.ma=!0,Vr.prototype.ka=function(){return this.a.toString()},Vr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Zh(r){return r instanceof Vr&&r.constructor===Vr&&r.j===l1?r.a:(dn("expected object of type SafeHtml, got '"+r+"' of type "+N(r)),"type_error:SafeHtml")}var l1={};function su(r,a){var u=new Vr;return u.a=r,u.h=a,u}su("<!DOCTYPE html>",0);var VN=su("",0);su("<br>",0);var BN=function(r){var a=!1,u;return function(){return a||(u=r(),a=!0),u}}(function(){if(typeof document>"u")return!1;var r=document.createElement("div"),a=document.createElement("div");return a.appendChild(document.createElement("div")),r.appendChild(a),r.firstChild?(a=r.firstChild.firstChild,r.innerHTML=Zh(VN),!a.parentElement):!1});function jN(r,a){if(r.src=r1(a),b===null)e:{if(a=v.document,(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&A.test(a)){b=a;break e}b=""}a=b,a&&r.setAttribute("nonce",a)}function aa(r,a){a=a instanceof Xn?a:a1(a),r.assign(Ur(a))}function Br(r,a){this.a=y(r)?r:0,this.g=y(a)?a:0}Br.prototype.toString=function(){return"("+this.a+", "+this.g+")"},Br.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},Br.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},Br.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function Xm(r,a){this.width=r,this.height=a}t=Xm.prototype,t.toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function ed(r){return r?new ng(ou(r)):Je||(Je=new ng)}function Zm(r,a){var u=a||document;return u.querySelectorAll&&u.querySelector?u.querySelectorAll("."+r):h1(document,r,a)}function eg(r,a){var u=a||document;if(u.getElementsByClassName)r=u.getElementsByClassName(r)[0];else{u=document;var h=a||u;r=h.querySelectorAll&&h.querySelector&&r?h.querySelector(r?"."+r:""):h1(u,r,a)[0]||null}return r||null}function h1(r,a,u){var h;if(r=u||r,r.querySelectorAll&&r.querySelector&&a)return r.querySelectorAll(a?"."+a:"");if(a&&r.getElementsByClassName){var p=r.getElementsByClassName(a);return p}if(p=r.getElementsByTagName("*"),a){var m={};for(u=h=0;r=p[u];u++){var w=r.className;typeof w.split=="function"&&G(w.split(/\s+/),a)&&(m[h++]=r)}return m.length=h,m}return p}function $N(r,a){be(a,function(u,h){u&&typeof u=="object"&&u.ma&&(u=u.ka()),h=="style"?r.style.cssText=u:h=="class"?r.className=u:h=="for"?r.htmlFor=u:d1.hasOwnProperty(h)?r.setAttribute(d1[h],u):h.lastIndexOf("aria-",0)==0||h.lastIndexOf("data-",0)==0?r.setAttribute(h,u):r[h]=u})}var d1={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function td(r){return r.scrollingElement?r.scrollingElement:(kn||r.compatMode!="CSS1Compat")&&r.body||r.documentElement}function $s(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function ou(r){return r.nodeType==9?r:r.ownerDocument||r.document}function tg(r,a){if("textContent"in r)r.textContent=a;else if(r.nodeType==3)r.data=String(a);else if(r.firstChild&&r.firstChild.nodeType==3){for(;r.lastChild!=r.firstChild;)r.removeChild(r.lastChild);r.firstChild.data=String(a)}else{for(var u;u=r.firstChild;)r.removeChild(u);r.appendChild(ou(r).createTextNode(String(a)))}}function f1(r,a){return a?qN(r,function(u){return!a||I(u.className)&&G(u.className.split(/\s+/),a)}):null}function qN(r,a){for(var u=0;r;){if(a(r))return r;r=r.parentNode,u++}return null}function ng(r){this.a=r||v.document||document}ng.prototype.N=function(){return I(void 0)?this.a.getElementById(void 0):void 0};var nd={Fc:!0},p1={Hc:!0},KN={Ec:!0},m1={Gc:!0};function jr(){throw Error("Do not instantiate directly")}jr.prototype.va=null,jr.prototype.toString=function(){return this.content};function au(r,a,u,h){if(r=r(a||HN,void 0,u),h=(h||ed()).a.createElement("DIV"),r=zN(r),r.match(GN),r=su(r,null),BN())for(;h.lastChild;)h.removeChild(h.lastChild);return h.innerHTML=Zh(r),h.childNodes.length==1&&(r=h.firstChild,r.nodeType==1&&(h=r)),h}function zN(r){if(!ne(r))return le(String(r));if(r instanceof jr){if(r.fa===nd)return r.content;if(r.fa===m1)return le(r.content)}return dn("Soy template output is unsafe for use as HTML: "+r),"zSoyz"}var GN=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,HN={};function WN(r){if(r!=null)switch(r.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function id(){jr.call(this)}ae(id,jr),id.prototype.fa=nd;function we(r){return r!=null&&r.fa===nd?r:r instanceof Vr?ie(Zh(r).toString(),r.g()):ie(le(String(String(r))),WN(r))}function rd(){jr.call(this)}ae(rd,jr),rd.prototype.fa=p1,rd.prototype.va=1;function sd(r,a){this.content=String(r),this.va=a??null}ae(sd,jr),sd.prototype.fa=m1;function Ge(r){return new sd(r,void 0)}var ie=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u,h){return u=new a(String(u)),h!==void 0&&(u.va=h),u}}(id),YN=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u){return new a(String(u))}}(rd);function QN(r){function a(){}var u={label:Et("New password")};a.prototype=r,r=new a;for(var h in u)r[h]=u[h];return r}function Et(r){return(r=String(r))?new sd(r,void 0):""}var g1=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u,h){return u=String(u),u?(u=new a(u),h!==void 0&&(u.va=h),u):""}}(id);function Rn(r){return r!=null&&r.fa===nd?String(String(r.content).replace(iP,"").replace(rP,"&lt;")).replace(eP,XN):le(String(r))}function qs(r){return r!=null&&r.fa===p1?r=String(r).replace(rg,ig):r instanceof Xn?r=String(Ur(r).toString()).replace(rg,ig):(r=String(r),nP.test(r)?r=r.replace(rg,ig):(dn("Bad value `%s` for |filterNormalizeUri",[r]),r="#zSoyz")),r}function v1(r){return r!=null&&r.fa===KN?r=r.content:r==null?r="":r instanceof oa?r instanceof oa&&r.constructor===oa&&r.g===u1?r=r.a:(dn("expected object of type SafeStyle, got '"+r+"' of type "+N(r)),r="type_error:SafeStyle"):(r=String(r),tP.test(r)||(dn("Bad value `%s` for |filterCssValue",[r]),r="zSoyz")),r}var JN={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;","":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function XN(r){return JN[r]}var ZN={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85","":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","":"%EF%BC%81","":"%EF%BC%83","":"%EF%BC%84","":"%EF%BC%86","":"%EF%BC%87","":"%EF%BC%88","":"%EF%BC%89","":"%EF%BC%8A","":"%EF%BC%8B","":"%EF%BC%8C","":"%EF%BC%8F","":"%EF%BC%9A","":"%EF%BC%9B","":"%EF%BC%9D","":"%EF%BC%9F","":"%EF%BC%A0","":"%EF%BC%BB","":"%EF%BC%BD"};function ig(r){return ZN[r]}var eP=/[\x00\x22\x27\x3c\x3e]/g,rg=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,tP=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,nP=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,iP=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,rP=/</g;function sg(){return Ge("Enter a valid phone number")}function y1(){return Ge("Unable to send password reset code to specified email")}function w1(){return Ge("Something went wrong. Please try again.")}function b1(){return Ge("This email already exists without any means of sign-in. Please reset the password to recover.")}function I1(r){r=r||{};var a="";switch(r.code){case"invalid-argument":a+="Client specified an invalid argument.";break;case"invalid-configuration":a+="Client specified an invalid project configuration.";break;case"failed-precondition":a+="Request can not be executed in the current system state.";break;case"out-of-range":a+="Client specified an invalid range.";break;case"unauthenticated":a+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":a+="Client does not have sufficient permission.";break;case"not-found":a+="Specified resource is not found.";break;case"aborted":a+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":a+="The resource that a client tried to create already exists.";break;case"resource-exhausted":a+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":a+="Request cancelled by the client.";break;case"data-loss":a+="Unrecoverable data loss or data corruption.";break;case"unknown":a+="Unknown server error.";break;case"internal":a+="Internal server error.";break;case"not-implemented":a+="API method not implemented by the server.";break;case"unavailable":a+="Service unavailable.";break;case"deadline-exceeded":a+="Request deadline exceeded.";break;case"auth/user-disabled":a+="The user account has been disabled by an administrator.";break;case"auth/timeout":a+="The operation has timed out.";break;case"auth/too-many-requests":a+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":a+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":a+="A network error has occurred. Try again later.";break;case"restart-process":a+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":a+="No sign-in provider is available for the given email, please try with a different email."}return Ge(a)}function _1(){return Ge("Please login again to perform this operation")}function cu(r,a,u){var h=Error.call(this);if(this.message=h.message,"stack"in h&&(this.stack=h.stack),this.code=sP+r,!(r=a)){switch(r="",this.code){case"firebaseui/merge-conflict":r+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:r+=w1()}r=Ge(r).toString()}this.message=r||"",this.credential=u||null}l(cu,Error),cu.prototype.toJSON=function(){return{code:this.code,message:this.message}};var sP="firebaseui/";function Ks(){this.T=this.T,this.C=this.C}var oP=0;Ks.prototype.T=!1,Ks.prototype.m=function(){!this.T&&(this.T=!0,this.o(),oP!=0)&&(this[ee]||(this[ee]=++H))};function uu(r,a){r.T?y(void 0)?a.call(void 0):a():(r.C||(r.C=[]),r.C.push(y(void 0)?ve(a,void 0):a))}Ks.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lu(r){r&&typeof r.m=="function"&&r.m()}var aP=Object.freeze||function(r){return r},E1=!_t||9<=Number(ru),cP=_t&&!Bs("9"),uP=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var r=!1,a=Object.defineProperty({},"passive",{get:function(){r=!0}});try{v.addEventListener("test",S,a),v.removeEventListener("test",S,a)}catch{}return r}();function sr(r,a){this.type=r,this.g=this.target=a,this.h=!1,this.qb=!0}sr.prototype.stopPropagation=function(){this.h=!0},sr.prototype.preventDefault=function(){this.qb=!1};function xn(r,a){if(sr.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,r){var u=this.type=r.type,h=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=a,a=r.relatedTarget){if(bi){e:{try{Hm(a.nodeName);var p=!0;break e}catch{}p=!1}p||(a=null)}}else u=="mouseover"?a=r.fromElement:u=="mouseout"&&(a=r.toElement);this.relatedTarget=a,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.keyCode=r.keyCode||0,this.key=r.key||"",this.j=r.charCode||(u=="keypress"?r.keyCode:0),this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=I(r.pointerType)?r.pointerType:lP[r.pointerType]||"",this.a=r,r.defaultPrevented&&this.preventDefault()}}ae(xn,sr);var lP=aP({2:"touch",3:"pen",4:"mouse"});xn.prototype.stopPropagation=function(){xn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},xn.prototype.preventDefault=function(){xn.K.preventDefault.call(this);var r=this.a;if(r.preventDefault)r.preventDefault();else if(r.returnValue=!1,cP)try{(r.ctrlKey||112<=r.keyCode&&123>=r.keyCode)&&(r.keyCode=-1)}catch{}};var hu="closure_listenable_"+(1e6*Math.random()|0),hP=0;function dP(r,a,u,h,p){this.listener=r,this.proxy=null,this.src=a,this.type=u,this.capture=!!h,this.La=p,this.key=++hP,this.sa=this.Ia=!1}function od(r){r.sa=!0,r.listener=null,r.proxy=null,r.src=null,r.La=null}function ad(r){this.src=r,this.a={},this.g=0}ad.prototype.add=function(r,a,u,h,p){var m=r.toString();r=this.a[m],r||(r=this.a[m]=[],this.g++);var w=ag(r,a,h,p);return-1<w?(a=r[w],u||(a.Ia=!1)):(a=new dP(a,this.src,m,!!h,p),a.Ia=u,r.push(a)),a};function og(r,a){var u=a.type;u in r.a&&fe(r.a[u],a)&&(od(a),r.a[u].length==0&&(delete r.a[u],r.g--))}function ag(r,a,u,h){for(var p=0;p<r.length;++p){var m=r[p];if(!m.sa&&m.listener==a&&m.capture==!!u&&m.La==h)return p}return-1}var cg="closure_lm_"+(1e6*Math.random()|0),ug={};function Ii(r,a,u,h,p){if(h&&h.once)return du(r,a,u,h,p);if(O(a)){for(var m=0;m<a.length;m++)Ii(r,a[m],u,h,p);return null}return u=hg(u),r&&r[hu]?r.J.add(String(a),u,!1,ne(h)?!!h.capture:!!h,p):S1(r,a,u,!1,h,p)}function S1(r,a,u,h,p,m){if(!a)throw Error("Invalid event type");var w=ne(p)?!!p.capture:!!p,E=cd(r);if(E||(r[cg]=E=new ad(r)),u=E.add(a,u,h,w,m),u.proxy)return u;if(h=fP(),u.proxy=h,h.src=r,h.listener=u,r.addEventListener)uP||(p=w),p===void 0&&(p=!1),r.addEventListener(a.toString(),h,p);else if(r.attachEvent)r.attachEvent(T1(a.toString()),h);else if(r.addListener&&r.removeListener)r.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");return u}function fP(){var r=pP,a=E1?function(u){return r.call(a.src,a.listener,u)}:function(u){if(u=r.call(a.src,a.listener,u),!u)return u};return a}function du(r,a,u,h,p){if(O(a)){for(var m=0;m<a.length;m++)du(r,a[m],u,h,p);return null}return u=hg(u),r&&r[hu]?r.J.add(String(a),u,!0,ne(h)?!!h.capture:!!h,p):S1(r,a,u,!0,h,p)}function zs(r,a,u,h,p){if(O(a))for(var m=0;m<a.length;m++)zs(r,a[m],u,h,p);else h=ne(h)?!!h.capture:!!h,u=hg(u),r&&r[hu]?(r=r.J,a=String(a).toString(),a in r.a&&(m=r.a[a],u=ag(m,u,h,p),-1<u&&(od(m[u]),Me(m,u),m.length==0&&(delete r.a[a],r.g--)))):r&&(r=cd(r))&&(a=r.a[a.toString()],r=-1,a&&(r=ag(a,u,h,p)),(u=-1<r?a[r]:null)&&$r(u))}function $r(r){if(typeof r!="number"&&r&&!r.sa){var a=r.src;if(a&&a[hu])og(a.J,r);else{var u=r.type,h=r.proxy;a.removeEventListener?a.removeEventListener(u,h,r.capture):a.detachEvent?a.detachEvent(T1(u),h):a.addListener&&a.removeListener&&a.removeListener(h),(u=cd(a))?(og(u,r),u.g==0&&(u.src=null,a[cg]=null)):od(r)}}}function T1(r){return r in ug?ug[r]:ug[r]="on"+r}function C1(r,a,u,h){var p=!0;if((r=cd(r))&&(a=r.a[a.toString()]))for(a=a.concat(),r=0;r<a.length;r++){var m=a[r];m&&m.capture==u&&!m.sa&&(m=A1(m,h),p=p&&m!==!1)}return p}function A1(r,a){var u=r.listener,h=r.La||r.src;return r.Ia&&$r(r),u.call(h,a)}function pP(r,a){if(r.sa)return!0;if(!E1){if(!a)e:{a=["window","event"];for(var u=v,h=0;h<a.length;h++)if(u=u[a[h]],u==null){a=null;break e}a=u}if(h=a,a=new xn(h,this),u=!0,!(0>h.keyCode||h.returnValue!=null)){e:{var p=!1;if(h.keyCode==0)try{h.keyCode=-1;break e}catch{p=!0}(p||h.returnValue==null)&&(h.returnValue=!0)}for(h=[],p=a.g;p;p=p.parentNode)h.push(p);for(r=r.type,p=h.length-1;!a.h&&0<=p;p--){a.g=h[p];var m=C1(h[p],r,!0,a);u=u&&m}for(p=0;!a.h&&p<h.length;p++)a.g=h[p],m=C1(h[p],r,!1,a),u=u&&m}return u}return A1(r,new xn(a,this))}function cd(r){return r=r[cg],r instanceof ad?r:null}var lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function hg(r){return z(r)?r:(r[lg]||(r[lg]=function(a){return r.handleEvent(a)}),r[lg])}function Bt(){Ks.call(this),this.J=new ad(this),this.wb=this,this.Ha=null}ae(Bt,Ks),Bt.prototype[hu]=!0,Bt.prototype.Za=function(r){this.Ha=r},Bt.prototype.removeEventListener=function(r,a,u,h){zs(this,r,a,u,h)};function qr(r,a){var u,h=r.Ha;if(h)for(u=[];h;h=h.Ha)u.push(h);if(r=r.wb,h=a.type||a,I(a))a=new sr(a,r);else if(a instanceof sr)a.target=a.target||r;else{var p=a;a=new sr(h,r),ze(a,p)}if(p=!0,u)for(var m=u.length-1;!a.h&&0<=m;m--){var w=a.g=u[m];p=ud(w,h,!0,a)&&p}if(a.h||(w=a.g=r,p=ud(w,h,!0,a)&&p,a.h||(p=ud(w,h,!1,a)&&p)),u)for(m=0;!a.h&&m<u.length;m++)w=a.g=u[m],p=ud(w,h,!1,a)&&p;return p}Bt.prototype.o=function(){if(Bt.K.o.call(this),this.J){var r=this.J,a;for(a in r.a){for(var u=r.a[a],h=0;h<u.length;h++)od(u[h]);delete r.a[a],r.g--}}this.Ha=null};function ud(r,a,u,h){if(a=r.J.a[String(a)],!a)return!0;a=a.concat();for(var p=!0,m=0;m<a.length;++m){var w=a[m];if(w&&!w.sa&&w.capture==u){var E=w.listener,R=w.La||w.src;w.Ia&&og(r.J,w),p=E.call(R,h)!==!1&&p}}return p&&h.qb!=0}var Zn={},k1=0;function R1(r,a){if(!r)throw Error("Event target element must be provided!");if(r=dg(r),Zn[r]&&Zn[r].length)for(var u=0;u<Zn[r].length;u++)qr(Zn[r][u],a)}function mP(r){var a=dg(r.N());Zn[a]&&Zn[a].length&&(ct(Zn[a],function(u){return u==r}),Zn[a].length||delete Zn[a])}function dg(r){return typeof r.a>"u"&&(r.a=k1,k1++),r.a}function ld(r){if(!r)throw Error("Event target element must be provided!");Bt.call(this),this.a=r}l(ld,Bt),ld.prototype.N=function(){return this.a},ld.prototype.register=function(){var r=dg(this.N());Zn[r]?G(Zn[r],this)||Zn[r].push(this):Zn[r]=[this]};function x1(r){if(!r)return!1;try{return!!r.$goog_Thenable}catch{return!1}}function fg(r,a){this.h=r,this.j=a,this.g=0,this.a=null}fg.prototype.get=function(){if(0<this.g){this.g--;var r=this.a;this.a=r.next,r.next=null}else r=this.h();return r};function D1(r,a){r.j(a),100>r.g&&(r.g++,a.next=r.a,r.a=a)}function N1(){this.g=this.a=null}var P1=new fg(function(){return new pg},function(r){r.reset()});N1.prototype.add=function(r,a){var u=P1.get();u.set(r,a),this.g?this.g.next=u:this.a=u,this.g=u};function gP(){var r=M1,a=null;return r.a&&(a=r.a,r.a=r.a.next,r.a||(r.g=null),a.next=null),a}function pg(){this.next=this.g=this.a=null}pg.prototype.set=function(r,a){this.a=r,this.g=a,this.next=null},pg.prototype.reset=function(){this.next=this.g=this.a=null};function O1(r){v.setTimeout(function(){throw r},0)}var mg;function vP(){var r=v.MessageChannel;if(typeof r>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Le("Presto")&&(r=function(){var p=document.createElement("IFRAME");p.style.display="none",p.src="",document.documentElement.appendChild(p);var m=p.contentWindow;p=m.document,p.open(),p.write(""),p.close();var w="callImmediate"+Math.random(),E=m.location.protocol=="file:"?"*":m.location.protocol+"//"+m.location.host;p=ve(function(R){(E=="*"||R.origin==E)&&R.data==w&&this.port1.onmessage()},this),m.addEventListener("message",p,!1),this.port1={},this.port2={postMessage:function(){m.postMessage(w,E)}}}),typeof r<"u"&&!Le("Trident")&&!Le("MSIE")){var a=new r,u={},h=u;return a.port1.onmessage=function(){if(y(u.next)){u=u.next;var p=u.gb;u.gb=null,p()}},function(p){h.next={gb:p},h=h.next,a.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(p){var m=document.createElement("SCRIPT");m.onreadystatechange=function(){m.onreadystatechange=null,m.parentNode.removeChild(m),m=null,p(),p=null},document.documentElement.appendChild(m)}:function(p){v.setTimeout(p,0)}}function gg(r,a){hd||yP(),vg||(hd(),vg=!0),M1.add(r,a)}var hd;function yP(){if(v.Promise&&v.Promise.resolve){var r=v.Promise.resolve(void 0);hd=function(){r.then(L1)}}else hd=function(){var a=L1;!z(v.setImmediate)||v.Window&&v.Window.prototype&&!Le("Edge")&&v.Window.prototype.setImmediate==v.setImmediate?(mg||(mg=vP()),mg(a)):v.setImmediate(a)}}var vg=!1,M1=new N1;function L1(){for(var r;r=gP();){try{r.a.call(r.g)}catch(a){O1(a)}D1(P1,r)}vg=!1}function jt(r){if(this.a=Gs,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,r!=S)try{var a=this;r.call(void 0,function(u){Hs(a,fu,u)},function(u){if(!(u instanceof ua))try{throw u instanceof Error?u:Error("Promise rejected.")}catch{}Hs(a,or,u)})}catch(u){Hs(this,or,u)}}var Gs=0,fu=2,or=3;function F1(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}F1.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var U1=new fg(function(){return new F1},function(r){r.reset()});function yg(r,a,u){var h=U1.get();return h.s=r,h.g=a,h.j=u,h}function St(r){if(r instanceof jt)return r;var a=new jt(S);return Hs(a,fu,r),a}function ca(r){return new jt(function(a,u){u(r)})}jt.prototype.then=function(r,a,u){return B1(this,z(r)?r:null,z(a)?a:null,u)},jt.prototype.$goog_Thenable=!0,t=jt.prototype,t.fc=function(r,a){return r=yg(r,r,a),r.h=!0,wg(this,r),this},t.Ca=function(r,a){return B1(this,null,r,a)},t.cancel=function(r){this.a==Gs&&gg(function(){var a=new ua(r);V1(this,a)},this)};function V1(r,a){if(r.a==Gs)if(r.h){var u=r.h;if(u.g){for(var h=0,p=null,m=null,w=u.g;w&&(w.h||(h++,w.a==r&&(p=w),!(p&&1<h)));w=w.next)p||(m=w);p&&(u.a==Gs&&h==1?V1(u,a):(m?(h=m,h.next==u.j&&(u.j=h),h.next=h.next.next):$1(u),q1(u,p,or,a)))}r.h=null}else Hs(r,or,a)}function wg(r,a){r.g||r.a!=fu&&r.a!=or||j1(r),r.j?r.j.next=a:r.g=a,r.j=a}function B1(r,a,u,h){var p=yg(null,null,null);return p.a=new jt(function(m,w){p.s=a?function(E){try{var R=a.call(h,E);m(R)}catch($){w($)}}:m,p.g=u?function(E){try{var R=u.call(h,E);!y(R)&&E instanceof ua?w(E):m(R)}catch($){w($)}}:w}),p.a.h=r,wg(r,p),p.a}t.hc=function(r){this.a=Gs,Hs(this,fu,r)},t.ic=function(r){this.a=Gs,Hs(this,or,r)};function Hs(r,a,u){if(r.a==Gs){r===u&&(a=or,u=new TypeError("Promise cannot resolve to itself")),r.a=1;e:{var h=u,p=r.hc,m=r.ic;if(h instanceof jt){wg(h,yg(p||S,m||null,r));var w=!0}else if(x1(h))h.then(p,m,r),w=!0;else{if(ne(h))try{var E=h.then;if(z(E)){wP(h,E,p,m,r),w=!0;break e}}catch(R){m.call(r,R),w=!0;break e}w=!1}}w||(r.A=u,r.a=a,r.h=null,j1(r),a!=or||u instanceof ua||bP(r,u))}}function wP(r,a,u,h,p){function m(R){E||(E=!0,h.call(p,R))}function w(R){E||(E=!0,u.call(p,R))}var E=!1;try{a.call(r,w,m)}catch(R){m(R)}}function j1(r){r.i||(r.i=!0,gg(r.Hb,r))}function $1(r){var a=null;return r.g&&(a=r.g,r.g=a.next,a.next=null),r.g||(r.j=null),a}t.Hb=function(){for(var r;r=$1(this);)q1(this,r,this.a,this.A);this.i=!1};function q1(r,a,u,h){if(u==or&&a.g&&!a.h)for(;r&&r.s;r=r.h)r.s=!1;if(a.a)a.a.h=null,K1(a,u,h);else try{a.h?a.s.call(a.j):K1(a,u,h)}catch(p){z1.call(null,p)}D1(U1,a)}function K1(r,a,u){a==fu?r.s.call(r.j,u):r.g&&r.g.call(r.j,u)}function bP(r,a){r.s=!0,gg(function(){r.s&&z1.call(null,a)})}var z1=O1;function ua(r){Re.call(this,r)}ae(ua,Re),ua.prototype.name="cancel";function G1(r,a,u){a||(a={}),u=u||window;var h=r instanceof Xn?r:Xh(typeof r.href<"u"?r.href:String(r));r=a.target||r.target;var p=[];for(m in a)switch(m){case"width":case"height":case"top":case"left":p.push(m+"="+a[m]);break;case"target":case"noopener":case"noreferrer":break;default:p.push(m+"="+(a[m]?1:0))}var m=p.join(",");return(Le("iPhone")&&!Le("iPod")&&!Le("iPad")||Le("iPad")||Le("iPod"))&&u.navigator&&u.navigator.standalone&&r&&r!="_self"?(m=u.document.createElement("A"),h=h instanceof Xn?h:a1(h),m.href=Ur(h),m.setAttribute("target",r),a.noreferrer&&m.setAttribute("rel","noreferrer"),a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,u,1),m.dispatchEvent(a),u={}):a.noreferrer?(u=u.open("",r,m),a=Ur(h).toString(),u&&(MN&&a.indexOf(";")!=-1&&(a="'"+a.replace(/'/g,"%27")+"'"),u.opener=null,a=su('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+le(a)+'">',null),u.document.write(Zh(a)),u.document.close())):(u=u.open(Ur(h).toString(),r,m))&&a.noopener&&(u.opener=null),u}function H1(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function la(r){G1(r,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function dd(r,a){if(r=ne(r)&&r.nodeType==1?r:document.querySelector(String(r)),r==null)throw Error(a||"Cannot find element.");return r}function ar(){return window.location.href}function IP(){var r=null;return new jt(function(a){v.document.readyState=="complete"?a():(r=function(){a()},du(window,"load",r))}).Ca(function(a){throw zs(window,"load",r),a})}function _P(){for(var r=32,a=[];0<r;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),r--;return a.join("")}function EP(r,a,u){return u=u===void 0?{}:u,Object.keys(r).filter(function(h){return a.includes(h)}).reduce(function(h,p){return h[p]=r[p],h},u)}function Kr(r){var a=CP;this.s=[],this.T=a,this.O=r||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}Kr.prototype.cancel=function(r){if(this.a)this.h instanceof Kr&&this.h.cancel();else{if(this.g){var a=this.g;delete this.g,r?a.cancel(r):(a.C--,0>=a.C&&a.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(r=new mu,fd(this),pu(this,!1,r))}},Kr.prototype.L=function(r,a){this.A=!1,pu(this,r,a)};function pu(r,a,u){r.a=!0,r.h=u,r.j=!a,Q1(r)}function fd(r){if(r.a){if(!r.J)throw new pd;r.J=!1}}Kr.prototype.callback=function(r){fd(this),pu(this,!0,r)};function W1(r,a,u){r.s.push([a,u,void 0]),r.a&&Q1(r)}Kr.prototype.then=function(r,a,u){var h,p,m=new jt(function(w,E){h=w,p=E});return W1(this,h,function(w){w instanceof mu?m.cancel():p(w)}),m.then(r,a,u)},Kr.prototype.$goog_Thenable=!0;function Y1(r){return te(r.s,function(a){return z(a[1])})}function Q1(r){if(r.i&&r.a&&Y1(r)){var a=r.i,u=md[a];u&&(v.clearTimeout(u.a),delete md[a]),r.i=0}r.g&&(r.g.C--,delete r.g),a=r.h;for(var h=u=!1;r.s.length&&!r.A;){var p=r.s.shift(),m=p[0],w=p[1];if(p=p[2],m=r.j?w:m)try{var E=m.call(p||r.O,a);y(E)&&(r.j=r.j&&(E==a||E instanceof Error),r.h=a=E),(x1(a)||typeof v.Promise=="function"&&a instanceof v.Promise)&&(h=!0,r.A=!0)}catch(R){a=R,r.j=!0,Y1(r)||(u=!0)}}r.h=a,h&&(E=ve(r.L,r,!0),h=ve(r.L,r,!1),a instanceof Kr?(W1(a,E,h),a.l=!0):a.then(E,h)),u&&(a=new J1(a),md[a.a]=a,r.i=a.a)}function pd(){Re.call(this)}ae(pd,Re),pd.prototype.message="Deferred has already fired",pd.prototype.name="AlreadyCalledError";function mu(){Re.call(this)}ae(mu,Re),mu.prototype.message="Deferred was canceled",mu.prototype.name="CanceledError";function J1(r){this.a=v.setTimeout(ve(this.h,this),0),this.g=r}J1.prototype.h=function(){throw delete md[this.a],this.g};var md={};function SP(r){var a={},u=a.document||document,h=r1(r).toString(),p=document.createElement("SCRIPT"),m={rb:p,sb:void 0},w=new Kr(m),E=null,R=a.timeout!=null?a.timeout:5e3;return 0<R&&(E=window.setTimeout(function(){gd(p,!0);var $=new bg(kP,"Timeout reached for loading script "+h);fd(w),pu(w,!1,$)},R),m.sb=E),p.onload=p.onreadystatechange=function(){p.readyState&&p.readyState!="loaded"&&p.readyState!="complete"||(gd(p,a.xc||!1,E),w.callback(null))},p.onerror=function(){gd(p,!0,E);var $=new bg(AP,"Error while loading script "+h);fd(w),pu(w,!1,$)},m=a.attributes||{},ze(m,{type:"text/javascript",charset:"UTF-8"}),$N(p,m),jN(p,r),TP(u).appendChild(p),w}function TP(r){var a=(r||document).getElementsByTagName("HEAD");return a&&a.length!=0?a[0]:r.documentElement}function CP(){if(this&&this.rb){var r=this.rb;r&&r.tagName=="SCRIPT"&&gd(r,!0,this.sb)}}function gd(r,a,u){u!=null&&v.clearTimeout(u),r.onload=S,r.onerror=S,r.onreadystatechange=S,a&&window.setTimeout(function(){$s(r)},0)}var AP=0,kP=1;function bg(r,a){var u="Jsloader error (code #"+r+")";a&&(u+=": "+a),Re.call(this,u),this.code=r}ae(bg,Re);function gu(){return v.google&&v.google.accounts&&v.google.accounts.id||null}function Ig(r){this.a=r||gu(),this.h=!1,this.g=null}Ig.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function X1(r,a,u){if(r.a&&a)return function(){return r.h=!0,new jt(function(p){r.g=p,r.a.initialize({client_id:a,callback:p,auto_select:!u}),r.a.prompt()})}();if(a){var h=_g.Xa().load().then(function(){return r.a=gu(),X1(r,a,u)}).Ca(function(){return null});return St(h)}return St(null)}C(Ig);var RP=new sa(i1,"https://accounts.google.com/gsi/client");function _g(){this.a=null}_g.prototype.load=function(){var r=this;if(this.a)return this.a;var a=UN();return gu()?St():this.a=IP().then(function(){if(!gu())return new jt(function(u,h){var p=setTimeout(function(){r.a=null,h(Error("Network error!"))},1e4);v.onGoogleLibraryLoad=function(){clearTimeout(p),u()},St(SP(a)).then(function(){gu()&&u()}).Ca(function(m){clearTimeout(p),r.a=null,h(m)})})})},C(_g);function Eg(r,a){this.a=r,this.g=a||function(u){throw u}}Eg.prototype.confirm=function(r){return St(this.a.confirm(r)).Ca(this.g)};function Sg(r,a,u){this.reset(r,a,u,void 0,void 0)}Sg.prototype.a=null,Sg.prototype.reset=function(r,a,u,h,p){this.h=h||vt(),this.j=r,this.s=a,this.g=u,delete this.a};function Tg(r){this.s=r,this.a=this.h=this.j=this.g=null}function vd(r,a){this.name=r,this.value=a}vd.prototype.toString=function(){return this.name};var Z1=new vd("SEVERE",1e3),eI=new vd("WARNING",900),tI=new vd("CONFIG",700);function nI(r){return r.j?r.j:r.g?nI(r.g):(dn("Root logger has no level set."),null)}Tg.prototype.log=function(r,a,u){if(r.value>=nI(this).value)for(z(a)&&(a=a()),r=new Sg(r,String(a),this.s),u&&(r.a=u),u=this;u;){var h=u,p=r;if(h.a)for(var m=0;a=h.a[m];m++)a(p);u=u.g}};var Cg={},vu=null;function iI(){vu||(vu=new Tg(""),Cg[""]=vu,vu.j=tI)}function rI(r){iI();var a;if(!(a=Cg[r])){a=new Tg(r);var u=r.lastIndexOf("."),h=r.substr(u+1);u=rI(r.substr(0,u)),u.h||(u.h={}),u.h[h]=a,a.g=u,Cg[r]=a}return a}function yd(){this.a=vt()}var Ag=null;yd.prototype.set=function(r){this.a=r},yd.prototype.reset=function(){this.set(vt())},yd.prototype.get=function(){return this.a};function yu(r){this.j=r||"",Ag||(Ag=new yd),this.s=Ag}yu.prototype.a=!0,yu.prototype.g=!0,yu.prototype.h=!1;function Ws(r){return 10>r?"0"+r:String(r)}function xP(r,a){r=(r.h-a)/1e3,a=r.toFixed(3);var u=0;if(1>r)u=2;else for(;100>r;)u++,r*=10;for(;0<u--;)a=" "+a;return a}function sI(r){yu.call(this,r)}ae(sI,yu);function DP(r,a){var u=[];if(u.push(r.j," "),r.g){var h=new Date(a.h);u.push("[",Ws(h.getFullYear()-2e3)+Ws(h.getMonth()+1)+Ws(h.getDate())+" "+Ws(h.getHours())+":"+Ws(h.getMinutes())+":"+Ws(h.getSeconds())+"."+Ws(Math.floor(h.getMilliseconds()/10)),"] ")}return u.push("[",xP(a,r.s.get()),"s] "),u.push("[",a.g,"] "),u.push(a.s),r.h&&(a=a.a)&&u.push(`
`,a instanceof Error?a.message:a.toString()),r.a&&u.push(`
`),u.join("")}function oI(){this.s=ve(this.h,this),this.a=new sI,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}oI.prototype.h=function(r){function a(m){if(m){if(m.value>=Z1.value)return"error";if(m.value>=eI.value)return"warn";if(m.value>=tI.value)return"log"}return"debug"}if(!this.j[r.g]){var u=DP(this.a,r),h=NP;if(h){var p=a(r.j);PP(h,p,u,r.a)}}};var NP=v.console;function PP(r,a,u,h){r[a]?r[a](u,h||""):r.log(u,h||"")}function ei(r,a){var u=kg;u&&u.log(Z1,r,a)}var kg;kg=rI("firebaseui");var Rg=new oI;if(Rg.g!=1){var wd;iI(),wd=vu;var OP=Rg.s;wd.a||(wd.a=[]),wd.a.push(OP),Rg.g=!0}function zr(r){var a=kg;a&&a.log(eI,r,void 0)}function aI(){this.a=(typeof document>"u"?null:document)||{cookie:""}}t=aI.prototype,t.set=function(r,a,u,h,p,m){if(/[;=\s]/.test(r))throw Error('Invalid cookie name "'+r+'"');if(/[;\r\n]/.test(a))throw Error('Invalid cookie value "'+a+'"');y(u)||(u=-1),p=p?";domain="+p:"",h=h?";path="+h:"",m=m?";secure":"",u=0>u?"":u==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(vt()+1e3*u).toUTCString(),this.a.cookie=r+"="+a+p+h+u+m},t.get=function(r,a){for(var u=r+"=",h=(this.a.cookie||"").split(";"),p=0,m;p<h.length;p++){if(m=P(h[p]),m.lastIndexOf(u,0)==0)return m.substr(u.length);if(m==r)return""}return a},t.ja=function(){return xg(this).keys},t.la=function(){return xg(this).values},t.clear=function(){for(var r=xg(this).keys,a=r.length-1;0<=a;a--){var u=r[a];this.get(u),this.set(u,"",0,void 0,void 0)}};function xg(r){r=(r.a.cookie||"").split(";");for(var a=[],u=[],h,p,m=0;m<r.length;m++)p=P(r[m]),h=p.indexOf("="),h==-1?(a.push(""),u.push(p)):(a.push(p.substring(0,h)),u.push(p.substring(h+1)));return{keys:a,values:u}}var bd=new aI;function cI(){}function ha(r,a,u,h){this.h=typeof r<"u"&&r!==null?r:-1,this.g=a||null,this.a=u||null,this.j=!!h}l(ha,cI),ha.prototype.set=function(r,a){bd.set(r,a,this.h,this.g,this.a,this.j)},ha.prototype.get=function(r){return bd.get(r)||null},ha.prototype.ra=function(r){var a=this.g,u=this.a;bd.get(r),bd.set(r,"",0,a,u)};function Dg(r,a){this.g=r,this.a=a||null}function uI(r){return{email:r.g,credential:r.a&&r.a.toJSON()}}function lI(r){if(r&&r.email){var a=r.credential&&pe.auth.AuthCredential.fromJSON(r.credential);return new Dg(r.email,a)}return null}function hI(r){this.a=r||null}function dI(r){for(var a=[],u=0,h=0;h<r.length;h++){var p=r.charCodeAt(h);255<p&&(a[u++]=p&255,p>>=8),a[u++]=p}return a}function MP(r){return L(r,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}function Id(r){for(this.i=r,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(da*(this.j+1)),r=0;r<this.g;r++)this.a[r]=[this.i[4*r],this.i[4*r+1],this.i[4*r+2],this.i[4*r+3]];var a=Array(4);for(r=this.g;r<da*(this.j+1);r++){if(a[0]=this.a[r-1][0],a[1]=this.a[r-1][1],a[2]=this.a[r-1][2],a[3]=this.a[r-1][3],r%this.g==0){var u=a,h=u[0];u[0]=u[1],u[1]=u[2],u[2]=u[3],u[3]=h,vI(a),a[0]^=Ed[r/this.g][0],a[1]^=Ed[r/this.g][1],a[2]^=Ed[r/this.g][2],a[3]^=Ed[r/this.g][3]}else 6<this.g&&r%this.g==4&&vI(a);this.a[r]=Array(4),this.a[r][0]=this.a[r-this.g][0]^a[0],this.a[r][1]=this.a[r-this.g][1]^a[1],this.a[r][2]=this.a[r-this.g][2]^a[2],this.a[r][3]=this.a[r-this.g][3]^a[3]}}Id.prototype.A=16;var da=Id.prototype.A/4;function fI(r,a){for(var u,h=0;h<da;h++)for(var p=0;4>p;p++)u=4*p+h,u=a[u],r.h[h][p]=u}function pI(r){for(var a=[],u=0;u<da;u++)for(var h=0;4>h;h++)a[4*h+u]=r.h[u][h];return a}function fa(r,a){for(var u=0;4>u;u++)for(var h=0;4>h;h++)r.h[u][h]^=r.a[4*a+h][u]}function _d(r,a){for(var u=0;4>u;u++)for(var h=0;4>h;h++)r.h[u][h]=a[r.h[u][h]]}function mI(r){for(var a=1;4>a;a++)for(var u=0;4>u;u++)r.s[a][u]=r.h[a][u];for(a=1;4>a;a++)for(u=0;4>u;u++)r.h[a][u]=r.s[a][(u+a)%da]}function gI(r){for(var a=1;4>a;a++)for(var u=0;4>u;u++)r.s[a][(u+a)%da]=r.h[a][u];for(a=1;4>a;a++)for(u=0;4>u;u++)r.h[a][u]=r.s[a][u]}function vI(r){r[0]=pa[r[0]],r[1]=pa[r[1]],r[2]=pa[r[2]],r[3]=pa[r[3]]}var pa=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],yI=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Ed=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Sd=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Td=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Cd=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Ad=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],kd=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Rd=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function wI(r,a){r=new Id(II(r)),a=dI(a);for(var u=a.splice(0,16),h="",p;u.length;){p=16-u.length;for(var m=0;m<p;m++)u.push(0);for(p=r,fI(p,u),fa(p,0),u=1;u<p.j;++u){_d(p,pa),mI(p),m=p.h;for(var w=p.s[0],E=0;4>E;E++)w[0]=m[0][E],w[1]=m[1][E],w[2]=m[2][E],w[3]=m[3][E],m[0][E]=Sd[w[0]]^Td[w[1]]^w[2]^w[3],m[1][E]=w[0]^Sd[w[1]]^Td[w[2]]^w[3],m[2][E]=w[0]^w[1]^Sd[w[2]]^Td[w[3]],m[3][E]=Td[w[0]]^w[1]^w[2]^Sd[w[3]];fa(p,u)}_d(p,pa),mI(p),fa(p,p.j),h+=MP(pI(p)),u=a.splice(0,16)}return h}function bI(r,a){r=new Id(II(r));for(var u=[],h=0;h<a.length;h+=2)u.push(parseInt(a.substring(h,h+2),16));var p=u.splice(0,16);for(a="";p.length;){for(h=r,fI(h,p),fa(h,h.j),p=1;p<h.j;++p){gI(h),_d(h,yI),fa(h,h.j-p);for(var m=h.h,w=h.s[0],E=0;4>E;E++)w[0]=m[0][E],w[1]=m[1][E],w[2]=m[2][E],w[3]=m[3][E],m[0][E]=Rd[w[0]]^Ad[w[1]]^kd[w[2]]^Cd[w[3]],m[1][E]=Cd[w[0]]^Rd[w[1]]^Ad[w[2]]^kd[w[3]],m[2][E]=kd[w[0]]^Cd[w[1]]^Rd[w[2]]^Ad[w[3]],m[3][E]=Ad[w[0]]^kd[w[1]]^Cd[w[2]]^Rd[w[3]]}if(gI(h),_d(h,yI),fa(h,0),h=pI(h),8192>=h.length)h=String.fromCharCode.apply(null,h);else{for(p="",m=0;m<h.length;m+=8192)p+=String.fromCharCode.apply(null,D(h,m,m+8192));h=p}a+=h,p=u.splice(0,16)}return a.replace(/(\x00)+$/,"")}function II(r){r=dI(r.substring(0,32));for(var a=32-r.length,u=0;u<a;u++)r.push(0);return r}function _I(r){var a=[];return Ng(new LP,r,a),a.join("")}function LP(){}function Ng(r,a,u){if(a==null)u.push("null");else{if(typeof a=="object"){if(O(a)){var h=a;a=h.length,u.push("[");for(var p="",m=0;m<a;m++)u.push(p),Ng(r,h[m],u),p=",";u.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{u.push("{"),p="";for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(m=a[h],typeof m!="function"&&(u.push(p),SI(h,u),u.push(":"),Ng(r,m,u),p=","));u.push("}");return}}switch(typeof a){case"string":SI(a,u);break;case"number":u.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":u.push(String(a));break;case"function":u.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var EI={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},FP=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function SI(r,a){a.push('"',r.replace(FP,function(u){var h=EI[u];return h||(h="\\u"+(u.charCodeAt(0)|65536).toString(16).substr(1),EI[u]=h),h}),'"')}function wu(r){this.a=r}wu.prototype.set=function(r,a){y(a)?this.a.set(r,_I(a)):this.a.ra(r)},wu.prototype.get=function(r){try{var a=this.a.get(r)}catch{return}if(a!==null)try{return JSON.parse(a)}catch{throw"Storage: Invalid value was encountered"}};function xd(){}ae(xd,cI),xd.prototype.clear=function(){var r=Ls(this.ha(!0)),a=this;Ut(r,function(u){a.ra(u)})};function Dd(r){this.a=r}ae(Dd,xd);function Nd(r){if(!r.a)return!1;try{return r.a.setItem("__sak","1"),r.a.removeItem("__sak"),!0}catch{return!1}}t=Dd.prototype,t.set=function(r,a){try{this.a.setItem(r,a)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},t.get=function(r){if(r=this.a.getItem(r),!I(r)&&r!==null)throw"Storage mechanism: Invalid value was encountered";return r},t.ra=function(r){this.a.removeItem(r)},t.ha=function(r){var a=0,u=this.a,h=new Kt;return h.next=function(){if(a>=u.length)throw ot;var p=u.key(a++);if(r)return p;if(p=u.getItem(p),!I(p))throw"Storage mechanism: Invalid value was encountered";return p},h},t.clear=function(){this.a.clear()},t.key=function(r){return this.a.key(r)};function Pg(){var r=null;try{r=window.localStorage||null}catch{}this.a=r}ae(Pg,Dd);function Og(){var r=null;try{r=window.sessionStorage||null}catch{}this.a=r}ae(Og,Dd);function ma(r,a){this.g=r,this.a=a+"::"}ae(ma,xd),ma.prototype.set=function(r,a){this.g.set(this.a+r,a)},ma.prototype.get=function(r){return this.g.get(this.a+r)},ma.prototype.ra=function(r){this.g.ra(this.a+r)},ma.prototype.ha=function(r){var a=this.g.ha(!0),u=this,h=new Kt;return h.next=function(){for(var p=a.next();p.substr(0,u.a.length)!=u.a;)p=a.next();return r?p.substr(u.a.length):u.g.get(p)},h},Nd(new Pg);var TI,CI=new Og;TI=Nd(CI)?new ma(CI,"firebaseui"):null;var Mg=new wu(TI),Lg={name:"pendingEmailCredential",storage:Mg},Ys={name:"redirectStatus",storage:Mg},bu={name:"redirectUrl",storage:Mg},ga={name:"emailForSignIn",storage:new wu(new ha(3600,"/"))},Iu={name:"pendingEncryptedCredential",storage:new wu(new ha(3600,"/"))};function va(r,a){return r.storage.get(a?r.name+":"+a:r.name)}function Vn(r,a){r.storage.a.ra(a?r.name+":"+a:r.name)}function ya(r,a,u){r.storage.set(u?r.name+":"+u:r.name,a)}function AI(r){return va(bu,r)||null}function Mi(r){return r=va(Lg,r)||null,lI(r)}function Li(r){Vn(Lg,r)}function kI(r,a){ya(Lg,uI(r),a)}function Fg(r){return(r=va(Ys,r)||null)&&typeof r.tenantId<"u"?new hI(r.tenantId):null}function UP(r,a){ya(Ys,{tenantId:r.a},a)}function VP(r,a){a=va(ga,a);var u=null;if(a)try{var h=bI(r,a),p=JSON.parse(h);u=p&&p.email||null}catch{}return u}function BP(r,a){a=va(Iu,a);var u=null;if(a)try{var h=bI(r,a);u=JSON.parse(h)}catch{}return lI(u||null)}function jP(r,a,u){ya(Iu,wI(r,JSON.stringify(uI(a))),u)}function Ug(){this.W={}}function xt(r,a,u){if(a.toLowerCase()in r.W)throw Error("Configuration "+a+" has already been defined.");r.W[a.toLowerCase()]=u}function Vg(r,a,u){if(!(a.toLowerCase()in r.W))throw Error("Configuration "+a+" is not defined.");r.W[a.toLowerCase()]=u}Ug.prototype.get=function(r){if(!(r.toLowerCase()in this.W))throw Error("Configuration "+r+" is not defined.");return this.W[r.toLowerCase()]};function Bg(r,a){if(r=r.get(a),!r)throw Error("Configuration "+a+" is required.");return r}function jg(){this.g=void 0,this.a={}}t=jg.prototype,t.set=function(r,a){RI(this,r,a,!1)},t.add=function(r,a){RI(this,r,a,!0)};function RI(r,a,u,h){for(var p=0;p<a.length;p++){var m=a.charAt(p);r.a[m]||(r.a[m]=new jg),r=r.a[m]}if(h&&r.g!==void 0)throw Error('The collection already contains the key "'+a+'"');r.g=u}t.get=function(r){e:{for(var a=this,u=0;u<r.length;u++)if(a=a.a[r.charAt(u)],!a){r=void 0;break e}r=a}return r?r.g:void 0},t.la=function(){var r=[];return xI(this,r),r};function xI(r,a){r.g!==void 0&&a.push(r.g);for(var u in r.a)xI(r.a[u],a)}t.ja=function(){var r=[];return DI(this,"",r),r};function DI(r,a,u){r.g!==void 0&&u.push(a);for(var h in r.a)DI(r.a[h],a+h,u)}t.clear=function(){this.a={},this.g=void 0};function NI(r){for(this.a=r,this.g=new jg,r=0;r<this.a.length;r++){var a=this.g.get("+"+this.a[r].b);a?a.push(this.a[r]):this.g.add("+"+this.a[r].b,[this.a[r]])}}function Pd(r,a){r=r.g;var u={},h=0;for(r.g!==void 0&&(u[h]=r.g);h<a.length;h++){var p=a.charAt(h);if(!(p in r.a))break;r=r.a[p],r.g!==void 0&&(u[h]=r.g)}for(var m in u)if(u.hasOwnProperty(m))return u[m];return[]}function Qs(r){for(var a=0;a<Dn.length;a++)if(Dn[a].c===r)return Dn[a];return null}function PI(r){r=r.toUpperCase();for(var a=[],u=0;u<Dn.length;u++)Dn[u].f===r&&a.push(Dn[u]);return a}function OI(r){if(0<r.length&&r.charAt(0)=="+"){r=r.substring(1);for(var a=[],u=0;u<Dn.length;u++)Dn[u].b==r&&a.push(Dn[u]);r=a}else r=PI(r);return r}function MI(r){r.sort(function(a,u){return a.name.localeCompare(u.name,"en")})}var Dn=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Cte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Runion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthlemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"So Tom and Prncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];MI(Dn);var _u=new NI(Dn);function LI(r,a){this.a=r,this.Aa=a}function FI(r){r=P(r);var a=Pd(_u,r);return 0<a.length?new LI(a[0].b=="1"?"1-US-0":a[0].c,P(r.substr(a[0].b.length+1))):null}function $g(r){var a=Qs(r.a);if(!a)throw Error("Country ID "+r.a+" not found.");return"+"+a.b+r.Aa}function UI(r,a){for(var u=0;u<r.length;u++)if(!G(VI,r[u])&&(wa!==null&&r[u]in wa||G(a,r[u])))return r[u];return null}var VI=["emailLink","password","phone"],wa={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function $P(){this.a=new Ug,xt(this.a,"autoUpgradeAnonymousUsers"),xt(this.a,"callbacks"),xt(this.a,"credentialHelper",Ld),xt(this.a,"immediateFederatedRedirect",!1),xt(this.a,"popupMode",!1),xt(this.a,"privacyPolicyUrl"),xt(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),xt(this.a,"queryParameterForWidgetMode","mode"),xt(this.a,"signInFlow"),xt(this.a,"signInOptions"),xt(this.a,"signInSuccessUrl"),xt(this.a,"siteName"),xt(this.a,"tosUrl"),xt(this.a,"widgetUrl"),xt(this.a,"adminRestrictedOperation")}function Od(r){var a=!!r.a.get("autoUpgradeAnonymousUsers");return a&&!YI(r)&&ei('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),a}function Md(r){r=r.a.get("signInOptions")||[];for(var a=[],u=0;u<r.length;u++){var h=r[u];h=ne(h)?h:{provider:h},h.provider&&a.push(h)}return a}function ti(r,a){r=Md(r);for(var u=0;u<r.length;u++)if(r[u].provider===a)return r[u];return null}function ba(r){return Md(r).map(function(a){return a.provider})}function Eu(r,a){r=BI(r);for(var u=0;u<r.length;u++)if(r[u].providerId===a)return r[u];return null}function BI(r){return Md(r).map(function(a){if(wa[a.provider]||G(XP,a.provider)){a={providerId:a.provider,S:a.providerName||null,V:a.fullLabel||null,ta:a.buttonColor||null,za:a.iconUrl?Ur(Xh(a.iconUrl)).toString():null};for(var u in a)a[u]===null&&delete a[u];return a}return{providerId:a.provider,S:a.providerName||null,V:a.fullLabel||null,ta:a.buttonColor||null,za:a.iconUrl?Ur(Xh(a.iconUrl)).toString():null,Ob:a.loginHintKey||null}})}function jI(r){var a=ti(r,pe.auth.GoogleAuthProvider.PROVIDER_ID),u;if(u=a&&a.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(h in r=r.a.get("credentialHelper"),Hg)if(Hg[h]===r){var h=Hg[h];break e}}h=Ld}u=h===Gg}return u&&a.clientId||null}function $I(r){return r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID),!!(r&&r.disableSignUp&&r.disableSignUp.status)}function Js(r){return r=r.a.get("adminRestrictedOperation")||null,!(!r||!r.status)}function qP(r){var a=null;if(Md(r).forEach(function(h){h.provider==pe.auth.PhoneAuthProvider.PROVIDER_ID&&ne(h.recaptchaParameters)&&!Array.isArray(h.recaptchaParameters)&&(a=De(h.recaptchaParameters))}),a){var u=[];ZP.forEach(function(h){typeof a[h]<"u"&&(u.push(h),delete a[h])}),u.length&&zr('The following provided "recaptchaParameters" keys are not allowed: '+u.join(", "))}return a}function KP(r){return(r=r.a.get("adminRestrictedOperation"))&&r.adminEmail?r.adminEmail:null}function zP(r){if(r=r.a.get("adminRestrictedOperation")||null){var a=r.helpLink||null;if(a&&typeof a=="string")return function(){la(a)}}return null}function GP(r){return(r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID))&&r.disableSignUp&&r.disableSignUp.adminEmail||null}function HP(r){if((r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID))&&r.disableSignUp){var a=r.disableSignUp.helpLink||null;if(a&&typeof a=="string")return function(){la(a)}}return null}function qI(r,a){return r=(r=ti(r,a))&&r.scopes,Array.isArray(r)?r:[]}function KI(r,a){return r=(r=ti(r,a))&&r.customParameters,ne(r)?(r=De(r),a===pe.auth.GoogleAuthProvider.PROVIDER_ID&&delete r.login_hint,a===pe.auth.GithubAuthProvider.PROVIDER_ID&&delete r.login,r):null}function WP(r){r=ti(r,pe.auth.PhoneAuthProvider.PROVIDER_ID);var a=null;return r&&typeof r.loginHint=="string"&&(a=FI(r.loginHint)),r&&r.defaultNationalNumber||a&&a.Aa||null}function YP(r){var a=(r=ti(r,pe.auth.PhoneAuthProvider.PROVIDER_ID))&&r.defaultCountry||null;a=a&&PI(a);var u=null;return r&&typeof r.loginHint=="string"&&(u=FI(r.loginHint)),a&&a[0]||u&&Qs(u.a)||null}function qg(r){if(r=ti(r,pe.auth.PhoneAuthProvider.PROVIDER_ID),!r)return null;var a=r.whitelistedCountries,u=r.blacklistedCountries;if(typeof a<"u"&&(!Array.isArray(a)||a.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof u<"u"&&!Array.isArray(u))throw Error("BlacklistedCountries must be an array.");if(a&&u)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!a&&!u)return Dn;if(r=[],a){u={};for(var h=0;h<a.length;h++)for(var p=OI(a[h]),m=0;m<p.length;m++)u[p[m].c]=p[m];for(var w in u)u.hasOwnProperty(w)&&r.push(u[w])}else{for(w={},a=0;a<u.length;a++)for(p=OI(u[a]),h=0;h<p.length;h++)w[p[h].c]=p[h];for(p=0;p<Dn.length;p++)w!==null&&Dn[p].c in w||r.push(Dn[p])}return r}function zI(r){return Bg(r.a,"queryParameterForWidgetMode")}function Dt(r){var a=r.a.get("tosUrl")||null;if(r=r.a.get("privacyPolicyUrl")||null,a&&!r&&zr("Privacy Policy URL is missing, the link will not be displayed."),a&&r){if(typeof a=="function")return a;if(typeof a=="string")return function(){la(a)}}return null}function Nt(r){var a=r.a.get("tosUrl")||null,u=r.a.get("privacyPolicyUrl")||null;if(u&&!a&&zr("Term of Service URL is missing, the link will not be displayed."),a&&u){if(typeof u=="function")return u;if(typeof u=="string")return function(){la(u)}}return null}function GI(r){return(r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof r.requireDisplayName<"u"?!!r.requireDisplayName:!0}function Ia(r){return r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!r||r.signInMethod!==pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function QP(r){return r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!r||!r.forceSameDevice)}function JP(r){if(Ia(r)){var a={url:ar(),handleCodeInApp:!0};(r=ti(r,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof r.emailLinkSignIn=="function"&&ze(a,r.emailLinkSignIn()),r=a.url;var u=ar();u instanceof Or||(u=Gm(u)),r instanceof Or||(r=Gm(r));var h=u;u=new Or(h);var p=!!r.j;p?qm(u,r.j):p=!!r.A,p?u.A=r.A:p=!!r.h,p?u.h=r.h:p=r.C!=null;var m=r.g;if(p)Km(u,r.C);else if(p=!!r.g){if(m.charAt(0)!="/"&&(h.h&&!h.g?m="/"+m:(h=u.g.lastIndexOf("/"),h!=-1&&(m=u.g.substr(0,h+1)+m))),m==".."||m==".")m="";else if(m.indexOf("./")!=-1||m.indexOf("/.")!=-1){h=m.lastIndexOf("/",0)==0,m=m.split("/");for(var w=[],E=0;E<m.length;){var R=m[E++];R=="."?h&&E==m.length&&w.push(""):R==".."?((1<w.length||w.length==1&&w[0]!="")&&w.pop(),h&&E==m.length&&w.push("")):(w.push(R),h=!0)}m=w.join("/")}}return p?u.g=m:p=r.a.toString()!=="",p?zm(u,H0(r.a)):p=!!r.s,p&&(u.s=r.s),a.url=u.toString(),a}return null}function Kg(r){var a=!!r.a.get("immediateFederatedRedirect"),u=ba(r);return r=HI(r),a&&u.length==1&&!G(VI,u[0])&&r==Fd}function HI(r){r=r.a.get("signInFlow");for(var a in Wg)if(Wg[a]==r)return Wg[a];return Fd}function zg(r){return Su(r).signInSuccess||null}function WI(r){return Su(r).signInSuccessWithAuthResult||null}function YI(r){return Su(r).signInFailure||null}function Su(r){return r.a.get("callbacks")||{}}var Gg="googleyolo",Ld="none",Hg={nc:Gg,NONE:Ld},Fd="redirect",Wg={qc:"popup",rc:Fd},Yg={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},XP=["anonymous"],ZP=["sitekey","tabindex","callback","expired-callback"],Tu,_a,Qg,QI,Xe={};function oe(r,a,u,h){Xe[r].apply(null,Array.prototype.slice.call(arguments,1))}function JI(r){return r.classList?r.classList:(r=r.className,I(r)&&r.match(/\S+/g)||[])}function Cu(r,a){return r.classList?r.classList.contains(a):G(JI(r),a)}function Fi(r,a){r.classList?r.classList.add(a):Cu(r,a)||(r.className+=0<r.className.length?" "+a:a)}function Ui(r,a){r.classList?r.classList.remove(a):Cu(r,a)&&(r.className=na(JI(r),function(u){return u!=a}).join(" "))}function en(r){var a=r.type;switch(I(a)&&a.toLowerCase()){case"checkbox":case"radio":return r.checked?r.value:null;case"select-one":return a=r.selectedIndex,0<=a?r.options[a].value:null;case"select-multiple":a=[];for(var u,h=0;u=r.options[h];h++)u.selected&&a.push(u.value);return a.length?a:null;default:return r.value!=null?r.value:null}}function XI(r,a){var u=r.type;switch(I(u)&&u.toLowerCase()){case"checkbox":case"radio":r.checked=a;break;case"select-one":if(r.selectedIndex=-1,I(a)){for(var h=0;u=r.options[h];h++)if(u.value==a){u.selected=!0;break}}break;case"select-multiple":for(I(a)&&(a=[a]),h=0;u=r.options[h];h++)if(u.selected=!1,a)for(var p,m=0;p=a[m];m++)u.value==p&&(u.selected=!0);break;default:r.value=a??""}}function eO(r){if(r.altKey&&!r.ctrlKey||r.metaKey||112<=r.keyCode&&123>=r.keyCode)return!1;if(Au(r.keyCode))return!0;switch(r.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!bi;default:return 166>r.keyCode||183<r.keyCode}}function ZI(r,a,u,h,p,m){if(kn&&!Bs("525"))return!0;if(Fr&&p)return Au(r);if(p&&!h)return!1;if(!bi){typeof a=="number"&&(a=Jg(a));var w=a==17||a==18||Fr&&a==91;if((!u||Fr)&&w||Fr&&a==16&&(h||m))return!1}if((kn||Lr)&&h&&u)switch(r){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(_t&&h&&a==r)return!1;switch(r){case 13:return bi?m||p?!1:!(u&&h):!0;case 27:return!(kn||Lr||bi)}return bi&&(h||p||m)?!1:Au(r)}function Au(r){if(48<=r&&57>=r||96<=r&&106>=r||65<=r&&90>=r||(kn||Lr)&&r==0)return!0;switch(r){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return bi;default:return!1}}function Jg(r){if(bi)r=tO(r);else if(Fr&&kn)switch(r){case 93:r=91}return r}function tO(r){switch(r){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return r}}function Ea(r){Bt.call(this),this.a=r,Ii(r,"keydown",this.g,!1,this),Ii(r,"click",this.h,!1,this)}ae(Ea,Bt),Ea.prototype.g=function(r){(r.keyCode==13||kn&&r.keyCode==3)&&e_(this,r)},Ea.prototype.h=function(r){e_(this,r)};function e_(r,a){var u=new n_(a);if(qr(r,u)){u=new t_(a);try{qr(r,u)}finally{a.stopPropagation()}}}Ea.prototype.o=function(){Ea.K.o.call(this),zs(this.a,"keydown",this.g,!1,this),zs(this.a,"click",this.h,!1,this),delete this.a};function t_(r){xn.call(this,r.a),this.type="action"}ae(t_,xn);function n_(r){xn.call(this,r.a),this.type="beforeaction"}ae(n_,xn);function Sa(r){Bt.call(this),this.a=r,r=_t?"focusout":"blur",this.g=Ii(this.a,_t?"focusin":"focus",this,!_t),this.h=Ii(this.a,r,this,!_t)}ae(Sa,Bt),Sa.prototype.handleEvent=function(r){var a=new xn(r.a);a.type=r.type=="focusin"||r.type=="focus"?"focusin":"focusout",qr(this,a)},Sa.prototype.o=function(){Sa.K.o.call(this),$r(this.g),$r(this.h),delete this.a};function Ud(r,a){Bt.call(this),this.g=r||1,this.a=a||v,this.h=ve(this.gc,this),this.j=vt()}ae(Ud,Bt),t=Ud.prototype,t.Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var r=vt()-this.j;0<r&&r<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-r):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),qr(this,"tick"),this.Ka&&(Vd(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=vt())};function Vd(r){r.Ka=!1,r.aa&&(r.a.clearTimeout(r.aa),r.aa=null)}t.o=function(){Ud.K.o.call(this),Vd(this),delete this.a};function nO(r,a){if(z(r))a&&(r=ve(r,a));else if(r&&typeof r.handleEvent=="function")r=ve(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<0?-1:v.setTimeout(r,0)}function Ta(r){Ks.call(this),this.g=r,this.a={}}ae(Ta,Ks);var i_=[];function Ca(r,a,u,h){O(u)||(u&&(i_[0]=u.toString()),u=i_);for(var p=0;p<u.length;p++){var m=Ii(a,u[p],h||r.handleEvent,!1,r.g||r);if(!m)break;r.a[m.key]=m}}function r_(r){be(r.a,function(a,u){this.a.hasOwnProperty(u)&&$r(a)},r),r.a={}}Ta.prototype.o=function(){Ta.K.o.call(this),r_(this)},Ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ku(r){Bt.call(this),this.a=null,this.g=r,r=_t||Lr||kn&&!Bs("531")&&r.tagName=="TEXTAREA",this.h=new Ta(this),Ca(this.h,this.g,r?["keydown","paste","cut","drop","input"]:"input",this)}ae(ku,Bt),ku.prototype.handleEvent=function(r){if(r.type=="input")_t&&Bs(10)&&r.keyCode==0&&r.j==0||(Xg(this),qr(this,s_(r)));else if(r.type!="keydown"||eO(r)){var a=r.type=="keydown"?this.g.value:null;_t&&r.keyCode==229&&(a=null);var u=s_(r);Xg(this),this.a=nO(function(){this.a=null,this.g.value!=a&&qr(this,u)},this)}};function Xg(r){r.a!=null&&(v.clearTimeout(r.a),r.a=null)}function s_(r){return r=new xn(r.a),r.type="input",r}ku.prototype.o=function(){ku.K.o.call(this),this.h.m(),Xg(this),delete this.g};function Ru(r,a){Bt.call(this),r&&(this.Oa&&l_(this),this.qa=r,this.Na=Ii(this.qa,"keypress",this,a),this.Ya=Ii(this.qa,"keydown",this.Jb,a,this),this.Oa=Ii(this.qa,"keyup",this.Kb,a,this))}ae(Ru,Bt),t=Ru.prototype,t.qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var o_={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},a_={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},c_=!kn||Bs("525"),u_=Fr&&bi;t=Ru.prototype,t.Jb=function(r){(kn||Lr)&&(this.R==17&&!r.ctrlKey||this.R==18&&!r.altKey||Fr&&this.R==91&&!r.metaKey)&&(this.X=this.R=-1),this.R==-1&&(r.ctrlKey&&r.keyCode!=17?this.R=17:r.altKey&&r.keyCode!=18?this.R=18:r.metaKey&&r.keyCode!=91&&(this.R=91)),c_&&!ZI(r.keyCode,this.R,r.shiftKey,r.ctrlKey,r.altKey,r.metaKey)?this.handleEvent(r):(this.X=Jg(r.keyCode),u_&&(this.Ua=r.altKey))},t.Kb=function(r){this.X=this.R=-1,this.Ua=r.altKey},t.handleEvent=function(r){var a=r.a,u=a.altKey;if(_t&&r.type=="keypress")var h=this.X,p=h!=13&&h!=27?a.keyCode:0;else(kn||Lr)&&r.type=="keypress"?(h=this.X,p=0<=a.charCode&&63232>a.charCode&&Au(h)?a.charCode:0):Z0&&!kn?(h=this.X,p=Au(h)?a.keyCode:0):(r.type=="keypress"?(u_&&(u=this.Ua),a.keyCode==a.charCode?32>a.keyCode?(h=a.keyCode,p=0):(h=this.X,p=a.charCode):(h=a.keyCode||this.X,p=a.charCode||0)):(h=a.keyCode||this.X,p=a.charCode||0),Fr&&p==63&&h==224&&(h=191));var m=h=Jg(h);h?63232<=h&&h in o_?m=o_[h]:h==25&&r.shiftKey&&(m=9):a.keyIdentifier&&a.keyIdentifier in a_&&(m=a_[a.keyIdentifier]),bi&&c_&&r.type=="keypress"&&!ZI(m,this.R,r.shiftKey,r.ctrlKey,u,r.metaKey)||(r=m==this.R,this.R=m,a=new h_(m,p,r,a),a.altKey=u,qr(this,a))},t.N=function(){return this.qa};function l_(r){r.Na&&($r(r.Na),$r(r.Ya),$r(r.Oa),r.Na=null,r.Ya=null,r.Oa=null),r.qa=null,r.R=-1,r.X=-1}t.o=function(){Ru.K.o.call(this),l_(this)};function h_(r,a,u,h){xn.call(this,h),this.type="key",this.keyCode=r,this.j=a,this.repeat=u}ae(h_,xn);function Aa(r,a,u,h){this.top=r,this.right=a,this.bottom=u,this.left=h}Aa.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Aa.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Aa.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Aa.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function Bd(r,a){var u=ou(r);return u.defaultView&&u.defaultView.getComputedStyle&&(r=u.defaultView.getComputedStyle(r,null))&&(r[a]||r.getPropertyValue(a))||""}function d_(r){try{var a=r.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return _t&&r.ownerDocument.body&&(r=r.ownerDocument,a.left-=r.documentElement.clientLeft+r.body.clientLeft,a.top-=r.documentElement.clientTop+r.body.clientTop),a}function iO(r,a){a=a||td(document);var u=a||td(document),h=f_(r),p=f_(u);if(!_t||9<=Number(ru)){w=Bd(u,"borderLeftWidth");var m=Bd(u,"borderRightWidth");E=Bd(u,"borderTopWidth"),R=Bd(u,"borderBottomWidth"),m=new Aa(parseFloat(E),parseFloat(m),parseFloat(R),parseFloat(w))}else{var w=jd(u,"borderLeft");m=jd(u,"borderRight");var E=jd(u,"borderTop"),R=jd(u,"borderBottom");m=new Aa(E,m,R,w)}u==td(document)?(w=h.a-u.scrollLeft,h=h.g-u.scrollTop,!_t||10<=Number(ru)||(w+=m.left,h+=m.top)):(w=h.a-p.a-m.left,h=h.g-p.g-m.top),p=r.offsetWidth,m=r.offsetHeight,E=kn&&!p&&!m,y(p)&&!E||!r.getBoundingClientRect?r=new Xm(p,m):(r=d_(r),r=new Xm(r.right-r.left,r.bottom-r.top)),p=u.clientHeight-r.height,m=u.scrollLeft,E=u.scrollTop,m+=Math.min(w,Math.max(w-(u.clientWidth-r.width),0)),E+=Math.min(h,Math.max(h-p,0)),u=new Br(m,E),a.scrollLeft=u.a,a.scrollTop=u.g}function f_(r){var a=ou(r),u=new Br(0,0),h=a?ou(a):document;return h=!_t||9<=Number(ru)||ed(h).a.compatMode=="CSS1Compat"?h.documentElement:h.body,r==h||(r=d_(r),h=ed(a).a,a=td(h),h=h.parentWindow||h.defaultView,a=_t&&Bs("10")&&h.pageYOffset!=a.scrollTop?new Br(a.scrollLeft,a.scrollTop):new Br(h.pageXOffset||a.scrollLeft,h.pageYOffset||a.scrollTop),u.a=r.left+a.a,u.g=r.top+a.g),u}var p_={thin:2,medium:4,thick:6};function jd(r,a){if((r.currentStyle?r.currentStyle[a+"Style"]:null)=="none")return 0;var u=r.currentStyle?r.currentStyle[a+"Width"]:null;if(u in p_)r=p_[u];else if(/^\d+px?$/.test(u))r=parseInt(u,10);else{a=r.style.left;var h=r.runtimeStyle.left;r.runtimeStyle.left=r.currentStyle.left,r.style.left=u,u=r.style.pixelLeft,r.style.left=a,r.runtimeStyle.left=h,r=+u}return r}function Zg(){}C(Zg),Zg.prototype.a=0;function Xs(r){Bt.call(this),this.s=r||ed(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}ae(Xs,Bt),t=Xs.prototype,t.Lb=Zg.Xa(),t.N=function(){return this.g};function Ve(r,a){return r.g?eg(a,r.g||r.s.a):null}function xu(r){return r.L||(r.L=new Ta(r)),r.L}t.Za=function(r){if(this.Y&&this.Y!=r)throw Error("Method not supported");Xs.K.Za.call(this,r)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(r){if(this.na)throw Error("Component already rendered");this.g||this.kb(),r?r.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,ev(this,function(r){!r.na&&r.N()&&r.v()})},t.ya=function(){ev(this,function(r){r.na&&r.ya()}),this.L&&r_(this.L),this.na=!1},t.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),ev(this,function(r){r.m()}),this.g&&$s(this.g),this.Y=this.g=this.oa=this.Ea=null,Xs.K.o.call(this)};function ev(r,a){r.Ea&&Ut(r.Ea,a,void 0)}t.removeChild=function(r,a){if(r){var u=I(r)?r:r.cb||(r.cb=":"+(r.Lb.a++).toString(36));if(this.oa&&u?(r=this.oa,r=(r!==null&&u in r?r[u]:void 0)||null):r=null,u&&r){var h=this.oa;if(u in h&&delete h[u],fe(this.Ea,r),a&&(r.ya(),r.g&&$s(r.g)),a=r,a==null)throw Error("Unable to set parent component");a.Y=null,Xs.K.Za.call(a,null)}}if(!r)throw Error("Child is not in parent component");return r};function Tt(r,a){var u=f1(r,"firebaseui-textfield");a?(Ui(r,"firebaseui-input-invalid"),Fi(r,"firebaseui-input"),u&&Ui(u,"firebaseui-textfield-invalid")):(Ui(r,"firebaseui-input"),Fi(r,"firebaseui-input-invalid"),u&&Fi(u,"firebaseui-textfield-invalid"))}function ka(r,a,u){a=new ku(a),uu(r,Qe(lu,a)),Ca(xu(r),a,"input",u)}function Du(r,a,u){a=new Ru(a),uu(r,Qe(lu,a)),Ca(xu(r),a,"key",function(h){h.keyCode==13&&(h.stopPropagation(),h.preventDefault(),u(h))})}function rO(r,a,u){a=new Sa(a),uu(r,Qe(lu,a)),Ca(xu(r),a,"focusin",u)}function sO(r,a,u){a=new Sa(a),uu(r,Qe(lu,a)),Ca(xu(r),a,"focusout",u)}function yt(r,a,u){a=new Ea(a),uu(r,Qe(lu,a)),Ca(xu(r),a,"action",function(h){h.stopPropagation(),h.preventDefault(),u(h)})}function ni(r){Fi(r,"firebaseui-hidden")}function tn(r,a){a&&tg(r,a),Ui(r,"firebaseui-hidden")}function Ra(r){return!Cu(r,"firebaseui-hidden")&&r.style.display!="none"}function xa(r){r=r||{};var a=r.email,u=r.disabled,h='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return h=r.wc?h+"Enter new email address":h+"Email",h+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Rn(a??"")+'"'+(u?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ie(h)}function Bn(r){r=r||{},r=r.label;var a='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return a=r?a+we(r):a+"Next",ie(a+"</button>")}function tv(){var r=""+Bn({label:Et("Sign In")});return ie(r)}function m_(){var r=""+Bn({label:Et("Save")});return ie(r)}function _i(){var r=""+Bn({label:Et("Continue")});return ie(r)}function g_(r){r=r||{},r=r.label;var a='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return a=r?a+we(r):a+"Choose password",ie(a+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function v_(){var r={},a='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return a=r.current?a+"Current password":a+"Password",ie(a+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function y_(){return ie('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function ii(r){r=r||{},r=r.label;var a='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return a=r?a+we(r):a+"Cancel",ie(a+"</button>")}function fn(r){var a="";return r.F&&r.D&&(a+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ie(a)}function Da(r){var a="";return r.F&&r.D&&(a+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ie(a)}function w_(r){return r='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+we(r.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ie(r)}w_.a="firebaseui.auth.soy2.element.infoBar";function b_(r){var a=r.content;return r=r.Ab,ie('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(r?" "+Rn(r):"")+'">'+we(a)+"</dialog>")}function I_(r){var a=r.message;return ie(b_({content:g1('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Rn(r.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+we(a)+"</div>")}))}I_.a="firebaseui.auth.soy2.element.progressDialog";function __(r){var a='<div class="firebaseui-list-box-actions">';r=r.items;for(var u=r.length,h=0;h<u;h++){var p=r[h];a+='<button type="button" data-listboxid="'+Rn(p.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(p.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Rn(p.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+we(p.label)+"</div></button>"}return a=""+b_({Ab:Et("firebaseui-list-box-dialog"),content:g1(a+"</div>")}),ie(a)}__.a="firebaseui.auth.soy2.element.listBoxDialog";function $d(r){return r=r||{},ie(r.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}$d.a="firebaseui.auth.soy2.element.busyIndicator";function Gr(r,a){return r=r||{},r=r.ga,Ge(r.S?r.S:a.hb[r.providerId]?""+a.hb[r.providerId]:r.providerId&&r.providerId.indexOf("saml.")==0||r.providerId&&r.providerId.indexOf("oidc.")==0?r.providerId.substring(5):""+r.providerId)}function nv(r){E_(r,"upgradeElement")}function iv(r){E_(r,"downgradeElements")}var oO=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function E_(r,a){r&&window.componentHandler&&window.componentHandler[a]&&oO.forEach(function(u){Cu(r,u)&&window.componentHandler[a](r),Ut(Zm(u,r),function(h){window.componentHandler[a](h)})})}function S_(r,a,u){if(qd.call(this),document.body.appendChild(r),r.showModal||window.dialogPolyfill.registerDialog(r),r.showModal(),nv(r),a&&yt(this,r,function(m){var w=r.getBoundingClientRect();(m.clientX<w.left||w.left+w.width<m.clientX||m.clientY<w.top||w.top+w.height<m.clientY)&&qd.call(this)}),!u){var h=this.N().parentElement||this.N().parentNode;if(h){var p=this;this.da=function(){if(r.open){var m=r.getBoundingClientRect().height,w=h.getBoundingClientRect().height,E=h.getBoundingClientRect().top-document.body.getBoundingClientRect().top,R=h.getBoundingClientRect().left-document.body.getBoundingClientRect().left,$=r.getBoundingClientRect().width,ce=h.getBoundingClientRect().width;r.style.top=(E+(w-m)/2).toString()+"px",m=R+(ce-$)/2,r.style.left=m.toString()+"px",r.style.right=(document.body.getBoundingClientRect().width-m-$).toString()+"px"}else window.removeEventListener("resize",p.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function qd(){var r=rv.call(this);r&&(iv(r),r.open&&r.close(),$s(r),this.da&&window.removeEventListener("resize",this.da))}function rv(){return eg("firebaseui-id-dialog")}function T_(){$s(C_.call(this))}function C_(){return Ve(this,"firebaseui-id-info-bar")}function A_(){return Ve(this,"firebaseui-id-dismiss-info-bar")}var aO={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function sv(r,a,u){sr.call(this,r,a);for(var h in u)this[h]=u[h]}ae(sv,sr);function M(r,a,u,h,p){Xs.call(this,u),this.fb=r,this.eb=a,this.Fa=!1,this.Ga=h||null,this.A=this.ca=null,this.Z=De(aO),ze(this.Z,p||{})}ae(M,Xs),t=M.prototype,t.kb=function(){var r=au(this.fb,this.eb,this.Z,this.s);nv(r),this.g=r},t.v=function(){if(M.K.v.call(this),R1(dt(this),new sv("pageEnter",dt(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var r=this.Z.F;yt(this,this.bb(),function(){r()})}if(this.ab()&&this.Z.D){var a=this.Z.D;yt(this,this.ab(),function(){a()})}},t.ya=function(){R1(dt(this),new sv("pageExit",dt(this),{pageId:this.Ga})),M.K.ya.call(this)},t.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,iv(this.N()),M.K.o.call(this)};function cO(r){r.Fa=!0;var a=Cu(r.N(),"firebaseui-use-spinner");r.ca=window.setTimeout(function(){r.N()&&r.A===null&&(r.A=au($d,{tb:a},null,r.s),r.N().appendChild(r.A),nv(r.A))},500)}t.I=function(r,a,u,h){function p(){if(m.T)return null;m.Fa=!1,window.clearTimeout(m.ca),m.ca=null,m.A&&(iv(m.A),$s(m.A),m.A=null)}var m=this;return m.Fa?null:(cO(m),r.apply(null,a).then(u,h).then(p,p))};function dt(r){return r.N().parentElement||r.N().parentNode}function Nu(r,a,u){Du(r,a,function(){u.focus()})}function Na(r,a,u){Du(r,a,function(){u()})}Oe(M.prototype,{a:function(r){T_.call(this);var a=au(w_,{message:r},null,this.s);this.N().appendChild(a),yt(this,A_.call(this),function(){$s(a)})},yc:T_,Ac:C_,zc:A_,$:function(r,a){r=au(I_,{Ma:r,message:a},null,this.s),S_.call(this,r)},h:qd,Cb:rv,Cc:function(){return Ve(this,"firebaseui-tos")},bb:function(){return Ve(this,"firebaseui-tos-link")},ab:function(){return Ve(this,"firebaseui-pp-link")},Dc:function(){return Ve(this,"firebaseui-tos-list")}});function k_(r,a,u){r=r||{},a=r.Va;var h=r.ia;return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+xa(r)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?ii(null):"")+Bn(null)+'</div></div><div class="firebaseui-card-footer">'+(h?Da(u):fn(u))+"</div></form></div>",ie(r)}k_.a="firebaseui.auth.soy2.page.signIn";function R_(r,a,u){return r=r||{},a=r.ia,r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+xa(r)+v_()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+y_()+'</div><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+(a?Da(u):fn(u))+"</div></form></div>",ie(r)}R_.a="firebaseui.auth.soy2.page.passwordSignIn";function x_(r,a,u){r=r||{};var h=r.Tb;a=r.Ta;var p=r.ia,m='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+xa(r);return h?(r=r||{},r=r.name,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Rn(r??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',r=ie(r)):r="",u=m+r+g_(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?ii(null):"")+m_()+'</div></div><div class="firebaseui-card-footer">'+(p?Da(u):fn(u))+"</div></form></div>",ie(u)}x_.a="firebaseui.auth.soy2.page.passwordSignUp";function D_(r,a,u){return r=r||{},a=r.Ta,r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+xa(r)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?ii(null):"")+Bn({label:Et("Send")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(r)}D_.a="firebaseui.auth.soy2.page.passwordRecovery";function N_(r,a,u){a=r.G;var h="";return r="Follow the instructions sent to <strong>"+(we(r.email)+"</strong> to recover your password"),h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions">',a&&(h+='<div class="firebaseui-form-actions">'+Bn({label:Et("Done")})+"</div>"),h+='</div><div class="firebaseui-card-footer">'+fn(u)+"</div></div>",ie(h)}N_.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function P_(r,a,u){return ie('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+$d(null)+"</div></div>")}P_.a="firebaseui.auth.soy2.page.callback";function O_(r,a,u){return ie('<div class="firebaseui-container firebaseui-id-page-spinner">'+$d({tb:!0})+"</div>")}O_.a="firebaseui.auth.soy2.page.spinner";function M_(){return ie('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}M_.a="firebaseui.auth.soy2.page.blank";function L_(r,a,u){a="",r="A sign-in email with additional instructions was sent to <strong>"+(we(r.email)+"</strong>. Check your email to complete sign-in.");var h=ie('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+h+'</div><div class="firebaseui-form-actions">'+ii({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}L_.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function F_(r,a,u){return r=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+ie('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+ii({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(r)}F_.a="firebaseui.auth.soy2.page.emailNotReceived";function U_(r,a,u){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+xa(r)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii(null)+Bn(null)+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(r)}U_.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function V_(){var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii({label:Et("Dismiss")})+"</div></div></div>";return ie(r)}V_.a="firebaseui.auth.soy2.page.differentDeviceError";function B_(){var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii({label:Et("Dismiss")})+"</div></div></div>";return ie(r)}B_.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function j_(r,a,u){return a="",r="Youve already used <strong>"+(we(r.email)+"</strong> to sign in. Enter your password for that account."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+r+"</p>"+v_()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+y_()+'</div><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}j_.a="firebaseui.auth.soy2.page.passwordLinking";function $_(r,a,u){var h=r.email;return a="",r=""+Gr(r,u),r=Et(r),h="Youve already used <strong>"+(we(h)+("</strong>. You can connect your <strong>"+(we(r)+("</strong> account with <strong>"+(we(h)+"</strong> by signing in with email link below."))))),r="For this flow to successfully connect your "+(we(r)+" account with this email, you have to open the link on the same device or browser."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+h+'<p class="firebaseui-text firebaseui-text-justify">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}$_.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function q_(r,a,u){a="";var h=""+Gr(r,u);return h=Et(h),r="You originally intended to connect <strong>"+(we(h)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),h="If you still want to connect your <strong>"+(we(h)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+r+'</p><p class="firebaseui-text firebaseui-text-justify">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+_i()+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}q_.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function K_(r,a,u){var h=r.email;return a="",r=""+Gr(r,u),r=Et(r),h="Youve already used <strong>"+(we(h)+("</strong>. Sign in with "+(we(r)+" to continue."))),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bn({label:Et("Sign in with "+r)})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}K_.a="firebaseui.auth.soy2.page.federatedLinking";function z_(r,a,u){r=r||{};var h=r.kc;a=r.yb,r=r.Eb;var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return h?(h="<strong>"+(we(h)+"</strong> is not authorized to view the requested page."),p+=h):p+="User is not authorized to view the requested page.",p+="</p>",a&&(a="Please contact <strong>"+(we(a)+"</strong> for authorization."),p+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+a+"</p>"),p+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',r&&(p+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),p+='</div><div class="firebaseui-form-actions">'+ii({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(p)}z_.a="firebaseui.auth.soy2.page.unauthorizedUser";function G_(r,a,u){return a="",r="To continue sign in with <strong>"+(we(r.email)+"</strong> on this device, you have to recover the password."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii(null)+Bn({label:Et("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}G_.a="firebaseui.auth.soy2.page.unsupportedProvider";function H_(r){var a="",u='<p class="firebaseui-text">for <strong>'+(we(r.email)+"</strong></p>");return a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+u+g_(QN(r))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+m_()+"</div></div></form></div>",ie(a)}H_.a="firebaseui.auth.soy2.page.passwordReset";function W_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}W_.a="firebaseui.auth.soy2.page.passwordResetSuccess";function Y_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}Y_.a="firebaseui.auth.soy2.page.passwordResetFailure";function Q_(r){var a=r.G,u="";return r="Your sign-in email address has been changed back to <strong>"+(we(r.email)+"</strong>."),u+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p><p class="firebaseui-text">If you didnt ask to change your sign-in email, its possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(a?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></form></div>",ie(u)}Q_.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function J_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still cant reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}J_.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function X_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}X_.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function Z_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}Z_.a="firebaseui.auth.soy2.page.emailVerificationFailure";function eE(r){var a=r.G,u="";return r="You can now sign in with your new email <strong>"+(we(r.email)+"</strong>."),u+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions">'+(a?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(u)}eE.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function tE(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}tE.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function nE(r){var a=r.factorId,u=r.phoneNumber;r=r.G;var h='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(a){case"phone":a="The <strong>"+(we(a)+(" "+(we(u)+"</strong> was removed as a second authentication step."))),h+=a;break;default:h+="The device or app was removed as a second authentication step."}return h+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(r?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></form></div>",ie(h)}nE.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function iE(r){return r=r||{},r=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ie(r)}iE.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function rE(r){var a=r.zb;return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+we(r.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',a&&(r+=Bn({label:Et("Retry")})),ie(r+"</div></div></div>")}rE.a="firebaseui.auth.soy2.page.recoverableError";function sE(r){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+we(r.errorMessage)+"</p></div></div>",ie(r)}sE.a="firebaseui.auth.soy2.page.unrecoverableError";function oE(r,a,u){var h=r.Qb;return a="",r="Continue with "+(we(r.jc)+"?"),h="You originally wanted to sign in with "+we(h),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+r+'</h2><p class="firebaseui-text">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii(null)+Bn({label:Et("Continue")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form></div>",ie(a)}oE.a="firebaseui.auth.soy2.page.emailMismatch";function aE(r,a,u){var h='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';r=r.Sb,a=r.length;for(var p=0;p<a;p++){var m={ga:r[p]},w=u;m=m||{};var E=m.ga,R=m;R=R||{};var $="";switch(R.ga.providerId){case"google.com":$+="firebaseui-idp-google";break;case"github.com":$+="firebaseui-idp-github";break;case"facebook.com":$+="firebaseui-idp-facebook";break;case"twitter.com":$+="firebaseui-idp-twitter";break;case"phone":$+="firebaseui-idp-phone";break;case"anonymous":$+="firebaseui-idp-anonymous";break;case"password":$+="firebaseui-idp-password";break;default:$+="firebaseui-idp-generic"}R='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Rn(Ge($))+' firebaseui-id-idp-button" data-provider-id="'+Rn(E.providerId)+'" style="background-color:',$=($=m)||{},$=$.ga,R=R+Rn(v1(Ge($.ta?$.ta:w.wa[$.providerId]?""+w.wa[$.providerId]:$.providerId.indexOf("saml.")==0?""+w.wa.saml:$.providerId.indexOf("oidc.")==0?""+w.wa.oidc:""+w.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var ce=m;$=w,ce=ce||{},ce=ce.ga,$=YN(ce.za?qs(ce.za):$.xa[ce.providerId]?qs($.xa[ce.providerId]):ce.providerId.indexOf("saml.")==0?qs($.xa.saml):ce.providerId.indexOf("oidc.")==0?qs($.xa.oidc):qs($.xa.password)),R=R+Rn(qs($))+'"></span>',E.providerId=="password"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=we(E.V):E.S?(m="Sign in with "+we(Gr(m,w)),R+=m):R+="Sign in with email",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+we(E.S):R+"Email",R+="</span>"):E.providerId=="phone"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=we(E.V):E.S?(m="Sign in with "+we(Gr(m,w)),R+=m):R+="Sign in with phone",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+we(E.S):R+"Phone",R+="</span>"):E.providerId=="anonymous"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=we(E.V):E.S?(m="Sign in with "+we(Gr(m,w)),R+=m):R+="Continue as guest",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+we(E.S):R+"Guest",R+="</span>"):(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=we(E.V):($="Sign in with "+we(Gr(m,w)),R+=$),R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(E.S?we(E.S):we(Gr(m,w)))+"</span>"),E=ie(R+"</button>"),h+='<li class="firebaseui-list-item">'+E+"</li>"}return h+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Da(u)+"</div></div>",ie(h)}aE.a="firebaseui.auth.soy2.page.providerSignIn";function cE(r,a,u){r=r||{};var h=r.Gb,p=r.Va;a=r.ia,r=r||{},r=r.Aa,r='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Rn(r??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ie(r);var m;return h?m=ie('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):m="",m=r+m+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(p?ii(null):"")+Bn({label:Et("Verify")})+'</div></div><div class="firebaseui-card-footer">',a?(a='<p class="firebaseui-tos firebaseui-phone-tos">',a=u.F&&u.D?a+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':a+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",u=ie(a+"</p>")):u=ie('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+fn(u),ie(m+u+"</div></form></div>")}cE.a="firebaseui.auth.soy2.page.phoneSignInStart";function uE(r,a,u){r=r||{},a=r.phoneNumber;var h="";return r='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(we(a)+"</a>"),we(a),a=h,h=ie('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),u='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+"</p>"+h+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ii(null)+Bn({label:Et("Continue")})+'</div></div><div class="firebaseui-card-footer">'+fn(u)+"</div></form>",r=ie('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ie(a+(u+r+"</div>"))}uE.a="firebaseui.auth.soy2.page.phoneSignInFinish";function lE(){return ie('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}lE.a="firebaseui.auth.soy2.page.signOut";function hE(r,a,u){var h='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';r=r.ec,a=r.length;for(var p=0;p<a;p++){var m=r[p],w="",E=we(m.displayName),R=m.tenantId?m.tenantId:"top-level-project";R=Et(R),w+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Rn(R)+' firebaseui-id-tenant-selection-button"'+(m.tenantId?'data-tenant-id="'+Rn(m.tenantId)+'"':"")+'style="background-color:'+Rn(v1(m.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Rn(qs(m.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',m.V?w+=we(m.V):(m="Sign in to "+we(m.displayName),w+=m),w=ie(w+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+E+"</span></button>")),h+='<li class="firebaseui-list-item">'+w+"</li>"}return h+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Da(u)+"</div></div>",ie(h)}hE.a="firebaseui.auth.soy2.page.selectTenant";function dE(r,a,u){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+xa(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Bn(null)+'</div></div><div class="firebaseui-card-footer">'+Da(u)+"</div></form></div>",ie(r)}dE.a="firebaseui.auth.soy2.page.providerMatchByEmail";function zt(){return Ve(this,"firebaseui-id-submit")}function $t(){return Ve(this,"firebaseui-id-secondary-link")}function nn(r,a){yt(this,zt.call(this),function(h){r(h)});var u=$t.call(this);u&&a&&yt(this,u,function(h){a(h)})}function Kd(){return Ve(this,"firebaseui-id-password")}function zd(){return Ve(this,"firebaseui-id-password-error")}function fE(){var r=Kd.call(this),a=zd.call(this);ka(this,r,function(){Ra(a)&&(Tt(r,!0),ni(a))})}function pE(){var r=Kd.call(this),a=zd.call(this);return en(r)?(Tt(r,!0),ni(a),a=!0):(Tt(r,!1),tn(a,Ge("Enter your password").toString()),a=!1),a?en(r):null}function Pa(r,a,u,h,p,m){M.call(this,j_,{email:r},m,"passwordLinking",{F:h,D:p}),this.w=a,this.H=u}l(Pa,M),Pa.prototype.v=function(){this.P(),this.M(this.w,this.H),Na(this,this.i(),this.w),this.i().focus(),M.prototype.v.call(this)},Pa.prototype.o=function(){this.w=null,M.prototype.o.call(this)},Pa.prototype.j=function(){return en(Ve(this,"firebaseui-id-email"))},Oe(Pa.prototype,{i:Kd,B:zd,P:fE,u:pE,ea:zt,ba:$t,M:nn});var uO=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function cr(){return Ve(this,"firebaseui-id-email")}function Hr(){return Ve(this,"firebaseui-id-email-error")}function Oa(r){var a=cr.call(this),u=Hr.call(this);ka(this,a,function(){Ra(u)&&(Tt(a,!0),ni(u))}),r&&Du(this,a,function(){r()})}function Ma(){return P(en(cr.call(this))||"")}function La(){var r=cr.call(this),a=Hr.call(this),u=en(r)||"";return u?uO.test(u)?(Tt(r,!0),ni(a),a=!0):(Tt(r,!1),tn(a,Ge("That email address isn't correct").toString()),a=!1):(Tt(r,!1),tn(a,Ge("Enter your email address to continue").toString()),a=!1),a?P(en(r)):null}function Pu(r,a,u,h,p,m,w){M.call(this,R_,{email:u,ia:!!m},w,"passwordSignIn",{F:h,D:p}),this.w=r,this.H=a}l(Pu,M),Pu.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Nu(this,this.l(),this.i()),Na(this,this.i(),this.w),en(this.l())?this.i().focus():this.l().focus(),M.prototype.v.call(this)},Pu.prototype.o=function(){this.H=this.w=null,M.prototype.o.call(this)},Oe(Pu.prototype,{l:cr,U:Hr,P:Oa,M:Ma,j:La,i:Kd,B:zd,ea:fE,u:pE,ua:zt,pa:$t,ba:nn});function Ze(r,a,u,h,p,m){M.call(this,r,a,h,p||"notice",m),this.i=u||null}ae(Ze,M),Ze.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Ze.K.v.call(this)},Ze.prototype.o=function(){this.i=null,Ze.K.o.call(this)},Oe(Ze.prototype,{l:zt,w:$t,u:nn});function Gd(r,a,u,h,p){Ze.call(this,N_,{email:r,G:!!a},a,p,"passwordRecoveryEmailSent",{F:u,D:h})}ae(Gd,Ze);function mE(r,a){Ze.call(this,X_,{G:!!r},r,a,"emailVerificationSuccess")}ae(mE,Ze);function gE(r,a){Ze.call(this,Z_,{G:!!r},r,a,"emailVerificationFailure")}ae(gE,Ze);function vE(r,a,u){Ze.call(this,eE,{email:r,G:!!a},a,u,"verifyAndChangeEmailSuccess")}ae(vE,Ze);function yE(r,a){Ze.call(this,tE,{G:!!r},r,a,"verifyAndChangeEmailFailure")}ae(yE,Ze);function wE(r,a){Ze.call(this,iE,{G:!!r},r,a,"revertSecondFactorAdditionFailure")}ae(wE,Ze);function bE(r){Ze.call(this,lE,void 0,void 0,r,"signOut")}ae(bE,Ze);function IE(r,a){Ze.call(this,W_,{G:!!r},r,a,"passwordResetSuccess")}ae(IE,Ze);function _E(r,a){Ze.call(this,Y_,{G:!!r},r,a,"passwordResetFailure")}ae(_E,Ze);function EE(r,a){Ze.call(this,J_,{G:!!r},r,a,"emailChangeRevokeFailure")}ae(EE,Ze);function SE(r,a,u){Ze.call(this,rE,{errorMessage:r,zb:!!a},a,u,"recoverableError")}ae(SE,Ze);function TE(r,a){Ze.call(this,sE,{errorMessage:r},void 0,a,"unrecoverableError")}ae(TE,Ze);function Ou(r){if(r.code==="auth/invalid-credential"&&r.message&&r.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(r.message&&r.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var a=JSON.parse(r.message.substring(r.message.indexOf("{"),r.message.lastIndexOf("}")+1));return{code:r.code,message:a&&a.error&&a.error.message||r.message}}return r}function ur(r,a,u,h){function p(w){if(!w.name||w.name!="cancel"){e:{var E=w.message;try{var R=((JSON.parse(E).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(R&&R.length){var $=!0;break e}}catch{}$=!1}if($)w=dt(a),a.m(),at(r,w,void 0,Ge("Your sign-in session has expired. Please try again.").toString());else{if($=w&&w.message||"",w.code){if(w.code=="auth/email-already-in-use"||w.code=="auth/credential-already-in-use")return;$=nt(w)}a.a($)}}}if(HE(r),h)return CE(r,u),St();if(!u.credential)throw Error("No credential found!");if(!Fe(r).currentUser&&!u.user)throw Error("User not logged in.");try{var m=jO(r,u)}catch(w){return ei(w.code||w.message,w),a.a(w.code||w.message),St()}return u=m.then(function(w){CE(r,w)},p).then(void 0,p),Te(r,m),St(u)}function CE(r,a){if(!a.user)throw Error("No user found");var u=WI(F(r));if(zg(F(r))&&u&&zr("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),u){u=WI(F(r));var h=AI(ye(r))||void 0;Vn(bu,ye(r));var p=!1;H1()?((!u||u(a,h))&&(p=!0,aa(window.opener.location,Hd(r,h))),u||window.close()):(!u||u(a,h))&&(p=!0,aa(window.location,Hd(r,h))),p||r.reset()}else{u=a.user,a=a.credential,h=zg(F(r)),p=AI(ye(r))||void 0,Vn(bu,ye(r));var m=!1;H1()?((!h||h(u,a,p))&&(m=!0,aa(window.opener.location,Hd(r,p))),h||window.close()):(!h||h(u,a,p))&&(m=!0,aa(window.location,Hd(r,p))),m||r.reset()}}function Hd(r,a){if(r=a||F(r).a.get("signInSuccessUrl"),!r)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return r}function nt(r){var a={code:r.code};a=a||{};var u="";switch(a.code){case"auth/email-already-in-use":u+="The email address is already used by another account";break;case"auth/requires-recent-login":u+=_1();break;case"auth/too-many-requests":u+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":u+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":u+="That email address doesn't match an existing account";break;case"auth/user-token-expired":u+=_1();break;case"auth/weak-password":u+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":u+="The email and password you entered don't match";break;case"auth/network-request-failed":u+="A network error has occurred";break;case"auth/invalid-phone-number":u+=sg();break;case"auth/invalid-verification-code":u+=Ge("Wrong code. Try again.");break;case"auth/code-expired":u+="This code is no longer valid";break;case"auth/expired-action-code":u+="This code has expired.";break;case"auth/invalid-action-code":u+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(a=Ge(u).toString())return a;try{return JSON.parse(r.message),ei("Internal error: "+r.message,void 0),w1().toString()}catch{return r.message}}function lO(r,a,u){var h=wa[a]&&pe.auth[wa[a]]?new pe.auth[wa[a]]:a.indexOf("saml.")==0?new pe.auth.SAMLAuthProvider(a):new pe.auth.OAuthProvider(a);if(!h)throw Error("Invalid Firebase Auth provider!");var p=qI(F(r),a);if(h.addScope)for(var m=0;m<p.length;m++)h.addScope(p[m]);return p=KI(F(r),a)||{},u&&(a==pe.auth.GoogleAuthProvider.PROVIDER_ID?r="login_hint":a==pe.auth.GithubAuthProvider.PROVIDER_ID?r="login":r=(r=Eu(F(r),a))&&r.Ob,r&&(p[r]=u)),h.setCustomParameters&&h.setCustomParameters(p),h}function Mu(r,a,u,h){function p(){UP(new hI(r.h.tenantId||null),ye(r)),Te(r,a.I(ve(r.dc,r),[R],function(){if((window.location&&window.location.protocol)==="file:")return Te(r,$E(r).then(function($){a.m(),Vn(Ys,ye(r)),oe("callback",r,E,St($))},m))},w))}function m($){if(Vn(Ys,ye(r)),!$.name||$.name!="cancel")switch($=Ou($),$.code){case"auth/popup-blocked":p();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":a.a(nt($));break;case"auth/admin-restricted-operation":a.m(),Js(F(r))?oe("handleUnauthorizedUser",r,E,null,u):oe("callback",r,E,ca($));break;default:a.m(),oe("callback",r,E,ca($))}}function w($){Vn(Ys,ye(r)),$.name&&$.name=="cancel"||(ei("signInWithRedirect: "+$.code,void 0),$=nt($),a.Ga=="blank"&&Kg(F(r))?(a.m(),oe("providerSignIn",r,E,$)):a.a($))}var E=dt(a),R=lO(r,u,h);HI(F(r))==Fd?p():Te(r,BO(r,R).then(function($){a.m(),oe("callback",r,E,St($))},m))}function hO(r,a){Te(r,a.I(ve(r.$b,r),[],function(u){return a.m(),ur(r,a,u,!0)},function(u){u.name&&u.name=="cancel"||(ei("ContinueAsGuest: "+u.code,void 0),u=nt(u),a.a(u))}))}function dO(r,a,u){function h(m){var w=!1;return m=a.I(ve(r.ac,r),[m],function(E){var R=dt(a);a.m(),oe("callback",r,R,St(E)),w=!0},function(E){if((!E.name||E.name!="cancel")&&(!E||E.code!="auth/credential-already-in-use"))if(E&&E.code=="auth/email-already-in-use"&&E.email&&E.credential){var R=dt(a);a.m(),oe("callback",r,R,ca(E))}else E&&E.code=="auth/admin-restricted-operation"&&Js(F(r))?(E=dt(a),a.m(),oe("handleUnauthorizedUser",r,E,null,pe.auth.GoogleAuthProvider.PROVIDER_ID)):(E=nt(E),a.a(E))}),Te(r,m),m.then(function(){return w},function(){return!1})}if(u&&u.credential&&u.clientId===jI(F(r))){if(qI(F(r),pe.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var p=JSON.parse(atob(u.credential.split(".")[1])).email}catch{}return Mu(r,a,pe.auth.GoogleAuthProvider.PROVIDER_ID,p),St(!0)}return h(pe.auth.GoogleAuthProvider.credential(u.credential))}return u&&a.a(Ge("The selected credential for the authentication provider is not supported!").toString()),St(!1)}function fO(r,a){var u=a.j(),h=a.u();if(u)if(h){var p=pe.auth.EmailAuthProvider.credential(u,h);Te(r,a.I(ve(r.bc,r),[u,h],function(m){return ur(r,a,{user:m.user,credential:p,operationType:m.operationType,additionalUserInfo:m.additionalUserInfo})},function(m){if(!m.name||m.name!="cancel")switch(m.code){case"auth/email-already-in-use":break;case"auth/email-exists":Tt(a.l(),!1),tn(a.U(),nt(m));break;case"auth/too-many-requests":case"auth/wrong-password":Tt(a.i(),!1),tn(a.B(),nt(m));break;default:ei("verifyPassword: "+m.message,void 0),a.a(nt(m))}}))}else a.i().focus();else a.l().focus()}function Wd(r){return r=ba(F(r)),r.length==1&&r[0]==pe.auth.EmailAuthProvider.PROVIDER_ID}function AE(r){return r=ba(F(r)),r.length==1&&r[0]==pe.auth.PhoneAuthProvider.PROVIDER_ID}function at(r,a,u,h){Wd(r)?h?oe("signIn",r,a,u,h):av(r,a,u):r&&AE(r)&&!h?oe("phoneSignInStart",r,a):r&&Kg(F(r))&&!h?oe("federatedRedirect",r,a,u):oe("providerSignIn",r,a,h,u)}function kE(r,a,u,h){var p=dt(a);Te(r,a.I(ve(Fe(r).fetchSignInMethodsForEmail,Fe(r)),[u],function(m){a.m(),RE(r,p,m,u,h)},function(m){m=nt(m),a.a(m)}))}function RE(r,a,u,h,p,m){u.length||Ia(F(r))&&!Ia(F(r))?G(u,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?oe("passwordSignIn",r,a,h,m):u.length==1&&u[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ia(F(r))?oe("sendEmailLinkForSignIn",r,a,h,function(){oe("signIn",r,a)}):oe("unsupportedProvider",r,a,h):(u=UI(u,ba(F(r))))?(kI(new Dg(h),ye(r)),oe("federatedSignIn",r,a,h,u,p)):oe("unsupportedProvider",r,a,h):$I(F(r))?oe("handleUnauthorizedUser",r,a,h,pe.auth.EmailAuthProvider.PROVIDER_ID):Ia(F(r))?oe("sendEmailLinkForSignIn",r,a,h,function(){oe("signIn",r,a)}):oe("passwordSignUp",r,a,h,void 0,void 0,m)}function ov(r,a,u,h,p,m){var w=dt(a);Te(r,a.I(ve(r.Ib,r),[u,m],function(){a.m(),oe("emailLinkSignInSent",r,w,u,h,m)},p))}function av(r,a,u){u?oe("prefilledEmailSignIn",r,a,u):oe("signIn",r,a)}function Lu(){return Qh(ar(),"oobCode")}function cv(){var r=Qh(ar(),"continueUrl");return r?function(){aa(window.location,r)}:null}function Fu(r,a){M.call(this,B_,void 0,a,"anonymousUserMismatch"),this.i=r}l(Fu,M),Fu.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),this.l().focus(),M.prototype.v.call(this)},Fu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Fu.prototype,{l:$t}),Xe.anonymousUserMismatch=function(r,a){var u=new Fu(function(){u.m(),at(r,a)});u.render(a),Ne(r,u)};function Yd(r){M.call(this,P_,void 0,r,"callback")}l(Yd,M),Yd.prototype.I=function(r,a,u,h){return r.apply(null,a).then(u,h)};function xE(r,a,u){if(u.user){var h={user:u.user,credential:u.credential,operationType:u.operationType,additionalUserInfo:u.additionalUserInfo},p=Mi(ye(r)),m=p&&p.g;if(m&&!mO(u.user,m))pO(r,a,h);else{var w=p&&p.a;w?Te(r,u.user.linkWithCredential(w).then(function(E){h={user:E.user,credential:w,operationType:E.operationType,additionalUserInfo:E.additionalUserInfo},DE(r,a,h)},function(E){Qd(r,a,E)})):DE(r,a,h)}}else u=dt(a),a.m(),Li(ye(r)),at(r,u)}function DE(r,a,u){Li(ye(r)),ur(r,a,u)}function Qd(r,a,u){var h=dt(a);Li(ye(r)),u=nt(u),a.m(),at(r,h,void 0,u)}function NE(r,a,u,h){var p=dt(a);Te(r,Fe(r).fetchSignInMethodsForEmail(u).then(function(m){a.m(),m.length?G(m,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?oe("passwordLinking",r,p,u):m.length==1&&m[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?oe("emailLinkSignInLinking",r,p,u):(m=UI(m,ba(F(r))))?oe("federatedLinking",r,p,u,m,h):(Li(ye(r)),oe("unsupportedProvider",r,p,u)):(Li(ye(r)),oe("passwordRecovery",r,p,u,!1,b1().toString()))},function(m){Qd(r,a,m)}))}function pO(r,a,u){var h=dt(a);Te(r,Wr(r).then(function(){a.m(),oe("emailMismatch",r,h,u)},function(p){p.name&&p.name=="cancel"||(p=nt(p.code),a.a(p))}))}function mO(r,a){if(a==r.email)return!0;if(r.providerData){for(var u=0;u<r.providerData.length;u++)if(a==r.providerData[u].email)return!0}return!1}Xe.callback=function(r,a,u){var h=new Yd;h.render(a),Ne(r,h),u=u||$E(r),Te(r,u.then(function(p){xE(r,h,p)},function(p){if((p=Ou(p))&&(p.code=="auth/account-exists-with-different-credential"||p.code=="auth/email-already-in-use")&&p.email&&p.credential)kI(new Dg(p.email,p.credential),ye(r)),NE(r,h,p.email);else if(p&&p.code=="auth/user-cancelled"){var m=Mi(ye(r)),w=nt(p);m&&m.a?NE(r,h,m.g,w):m?kE(r,h,m.g,w):Qd(r,h,p)}else p&&p.code=="auth/credential-already-in-use"||(p&&p.code=="auth/operation-not-supported-in-this-environment"&&Wd(r)?xE(r,h,{user:null,credential:null}):p&&p.code=="auth/admin-restricted-operation"&&Js(F(r))?(h.m(),Li(ye(r)),oe("handleUnauthorizedUser",r,a,null,null)):Qd(r,h,p))}))};function Uu(r,a){M.call(this,V_,void 0,a,"differentDeviceError"),this.i=r}l(Uu,M),Uu.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),this.l().focus(),M.prototype.v.call(this)},Uu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Uu.prototype,{l:$t}),Xe.differentDeviceError=function(r,a){var u=new Uu(function(){u.m(),at(r,a)});u.render(a),Ne(r,u)};function Vu(r,a,u,h){M.call(this,Q_,{email:r,G:!!u},h,"emailChangeRevoke"),this.l=a,this.i=u||null}l(Vu,M),Vu.prototype.v=function(){var r=this;yt(this,Ve(this,"firebaseui-id-reset-password-link"),function(){r.l()}),this.i&&(this.w(this.i),this.u().focus()),M.prototype.v.call(this)},Vu.prototype.o=function(){this.l=this.i=null,M.prototype.o.call(this)},Oe(Vu.prototype,{u:zt,B:$t,w:nn});function Bu(){return Ve(this,"firebaseui-id-new-password")}function Jd(){return Ve(this,"firebaseui-id-password-toggle")}function gO(){this.Ra=!this.Ra;var r=Jd.call(this),a=Bu.call(this);this.Ra?(a.type="text",Fi(r,"firebaseui-input-toggle-off"),Ui(r,"firebaseui-input-toggle-on")):(a.type="password",Fi(r,"firebaseui-input-toggle-on"),Ui(r,"firebaseui-input-toggle-off")),a.focus()}function Xd(){return Ve(this,"firebaseui-id-new-password-error")}function PE(){this.Ra=!1;var r=Bu.call(this);r.type="password";var a=Xd.call(this);ka(this,r,function(){Ra(a)&&(Tt(r,!0),ni(a))});var u=Jd.call(this);Fi(u,"firebaseui-input-toggle-on"),Ui(u,"firebaseui-input-toggle-off"),rO(this,r,function(){Fi(u,"firebaseui-input-toggle-focus"),Ui(u,"firebaseui-input-toggle-blur")}),sO(this,r,function(){Fi(u,"firebaseui-input-toggle-blur"),Ui(u,"firebaseui-input-toggle-focus")}),yt(this,u,ve(gO,this))}function OE(){var r=Bu.call(this),a=Xd.call(this);return en(r)?(Tt(r,!0),ni(a),a=!0):(Tt(r,!1),tn(a,Ge("Enter your password").toString()),a=!1),a?en(r):null}function ju(r,a,u){M.call(this,H_,{email:r},u,"passwordReset"),this.l=a}l(ju,M),ju.prototype.v=function(){this.H(),this.B(this.l),Na(this,this.i(),this.l),this.i().focus(),M.prototype.v.call(this)},ju.prototype.o=function(){this.l=null,M.prototype.o.call(this)},Oe(ju.prototype,{i:Bu,w:Xd,M:Jd,H:PE,u:OE,U:zt,P:$t,B:nn});function $u(r,a,u,h,p){M.call(this,nE,{factorId:r,phoneNumber:u||null,G:!!h},p,"revertSecondFactorAdditionSuccess"),this.l=a,this.i=h||null}l($u,M),$u.prototype.v=function(){var r=this;yt(this,Ve(this,"firebaseui-id-reset-password-link"),function(){r.l()}),this.i&&(this.w(this.i),this.u().focus()),M.prototype.v.call(this)},$u.prototype.o=function(){this.l=this.i=null,M.prototype.o.call(this)},Oe($u.prototype,{u:zt,B:$t,w:nn});function vO(r,a,u,h,p){var m=u.u();m&&Te(r,u.I(ve(Fe(r).confirmPasswordReset,Fe(r)),[h,m],function(){u.m();var w=new IE(p);w.render(a),Ne(r,w)},function(w){ME(r,a,u,w)}))}function ME(r,a,u,h){(h&&h.code)=="auth/weak-password"?(r=nt(h),Tt(u.i(),!1),tn(u.w(),r),u.i().focus()):(u&&u.m(),u=new _E,u.render(a),Ne(r,u))}function yO(r,a,u){var h=new Vu(u,function(){Te(r,h.I(ve(Fe(r).sendPasswordResetEmail,Fe(r)),[u],function(){h.m(),h=new Gd(u,void 0,Dt(F(r)),Nt(F(r))),h.render(a),Ne(r,h)},function(){h.a(y1().toString())}))});h.render(a),Ne(r,h)}function wO(r,a,u,h){var p=new $u(h.factorId,function(){p.I(ve(Fe(r).sendPasswordResetEmail,Fe(r)),[u],function(){p.m(),p=new Gd(u,void 0,Dt(F(r)),Nt(F(r))),p.render(a),Ne(r,p)},function(){p.a(y1().toString())})},h.phoneNumber);p.render(a),Ne(r,p)}Xe.passwordReset=function(r,a,u,h){Te(r,Fe(r).verifyPasswordResetCode(u).then(function(p){var m=new ju(p,function(){vO(r,a,m,u,h)});m.render(a),Ne(r,m)},function(){ME(r,a)}))},Xe.emailChangeRevocation=function(r,a,u){var h=null;Te(r,Fe(r).checkActionCode(u).then(function(p){return h=p.data.email,Fe(r).applyActionCode(u)}).then(function(){yO(r,a,h)},function(){var p=new EE;p.render(a),Ne(r,p)}))},Xe.emailVerification=function(r,a,u,h){Te(r,Fe(r).applyActionCode(u).then(function(){var p=new mE(h);p.render(a),Ne(r,p)},function(){var p=new gE;p.render(a),Ne(r,p)}))},Xe.revertSecondFactorAddition=function(r,a,u){var h=null,p=null;Te(r,Fe(r).checkActionCode(u).then(function(m){return h=m.data.email,p=m.data.multiFactorInfo,Fe(r).applyActionCode(u)}).then(function(){wO(r,a,h,p)},function(){var m=new wE;m.render(a),Ne(r,m)}))},Xe.verifyAndChangeEmail=function(r,a,u,h){var p=null;Te(r,Fe(r).checkActionCode(u).then(function(m){return p=m.data.email,Fe(r).applyActionCode(u)}).then(function(){var m=new vE(p,h);m.render(a),Ne(r,m)},function(){var m=new yE;m.render(a),Ne(r,m)}))};function Zd(r,a){try{var u=typeof r.selectionStart=="number"}catch{u=!1}u?(r.selectionStart=a,r.selectionEnd=a):_t&&!Bs("9")&&(r.type=="textarea"&&(a=r.value.substring(0,a).replace(/(\r\n|\r|\n)/g,`
`).length),r=r.createTextRange(),r.collapse(!0),r.move("character",a),r.select())}function qu(r,a,u,h,p,m){M.call(this,U_,{email:u},m,"emailLinkSignInConfirmation",{F:h,D:p}),this.l=r,this.u=a}l(qu,M),qu.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Zd(this.i(),(this.i().value||"").length),M.prototype.v.call(this)},qu.prototype.o=function(){this.u=this.l=null,M.prototype.o.call(this)},Oe(qu.prototype,{i:cr,M:Hr,w:Oa,H:Ma,j:La,U:zt,P:$t,B:nn}),Xe.emailLinkConfirmation=function(r,a,u,h,p,m){var w=new qu(function(){var E=w.j();E?(w.m(),h(r,a,E,u)):w.i().focus()},function(){w.m(),at(r,a,p||void 0)},p||void 0,Dt(F(r)),Nt(F(r)));w.render(a),Ne(r,w),m&&w.a(m)};function Ku(r,a,u,h,p){M.call(this,q_,{ga:r},p,"emailLinkSignInLinkingDifferentDevice",{F:u,D:h}),this.i=a}l(Ku,M),Ku.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},Ku.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Ku.prototype,{l:zt,u:nn}),Xe.emailLinkNewDeviceLinking=function(r,a,u,h){var p=new Vs(u);if(u=p.a.a.get(Vt.PROVIDER_ID)||null,Y0(p,null),u){var m=new Ku(Eu(F(r),u),function(){m.m(),h(r,a,p.toString())},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m)}else at(r,a)};function ef(r){M.call(this,M_,void 0,r,"blank")}l(ef,M);function uv(r,a,u,h,p){var m=new ef,w=new Vs(u),E=w.a.a.get(Vt.$a)||"",R=w.a.a.get(Vt.Sa)||"",$=w.a.a.get(Vt.Qa)==="1",ce=W0(w),et=w.a.a.get(Vt.PROVIDER_ID)||null;w=w.a.a.get(Vt.vb)||null,WE(r,w);var Ti=!va(ga,ye(r)),ZE=h||VP(R,ye(r)),il=(h=BP(R,ye(r)))&&h.a;et&&il&&il.providerId!==et&&(il=null),m.render(a),Ne(r,m),Te(r,m.I(function(){var fi=St(null);fi=ce&&Ti||Ti&&$?ca(Error("anonymous-user-not-found")):FO(r,u).then(function(bv){if(et&&!il)throw Error("pending-credential-not-found");return bv});var rl=null;return fi.then(function(bv){return rl=bv,p?null:Fe(r).checkActionCode(E)}).then(function(){return rl})},[],function(fi){ZE?IO(r,m,ZE,u,il,fi):$?(m.m(),oe("differentDeviceError",r,a)):(m.m(),oe("emailLinkConfirmation",r,a,u,LE))},function(fi){var rl=void 0;if(!fi||!fi.name||fi.name!="cancel")switch(m.m(),fi&&fi.message){case"anonymous-user-not-found":oe("differentDeviceError",r,a);break;case"anonymous-user-mismatch":oe("anonymousUserMismatch",r,a);break;case"pending-credential-not-found":oe("emailLinkNewDeviceLinking",r,a,u,bO);break;default:fi&&(rl=nt(fi)),at(r,a,void 0,rl)}}))}function LE(r,a,u,h){uv(r,a,h,u,!0)}function bO(r,a,u){uv(r,a,u)}function IO(r,a,u,h,p,m){var w=dt(a);a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Ge("Signing in...").toString());var E=null;p=(m?UO(r,m,u,h,p):VO(r,u,h,p)).then(function(R){Vn(Iu,ye(r)),Vn(ga,ye(r)),a.h(),a.$("firebaseui-icon-done",Ge("Signed in!").toString()),E=setTimeout(function(){a.h(),ur(r,a,R,!0)},1e3),Te(r,function(){a&&(a.h(),a.m()),clearTimeout(E)})},function(R){if(a.h(),a.m(),!R.name||R.name!="cancel"){R=Ou(R);var $=nt(R);R.code=="auth/email-already-in-use"||R.code=="auth/credential-already-in-use"?(Vn(Iu,ye(r)),Vn(ga,ye(r))):R.code=="auth/invalid-email"?($=Ge("The email provided does not match the current sign-in session.").toString(),oe("emailLinkConfirmation",r,w,h,LE,null,$)):at(r,w,u,$)}}),Te(r,p)}Xe.emailLinkSignInCallback=uv;function zu(r,a,u,h,p,m){M.call(this,$_,{email:r,ga:a},m,"emailLinkSignInLinking",{F:h,D:p}),this.i=u}l(zu,M),zu.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},zu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(zu.prototype,{l:zt,u:nn});function _O(r,a,u,h){var p=dt(a);ov(r,a,u,function(){at(r,p,u)},function(m){if(!m.name||m.name!="cancel"){var w=nt(m);m&&m.code=="auth/network-request-failed"?a.a(w):(a.m(),at(r,p,u,w))}},h)}Xe.emailLinkSignInLinking=function(r,a,u){var h=Mi(ye(r));if(Li(ye(r)),h){var p=h.a.providerId,m=new zu(u,Eu(F(r),p),function(){_O(r,m,u,h)},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m)}else at(r,a)};function Gu(r,a,u,h,p,m){M.call(this,L_,{email:r},m,"emailLinkSignInSent",{F:h,D:p}),this.u=a,this.i=u}l(Gu,M),Gu.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),yt(this,Ve(this,"firebaseui-id-trouble-getting-email-link"),function(){r.u()}),this.l().focus(),M.prototype.v.call(this)},Gu.prototype.o=function(){this.i=this.u=null,M.prototype.o.call(this)},Oe(Gu.prototype,{l:$t}),Xe.emailLinkSignInSent=function(r,a,u,h,p){var m=new Gu(u,function(){m.m(),oe("emailNotReceived",r,a,u,h,p)},function(){m.m(),h()},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m)};function Hu(r,a,u,h,p,m,w){M.call(this,oE,{jc:r,Qb:a},w,"emailMismatch",{F:p,D:m}),this.l=u,this.i=h}l(Hu,M),Hu.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),M.prototype.v.call(this)},Hu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Hu.prototype,{u:zt,B:$t,w:nn}),Xe.emailMismatch=function(r,a,u){var h=Mi(ye(r));if(h){var p=new Hu(u.user.email,h.g,function(){var m=p;Li(ye(r)),ur(r,m,u)},function(){var m=u.credential.providerId,w=dt(p);p.m(),h.a?oe("federatedLinking",r,w,h.g,m):oe("federatedSignIn",r,w,h.g,m)},Dt(F(r)),Nt(F(r)));p.render(a),Ne(r,p)}else at(r,a)};function Fa(r,a,u,h,p){M.call(this,F_,void 0,p,"emailNotReceived",{F:u,D:h}),this.l=r,this.i=a}l(Fa,M),Fa.prototype.v=function(){var r=this;yt(this,this.u(),function(){r.i()}),yt(this,this.Da(),function(){r.l()}),this.u().focus(),M.prototype.v.call(this)},Fa.prototype.Da=function(){return Ve(this,"firebaseui-id-resend-email-link")},Fa.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Oe(Fa.prototype,{u:$t}),Xe.emailNotReceived=function(r,a,u,h,p){var m=new Fa(function(){ov(r,m,u,h,function(w){w=nt(w),m.a(w)},p)},function(){m.m(),at(r,a,u)},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m)};function Ua(r,a,u,h,p,m){M.call(this,K_,{email:r,ga:a},m,"federatedLinking",{F:h,D:p}),this.i=u}l(Ua,M),Ua.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},Ua.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Ua.prototype,{l:zt,u:nn}),Xe.federatedLinking=function(r,a,u,h,p){var m=Mi(ye(r));if(m&&m.a){var w=new Ua(u,Eu(F(r),h),function(){Mu(r,w,h,u)},Dt(F(r)),Nt(F(r)));w.render(a),Ne(r,w),p&&w.a(p)}else at(r,a)},Xe.federatedRedirect=function(r,a,u){var h=new ef;h.render(a),Ne(r,h),a=ba(F(r))[0],Mu(r,h,a,u)},Xe.federatedSignIn=function(r,a,u,h,p){var m=new Ua(u,Eu(F(r),h),function(){Mu(r,m,h,u)},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m),p&&m.a(p)};function EO(r,a,u,h){var p=a.u();p?Te(r,a.I(ve(r.Xb,r),[u,p],function(m){return m=m.user.linkWithCredential(h).then(function(w){return ur(r,a,{user:w.user,credential:h,operationType:w.operationType,additionalUserInfo:w.additionalUserInfo})}),Te(r,m),m},function(m){if(!m.name||m.name!="cancel")switch(m.code){case"auth/wrong-password":Tt(a.i(),!1),tn(a.B(),nt(m));break;case"auth/too-many-requests":a.a(nt(m));break;default:ei("signInWithEmailAndPassword: "+m.message,void 0),a.a(nt(m))}})):a.i().focus()}Xe.passwordLinking=function(r,a,u){var h=Mi(ye(r));Li(ye(r));var p=h&&h.a;if(p){var m=new Pa(u,function(){EO(r,m,u,p)},function(){m.m(),oe("passwordRecovery",r,a,u)},Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m)}else at(r,a)};function Wu(r,a,u,h,p,m){M.call(this,D_,{email:u,Ta:!!a},m,"passwordRecovery",{F:h,D:p}),this.l=r,this.u=a}l(Wu,M),Wu.prototype.v=function(){this.B(),this.H(this.l,this.u),en(this.i())||this.i().focus(),Na(this,this.i(),this.l),M.prototype.v.call(this)},Wu.prototype.o=function(){this.u=this.l=null,M.prototype.o.call(this)},Oe(Wu.prototype,{i:cr,w:Hr,B:Oa,M:Ma,j:La,U:zt,P:$t,H:nn});function SO(r,a){var u=a.j();if(u){var h=dt(a);Te(r,a.I(ve(Fe(r).sendPasswordResetEmail,Fe(r)),[u],function(){a.m();var p=new Gd(u,function(){p.m(),at(r,h)},Dt(F(r)),Nt(F(r)));p.render(h),Ne(r,p)},function(p){Tt(a.i(),!1),tn(a.w(),nt(p))}))}else a.i().focus()}Xe.passwordRecovery=function(r,a,u,h,p){var m=new Wu(function(){SO(r,m)},h?void 0:function(){m.m(),at(r,a)},u,Dt(F(r)),Nt(F(r)));m.render(a),Ne(r,m),p&&m.a(p)},Xe.passwordSignIn=function(r,a,u,h){var p=new Pu(function(){fO(r,p)},function(){var m=p.M();p.m(),oe("passwordRecovery",r,a,m)},u,Dt(F(r)),Nt(F(r)),h);p.render(a),Ne(r,p)};function lv(){return Ve(this,"firebaseui-id-name")}function hv(){return Ve(this,"firebaseui-id-name-error")}function Yu(r,a,u,h,p,m,w,E,R){M.call(this,x_,{email:h,Tb:r,name:p,Ta:!!u,ia:!!E},R,"passwordSignUp",{F:m,D:w}),this.w=a,this.H=u,this.B=r}l(Yu,M),Yu.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Nu(this,this.i(),this.u()),Nu(this,this.u(),this.l())):Nu(this,this.i(),this.l()),this.w&&Na(this,this.l(),this.w),en(this.i())?this.B&&!en(this.u())?this.u().focus():this.l().focus():this.i().focus(),M.prototype.v.call(this)},Yu.prototype.o=function(){this.H=this.w=null,M.prototype.o.call(this)},Oe(Yu.prototype,{i:cr,U:Hr,ea:Oa,jb:Ma,j:La,u:lv,Bc:hv,Ja:function(){var r=lv.call(this),a=hv.call(this);ka(this,r,function(){Ra(a)&&(Tt(r,!0),ni(a))})},M:function(){var r=lv.call(this),a=hv.call(this),u=en(r);return u=!/^[\s\xa0]*$/.test(u==null?"":String(u)),Tt(r,u),u?(ni(a),a=!0):(tn(a,Ge("Enter your account name").toString()),a=!1),a?P(en(r)):null},l:Bu,ba:Xd,lb:Jd,ua:PE,P:OE,Nb:zt,Mb:$t,pa:nn});function TO(r,a){var u=GI(F(r)),h=a.j(),p=null;u&&(p=a.M());var m=a.P();if(h){if(u)if(p)p=le(p);else{a.u().focus();return}if(m){var w=pe.auth.EmailAuthProvider.credential(h,m);Te(r,a.I(ve(r.Yb,r),[h,m],function(E){var R={user:E.user,credential:w,operationType:E.operationType,additionalUserInfo:E.additionalUserInfo};return u?(E=E.user.updateProfile({displayName:p}).then(function(){return ur(r,a,R)}),Te(r,E),E):ur(r,a,R)},function(E){if(!E.name||E.name!="cancel"){var R=Ou(E);switch(E=nt(R),R.code){case"auth/email-already-in-use":return CO(r,a,h,R);case"auth/too-many-requests":E=Ge("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Tt(a.l(),!1),tn(a.ba(),E);break;case"auth/admin-restricted-operation":Js(F(r))?(E=dt(a),a.m(),oe("handleUnauthorizedUser",r,E,h,pe.auth.EmailAuthProvider.PROVIDER_ID)):a.a(E);break;default:R="setAccountInfo: "+_I(R),ei(R,void 0),a.a(E)}}}))}else a.l().focus()}else a.i().focus()}function CO(r,a,u,h){function p(){var w=nt(h);Tt(a.i(),!1),tn(a.U(),w),a.i().focus()}var m=Fe(r).fetchSignInMethodsForEmail(u).then(function(w){w.length?p():(w=dt(a),a.m(),oe("passwordRecovery",r,w,u,!1,b1().toString()))},function(){p()});return Te(r,m),m}Xe.passwordSignUp=function(r,a,u,h,p,m){function w(){E.m(),at(r,a)}var E=new Yu(GI(F(r)),function(){TO(r,E)},p?void 0:w,u,h,Dt(F(r)),Nt(F(r)),m);E.render(a),Ne(r,E)};function dv(){return Ve(this,"firebaseui-id-phone-confirmation-code")}function FE(){return Ve(this,"firebaseui-id-phone-confirmation-code-error")}function UE(){return Ve(this,"firebaseui-id-resend-countdown")}function Va(r,a,u,h,p,m,w,E,R){M.call(this,uE,{phoneNumber:p},R,"phoneSignInFinish",{F:w,D:E}),this.jb=m,this.i=new Ud(1e3),this.B=m,this.P=r,this.l=a,this.H=u,this.M=h}l(Va,M),Va.prototype.v=function(){var r=this;this.U(this.jb),Ii(this.i,"tick",this.w,!1,this),this.i.start(),yt(this,Ve(this,"firebaseui-id-change-phone-number-link"),function(){r.P()}),yt(this,this.Da(),function(){r.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),M.prototype.v.call(this)},Va.prototype.o=function(){this.M=this.H=this.l=this.P=null,Vd(this.i),zs(this.i,"tick",this.w),this.i=null,M.prototype.o.call(this)},Va.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Vd(this.i),zs(this.i,"tick",this.w),this.ua(),this.lb())},Oe(Va.prototype,{u:dv,pa:FE,Ja:function(r){var a=dv.call(this),u=FE.call(this);ka(this,a,function(){Ra(u)&&(Tt(a,!0),ni(u))}),r&&Du(this,a,function(){r()})},ba:function(){var r=P(en(dv.call(this))||"");return/^\d{6}$/.test(r)?r:null},Fb:UE,U:function(r){tg(UE.call(this),Ge("Resend code in "+((9<r?"0:":"0:0")+r)).toString())},ua:function(){ni(this.Fb())},Da:function(){return Ve(this,"firebaseui-id-resend-link")},lb:function(){tn(this.Da())},Nb:zt,Mb:$t,ea:nn});function AO(r,a,u,h){function p(w){a.u().focus(),Tt(a.u(),!1),tn(a.pa(),w)}var m=a.ba();m?(a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Ge("Verifying...").toString()),Te(r,a.I(ve(h.confirm,h),[m],function(w){a.h(),a.$("firebaseui-icon-done",Ge("Verified!").toString());var E=setTimeout(function(){a.h(),a.m();var R={user:Ei(r).currentUser,credential:null,operationType:w.operationType,additionalUserInfo:w.additionalUserInfo};ur(r,a,R,!0)},1e3);Te(r,function(){a&&a.h(),clearTimeout(E)})},function(w){if(w.name&&w.name=="cancel")a.h();else{var E=Ou(w);switch(w=nt(E),E.code){case"auth/credential-already-in-use":a.h();break;case"auth/code-expired":E=dt(a),a.h(),a.m(),oe("phoneSignInStart",r,E,u,w);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":a.h(),p(w);break;default:a.h(),a.a(w)}}}))):p(Ge("Wrong code. Try again.").toString())}Xe.phoneSignInFinish=function(r,a,u,h,p,m){var w=new Va(function(){w.m(),oe("phoneSignInStart",r,a,u)},function(){AO(r,w,u,p)},function(){w.m(),at(r,a)},function(){w.m(),oe("phoneSignInStart",r,a,u)},$g(u),h,Dt(F(r)),Nt(F(r)));w.render(a),Ne(r,w),m&&w.a(m)};var kO=!_t&&!(Le("Safari")&&!(X0()||Le("Coast")||Le("Opera")||Le("Edge")||Le("Firefox")||Le("FxiOS")||Le("Silk")||Le("Android")));function tf(r,a){return/-[a-z]/.test(a)?null:kO&&r.dataset?!Le("Android")||X0()||Le("Firefox")||Le("FxiOS")||Le("Opera")||Le("Silk")||a in r.dataset?(r=r.dataset[a],r===void 0?null:r):null:r.getAttribute("data-"+String(a).replace(/([A-Z])/g,"-$1").toLowerCase())}function RO(r,a,u){var h=this;r=au(__,{items:r},null,this.s),S_.call(this,r,!0,!0),u&&(u=xO(r,u))&&(u.focus(),iO(u,r)),yt(this,r,function(p){(p=(p=f1(p.target,"firebaseui-id-list-box-dialog-button"))&&tf(p,"listboxid"))&&(qd.call(h),a(p))})}function xO(r,a){r=(r||document).getElementsByTagName("BUTTON");for(var u=0;u<r.length;u++)if(tf(r[u],"listboxid")===a)return r[u];return null}function Zs(){return Ve(this,"firebaseui-id-phone-number")}function VE(){return Ve(this,"firebaseui-id-country-selector")}function fv(){return Ve(this,"firebaseui-id-phone-number-error")}function DO(r,a){var u=r.a,h=pv("1-US-0",u),p=null;if(a&&pv(a,u)?p=a:h?p="1-US-0":p=0<u.length?u[0].c:null,!p)throw Error("No available default country");nf.call(this,p,r)}function pv(r,a){return r=Qs(r),!(!r||!G(a,r))}function NO(r){return r.map(function(a){return{id:a.c,Ma:"firebaseui-flag "+mv(a),label:a.name+" "+("+"+a.b)}})}function mv(r){return"firebaseui-flag-"+r.f}function PO(r){var a=this;RO.call(this,NO(r.a),function(u){nf.call(a,u,r,!0),a.O().focus()},this.Ba)}function nf(r,a,u){var h=Qs(r);h&&(u&&(u=P(en(Zs.call(this))||""),a=Pd(a,u),a.length&&a[0].b!=h.b&&(u="+"+h.b+u.substr(a[0].b.length+1),XI(Zs.call(this),u))),a=Qs(this.Ba),this.Ba=r,r=Ve(this,"firebaseui-id-country-selector-flag"),a&&Ui(r,mv(a)),Fi(r,mv(h)),tg(Ve(this,"firebaseui-id-country-selector-code"),"+"+h.b))}function Qu(r,a,u,h,p,m,w,E,R,$){M.call(this,cE,{Gb:a,Aa:R||null,Va:!!u,ia:!!m},$,"phoneSignInStart",{F:h,D:p}),this.H=E||null,this.M=a,this.l=r,this.w=u||null,this.pa=w||null}l(Qu,M),Qu.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Nu(this,this.O(),this.i()),Na(this,this.i(),this.l),this.O().focus(),Zd(this.O(),(this.O().value||"").length),M.prototype.v.call(this)},Qu.prototype.o=function(){this.w=this.l=null,M.prototype.o.call(this)},Oe(Qu.prototype,{Cb:rv,O:Zs,B:fv,ea:function(r,a,u){var h=this,p=Zs.call(this),m=VE.call(this),w=fv.call(this),E=r||_u,R=E.a;if(R.length==0)throw Error("No available countries provided.");DO.call(h,E,a),yt(this,m,function(){PO.call(h,E)}),ka(this,p,function(){Ra(w)&&(Tt(p,!0),ni(w));var $=P(en(p)||""),ce=Qs(this.Ba),et=Pd(E,$);$=pv("1-US-0",R),et.length&&et[0].b!=ce.b&&(ce=et[0],nf.call(h,ce.b=="1"&&$?"1-US-0":ce.c,E))}),u&&Du(this,p,function(){u()})},U:function(r){var a=P(en(Zs.call(this))||"");r=r||_u;var u=r.a,h=Pd(_u,a);if(h.length&&!G(u,h[0]))throw XI(Zs.call(this)),Zs.call(this).focus(),tn(fv.call(this),Ge("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return u=Qs(this.Ba),h.length&&h[0].b!=u.b&&nf.call(this,h[0].c,r),h.length&&(a=a.substr(h[0].b.length+1)),a?new LI(this.Ba,a):null},Ja:VE,ba:function(){return Ve(this,"firebaseui-recaptcha-container")},u:function(){return Ve(this,"firebaseui-id-recaptcha-error")},i:zt,ua:$t,P:nn});function BE(r,a,u,h){try{var p=a.U(Qg)}catch{return}p?Tu?(a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Ge("Verifying...").toString()),Te(r,a.I(ve(r.cc,r),[$g(p),u],function(m){var w=dt(a);a.$("firebaseui-icon-done",Ge("Code sent!").toString());var E=setTimeout(function(){a.h(),a.m(),oe("phoneSignInFinish",r,w,p,15,m)},1e3);Te(r,function(){a&&a.h(),clearTimeout(E)})},function(m){if(a.h(),!m.name||m.name!="cancel"){grecaptcha.reset(QI),Tu=null;var w=m&&m.message||"";if(m.code)switch(m.code){case"auth/too-many-requests":w=Ge("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":a.O().focus(),tn(a.B(),sg().toString());return;case"auth/admin-restricted-operation":if(Js(F(r))){m=dt(a),a.m(),oe("handleUnauthorizedUser",r,m,$g(p),pe.auth.PhoneAuthProvider.PROVIDER_ID);return}w=nt(m);break;default:w=nt(m)}a.a(w)}}))):_a?tn(a.u(),Ge("Solve the reCAPTCHA").toString()):!_a&&h&&a.i().click():(a.O().focus(),tn(a.B(),sg().toString()))}Xe.phoneSignInStart=function(r,a,u,h){var p=qP(F(r))||{};Tu=null,_a=!(p&&p.size==="invisible");var m=AE(r),w=YP(F(r)),E=m?WP(F(r)):null;w=u&&u.a||w&&w.c||null,u=u&&u.Aa||E,(E=qg(F(r)))&&MI(E),Qg=E?new NI(qg(F(r))):_u;var R=new Qu(function(ce){BE(r,R,$,!(!ce||!ce.keyCode))},_a,m?null:function(){$.clear(),R.m(),at(r,a)},Dt(F(r)),Nt(F(r)),m,Qg,w,u);R.render(a),Ne(r,R),h&&R.a(h),p.callback=function(ce){R.u()&&ni(R.u()),Tu=ce,_a||BE(r,R,$)},p["expired-callback"]=function(){Tu=null};var $=new pe.auth.RecaptchaVerifier(_a?R.ba():R.i(),p,Ei(r).app);Te(r,R.I(ve($.render,$),[],function(ce){QI=ce},function(ce){ce.name&&ce.name=="cancel"||(ce=nt(ce),R.m(),at(r,a,void 0,ce))}))},Xe.prefilledEmailSignIn=function(r,a,u){var h=new ef;h.render(a),Ne(r,h),Te(r,h.I(ve(Fe(r).fetchSignInMethodsForEmail,Fe(r)),[u],function(p){h.m();var m=!(!Wd(r)||!qE(r));RE(r,a,p,u,void 0,m)},function(p){p=nt(p),h.m(),oe("signIn",r,a,u,p)}))};function Ju(r,a,u,h,p){M.call(this,aE,{Sb:a},p,"providerSignIn",{F:u,D:h}),this.i=r}l(Ju,M),Ju.prototype.v=function(){this.l(this.i),M.prototype.v.call(this)},Ju.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(Ju.prototype,{l:function(r){function a(w){r(w)}for(var u=this.g?Zm("firebaseui-id-idp-button",this.g||this.s.a):[],h=0;h<u.length;h++){var p=u[h],m=tf(p,"providerId");yt(this,p,Qe(a,m))}}}),Xe.providerSignIn=function(r,a,u,h){var p=new Ju(function(m){m==pe.auth.EmailAuthProvider.PROVIDER_ID?(p.m(),av(r,a,h)):m==pe.auth.PhoneAuthProvider.PROVIDER_ID?(p.m(),oe("phoneSignInStart",r,a)):m=="anonymous"?hO(r,p):Mu(r,p,m,h),Be(r),r.l.cancel()},BI(F(r)),Dt(F(r)),Nt(F(r)));p.render(a),Ne(r,p),u&&p.a(u),LO(r)},Xe.sendEmailLinkForSignIn=function(r,a,u,h){var p=new Yd;p.render(a),Ne(r,p),ov(r,p,u,h,function(m){p.m(),m&&m.code=="auth/admin-restricted-operation"&&Js(F(r))?oe("handleUnauthorizedUser",r,a,u,pe.auth.EmailAuthProvider.PROVIDER_ID):(m=nt(m),oe("signIn",r,a,u,m))})};function Xu(r,a,u,h,p,m,w){M.call(this,k_,{email:u,Va:!!a,ia:!!m},w,"signIn",{F:h,D:p}),this.i=r,this.u=a}l(Xu,M),Xu.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Zd(this.l(),(this.l().value||"").length),M.prototype.v.call(this)},Xu.prototype.o=function(){this.u=this.i=null,M.prototype.o.call(this)},Oe(Xu.prototype,{l:cr,M:Hr,w:Oa,H:Ma,j:La,U:zt,P:$t,B:nn}),Xe.signIn=function(r,a,u,h){var p=Wd(r),m=new Xu(function(){var w=m,E=w.j()||"";E&&kE(r,w,E)},p?null:function(){m.m(),at(r,a,u)},u,Dt(F(r)),Nt(F(r)),p);m.render(a),Ne(r,m),h&&m.a(h)};function Zu(r,a,u,h,p,m,w){M.call(this,z_,{kc:r,yb:u,Eb:!!h},w,"unauthorizedUser",{F:p,D:m}),this.l=a,this.i=h}l(Zu,M),Zu.prototype.v=function(){var r=this,a=Ve(this,"firebaseui-id-unauthorized-user-help-link");this.i&&a&&yt(this,a,function(){r.i()}),yt(this,this.u(),function(){r.l()}),this.u().focus(),M.prototype.v.call(this)},Zu.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Oe(Zu.prototype,{u:$t}),Xe.handleUnauthorizedUser=function(r,a,u,h){function p(){at(r,a)}h===pe.auth.EmailAuthProvider.PROVIDER_ID?p=function(){av(r,a)}:h===pe.auth.PhoneAuthProvider.PROVIDER_ID&&(p=function(){oe("phoneSignInStart",r,a)});var m=null,w=null;h===pe.auth.EmailAuthProvider.PROVIDER_ID&&$I(F(r))?(m=GP(F(r)),w=HP(F(r))):Js(F(r))&&(m=KP(F(r)),w=zP(F(r)));var E=new Zu(u,function(){E.m(),p()},m,w,Dt(F(r)),Nt(F(r)));E.render(a),Ne(r,E)};function el(r,a,u,h,p,m){M.call(this,G_,{email:r},m,"unsupportedProvider",{F:h,D:p}),this.l=a,this.i=u}l(el,M),el.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),M.prototype.v.call(this)},el.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Oe(el.prototype,{u:zt,B:$t,w:nn}),Xe.unsupportedProvider=function(r,a,u){var h=new el(u,function(){h.m(),oe("passwordRecovery",r,a,u)},function(){h.m(),at(r,a,u)},Dt(F(r)),Nt(F(r)));h.render(a),Ne(r,h)};function Vi(r,a){this.$=!1;var u=gv(a);if(tl[u])throw Error('An AuthUI instance already exists for the key "'+u+'"');tl[u]=this,this.a=r,this.u=null,this.Y=!1,jE(this.a),this.h=pe.initializeApp({apiKey:r.app.options.apiKey,authDomain:r.app.options.authDomain},r.app.name+"-firebaseui-temp").auth(),(r=r.emulatorConfig)&&(u=r.port,this.h.useEmulator(r.protocol+"://"+r.host+(u===null?"":":"+u),r.options)),jE(this.h),this.h.setPersistence&&this.h.setPersistence(pe.auth.Auth.Persistence.SESSION),this.oa=a,this.ca=new $P,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Ig.Xa(),this.j=this.C=null,this.da=this.A=!1}function jE(r){r&&r.INTERNAL&&r.INTERNAL.logFramework&&r.INTERNAL.logFramework("FirebaseUI-web")}var tl={};function gv(r){return r||"[DEFAULT]"}function $E(r){return Be(r),r.i||(r.i=lr(r,function(a){return a&&!Mi(ye(r))?St(Ei(r).getRedirectResult().then(function(u){return u},function(u){if(u&&u.code=="auth/email-already-in-use"&&u.email&&u.credential)throw u;return Yr(r,u)})):St(Fe(r).getRedirectResult().then(function(u){return Od(F(r))&&!u.user&&r.j&&!r.j.isAnonymous?Ei(r).getRedirectResult():u}))})),r.i}function Ne(r,a){Be(r),r.g=a}var Ba=null;function Fe(r){return Be(r),r.h}function Ei(r){return Be(r),r.a}function ye(r){return Be(r),r.oa}function qE(r){return Be(r),r.O?r.O.emailHint:void 0}t=Vi.prototype,t.nb=function(){return Be(this),!!Fg(ye(this))||KE(ar())};function KE(r){return r=new Vs(r),(r.a.a.get(Vt.ub)||null)==="signIn"&&!!r.a.a.get(Vt.$a)}t.start=function(r,a){zE(this,r,a)};function zE(r,a,u,h){Be(r),typeof r.a.languageCode<"u"&&(r.u=r.a.languageCode);var p="en".replace(/_/g,"-");r.a.languageCode=p,r.h.languageCode=p,r.Y=!0,typeof r.a.tenantId<"u"&&(r.h.tenantId=r.a.tenantId),r.ib(u),r.O=h||null;var m=v.document;r.C?r.C.then(function(){m.readyState=="complete"?rf(r,a):du(window,"load",function(){rf(r,a)})}):m.readyState=="complete"?rf(r,a):du(window,"load",function(){rf(r,a)})}function rf(r,a){var u=dd(a,"Could not find the FirebaseUI widget element on the page.");if(u.setAttribute("lang","en".replace(/_/g,"-")),Ba){var h=Ba;Be(h),Mi(ye(h))&&zr("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),Ba.reset()}if(Ba=r,r.T=u,MO(r,u),Nd(new Pg)&&Nd(new Og)){a=dd(a,"Could not find the FirebaseUI widget element on the page."),u=ar(),h=Bg(F(r).a,"queryParameterForSignInSuccessUrl"),u=(u=Qh(u,h))?Ur(Xh(u)).toString():null;e:{h=ar();var p=zI(F(r));h=Qh(h,p)||"";for(m in Yg)if(Yg[m].toLowerCase()==h.toLowerCase()){var m=Yg[m];break e}m="callback"}switch(m){case"callback":u&&(m=ye(r),ya(bu,u,m)),r.nb()?oe("callback",r,a):at(r,a,qE(r));break;case"resetPassword":oe("passwordReset",r,a,Lu(),cv());break;case"recoverEmail":oe("emailChangeRevocation",r,a,Lu());break;case"revertSecondFactorAddition":oe("revertSecondFactorAddition",r,a,Lu());break;case"verifyEmail":oe("emailVerification",r,a,Lu(),cv());break;case"verifyAndChangeEmail":oe("verifyAndChangeEmail",r,a,Lu(),cv());break;case"signIn":oe("emailLinkSignInCallback",r,a,ar()),YE();break;case"select":u&&(m=ye(r),ya(bu,u,m)),at(r,a);break;default:throw Error("Unhandled widget operation.")}a=F(r),(a=Su(a).uiShown||null)&&a()}else a=dd(a,"Could not find the FirebaseUI widget element on the page."),m=new TE(Ge("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),m.render(a),Ne(r,m);a=r.g&&r.g.Ga=="blank"&&Kg(F(r)),Fg(ye(r))&&!a&&(a=Fg(ye(r)),WE(r,a.a),Vn(Ys,ye(r)))}function lr(r,a){if(r.A)return a(GE(r));if(Te(r,function(){r.A=!1}),Od(F(r))){var u=new jt(function(h){Te(r,r.a.onAuthStateChanged(function(p){r.j=p,r.A||(r.A=!0,h(a(GE(r))))}))});return Te(r,u),u}return r.A=!0,a(null)}function GE(r){return Be(r),Od(F(r))&&r.j&&r.j.isAnonymous?r.j:null}function Te(r,a){if(Be(r),a){r.s.push(a);var u=function(){xe(r.s,function(h){return h==a})};typeof a!="function"&&a.then(u,u)}}t.Db=function(){Be(this),this.Z=!0};function OO(r){Be(r);var a;return(a=r.Z)||(r=F(r),r=KI(r,pe.auth.GoogleAuthProvider.PROVIDER_ID),a=!(!r||r.prompt!=="select_account")),a}function HE(r){typeof r.a.languageCode<"u"&&r.Y&&(r.Y=!1,r.a.languageCode=r.u)}function WE(r,a){r.a.tenantId=a,r.h.tenantId=a}t.reset=function(){Be(this);var r=this;this.T&&this.T.removeAttribute("lang"),this.J&&mP(this.J),HE(this),this.O=null,YE(),Vn(Ys,ye(this)),Be(this),this.l.cancel(),this.i=St({user:null,credential:null}),Ba==this&&(Ba=null),this.T=null;for(var a=0;a<this.s.length;a++)typeof this.s[a]=="function"?this.s[a]():this.s[a].cancel&&this.s[a].cancel();this.s=[],Li(ye(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Wr(this).then(function(){r.C=null},function(){r.C=null}))};function MO(r,a){r.L=null,r.J=new ld(a),r.J.register(),Ii(r.J,"pageEnter",function(u){if(u=u&&u.pageId,r.L!=u){var h=F(r);(h=Su(h).uiChanged||null)&&h(r.L,u),r.L=u}})}t.ib=function(r){Be(this);var a=this.ca,u;for(u in r)try{Vg(a.a,u,r[u])}catch{ei('Invalid config: "'+u+'"',void 0)}LN&&Vg(a.a,"popupMode",!1),qg(a),!this.da&&zg(F(this))&&(zr("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function F(r){return Be(r),r.ca}t.Wb=function(){Be(this);var r=F(this),a=Bg(r.a,"widgetUrl");r=zI(r);for(var u=a.search(K0),h=0,p,m=[];0<=(p=q0(a,h,r,u));)m.push(a.substring(h,p)),h=Math.min(a.indexOf("&",p)+1||u,u);m.push(a.substr(h)),a=m.join("").replace(TN,"$1"),u="="+encodeURIComponent("select"),(r+=u)?(u=a.indexOf("#"),0>u&&(u=a.length),h=a.indexOf("?"),0>h||h>u?(h=u,p=""):p=a.substring(h+1,u),a=[a.substr(0,h),p,a.substr(u)],u=a[1],a[1]=r?u?u+"&"+r:r:u,u=a[0]+(a[1]?"?"+a[1]:"")+a[2]):u=a,F(this).a.get("popupMode")?(r=(window.screen.availHeight-600)/2,a=(window.screen.availWidth-500)/2,u=u||"about:blank",r={width:500,height:600,top:0<r?r:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},r.target=r.target||u.target||"google_popup",r.width=r.width||690,r.height=r.height||500,(r=G1(u,r))&&r.focus()):aa(window.location,u)};function Be(r){if(r.$)throw Error("AuthUI instance is deleted!")}t.Wa=function(){var r=this;return Be(this),this.h.app.delete().then(function(){var a=gv(ye(r));delete tl[a],r.reset(),r.$=!0})};function LO(r){Be(r);try{X1(r.l,jI(F(r)),OO(r)).then(function(a){return r.g?dO(r,r.g,a):!1})}catch{}}t.Ib=function(r,a){Be(this);var u=this,h=_P();if(!Ia(F(this)))return ca(Error("Email link sign-in should be enabled to trigger email sending."));var p=JP(F(this)),m=new Vs(p.url);return NN(m,h),a&&a.a&&(jP(h,a,ye(this)),Y0(m,a.a.providerId)),PN(m,QP(F(this))),lr(this,function(w){return w&&((w=w.uid)?m.a.a.set(Vt.Pa,w):Us(m.a.a,Vt.Pa)),p.url=m.toString(),Fe(u).sendSignInLinkToEmail(r,p)}).then(function(){var w=ye(u),E={};E.email=r,ya(ga,wI(h,JSON.stringify(E)),w)},function(w){throw Vn(Iu,ye(u)),Vn(ga,ye(u)),w})};function FO(r,a){var u=W0(new Vs(a));return u?(a=new jt(function(h,p){var m=Ei(r).onAuthStateChanged(function(w){m(),w&&w.isAnonymous&&w.uid===u?h(w):w&&w.isAnonymous&&w.uid!==u?p(Error("anonymous-user-mismatch")):p(Error("anonymous-user-not-found"))});Te(r,m)}),Te(r,a),a):St(null)}function UO(r,a,u,h,p){Be(r);var m=p||null,w=pe.auth.EmailAuthProvider.credentialWithLink(u,h);return u=m?Fe(r).signInWithEmailLink(u,h).then(function(E){return E.user.linkWithCredential(m)}).then(function(){return Wr(r)}).then(function(){return Yr(r,{code:"auth/email-already-in-use"},m)}):Fe(r).fetchSignInMethodsForEmail(u).then(function(E){return E.length?Yr(r,{code:"auth/email-already-in-use"},w):a.linkWithCredential(w)}),Te(r,u),u}function VO(r,a,u,h){Be(r);var p=h||null,m;return a=Fe(r).signInWithEmailLink(a,u).then(function(w){if(m={user:w.user,credential:null,operationType:w.operationType,additionalUserInfo:w.additionalUserInfo},p)return w.user.linkWithCredential(p).then(function(E){m={user:E.user,credential:p,operationType:m.operationType,additionalUserInfo:E.additionalUserInfo}})}).then(function(){Wr(r)}).then(function(){return Ei(r).updateCurrentUser(m.user)}).then(function(){return m.user=Ei(r).currentUser,m}),Te(r,a),a}function YE(){var r=ar();if(KE(r)){r=new Vs(r);for(var a in Vt)Vt.hasOwnProperty(a)&&Us(r.a.a,Vt[a]);a={state:"signIn",mode:"emailLink",operation:"clear"};var u=v.document.title;v.history&&v.history.replaceState&&v.history.replaceState(a,u,r.toString())}}t.bc=function(r,a){Be(this);var u=this;return Fe(this).signInWithEmailAndPassword(r,a).then(function(h){return lr(u,function(p){return p?Wr(u).then(function(){return Yr(u,{code:"auth/email-already-in-use"},pe.auth.EmailAuthProvider.credential(r,a))}):h})})},t.Yb=function(r,a){Be(this);var u=this;return lr(this,function(h){if(h){var p=pe.auth.EmailAuthProvider.credential(r,a);return h.linkWithCredential(p)}return Fe(u).createUserWithEmailAndPassword(r,a)})},t.ac=function(r){Be(this);var a=this;return lr(this,function(u){return u?u.linkWithCredential(r).then(function(h){return h},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Yr(a,h,r)}):Fe(a).signInWithCredential(r)})};function BO(r,a){return Be(r),lr(r,function(u){return u&&!Mi(ye(r))?u.linkWithPopup(a).then(function(h){return h},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Yr(r,h)}):Fe(r).signInWithPopup(a)})}t.dc=function(r){Be(this);var a=this,u=this.i;return this.i=null,lr(this,function(h){return h&&!Mi(ye(a))?h.linkWithRedirect(r):Fe(a).signInWithRedirect(r)}).then(function(){},function(h){throw a.i=u,h})},t.cc=function(r,a){Be(this);var u=this;return lr(this,function(h){return h?h.linkWithPhoneNumber(r,a).then(function(p){return new Eg(p,function(m){if(m.code=="auth/credential-already-in-use")return Yr(u,m);throw m})}):Ei(u).signInWithPhoneNumber(r,a).then(function(p){return new Eg(p)})})},t.$b=function(){return Be(this),Ei(this).signInAnonymously()};function jO(r,a){return Be(r),lr(r,function(u){if(r.j&&!r.j.isAnonymous&&Od(F(r))&&!Fe(r).currentUser)return Wr(r).then(function(){return a.credential.providerId=="password"&&(a.credential=null),a});if(u)return Wr(r).then(function(){return u.linkWithCredential(a.credential)}).then(function(h){return a.user=h.user,a.credential=h.credential,a.operationType=h.operationType,a.additionalUserInfo=h.additionalUserInfo,a},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Yr(r,h,a.credential)});if(!a.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Wr(r).then(function(){return Ei(r).updateCurrentUser(a.user)}).then(function(){return a.user=Ei(r).currentUser,a.operationType="signIn",a.credential&&a.credential.providerId&&a.credential.providerId=="password"&&(a.credential=null),a})})}t.Xb=function(r,a){return Be(this),Fe(this).signInWithEmailAndPassword(r,a)};function Wr(r){return Be(r),Fe(r).signOut()}function Yr(r,a,u){if(Be(r),a&&a.code&&(a.code=="auth/email-already-in-use"||a.code=="auth/credential-already-in-use")){var h=YI(F(r));return St().then(function(){return h(new cu("anonymous-upgrade-merge-conflict",null,u||a.credential))}).then(function(){throw r.g&&(r.g.m(),r.g=null),a})}return ca(a)}function nl(r,a,u,h){M.call(this,dE,void 0,h,"providerMatchByEmail",{F:a,D:u}),this.i=r}l(nl,M),nl.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Zd(this.l(),(this.l().value||"").length),M.prototype.v.call(this)},nl.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Oe(nl.prototype,{l:cr,H:Hr,u:Oa,B:Ma,j:La,M:zt,w:nn});function sf(r,a,u,h,p){M.call(this,hE,{ec:a},p,"selectTenant",{F:u,D:h}),this.i=r}l(sf,M),sf.prototype.v=function(){$O(this,this.i),M.prototype.v.call(this)},sf.prototype.o=function(){this.i=null,M.prototype.o.call(this)};function $O(r,a){function u(E){a(E)}for(var h=r.g?Zm("firebaseui-id-tenant-selection-button",r.g||r.s.a):[],p=0;p<h.length;p++){var m=h[p],w=tf(m,"tenantId");yt(r,m,Qe(u,w))}}function vv(r){M.call(this,O_,void 0,r,"spinner")}l(vv,M);function qO(r){this.a=new Ug,xt(this.a,"authDomain"),xt(this.a,"displayMode",af),xt(this.a,"tenants"),xt(this.a,"callbacks"),xt(this.a,"tosUrl"),xt(this.a,"privacyPolicyUrl");for(var a in r)if(r.hasOwnProperty(a))try{Vg(this.a,a,r[a])}catch{ei('Invalid config: "'+a+'"',void 0)}}function KO(r){r=r.a.get("displayMode");for(var a in wv)if(wv[a]===r)return wv[a];return af}function of(r){return r.a.get("callbacks")||{}}function QE(r){var a=r.a.get("tosUrl")||null;if(r=r.a.get("privacyPolicyUrl")||null,a&&!r&&zr("Privacy Policy URL is missing, the link will not be displayed."),a&&r){if(typeof a=="function")return a;if(typeof a=="string")return function(){la(a)}}return null}function JE(r){var a=r.a.get("tosUrl")||null,u=r.a.get("privacyPolicyUrl")||null;if(u&&!a&&zr("Terms of Service URL is missing, the link will not be displayed."),a&&u){if(typeof u=="function")return u;if(typeof u=="string")return function(){la(u)}}return null}function yv(r,a){if(r=r.a.get("tenants"),!r||!r.hasOwnProperty(a)&&!r.hasOwnProperty(cf))throw Error("Invalid tenant configuration!")}function XE(r,a,u){if(r=r.a.get("tenants"),!r)throw Error("Invalid tenant configuration!");var h=[];if(r=r[a]||r[cf],!r)return ei("Invalid tenant configuration: "+(a+" is not configured!"),void 0),h;if(a=r.signInOptions,!a)throw Error("Invalid tenant configuration: signInOptions are invalid!");return a.forEach(function(p){if(typeof p=="string")h.push(p);else if(typeof p.provider=="string"){var m=p.hd;m&&u?(m instanceof RegExp?m:new RegExp("@"+m.replace(".","\\.")+"$")).test(u)&&h.push(p.provider):h.push(p.provider)}else p="Invalid tenant configuration: signInOption "+(JSON.stringify(p)+" is invalid!"),ei(p,void 0)}),h}function zO(r,a,u){return r=GO(r,a),(a=r.signInOptions)&&u&&(a=a.filter(function(h){return typeof h=="string"?u.includes(h):u.includes(h.provider)}),r.signInOptions=a),r}function GO(r,a){var u=HO,h=h===void 0?{}:h;return yv(r,a),r=r.a.get("tenants"),EP(r[a]||r[cf],u,h)}var HO=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],af="optionFirst",wv={pc:af,oc:"identifierFirst"},cf="*";function Si(r,a){var u=this;this.s=dd(r),this.a={},Object.keys(a).forEach(function(h){u.a[h]=new qO(a[h])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(h){this.ob=h||null},enumerable:!1})}t=Si.prototype,t.Ub=function(r,a){var u=this;Qr(this);var h=r.apiKey;return new jt(function(p,m){if(u.a.hasOwnProperty(h)){var w=of(u.a[h]).selectTenantUiHidden||null;if(KO(u.a[h])===af){var E=[];a.forEach(function(ce){ce=ce||"_";var et=u.a[h].a.get("tenants");if(!et)throw Error("Invalid tenant configuration!");(et=et[ce]||et[cf])?ce={tenantId:ce!=="_"?ce:null,V:et.fullLabel||null,displayName:et.displayName,za:et.iconUrl,ta:et.buttonColor}:(ei("Invalid tenant configuration: "+(ce+" is not configured!"),void 0),ce=null),ce&&E.push(ce)});var R=function(ce){ce={tenantId:ce,providerIds:XE(u.a[h],ce||"_")},p(ce)};if(E.length===1){R(E[0].tenantId);return}u.g=new sf(function(ce){Qr(u),w&&w(),R(ce)},E,QE(u.a[h]),JE(u.a[h]))}else u.g=new nl(function(){var ce=u.g.j();if(ce){for(var et=0;et<a.length;et++){var Ti=XE(u.a[h],a[et]||"_",ce);if(Ti.length!==0){ce={tenantId:a[et],providerIds:Ti,email:ce},Qr(u),w&&w(),p(ce);return}}u.g.a(I1({code:"no-matching-tenant-for-email"}).toString())}},QE(u.a[h]),JE(u.a[h]));u.g.render(u.s),(m=of(u.a[h]).selectTenantUiShown||null)&&m()}else{var $=Error("Invalid project configuration: API key is invalid!");$.code="invalid-configuration",u.pb($),m($)}})},t.Pb=function(r,a){if(!this.a.hasOwnProperty(r))throw Error("Invalid project configuration: API key is invalid!");var u=a||void 0;yv(this.a[r],a||"_");try{this.i=pe.app(u).auth()}catch{var h=this.a[r].a.get("authDomain");if(!h)throw Error("Invalid project configuration: authDomain is required!");r=pe.initializeApp({apiKey:r,authDomain:h},u),r.auth().tenantId=a,this.i=r.auth()}return this.i},t.Zb=function(r,a){var u=this;return new jt(function(h,p){function m(et,Ti){u.j=new Vi(r),zE(u.j,u.s,et,Ti)}var w=r.app.options.apiKey;u.a.hasOwnProperty(w)||p(Error("Invalid project configuration: API key is invalid!"));var E=zO(u.a[w],r.tenantId||"_",a&&a.providerIds);Qr(u),p={signInSuccessWithAuthResult:function(et){return h(et),!1}};var R=of(u.a[w]).signInUiShown||null,$=!1;p.uiChanged=function(et,Ti){et===null&&Ti==="callback"?((et=eg("firebaseui-id-page-callback",u.s))&&ni(et),u.h=new vv,u.h.render(u.s)):$||et===null&&Ti==="spinner"||Ti==="blank"||(u.h&&(u.h.m(),u.h=null),$=!0,R&&R(r.tenantId))},E.callbacks=p,E.credentialHelper="none";var ce;a&&a.email&&(ce={emailHint:a.email}),u.j?u.j.Wa().then(function(){m(E,ce)}):m(E,ce)})},t.reset=function(){var r=this;return St().then(function(){r.j&&r.j.Wa()}).then(function(){r.j=null,Qr(r)})},t.Vb=function(){var r=this;this.h||this.A||(this.A=window.setTimeout(function(){Qr(r),r.h=new vv,r.g=r.h,r.h.render(r.s),r.A=null},500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},t.Bb=function(){return Qr(this),this.g=new bE,this.g.render(this.s),St()};function Qr(r){r.j&&r.j.reset(),r.mb(),r.g&&r.g.m()}t.pb=function(r){var a=this,u=I1({code:r.code}).toString()||r.message;Qr(this);var h;r.retry&&typeof r.retry=="function"&&(h=function(){a.reset(),r.retry()}),this.g=new SE(u,h),this.g.render(this.s)},t.Rb=function(r){var a=this;return St().then(function(){var u=a.i&&a.i.app.options.apiKey;if(!a.a.hasOwnProperty(u))throw Error("Invalid project configuration: API key is invalid!");if(yv(a.a[u],r.tenantId||"_"),!a.i.currentUser||a.i.currentUser.uid!==r.uid)throw Error("The user being processed does not match the signed in user!");return(u=of(a.a[u]).beforeSignInSuccess||null)?u(r):r}).then(function(u){if(u.uid!==r.uid)throw Error("User with mismatching UID returned.");return u})},Ee("firebaseui.auth.FirebaseUiHandler",Si),Ee("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Si.prototype.Ub),Ee("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Si.prototype.Pb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Si.prototype.Zb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.reset",Si.prototype.reset),Ee("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Si.prototype.Vb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Si.prototype.mb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Si.prototype.Bb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Si.prototype.pb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Si.prototype.Rb),Ee("firebaseui.auth.AuthUI",Vi),Ee("firebaseui.auth.AuthUI.getInstance",function(r){return r=gv(r),tl[r]?tl[r]:null}),Ee("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Vi.prototype.Db),Ee("firebaseui.auth.AuthUI.prototype.start",Vi.prototype.start),Ee("firebaseui.auth.AuthUI.prototype.setConfig",Vi.prototype.ib),Ee("firebaseui.auth.AuthUI.prototype.signIn",Vi.prototype.Wb),Ee("firebaseui.auth.AuthUI.prototype.reset",Vi.prototype.reset),Ee("firebaseui.auth.AuthUI.prototype.delete",Vi.prototype.Wa),Ee("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Vi.prototype.nb),Ee("firebaseui.auth.AuthUIError",cu),Ee("firebaseui.auth.AuthUIError.prototype.toJSON",cu.prototype.toJSON),Ee("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",Gg),Ee("firebaseui.auth.CredentialHelper.NONE",Ld),Ee("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),jt.prototype.catch=jt.prototype.Ca,jt.prototype.finally=jt.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}).apply(typeof global<"u"?global:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=H8);var W8=firebaseui.auth;const Y8={apiKey:"AIzaSyASUUhv96yP8JuJ1YcFY-yl9w8AwqtoBc8",authDomain:"potion-14662.firebaseapp.com",projectId:"potion-14662",storageBucket:"potion-14662.appspot.com",messagingSenderId:"1063584598591",appId:"1:1063584598591:web:953af8a3b6f835bb2e868a",measurementId:"G-01KL92CGGC"},Bm=qp(Y8);L9(Bm);new W8.AuthUI(x0(Bm));const Gt=x0(Bm);new mi;i0(Bm);P6(Gt,zh);let Af;const Q8=new Uint8Array(16);function J8(){if(!Af&&(Af=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Af))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Af(Q8)}const pn=[];for(let t=0;t<256;++t)pn.push((t+256).toString(16).slice(1));function X8(t,e=0){return(pn[t[e+0]]+pn[t[e+1]]+pn[t[e+2]]+pn[t[e+3]]+"-"+pn[t[e+4]]+pn[t[e+5]]+"-"+pn[t[e+6]]+pn[t[e+7]]+"-"+pn[t[e+8]]+pn[t[e+9]]+"-"+pn[t[e+10]]+pn[t[e+11]]+pn[t[e+12]]+pn[t[e+13]]+pn[t[e+14]]+pn[t[e+15]]).toLowerCase()}const Z8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PC={randomUUID:Z8};function eK(t,e,n){if(PC.randomUUID&&!e&&!t)return PC.randomUUID();t=t||{};const i=t.random||(t.rng||J8)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=i[s];return e}return X8(i)}const Ms=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},tK={},nK={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},iK=Ye("path",{fill:"currentColor",d:"m16.9 17.3l-4.6-4.6q-.15-.15-.213-.325T12.026 12q0-.2.063-.375t.212-.325l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L14.425 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Zm-6.6 0l-4.6-4.6q-.15-.15-.213-.325T5.425 12q0-.2.063-.375T5.7 11.3l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L7.825 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Z"},null,-1),rK=[iK];function sK(t,e){return ki(),Ri("svg",nK,rK)}const oK=Ms(tK,[["render",sK]]),aK={},cK={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},uK=Ye("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[Ye("circle",{cx:"12",cy:"12",r:"10"}),Ye("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),lK=[uK];function hK(t,e){return ki(),Ri("svg",cK,lK)}const dK=Ms(aK,[["render",hK]]),fK={},pK={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},mK=Ye("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[Ye("circle",{cx:"12",cy:"12",r:"10"}),Ye("path",{"stroke-linecap":"round",d:"M15 12h-3m0 0H9m3 0V9m0 3v3"})],-1),gK=[mK];function vK(t,e){return ki(),Ri("svg",pK,gK)}const yK=Ms(fK,[["render",vK]]),za=i0(),wK={components:{close:oK,DeleteButton:dK,AddButton:yK},data(){return{pages:[],isSidebarVisible:!0,rotate:!1,title:"",content:""}},created(){this.fetchPages()},methods:{async saveData(t,e,n){if(!Gt.currentUser)return;const i=Di(za,"users",Gt.currentUser.uid,"pages",t);try{await yp(i,{title:e,content:n})}catch(s){console.error("Error while saving data to Firestore:",s)}},async fetchPages(){if(!Gt.currentUser)return;Gt.onAuthStateChanged(e=>{e?this.fetchPages():this.pages=[]});const t=await xD(n0(za,"users",Gt.currentUser.uid,"pages"));this.pages=t.docs.map(e=>({id:e.id,...e.data()}))},async onMounted(){this.fetchPages()},clearAllAndToggleSidebar(){this.clearAll(),this.toggleSidebar()},toggleSidebar(){this.isSidebarVisible=!this.isSidebarVisible,this.rotate=!this.rotate,this.rotate?this.$refs.closeButton.classList.add("rotate"):this.$refs.closeButton.classList.remove("rotate")},async addPage(){if(!Gt.currentUser){alert("Sign in to create notes");return}const t={id:eK(),title:`Page ${this.pages.length+1}`,content:""};this.pages.push(t),await yp(Di(za,"users",Gt.currentUser.uid,"pages",t.id),t),this.$router.push(`/page/${t.id}`)},async deletePage(t){if(!Gt.currentUser)return;const e=this.pages[t].id;this.pages.splice(t,1),await DD(Di(za,"users",Gt.currentUser.uid,"pages",e))},async clearAll(){if(!Gt.currentUser)return;const t=l5(za);for(const e of this.pages)t.delete(Di(za,"users",Gt.currentUser.uid,"pages",e.id));await t.commit(),this.pages=[]}}};const bK=Ye("h1",{class:"sidebar-header"},"Potion",-1),IK={class:"menu"},_K={class:"page-title"},EK={class:"button-wrapper"},SK=["onClick"],TK={class:"buttons"},CK=Ye("p",null,"Clear all",-1),AK=Ye("p",null,"New Page",-1);function kK(t,e,n,i,s,o){const c=go("close"),l=go("router-link"),d=go("delete-button"),f=go("add-button"),g=bL("auto-animate");return ki(),Ri(si,null,[Ye("button",{ref:"closeButton",class:"close",onClick:e[0]||(e[0]=(...v)=>o.toggleSidebar&&o.toggleSidebar(...v))},[Ct(c)],512),Ye("ul",{class:kp(["sidebar",{"slide-out":!s.isSidebarVisible}])},[Ct(l,{to:"/"},{default:vl(()=>[bK]),_:1}),dy((ki(),Ri("span",IK,[(ki(!0),Ri(si,null,IL(s.pages,(v,y)=>(ki(),Ri("li",{class:"menu-item",key:v.id},[Ct(l,{to:`/page/${v.id}`,class:"menu-item",onClick:o.toggleSidebar},{default:vl(()=>[Ye("p",_K,eM(v.title),1),Ye("div",EK,[Ct(l,{to:"/"},{default:vl(()=>[Ye("button",{class:"delete",onClick:_F(I=>o.deletePage(y),["stop"])},[Ct(d)],8,SK)]),_:2},1024)])]),_:2},1032,["to","onClick"])]))),128))])),[[g]]),Ye("div",TK,[Ct(l,{to:"/"},{default:vl(()=>[Ye("button",{onClick:e[1]||(e[1]=(...v)=>o.clearAllAndToggleSidebar&&o.clearAllAndToggleSidebar(...v)),class:"clear-all"},[Ct(d,{class:"clear-button"}),CK])]),_:1}),Ye("button",{onClick:e[2]||(e[2]=(...v)=>o.addPage&&o.addPage(...v)),class:"new-page"},[Ct(f,{class:"add-button"}),AK])])],2)],64)}const RK=Ms(wK,[["render",kK]]),OC=x0(),xK=new mi,DK={methods:{async signInWithGoogle(){try{const e=(await y2(OC,xK)).user;console.log("User signed in:",e)}catch(t){console.error("Error signing in:",t)}},async signOut(){try{await F6(OC)}catch(t){console.error("Error signing out:",t)}}}};const NK={class:"user"};function PK(t,e,n,i,s,o){return ki(),Ri("nav",null,[Ye("ul",NK,[Ye("button",{onClick:e[0]||(e[0]=(...c)=>o.signInWithGoogle&&o.signInWithGoogle(...c)),class:"sign-in"},"Sign in"),Ye("button",{onClick:e[1]||(e[1]=(...c)=>o.signOut&&o.signOut(...c)),class:"sign-out"},"Sign Out")])])}const OK=Ms(DK,[["render",PK],["__scopeId","data-v-e059f67b"]]),MK={name:"App",components:{Sidebar:RK,Navbar:OK},setup(){return L6(Gt,t=>{const e=OF();t?(console.log("User is signed in."),e.setUser(t)):(console.log("User is signed out."),e.setUser(null))}),{}}};function LK(t,e,n,i,s,o){const c=go("navbar"),l=go("sidebar"),d=go("router-view");return ki(),Ri(si,null,[Ct(c),Ct(l),Ct(d)],64)}const FK=Ms(MK,[["render",LK],["__scopeId","data-v-9e70105e"]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ja=typeof window<"u";function UK(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const it=Object.assign;function ey(t,e){const n={};for(const i in e){const s=e[i];n[i]=Oi(s)?s.map(t):t(s)}return n}const Bl=()=>{},Oi=Array.isArray,VK=/\/$/,BK=t=>t.replace(VK,"");function ty(t,e,n="/"){let i,s={},o="",c="";const l=e.indexOf("#");let d=e.indexOf("?");return l<d&&l>=0&&(d=-1),d>-1&&(i=e.slice(0,d),o=e.slice(d+1,l>-1?l:e.length),s=t(o)),l>-1&&(i=i||e.slice(0,l),c=e.slice(l,e.length)),i=KK(i??e,n),{fullPath:i+(o&&"?")+o+c,path:i,query:s,hash:c}}function jK(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function MC(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function $K(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Dc(e.matched[i],n.matched[s])&&cN(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Dc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function cN(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!qK(t[n],e[n]))return!1;return!0}function qK(t,e){return Oi(t)?LC(t,e):Oi(e)?LC(e,t):t===e}function LC(t,e){return Oi(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function KK(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let s=n.length-1,o,c;for(o=0;o<i.length;o++)if(c=i[o],c!==".")if(c==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var wh;(function(t){t.pop="pop",t.push="push"})(wh||(wh={}));var jl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(jl||(jl={}));function zK(t){if(!t)if(Ja){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),BK(t)}const GK=/^[^#]+#/;function HK(t,e){return t.replace(GK,"#")+e}function WK(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const jm=()=>({left:window.pageXOffset,top:window.pageYOffset});function YK(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=WK(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function FC(t,e){return(history.state?history.state.position-e:-1)+t}const vw=new Map;function QK(t,e){vw.set(t,e)}function JK(t){const e=vw.get(t);return vw.delete(t),e}let XK=()=>location.protocol+"//"+location.host;function uN(t,e){const{pathname:n,search:i,hash:s}=e,o=t.indexOf("#");if(o>-1){let l=s.includes(t.slice(o))?t.slice(o).length:1,d=s.slice(l);return d[0]!=="/"&&(d="/"+d),MC(d,"")}return MC(n,t)+i+s}function ZK(t,e,n,i){let s=[],o=[],c=null;const l=({state:y})=>{const I=uN(t,location),A=n.value,b=e.value;let S=0;if(y){if(n.value=I,e.value=y,c&&c===A){c=null;return}S=b?y.position-b.position:0}else i(I);s.forEach(C=>{C(n.value,A,{delta:S,type:wh.pop,direction:S?S>0?jl.forward:jl.back:jl.unknown})})};function d(){c=n.value}function f(y){s.push(y);const I=()=>{const A=s.indexOf(y);A>-1&&s.splice(A,1)};return o.push(I),I}function g(){const{history:y}=window;y.state&&y.replaceState(it({},y.state,{scroll:jm()}),"")}function v(){for(const y of o)y();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",g),{pauseListeners:d,listen:f,destroy:v}}function UC(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?jm():null}}function ez(t){const{history:e,location:n}=window,i={value:uN(t,n)},s={value:e.state};s.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(d,f,g){const v=t.indexOf("#"),y=v>-1?(n.host&&document.querySelector("base")?t:t.slice(v))+d:XK()+t+d;try{e[g?"replaceState":"pushState"](f,"",y),s.value=f}catch(I){console.error(I),n[g?"replace":"assign"](y)}}function c(d,f){const g=it({},e.state,UC(s.value.back,d,s.value.forward,!0),f,{position:s.value.position});o(d,g,!0),i.value=d}function l(d,f){const g=it({},s.value,e.state,{forward:d,scroll:jm()});o(g.current,g,!0);const v=it({},UC(i.value,d,null),{position:g.position+1},f);o(d,v,!1),i.value=d}return{location:i,state:s,push:l,replace:c}}function tz(t){t=zK(t);const e=ez(t),n=ZK(t,e.state,e.location,e.replace);function i(o,c=!0){c||n.pauseListeners(),history.go(o)}const s=it({location:"",base:t,go:i,createHref:HK.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function nz(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),tz(t)}function iz(t){return typeof t=="string"||t&&typeof t=="object"}function lN(t){return typeof t=="string"||typeof t=="symbol"}const ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},hN=Symbol("");var VC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(VC||(VC={}));function Nc(t,e){return it(new Error,{type:t,[hN]:!0},e)}function hr(t,e){return t instanceof Error&&hN in t&&(e==null||!!(t.type&e))}const BC="[^/]+?",rz={sensitive:!1,strict:!1,start:!0,end:!0},sz=/[.+*?^${}()[\]/\\]/g;function oz(t,e){const n=it({},rz,e),i=[];let s=n.start?"^":"";const o=[];for(const f of t){const g=f.length?[]:[90];n.strict&&!f.length&&(s+="/");for(let v=0;v<f.length;v++){const y=f[v];let I=40+(n.sensitive?.25:0);if(y.type===0)v||(s+="/"),s+=y.value.replace(sz,"\\$&"),I+=40;else if(y.type===1){const{value:A,repeatable:b,optional:S,regexp:C}=y;o.push({name:A,repeatable:b,optional:S});const N=C||BC;if(N!==BC){I+=10;try{new RegExp(`(${N})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${A}" (${N}): `+Y.message)}}let O=b?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;v||(O=S&&f.length<2?`(?:/${O})`:"/"+O),S&&(O+="?"),s+=O,I+=20,S&&(I+=-8),b&&(I+=-20),N===".*"&&(I+=-50)}g.push(I)}i.push(g)}if(n.strict&&n.end){const f=i.length-1;i[f][i[f].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function l(f){const g=f.match(c),v={};if(!g)return null;for(let y=1;y<g.length;y++){const I=g[y]||"",A=o[y-1];v[A.name]=I&&A.repeatable?I.split("/"):I}return v}function d(f){let g="",v=!1;for(const y of t){(!v||!g.endsWith("/"))&&(g+="/"),v=!1;for(const I of y)if(I.type===0)g+=I.value;else if(I.type===1){const{value:A,repeatable:b,optional:S}=I,C=A in f?f[A]:"";if(Oi(C)&&!b)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const N=Oi(C)?C.join("/"):C;if(!N)if(S)y.length<2&&(g.endsWith("/")?g=g.slice(0,-1):v=!0);else throw new Error(`Missing required param "${A}"`);g+=N}}return g||"/"}return{re:c,score:i,keys:o,parse:l,stringify:d}}function az(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function cz(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const o=az(i[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-i.length)===1){if(jC(i))return 1;if(jC(s))return-1}return s.length-i.length}function jC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const uz={type:0,value:""},lz=/[a-zA-Z0-9_]/;function hz(t){if(!t)return[[]];if(t==="/")return[[uz]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(I){throw new Error(`ERR (${n})/"${f}": ${I}`)}let n=0,i=n;const s=[];let o;function c(){o&&s.push(o),o=[]}let l=0,d,f="",g="";function v(){f&&(n===0?o.push({type:0,value:f}):n===1||n===2||n===3?(o.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:g,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),f="")}function y(){f+=d}for(;l<t.length;){if(d=t[l++],d==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:d==="/"?(f&&v(),c()):d===":"?(v(),n=1):y();break;case 4:y(),n=i;break;case 1:d==="("?n=2:lz.test(d)?y():(v(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&l--);break;case 2:d===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+d:n=3:g+=d;break;case 3:v(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&l--,g="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${f}"`),v(),c(),s}function dz(t,e,n){const i=oz(hz(t.path),n),s=it(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function fz(t,e){const n=[],i=new Map;e=KC({strict:!1,end:!0,sensitive:!1},e);function s(g){return i.get(g)}function o(g,v,y){const I=!y,A=pz(g);A.aliasOf=y&&y.record;const b=KC(e,g),S=[A];if("alias"in g){const O=typeof g.alias=="string"?[g.alias]:g.alias;for(const Y of O)S.push(it({},A,{components:y?y.record.components:A.components,path:Y,aliasOf:y?y.record:A}))}let C,N;for(const O of S){const{path:Y}=O;if(v&&Y[0]!=="/"){const z=v.record.path,ne=z[z.length-1]==="/"?"":"/";O.path=v.record.path+(Y&&ne+Y)}if(C=dz(O,v,b),y?y.alias.push(C):(N=N||C,N!==C&&N.alias.push(C),I&&g.name&&!qC(C)&&c(g.name)),A.children){const z=A.children;for(let ne=0;ne<z.length;ne++)o(z[ne],C,y&&y.children[ne])}y=y||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&d(C)}return N?()=>{c(N)}:Bl}function c(g){if(lN(g)){const v=i.get(g);v&&(i.delete(g),n.splice(n.indexOf(v),1),v.children.forEach(c),v.alias.forEach(c))}else{const v=n.indexOf(g);v>-1&&(n.splice(v,1),g.record.name&&i.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function l(){return n}function d(g){let v=0;for(;v<n.length&&cz(g,n[v])>=0&&(g.record.path!==n[v].record.path||!dN(g,n[v]));)v++;n.splice(v,0,g),g.record.name&&!qC(g)&&i.set(g.record.name,g)}function f(g,v){let y,I={},A,b;if("name"in g&&g.name){if(y=i.get(g.name),!y)throw Nc(1,{location:g});b=y.record.name,I=it($C(v.params,y.keys.filter(N=>!N.optional).map(N=>N.name)),g.params&&$C(g.params,y.keys.map(N=>N.name))),A=y.stringify(I)}else if("path"in g)A=g.path,y=n.find(N=>N.re.test(A)),y&&(I=y.parse(A),b=y.record.name);else{if(y=v.name?i.get(v.name):n.find(N=>N.re.test(v.path)),!y)throw Nc(1,{location:g,currentLocation:v});b=y.record.name,I=it({},v.params,g.params),A=y.stringify(I)}const S=[];let C=y;for(;C;)S.unshift(C.record),C=C.parent;return{name:b,path:A,params:I,matched:S,meta:gz(S)}}return t.forEach(g=>o(g)),{addRoute:o,resolve:f,removeRoute:c,getRoutes:l,getRecordMatcher:s}}function $C(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function pz(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:mz(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function mz(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="boolean"?n:n[i];return e}function qC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function gz(t){return t.reduce((e,n)=>it(e,n.meta),{})}function KC(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function dN(t,e){return e.children.some(n=>n===t||dN(t,n))}const fN=/#/g,vz=/&/g,yz=/\//g,wz=/=/g,bz=/\?/g,pN=/\+/g,Iz=/%5B/g,_z=/%5D/g,mN=/%5E/g,Ez=/%60/g,gN=/%7B/g,Sz=/%7C/g,vN=/%7D/g,Tz=/%20/g;function B0(t){return encodeURI(""+t).replace(Sz,"|").replace(Iz,"[").replace(_z,"]")}function Cz(t){return B0(t).replace(gN,"{").replace(vN,"}").replace(mN,"^")}function yw(t){return B0(t).replace(pN,"%2B").replace(Tz,"+").replace(fN,"%23").replace(vz,"%26").replace(Ez,"`").replace(gN,"{").replace(vN,"}").replace(mN,"^")}function Az(t){return yw(t).replace(wz,"%3D")}function kz(t){return B0(t).replace(fN,"%23").replace(bz,"%3F")}function Rz(t){return t==null?"":kz(t).replace(yz,"%2F")}function Cp(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function xz(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const o=i[s].replace(pN," "),c=o.indexOf("="),l=Cp(c<0?o:o.slice(0,c)),d=c<0?null:Cp(o.slice(c+1));if(l in e){let f=e[l];Oi(f)||(f=e[l]=[f]),f.push(d)}else e[l]=d}return e}function zC(t){let e="";for(let n in t){const i=t[n];if(n=Az(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Oi(i)?i.map(o=>o&&yw(o)):[i&&yw(i)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function Dz(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Oi(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const Nz=Symbol(""),GC=Symbol(""),j0=Symbol(""),yN=Symbol(""),ww=Symbol("");function ml(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function ss(t,e,n,i,s){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const d=v=>{v===!1?l(Nc(4,{from:n,to:e})):v instanceof Error?l(v):iz(v)?l(Nc(2,{from:e,to:v})):(o&&i.enterCallbacks[s]===o&&typeof v=="function"&&o.push(v),c())},f=t.call(i&&i.instances[s],e,n,d);let g=Promise.resolve(f);t.length<3&&(g=g.then(d)),g.catch(v=>l(v))})}function ny(t,e,n,i){const s=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Pz(l)){const f=(l.__vccOpts||l)[e];f&&s.push(ss(f,n,i,o,c))}else{let d=l();s.push(()=>d.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${o.path}"`));const g=UK(f)?f.default:f;o.components[c]=g;const y=(g.__vccOpts||g)[e];return y&&ss(y,n,i,o,c)()}))}}return s}function Pz(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function HC(t){const e=Ji(j0),n=Ji(yN),i=ai(()=>e.resolve(ic(t.to))),s=ai(()=>{const{matched:d}=i.value,{length:f}=d,g=d[f-1],v=n.matched;if(!g||!v.length)return-1;const y=v.findIndex(Dc.bind(null,g));if(y>-1)return y;const I=WC(d[f-2]);return f>1&&WC(g)===I&&v[v.length-1].path!==I?v.findIndex(Dc.bind(null,d[f-2])):y}),o=ai(()=>s.value>-1&&Fz(n.params,i.value.params)),c=ai(()=>s.value>-1&&s.value===n.matched.length-1&&cN(n.params,i.value.params));function l(d={}){return Lz(d)?e[ic(t.replace)?"replace":"push"](ic(t.to)).catch(Bl):Promise.resolve()}return{route:i,href:ai(()=>i.value.href),isActive:o,isExactActive:c,navigate:l}}const Oz=PA({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:HC,setup(t,{slots:e}){const n=Uc(HC(t)),{options:i}=Ji(j0),s=ai(()=>({[YC(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[YC(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:XA("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),Mz=Oz;function Lz(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Fz(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Oi(s)||s.length!==i.length||i.some((o,c)=>o!==s[c]))return!1}return!0}function WC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const YC=(t,e,n)=>t??e??n,Uz=PA({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Ji(ww),s=ai(()=>t.route||i.value),o=Ji(GC,0),c=ai(()=>{let f=ic(o);const{matched:g}=s.value;let v;for(;(v=g[f])&&!v.components;)f++;return f}),l=ai(()=>s.value.matched[c.value]);xf(GC,ai(()=>c.value+1)),xf(Nz,l),xf(ww,s);const d=Lw();return Tl(()=>[d.value,l.value,t.name],([f,g,v],[y,I,A])=>{g&&(g.instances[v]=f,I&&I!==g&&f&&f===y&&(g.leaveGuards.size||(g.leaveGuards=I.leaveGuards),g.updateGuards.size||(g.updateGuards=I.updateGuards))),f&&g&&(!I||!Dc(g,I)||!y)&&(g.enterCallbacks[v]||[]).forEach(b=>b(f))},{flush:"post"}),()=>{const f=s.value,g=t.name,v=l.value,y=v&&v.components[g];if(!y)return QC(n.default,{Component:y,route:f});const I=v.props[g],A=I?I===!0?f.params:typeof I=="function"?I(f):I:null,S=XA(y,it({},A,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(v.instances[g]=null)},ref:d}));return QC(n.default,{Component:S,route:f})||S}}});function QC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Vz=Uz;function Bz(t){const e=fz(t.routes,t),n=t.parseQuery||xz,i=t.stringifyQuery||zC,s=t.history,o=ml(),c=ml(),l=ml(),d=UM(ns);let f=ns;Ja&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=ey.bind(null,L=>""+L),v=ey.bind(null,Rz),y=ey.bind(null,Cp);function I(L,te){let G,fe;return lN(L)?(G=e.getRecordMatcher(L),fe=te):fe=L,e.addRoute(fe,G)}function A(L){const te=e.getRecordMatcher(L);te&&e.removeRoute(te)}function b(){return e.getRoutes().map(L=>L.record)}function S(L){return!!e.getRecordMatcher(L)}function C(L,te){if(te=it({},te||d.value),typeof L=="string"){const _=ty(n,L,te.path),T=e.resolve({path:_.path},te),D=s.createHref(_.fullPath);return it(_,T,{params:y(T.params),hash:Cp(_.hash),redirectedFrom:void 0,href:D})}let G;if("path"in L)G=it({},L,{path:ty(n,L.path,te.path).path});else{const _=it({},L.params);for(const T in _)_[T]==null&&delete _[T];G=it({},L,{params:v(L.params)}),te.params=v(te.params)}const fe=e.resolve(G,te),Me=L.hash||"";fe.params=g(y(fe.params));const ct=jK(i,it({},L,{hash:Cz(Me),path:fe.path})),xe=s.createHref(ct);return it({fullPath:ct,hash:Me,query:i===zC?Dz(L.query):L.query||{}},fe,{redirectedFrom:void 0,href:xe})}function N(L){return typeof L=="string"?ty(n,L,d.value.path):it({},L)}function O(L,te){if(f!==L)return Nc(8,{from:te,to:L})}function Y(L){return ee(L)}function z(L){return Y(it(N(L),{replace:!0}))}function ne(L){const te=L.matched[L.matched.length-1];if(te&&te.redirect){const{redirect:G}=te;let fe=typeof G=="function"?G(L):G;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=N(fe):{path:fe},fe.params={}),it({query:L.query,hash:L.hash,params:"path"in fe?{}:L.params},fe)}}function ee(L,te){const G=f=C(L),fe=d.value,Me=L.state,ct=L.force,xe=L.replace===!0,_=ne(G);if(_)return ee(it(N(_),{state:typeof _=="object"?it({},Me,_.state):Me,force:ct,replace:xe}),te||G);const T=G;T.redirectedFrom=te;let D;return!ct&&$K(i,fe,G)&&(D=Nc(16,{to:T,from:fe}),dn(fe,fe,!0,!1)),(D?Promise.resolve(D):Se(T,fe)).catch(P=>hr(P)?hr(P,2)?P:An(P):Re(P,T,fe)).then(P=>{if(P){if(hr(P,2))return ee(it({replace:xe},N(P.to),{state:typeof P.to=="object"?it({},Me,P.to.state):Me,force:ct}),te||T)}else P=ve(T,fe,!0,xe,Me);return Pe(T,fe,P),P})}function H(L,te){const G=O(L,te);return G?Promise.reject(G):Promise.resolve()}function Se(L,te){let G;const[fe,Me,ct]=jz(L,te);G=ny(fe.reverse(),"beforeRouteLeave",L,te);for(const _ of fe)_.leaveGuards.forEach(T=>{G.push(ss(T,L,te))});const xe=H.bind(null,L,te);return G.push(xe),Ga(G).then(()=>{G=[];for(const _ of o.list())G.push(ss(_,L,te));return G.push(xe),Ga(G)}).then(()=>{G=ny(Me,"beforeRouteUpdate",L,te);for(const _ of Me)_.updateGuards.forEach(T=>{G.push(ss(T,L,te))});return G.push(xe),Ga(G)}).then(()=>{G=[];for(const _ of L.matched)if(_.beforeEnter&&!te.matched.includes(_))if(Oi(_.beforeEnter))for(const T of _.beforeEnter)G.push(ss(T,L,te));else G.push(ss(_.beforeEnter,L,te));return G.push(xe),Ga(G)}).then(()=>(L.matched.forEach(_=>_.enterCallbacks={}),G=ny(ct,"beforeRouteEnter",L,te),G.push(xe),Ga(G))).then(()=>{G=[];for(const _ of c.list())G.push(ss(_,L,te));return G.push(xe),Ga(G)}).catch(_=>hr(_,8)?_:Promise.reject(_))}function Pe(L,te,G){for(const fe of l.list())fe(L,te,G)}function ve(L,te,G,fe,Me){const ct=O(L,te);if(ct)return ct;const xe=te===ns,_=Ja?history.state:{};G&&(fe||xe?s.replace(L.fullPath,it({scroll:xe&&_&&_.scroll},Me)):s.push(L.fullPath,Me)),d.value=L,dn(L,te,G,xe),An()}let Qe;function Oe(){Qe||(Qe=s.listen((L,te,G)=>{if(!na.listening)return;const fe=C(L),Me=ne(fe);if(Me){ee(it(Me,{replace:!0}),fe).catch(Bl);return}f=fe;const ct=d.value;Ja&&QK(FC(ct.fullPath,G.delta),jm()),Se(fe,ct).catch(xe=>hr(xe,12)?xe:hr(xe,2)?(ee(xe.to,fe).then(_=>{hr(_,20)&&!G.delta&&G.type===wh.pop&&s.go(-1,!1)}).catch(Bl),Promise.reject()):(G.delta&&s.go(-G.delta,!1),Re(xe,fe,ct))).then(xe=>{xe=xe||ve(fe,ct,!1),xe&&(G.delta&&!hr(xe,8)?s.go(-G.delta,!1):G.type===wh.pop&&hr(xe,20)&&s.go(-1,!1)),Pe(fe,ct,xe)}).catch(Bl)}))}let vt=ml(),Ee=ml(),ae;function Re(L,te,G){An(L);const fe=Ee.list();return fe.length?fe.forEach(Me=>Me(L,te,G)):console.error(L),Promise.reject(L)}function Je(){return ae&&d.value!==ns?Promise.resolve():new Promise((L,te)=>{vt.add([L,te])})}function An(L){return ae||(ae=!L,Oe(),vt.list().forEach(([te,G])=>L?G(L):te()),vt.reset()),L}function dn(L,te,G,fe){const{scrollBehavior:Me}=t;if(!Ja||!Me)return Promise.resolve();const ct=!G&&JK(FC(L.fullPath,0))||(fe||!G)&&history.state&&history.state.scroll||null;return Uw().then(()=>Me(L,te,ct)).then(xe=>xe&&YK(xe)).catch(xe=>Re(xe,L,te))}const Un=L=>s.go(L);let Ut;const Pr=new Set,na={currentRoute:d,listening:!0,addRoute:I,removeRoute:A,hasRoute:S,getRoutes:b,resolve:C,options:t,push:Y,replace:z,go:Un,back:()=>Un(-1),forward:()=>Un(1),beforeEach:o.add,beforeResolve:c.add,afterEach:l.add,onError:Ee.add,isReady:Je,install(L){const te=this;L.component("RouterLink",Mz),L.component("RouterView",Vz),L.config.globalProperties.$router=te,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>ic(d)}),Ja&&!Ut&&d.value===ns&&(Ut=!0,Y(s.location).catch(Me=>{}));const G={};for(const Me in ns)G[Me]=ai(()=>d.value[Me]);L.provide(j0,te),L.provide(yN,Uc(G)),L.provide(ww,d);const fe=L.unmount;Pr.add(L),L.unmount=function(){Pr.delete(L),Pr.size<1&&(f=ns,Qe&&Qe(),Qe=null,d.value=ns,Ut=!1,ae=!1),fe()}}};return na}function Ga(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function jz(t,e){const n=[],i=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let c=0;c<o;c++){const l=e.matched[c];l&&(t.matched.find(f=>Dc(f,l))?i.push(l):n.push(l));const d=t.matched[c];d&&(e.matched.find(f=>Dc(f,d))||s.push(d))}return[n,i,s]}const $z={name:"Home"},qz="/potion-productivity/assets/logo-13530169.svg";const Kz={class:"home"},zz=Ye("div",{class:"header-section"},[Ye("img",{src:qz,alt:"",class:"logo"}),Ye("h1",{class:"header"},"Welcome to Potion."),Ye("p",{class:"page-content"},[wy(" here, you can write notes that automatically save as you type them."),Ye("br"),wy(' Open the sidebar and click "New Page" to start writing! ')])],-1),Gz=[zz];function Hz(t,e,n,i,s,o){return ki(),Ri("div",Kz,Gz)}const Wz=Ms($z,[["render",Hz]]),iy=i0(),Yz={props:["id"],data(){return{title:"",content:"",unsubscribe:()=>{}}},methods:{async saveData(){if(Gt.currentUser)try{await sw(Di(iy,"users",Gt.currentUser.uid,"pages",this.id),{title:this.title,content:this.content})}catch(t){console.error("Error while saving data to Firestore:",t)}}},watch:{id(){if(!Gt.currentUser)return;const t=Di(iy,"users",Gt.currentUser.uid,"pages",this.id);this.unsubscribe=wp(t,e=>{if(e.exists()){const n=e.data();this.content=n.content,this.title=n.title}else this.content="",this.title=""})},title(){this.saveData()},content(){this.saveData()}},beforeUnmount(){this.unsubscribe&&this.unsubscribe()},async mounted(){if(console.log("Page mounted with id",this.id),!Gt.currentUser)return;const t=Di(iy,"users",Gt.currentUser.uid,"pages",this.id);this.unsubscribe=wp(t,e=>{if(e.exists()){const n=e.data();this.content=n.content,this.title=n.title}})}};const Qz={class:"home"},Jz={class:"page"},Xz={class:"page-header"},Zz={class:"page-content"};function e7(t,e,n,i,s,o){return ki(),Ri("div",Qz,[Ye("div",Jz,[Ye("h1",Xz,[dy(Ye("textarea",{"onUpdate:modelValue":e[0]||(e[0]=c=>s.title=c),key:"title",id:"title",placeholder:"Title..."},null,512),[[RS,s.title]])]),Ye("p",Zz,[dy(Ye("textarea",{"onUpdate:modelValue":e[1]||(e[1]=c=>s.content=c),key:"content",id:"content",placeholder:"Write your note...",oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},null,512),[[RS,s.content]])])])])}const t7=Ms(Yz,[["render",e7],["__scopeId","data-v-afc9c93a"]]),n7=[{path:"/",name:"home",component:Wz,props:!0},{path:"/page/:id",name:"Page",component:t7,props:!0}],i7=Bz({history:nz(),routes:n7}),wN=new Set,Wn=new WeakMap,lc=new WeakMap,zo=new WeakMap,bw=new WeakMap,r7=new WeakMap,Pc=new WeakMap,Ap=new WeakMap,Sl=new WeakSet;let Go;const gr="__aa_tgt",Iw="__aa_del",s7=t=>{const e=l7(t);e&&e.forEach(n=>h7(n))},o7=t=>{t.forEach(e=>{e.target===Go&&c7(),Wn.has(e.target)&&ta(e.target)})};function a7(t){const e=bw.get(t);e==null||e.disconnect();let n=Wn.get(t),i=0;const s=5;n||(n=Oc(t),Wn.set(t,n));const{offsetWidth:o,offsetHeight:c}=Go,d=[n.top-s,o-(n.left+s+n.width),c-(n.top+s+n.height),n.left-s].map(g=>`${-1*Math.floor(g)}px`).join(" "),f=new IntersectionObserver(()=>{++i>1&&ta(t)},{root:Go,threshold:1,rootMargin:d});f.observe(t),bw.set(t,f)}function ta(t){clearTimeout(Ap.get(t));const e=$m(t),n=typeof e=="function"?500:e.duration;Ap.set(t,setTimeout(async()=>{const i=zo.get(t);try{await(i==null?void 0:i.finished),Wn.set(t,Oc(t)),a7(t)}catch{}},n))}function c7(){clearTimeout(Ap.get(Go)),Ap.set(Go,setTimeout(()=>{wN.forEach(t=>EN(t,e=>bN(()=>ta(e))))},100))}function u7(t){setTimeout(()=>{r7.set(t,setInterval(()=>bN(ta.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function bN(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let _w,ec;typeof window<"u"&&(Go=document.documentElement,_w=new MutationObserver(s7),ec=new ResizeObserver(o7),ec.observe(Go));function l7(t){return t.reduce((i,s)=>[...i,...Array.from(s.addedNodes),...Array.from(s.removedNodes)],[]).every(i=>i.nodeName==="#comment")?!1:t.reduce((i,s)=>{if(i===!1)return!1;if(s.target instanceof Element){if(ry(s.target),!i.has(s.target)){i.add(s.target);for(let o=0;o<s.target.children.length;o++){const c=s.target.children.item(o);if(c){if(Iw in c)return!1;ry(s.target,c),i.add(c)}}}if(s.removedNodes.length)for(let o=0;o<s.removedNodes.length;o++){const c=s.removedNodes[o];if(Iw in c)return!1;c instanceof Element&&(i.add(c),ry(s.target,c),lc.set(c,[s.previousSibling,s.nextSibling]))}}return i},new Set)}function ry(t,e){!e&&!(gr in t)?Object.defineProperty(t,gr,{value:t}):e&&!(gr in e)&&Object.defineProperty(e,gr,{value:t})}function h7(t){var e;const n=t.isConnected,i=Wn.has(t);n&&lc.has(t)&&lc.delete(t),zo.has(t)&&((e=zo.get(t))===null||e===void 0||e.cancel()),i&&n?d7(t):i&&!n?p7(t):f7(t)}function ji(t){return Number(t.replace(/[^0-9.\-]/g,""))}function Oc(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX,width:e.width,height:e.height}}function IN(t,e,n){let i=e.width,s=e.height,o=n.width,c=n.height;const l=getComputedStyle(t);if(l.getPropertyValue("box-sizing")==="content-box"){const f=ji(l.paddingTop)+ji(l.paddingBottom)+ji(l.borderTopWidth)+ji(l.borderBottomWidth),g=ji(l.paddingLeft)+ji(l.paddingRight)+ji(l.borderRightWidth)+ji(l.borderLeftWidth);i-=g,o-=g,s-=f,c-=f}return[i,o,s,c].map(Math.round)}function $m(t){return gr in t&&Pc.has(t[gr])?Pc.get(t[gr]):{duration:250,easing:"ease-in-out"}}function _N(t){if(gr in t)return t[gr]}function $0(t){const e=_N(t);return e?Sl.has(e):!1}function EN(t,...e){e.forEach(n=>n(t,Pc.has(t)));for(let n=0;n<t.children.length;n++){const i=t.children.item(n);i&&e.forEach(s=>s(i,Pc.has(i)))}}function d7(t){const e=Wn.get(t),n=Oc(t);if(!$0(t))return Wn.set(t,n);let i;if(!e)return;const s=$m(t);if(typeof s!="function"){const o=e.left-n.left,c=e.top-n.top,[l,d,f,g]=IN(t,e,n),v={transform:`translate(${o}px, ${c}px)`},y={transform:"translate(0, 0)"};l!==d&&(v.width=`${l}px`,y.width=`${d}px`),f!==g&&(v.height=`${f}px`,y.height=`${g}px`),i=t.animate([v,y],{duration:s.duration,easing:s.easing})}else i=new Animation(s(t,"remain",e,n)),i.play();zo.set(t,i),Wn.set(t,n),i.addEventListener("finish",ta.bind(null,t))}function f7(t){const e=Oc(t);Wn.set(t,e);const n=$m(t);if(!$0(t))return;let i;typeof n!="function"?i=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"}):(i=new Animation(n(t,"add",e)),i.play()),zo.set(t,i),i.addEventListener("finish",ta.bind(null,t))}function p7(t){var e;if(!lc.has(t)||!Wn.has(t))return;const[n,i]=lc.get(t);Object.defineProperty(t,Iw,{value:!0}),i&&i.parentNode&&i.parentNode instanceof Element?i.parentNode.insertBefore(t,i):n&&n.parentNode?n.parentNode.appendChild(t):(e=_N(t))===null||e===void 0||e.appendChild(t);function s(){var y;t.remove(),Wn.delete(t),lc.delete(t),zo.delete(t),(y=bw.get(t))===null||y===void 0||y.disconnect()}if(!$0(t))return s();const[o,c,l,d]=m7(t),f=$m(t),g=Wn.get(t);let v;Object.assign(t.style,{position:"absolute",top:`${o}px`,left:`${c}px`,width:`${l}px`,height:`${d}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof f!="function"?v=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:f.duration,easing:"ease-out"}):(v=new Animation(f(t,"remove",g)),v.play()),zo.set(t,v),v.addEventListener("finish",s)}function m7(t){const e=Wn.get(t),[n,,i]=IN(t,e,Oc(t));let s=t.parentElement;for(;s&&(getComputedStyle(s).position==="static"||s instanceof HTMLBodyElement);)s=s.parentElement;s||(s=document.body);const o=getComputedStyle(s),c=Wn.get(s)||Oc(s),l=Math.round(e.top-c.top)-ji(o.borderTopWidth),d=Math.round(e.left-c.left)-ji(o.borderLeftWidth);return[l,d,n,i]}function g7(t,e={}){return _w&&ec&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof e!="function"&&!e.disrespectUserMotionPreference||(Sl.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),EN(t,ta,u7,s=>ec==null?void 0:ec.observe(s)),typeof e=="function"?Pc.set(t,e):Pc.set(t,{duration:250,easing:"ease-in-out",...e}),_w.observe(t,{childList:!0}),wN.add(t))),Object.freeze({parent:t,enable:()=>{Sl.add(t)},disable:()=>{Sl.delete(t)},isEnabled:()=>Sl.has(t)})}const v7={mounted:(t,e)=>{g7(t,e.value||{})}},y7={install(t){t.directive("auto-animate",v7)}},w7=kF(),b7=TF(FK).use(w7).use(i7).use(y7);b7.mount("#app");
