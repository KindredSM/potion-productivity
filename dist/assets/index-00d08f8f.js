(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ec(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Ic(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Ke(r)?Ky(r):Ic(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Ke(e))return e;if(Ce(e))return e}}const By=/;(?![^(]*\))/g,qy=/:([^]+)/,$y=/\/\*.*?\*\//gs;function Ky(e){const t={};return e.replace($y,"").split(By).forEach(n=>{if(n){const r=n.split(qy);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function uu(e){let t="";if(Ke(e))t=e;else if(ee(e))for(let n=0;n<e.length;n++){const r=uu(e[n]);r&&(t+=r+" ")}else if(Ce(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Hy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zy=Ec(Hy);function Cd(e){return!!e||e===""}const Gy=e=>Ke(e)?e:e==null?"":ee(e)||Ce(e)&&(e.toString===Rd||!ne(e.toString))?JSON.stringify(e,Nd,2):String(e),Nd=(e,t)=>t&&t.__v_isRef?Nd(e,t.value):Zr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:xd(t)?{[`Set(${t.size})`]:[...t.values()]}:Ce(t)&&!ee(t)&&!Od(t)?String(t):t,Se={},Jr=[],zt=()=>{},Wy=()=>!1,Qy=/^on[^a-z]/,au=e=>Qy.test(e),Tc=e=>e.startsWith("onUpdate:"),ut=Object.assign,Sc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Yy=Object.prototype.hasOwnProperty,ce=(e,t)=>Yy.call(e,t),ee=Array.isArray,Zr=e=>cu(e)==="[object Map]",xd=e=>cu(e)==="[object Set]",ne=e=>typeof e=="function",Ke=e=>typeof e=="string",Ac=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",Dd=e=>Ce(e)&&ne(e.then)&&ne(e.catch),Rd=Object.prototype.toString,cu=e=>Rd.call(e),Xy=e=>cu(e).slice(8,-1),Od=e=>cu(e)==="[object Object]",Cc=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=Ec(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Jy=/-(\w)/g,cn=lu(e=>e.replace(Jy,(t,n)=>n?n.toUpperCase():"")),Zy=/\B([A-Z])/g,xi=lu(e=>e.replace(Zy,"-$1").toLowerCase()),fu=lu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ju=lu(e=>e?`on${fu(e)}`:""),so=(e,t)=>!Object.is(e,t),ms=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ns=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ta=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let uf;const ev=()=>uf||(uf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let $t;class Pd{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$t,!t&&$t&&(this.index=($t.scopes||($t.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=$t;try{return $t=this,t()}finally{$t=n}}}on(){$t=this}off(){$t=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function tv(e){return new Pd(e)}function nv(e,t=$t){t&&t.active&&t.effects.push(e)}function rv(){return $t}const Nc=e=>{const t=new Set(e);return t.w=0,t.n=0,t},kd=e=>(e.w&$n)>0,Ld=e=>(e.n&$n)>0,iv=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$n},ov=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];kd(i)&&!Ld(i)?i.delete(e):t[n++]=i,i.w&=~$n,i.n&=~$n}t.length=n}},Sa=new WeakMap;let zi=0,$n=1;const Aa=30;let Kt;const pr=Symbol(""),Ca=Symbol("");class xc{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,nv(this,r)}run(){if(!this.active)return this.fn();let t=Kt,n=Vn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Kt,Kt=this,Vn=!0,$n=1<<++zi,zi<=Aa?iv(this):af(this),this.fn()}finally{zi<=Aa&&ov(this),$n=1<<--zi,Kt=this.parent,Vn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Kt===this?this.deferStop=!0:this.active&&(af(this),this.onStop&&this.onStop(),this.active=!1)}}function af(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Vn=!0;const Md=[];function Di(){Md.push(Vn),Vn=!1}function Ri(){const e=Md.pop();Vn=e===void 0?!0:e}function _t(e,t,n){if(Vn&&Kt){let r=Sa.get(e);r||Sa.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=Nc()),Fd(i)}}function Fd(e,t){let n=!1;zi<=Aa?Ld(e)||(e.n|=$n,n=!kd(e)):n=!e.has(Kt),n&&(e.add(Kt),Kt.deps.push(e))}function In(e,t,n,r,i,o){const s=Sa.get(e);if(!s)return;let u=[];if(t==="clear")u=[...s.values()];else if(n==="length"&&ee(e)){const a=Number(r);s.forEach((c,l)=>{(l==="length"||l>=a)&&u.push(c)})}else switch(n!==void 0&&u.push(s.get(n)),t){case"add":ee(e)?Cc(n)&&u.push(s.get("length")):(u.push(s.get(pr)),Zr(e)&&u.push(s.get(Ca)));break;case"delete":ee(e)||(u.push(s.get(pr)),Zr(e)&&u.push(s.get(Ca)));break;case"set":Zr(e)&&u.push(s.get(pr));break}if(u.length===1)u[0]&&Na(u[0]);else{const a=[];for(const c of u)c&&a.push(...c);Na(Nc(a))}}function Na(e,t){const n=ee(e)?e:[...e];for(const r of n)r.computed&&cf(r);for(const r of n)r.computed||cf(r)}function cf(e,t){(e!==Kt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const sv=Ec("__proto__,__v_isRef,__isVue"),Ud=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ac)),uv=Dc(),av=Dc(!1,!0),cv=Dc(!0),lf=lv();function lv(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=he(this);for(let o=0,s=this.length;o<s;o++)_t(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(he)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Di();const r=he(this)[t].apply(this,n);return Ri(),r}}),e}function fv(e){const t=he(this);return _t(t,"has",e),t.hasOwnProperty(e)}function Dc(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Cv:$d:t?qd:Bd).get(r))return r;const s=ee(r);if(!e){if(s&&ce(lf,i))return Reflect.get(lf,i,o);if(i==="hasOwnProperty")return fv}const u=Reflect.get(r,i,o);return(Ac(i)?Ud.has(i):sv(i))||(e||_t(r,"get",i),t)?u:it(u)?s&&Cc(i)?u:u.value:Ce(u)?e?Kd(u):Oo(u):u}}const hv=Vd(),dv=Vd(!0);function Vd(e=!1){return function(n,r,i,o){let s=n[r];if(oi(s)&&it(s)&&!it(i))return!1;if(!e&&(!xs(i)&&!oi(i)&&(s=he(s),i=he(i)),!ee(n)&&it(s)&&!it(i)))return s.value=i,!0;const u=ee(n)&&Cc(r)?Number(r)<n.length:ce(n,r),a=Reflect.set(n,r,i,o);return n===he(o)&&(u?so(i,s)&&In(n,"set",r,i):In(n,"add",r,i)),a}}function pv(e,t){const n=ce(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&In(e,"delete",t,void 0),r}function gv(e,t){const n=Reflect.has(e,t);return(!Ac(t)||!Ud.has(t))&&_t(e,"has",t),n}function mv(e){return _t(e,"iterate",ee(e)?"length":pr),Reflect.ownKeys(e)}const jd={get:uv,set:hv,deleteProperty:pv,has:gv,ownKeys:mv},yv={get:cv,set(e,t){return!0},deleteProperty(e,t){return!0}},vv=ut({},jd,{get:av,set:dv}),Rc=e=>e,hu=e=>Reflect.getPrototypeOf(e);function Zo(e,t,n=!1,r=!1){e=e.__v_raw;const i=he(e),o=he(t);n||(t!==o&&_t(i,"get",t),_t(i,"get",o));const{has:s}=hu(i),u=r?Rc:n?Lc:uo;if(s.call(i,t))return u(e.get(t));if(s.call(i,o))return u(e.get(o));e!==i&&e.get(t)}function es(e,t=!1){const n=this.__v_raw,r=he(n),i=he(e);return t||(e!==i&&_t(r,"has",e),_t(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function ts(e,t=!1){return e=e.__v_raw,!t&&_t(he(e),"iterate",pr),Reflect.get(e,"size",e)}function ff(e){e=he(e);const t=he(this);return hu(t).has.call(t,e)||(t.add(e),In(t,"add",e,e)),this}function hf(e,t){t=he(t);const n=he(this),{has:r,get:i}=hu(n);let o=r.call(n,e);o||(e=he(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?so(t,s)&&In(n,"set",e,t):In(n,"add",e,t),this}function df(e){const t=he(this),{has:n,get:r}=hu(t);let i=n.call(t,e);i||(e=he(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&In(t,"delete",e,void 0),o}function pf(){const e=he(this),t=e.size!==0,n=e.clear();return t&&In(e,"clear",void 0,void 0),n}function ns(e,t){return function(r,i){const o=this,s=o.__v_raw,u=he(s),a=t?Rc:e?Lc:uo;return!e&&_t(u,"iterate",pr),s.forEach((c,l)=>r.call(i,a(c),a(l),o))}}function rs(e,t,n){return function(...r){const i=this.__v_raw,o=he(i),s=Zr(o),u=e==="entries"||e===Symbol.iterator&&s,a=e==="keys"&&s,c=i[e](...r),l=n?Rc:t?Lc:uo;return!t&&_t(o,"iterate",a?Ca:pr),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:u?[l(f[0]),l(f[1])]:l(f),done:h}},[Symbol.iterator](){return this}}}}function Cn(e){return function(...t){return e==="delete"?!1:this}}function wv(){const e={get(o){return Zo(this,o)},get size(){return ts(this)},has:es,add:ff,set:hf,delete:df,clear:pf,forEach:ns(!1,!1)},t={get(o){return Zo(this,o,!1,!0)},get size(){return ts(this)},has:es,add:ff,set:hf,delete:df,clear:pf,forEach:ns(!1,!0)},n={get(o){return Zo(this,o,!0)},get size(){return ts(this,!0)},has(o){return es.call(this,o,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:ns(!0,!1)},r={get(o){return Zo(this,o,!0,!0)},get size(){return ts(this,!0)},has(o){return es.call(this,o,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:ns(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=rs(o,!1,!1),n[o]=rs(o,!0,!1),t[o]=rs(o,!1,!0),r[o]=rs(o,!0,!0)}),[e,n,t,r]}const[bv,_v,Ev,Iv]=wv();function Oc(e,t){const n=t?e?Iv:Ev:e?_v:bv;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(ce(n,i)&&i in r?n:r,i,o)}const Tv={get:Oc(!1,!1)},Sv={get:Oc(!1,!0)},Av={get:Oc(!0,!1)},Bd=new WeakMap,qd=new WeakMap,$d=new WeakMap,Cv=new WeakMap;function Nv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xv(e){return e.__v_skip||!Object.isExtensible(e)?0:Nv(Xy(e))}function Oo(e){return oi(e)?e:Pc(e,!1,jd,Tv,Bd)}function Dv(e){return Pc(e,!1,vv,Sv,qd)}function Kd(e){return Pc(e,!0,yv,Av,$d)}function Pc(e,t,n,r,i){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=xv(e);if(s===0)return e;const u=new Proxy(e,s===2?r:n);return i.set(e,u),u}function ei(e){return oi(e)?ei(e.__v_raw):!!(e&&e.__v_isReactive)}function oi(e){return!!(e&&e.__v_isReadonly)}function xs(e){return!!(e&&e.__v_isShallow)}function Hd(e){return ei(e)||oi(e)}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function kc(e){return Ns(e,"__v_skip",!0),e}const uo=e=>Ce(e)?Oo(e):e,Lc=e=>Ce(e)?Kd(e):e;function zd(e){Vn&&Kt&&(e=he(e),Fd(e.dep||(e.dep=Nc())))}function Gd(e,t){e=he(e);const n=e.dep;n&&Na(n)}function it(e){return!!(e&&e.__v_isRef===!0)}function Wd(e){return Qd(e,!1)}function Rv(e){return Qd(e,!0)}function Qd(e,t){return it(e)?e:new Ov(e,t)}class Ov{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:he(t),this._value=n?t:uo(t)}get value(){return zd(this),this._value}set value(t){const n=this.__v_isShallow||xs(t)||oi(t);t=n?t:he(t),so(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:uo(t),Gd(this))}}function ti(e){return it(e)?e.value:e}const Pv={get:(e,t,n)=>ti(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return it(i)&&!it(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Yd(e){return ei(e)?e:new Proxy(e,Pv)}var Xd;class kv{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Xd]=!1,this._dirty=!0,this.effect=new xc(t,()=>{this._dirty||(this._dirty=!0,Gd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=he(this);return zd(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Xd="__v_isReadonly";function Lv(e,t,n=!1){let r,i;const o=ne(e);return o?(r=e,i=zt):(r=e.get,i=e.set),new kv(r,i,o||!i,n)}function jn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){du(o,t,n)}return i}function Ft(e,t,n,r){if(ne(e)){const o=jn(e,t,n,r);return o&&Dd(o)&&o.catch(s=>{du(s,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ft(e[o],t,n,r));return i}function du(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,u=n;for(;o;){const c=o.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](e,s,u)===!1)return}o=o.parent}const a=t.appContext.config.errorHandler;if(a){jn(a,null,10,[e,s,u]);return}}Mv(e,n,i,r)}function Mv(e,t,n,r=!0){console.error(e)}let ao=!1,xa=!1;const rt=[];let rn=0;const ni=[];let pn=null,ir=0;const Jd=Promise.resolve();let Mc=null;function Zd(e){const t=Mc||Jd;return e?t.then(this?e.bind(this):e):t}function Fv(e){let t=rn+1,n=rt.length;for(;t<n;){const r=t+n>>>1;co(rt[r])<e?t=r+1:n=r}return t}function Fc(e){(!rt.length||!rt.includes(e,ao&&e.allowRecurse?rn+1:rn))&&(e.id==null?rt.push(e):rt.splice(Fv(e.id),0,e),ep())}function ep(){!ao&&!xa&&(xa=!0,Mc=Jd.then(np))}function Uv(e){const t=rt.indexOf(e);t>rn&&rt.splice(t,1)}function Vv(e){ee(e)?ni.push(...e):(!pn||!pn.includes(e,e.allowRecurse?ir+1:ir))&&ni.push(e),ep()}function gf(e,t=ao?rn+1:0){for(;t<rt.length;t++){const n=rt[t];n&&n.pre&&(rt.splice(t,1),t--,n())}}function tp(e){if(ni.length){const t=[...new Set(ni)];if(ni.length=0,pn){pn.push(...t);return}for(pn=t,pn.sort((n,r)=>co(n)-co(r)),ir=0;ir<pn.length;ir++)pn[ir]();pn=null,ir=0}}const co=e=>e.id==null?1/0:e.id,jv=(e,t)=>{const n=co(e)-co(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function np(e){xa=!1,ao=!0,rt.sort(jv);const t=zt;try{for(rn=0;rn<rt.length;rn++){const n=rt[rn];n&&n.active!==!1&&jn(n,null,14)}}finally{rn=0,rt.length=0,tp(),ao=!1,Mc=null,(rt.length||ni.length)&&np()}}function Bv(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Se;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const l=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=r[l]||Se;h&&(i=n.map(d=>Ke(d)?d.trim():d)),f&&(i=n.map(Ta))}let u,a=r[u=Ju(t)]||r[u=Ju(cn(t))];!a&&o&&(a=r[u=Ju(xi(t))]),a&&Ft(a,e,6,i);const c=r[u+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Ft(c,e,6,i)}}function rp(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},u=!1;if(!ne(e)){const a=c=>{const l=rp(c,t,!0);l&&(u=!0,ut(s,l))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!o&&!u?(Ce(e)&&r.set(e,null),null):(ee(o)?o.forEach(a=>s[a]=null):ut(s,o),Ce(e)&&r.set(e,s),s)}function pu(e,t){return!e||!au(t)?!1:(t=t.slice(2).replace(/Once$/,""),ce(e,t[0].toLowerCase()+t.slice(1))||ce(e,xi(t))||ce(e,t))}let Dt=null,ip=null;function Ds(e){const t=Dt;return Dt=e,ip=e&&e.type.__scopeId||null,t}function Gi(e,t=Dt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Sf(-1);const o=Ds(t);let s;try{s=e(...i)}finally{Ds(o),r._d&&Sf(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Zu(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:u,attrs:a,emit:c,render:l,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let w,v;const T=Ds(e);try{if(n.shapeFlag&4){const M=i||r;w=nn(l.call(M,M,f,o,d,h,g)),v=a}else{const M=t;w=nn(M.length>1?M(o,{attrs:a,slots:u,emit:c}):M(o,null)),v=t.props?a:qv(a)}}catch(M){Ji.length=0,du(M,e,1),w=Oe(wn)}let E=w;if(v&&m!==!1){const M=Object.keys(v),{shapeFlag:$}=E;M.length&&$&7&&(s&&M.some(Tc)&&(v=$v(v,s)),E=Kn(E,v))}return n.dirs&&(E=Kn(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),w=E,Ds(T),w}const qv=e=>{let t;for(const n in e)(n==="class"||n==="style"||au(n))&&((t||(t={}))[n]=e[n]);return t},$v=(e,t)=>{const n={};for(const r in e)(!Tc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Kv(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:u,patchFlag:a}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?mf(r,s,c):!!s;if(a&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const h=l[f];if(s[h]!==r[h]&&!pu(c,h))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===s?!1:r?s?mf(r,s,c):!0:!!s;return!1}function mf(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!pu(n,o))return!0}return!1}function Hv({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const zv=e=>e.__isSuspense;function Gv(e,t){t&&t.pendingBranch?ee(e)?t.effects.push(...e):t.effects.push(e):Vv(e)}function ys(e,t){if(Pe){let n=Pe.provides;const r=Pe.parent&&Pe.parent.provides;r===n&&(n=Pe.provides=Object.create(r)),n[e]=t}}function vn(e,t,n=!1){const r=Pe||Dt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ne(t)?t.call(r.proxy):t}}const is={};function vs(e,t,n){return op(e,t,n)}function op(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=Se){const u=rv()===(Pe==null?void 0:Pe.scope)?Pe:null;let a,c=!1,l=!1;if(it(e)?(a=()=>e.value,c=xs(e)):ei(e)?(a=()=>e,r=!0):ee(e)?(l=!0,c=e.some(E=>ei(E)||xs(E)),a=()=>e.map(E=>{if(it(E))return E.value;if(ei(E))return ar(E);if(ne(E))return jn(E,u,2)})):ne(e)?t?a=()=>jn(e,u,2):a=()=>{if(!(u&&u.isUnmounted))return f&&f(),Ft(e,u,3,[h])}:a=zt,t&&r){const E=a;a=()=>ar(E())}let f,h=E=>{f=v.onStop=()=>{jn(E,u,4)}},d;if(fo)if(h=zt,t?n&&Ft(t,u,3,[a(),l?[]:void 0,h]):a(),i==="sync"){const E=H0();d=E.__watcherHandles||(E.__watcherHandles=[])}else return zt;let g=l?new Array(e.length).fill(is):is;const m=()=>{if(v.active)if(t){const E=v.run();(r||c||(l?E.some((M,$)=>so(M,g[$])):so(E,g)))&&(f&&f(),Ft(t,u,3,[E,g===is?void 0:l&&g[0]===is?[]:g,h]),g=E)}else v.run()};m.allowRecurse=!!t;let w;i==="sync"?w=m:i==="post"?w=()=>yt(m,u&&u.suspense):(m.pre=!0,u&&(m.id=u.uid),w=()=>Fc(m));const v=new xc(a,w);t?n?m():g=v.run():i==="post"?yt(v.run.bind(v),u&&u.suspense):v.run();const T=()=>{v.stop(),u&&u.scope&&Sc(u.scope.effects,v)};return d&&d.push(T),T}function Wv(e,t,n){const r=this.proxy,i=Ke(e)?e.includes(".")?sp(r,e):()=>r[e]:e.bind(r,r);let o;ne(t)?o=t:(o=t.handler,n=t);const s=Pe;si(this);const u=op(i,o.bind(r),n);return s?si(s):gr(),u}function sp(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ar(e,t){if(!Ce(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),it(e))ar(e.value,t);else if(ee(e))for(let n=0;n<e.length;n++)ar(e[n],t);else if(xd(e)||Zr(e))e.forEach(n=>{ar(n,t)});else if(Od(e))for(const n in e)ar(e[n],t);return e}function Qv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fp(()=>{e.isMounted=!0}),hp(()=>{e.isUnmounting=!0}),e}const Lt=[Function,Array],Yv={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Lt,onEnter:Lt,onAfterEnter:Lt,onEnterCancelled:Lt,onBeforeLeave:Lt,onLeave:Lt,onAfterLeave:Lt,onLeaveCancelled:Lt,onBeforeAppear:Lt,onAppear:Lt,onAfterAppear:Lt,onAppearCancelled:Lt},setup(e,{slots:t}){const n=F0(),r=Qv();let i;return()=>{const o=t.default&&ap(t.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const m of o)if(m.type!==wn){s=m;break}}const u=he(e),{mode:a}=u;if(r.isLeaving)return ea(s);const c=yf(s);if(!c)return ea(s);const l=Da(c,u,r,n);Ra(c,l);const f=n.subTree,h=f&&yf(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();i===void 0?i=m:m!==i&&(i=m,d=!0)}if(h&&h.type!==wn&&(!or(c,h)||d)){const m=Da(h,u,r,n);if(Ra(h,m),a==="out-in")return r.isLeaving=!0,m.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},ea(s);a==="in-out"&&c.type!==wn&&(m.delayLeave=(w,v,T)=>{const E=up(r,h);E[String(h.key)]=h,w._leaveCb=()=>{v(),w._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=T})}return s}}},Xv=Yv;function up(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Da(e,t,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:a,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:w,onAfterAppear:v,onAppearCancelled:T}=t,E=String(e.key),M=up(n,e),$=(te,be)=>{te&&Ft(te,r,9,be)},X=(te,be)=>{const ye=be[1];$(te,be),ee(te)?te.every(Be=>Be.length<=1)&&ye():te.length<=1&&ye()},le={mode:o,persisted:s,beforeEnter(te){let be=u;if(!n.isMounted)if(i)be=m||u;else return;te._leaveCb&&te._leaveCb(!0);const ye=M[E];ye&&or(e,ye)&&ye.el._leaveCb&&ye.el._leaveCb(),$(be,[te])},enter(te){let be=a,ye=c,Be=l;if(!n.isMounted)if(i)be=w||a,ye=v||c,Be=T||l;else return;let Ze=!1;const Ut=te._enterCb=hn=>{Ze||(Ze=!0,hn?$(Be,[te]):$(ye,[te]),le.delayedLeave&&le.delayedLeave(),te._enterCb=void 0)};be?X(be,[te,Ut]):Ut()},leave(te,be){const ye=String(e.key);if(te._enterCb&&te._enterCb(!0),n.isUnmounting)return be();$(f,[te]);let Be=!1;const Ze=te._leaveCb=Ut=>{Be||(Be=!0,be(),Ut?$(g,[te]):$(d,[te]),te._leaveCb=void 0,M[ye]===e&&delete M[ye])};M[ye]=e,h?X(h,[te,Ze]):Ze()},clone(te){return Da(te,t,n,r)}};return le}function ea(e){if(gu(e))return e=Kn(e),e.children=null,e}function yf(e){return gu(e)?e.children?e.children[0]:void 0:e}function Ra(e,t){e.shapeFlag&6&&e.component?Ra(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ap(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const u=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Ct?(s.patchFlag&128&&i++,r=r.concat(ap(s.children,t,u))):(t||s.type!==wn)&&r.push(u!=null?Kn(s,{key:u}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function cp(e){return ne(e)?{setup:e,name:e.name}:e}const ws=e=>!!e.type.__asyncLoader,gu=e=>e.type.__isKeepAlive;function Jv(e,t){lp(e,"a",t)}function Zv(e,t){lp(e,"da",t)}function lp(e,t,n=Pe){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(mu(t,r,n),n){let i=n.parent;for(;i&&i.parent;)gu(i.parent.vnode)&&e0(r,t,n,i),i=i.parent}}function e0(e,t,n,r){const i=mu(t,e,r,!0);dp(()=>{Sc(r[t],i)},n)}function mu(e,t,n=Pe,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;Di(),si(n);const u=Ft(t,n,e,s);return gr(),Ri(),u});return r?i.unshift(o):i.push(o),o}}const Sn=e=>(t,n=Pe)=>(!fo||e==="sp")&&mu(e,(...r)=>t(...r),n),t0=Sn("bm"),fp=Sn("m"),n0=Sn("bu"),r0=Sn("u"),hp=Sn("bum"),dp=Sn("um"),i0=Sn("sp"),o0=Sn("rtg"),s0=Sn("rtc");function u0(e,t=Pe){mu("ec",e,t)}function Oa(e,t){const n=Dt;if(n===null)return e;const r=wu(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,u,a,c=Se]=t[o];s&&(ne(s)&&(s={mounted:s,updated:s}),s.deep&&ar(u),i.push({dir:s,instance:r,value:u,oldValue:void 0,arg:a,modifiers:c}))}return e}function Zn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);let a=u.dir[r];a&&(Di(),Ft(a,n,8,[e.el,u,e,t]),Ri())}}const pp="components",a0="directives";function Wr(e,t){return gp(pp,e,!0,t)||e}const c0=Symbol();function l0(e){return gp(a0,e)}function gp(e,t,n=!0,r=!1){const i=Dt||Pe;if(i){const o=i.type;if(e===pp){const u=q0(o,!1);if(u&&(u===t||u===cn(t)||u===fu(cn(t))))return o}const s=vf(i[e]||o[e],t)||vf(i.appContext[e],t);return!s&&r?o:s}}function vf(e,t){return e&&(e[t]||e[cn(t)]||e[fu(cn(t))])}function f0(e,t,n,r){let i;const o=n&&n[r];if(ee(e)||Ke(e)){i=new Array(e.length);for(let s=0,u=e.length;s<u;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(Ce(e))if(e[Symbol.iterator])i=Array.from(e,(s,u)=>t(s,u,void 0,o&&o[u]));else{const s=Object.keys(e);i=new Array(s.length);for(let u=0,a=s.length;u<a;u++){const c=s[u];i[u]=t(e[c],c,u,o&&o[u])}}else i=[];return n&&(n[r]=i),i}const Pa=e=>e?Sp(e)?wu(e)||e.proxy:Pa(e.parent):null,Xi=ut(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pa(e.parent),$root:e=>Pa(e.root),$emit:e=>e.emit,$options:e=>Uc(e),$forceUpdate:e=>e.f||(e.f=()=>Fc(e.update)),$nextTick:e=>e.n||(e.n=Zd.bind(e.proxy)),$watch:e=>Wv.bind(e)}),ta=(e,t)=>e!==Se&&!e.__isScriptSetup&&ce(e,t),h0={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:a}=e;let c;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(ta(r,t))return s[t]=1,r[t];if(i!==Se&&ce(i,t))return s[t]=2,i[t];if((c=e.propsOptions[0])&&ce(c,t))return s[t]=3,o[t];if(n!==Se&&ce(n,t))return s[t]=4,n[t];ka&&(s[t]=0)}}const l=Xi[t];let f,h;if(l)return t==="$attrs"&&_t(e,"get",t),l(e);if((f=u.__cssModules)&&(f=f[t]))return f;if(n!==Se&&ce(n,t))return s[t]=4,n[t];if(h=a.config.globalProperties,ce(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return ta(i,t)?(i[t]=n,!0):r!==Se&&ce(r,t)?(r[t]=n,!0):ce(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return!!n[s]||e!==Se&&ce(e,s)||ta(t,s)||(u=o[0])&&ce(u,s)||ce(r,s)||ce(Xi,s)||ce(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ce(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let ka=!0;function d0(e){const t=Uc(e),n=e.proxy,r=e.ctx;ka=!1,t.beforeCreate&&wf(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:u,provide:a,inject:c,created:l,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:w,beforeDestroy:v,beforeUnmount:T,destroyed:E,unmounted:M,render:$,renderTracked:X,renderTriggered:le,errorCaptured:te,serverPrefetch:be,expose:ye,inheritAttrs:Be,components:Ze,directives:Ut,filters:hn}=t;if(c&&p0(c,r,null,e.appContext.config.unwrapInjectedRef),s)for(const _e in s){const ve=s[_e];ne(ve)&&(r[_e]=ve.bind(n))}if(i){const _e=i.call(n,n);Ce(_e)&&(e.data=Oo(_e))}if(ka=!0,o)for(const _e in o){const ve=o[_e],Vt=ne(ve)?ve.bind(n,n):ne(ve.get)?ve.get.bind(n,n):zt,Jn=!ne(ve)&&ne(ve.set)?ve.set.bind(n):zt,jt=Mt({get:Vt,set:Jn});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>jt.value,set:mt=>jt.value=mt})}if(u)for(const _e in u)mp(u[_e],r,n,_e);if(a){const _e=ne(a)?a.call(n):a;Reflect.ownKeys(_e).forEach(ve=>{ys(ve,_e[ve])})}l&&wf(l,e,"c");function ke(_e,ve){ee(ve)?ve.forEach(Vt=>_e(Vt.bind(n))):ve&&_e(ve.bind(n))}if(ke(t0,f),ke(fp,h),ke(n0,d),ke(r0,g),ke(Jv,m),ke(Zv,w),ke(u0,te),ke(s0,X),ke(o0,le),ke(hp,T),ke(dp,M),ke(i0,be),ee(ye))if(ye.length){const _e=e.exposed||(e.exposed={});ye.forEach(ve=>{Object.defineProperty(_e,ve,{get:()=>n[ve],set:Vt=>n[ve]=Vt})})}else e.exposed||(e.exposed={});$&&e.render===zt&&(e.render=$),Be!=null&&(e.inheritAttrs=Be),Ze&&(e.components=Ze),Ut&&(e.directives=Ut)}function p0(e,t,n=zt,r=!1){ee(e)&&(e=La(e));for(const i in e){const o=e[i];let s;Ce(o)?"default"in o?s=vn(o.from||i,o.default,!0):s=vn(o.from||i):s=vn(o),it(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:u=>s.value=u}):t[i]=s}}function wf(e,t,n){Ft(ee(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function mp(e,t,n,r){const i=r.includes(".")?sp(n,r):()=>n[r];if(Ke(e)){const o=t[e];ne(o)&&vs(i,o)}else if(ne(e))vs(i,e.bind(n));else if(Ce(e))if(ee(e))e.forEach(o=>mp(o,t,n,r));else{const o=ne(e.handler)?e.handler.bind(n):t[e.handler];ne(o)&&vs(i,o,e)}}function Uc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,u=o.get(t);let a;return u?a=u:!i.length&&!n&&!r?a=t:(a={},i.length&&i.forEach(c=>Rs(a,c,s,!0)),Rs(a,t,s)),Ce(t)&&o.set(t,a),a}function Rs(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Rs(e,o,n,!0),i&&i.forEach(s=>Rs(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const u=g0[s]||n&&n[s];e[s]=u?u(e[s],t[s]):t[s]}return e}const g0={data:bf,props:nr,emits:nr,methods:nr,computed:nr,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:nr,directives:nr,watch:y0,provide:bf,inject:m0};function bf(e,t){return t?e?function(){return ut(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function m0(e,t){return nr(La(e),La(t))}function La(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function lt(e,t){return e?[...new Set([].concat(e,t))]:t}function nr(e,t){return e?ut(ut(Object.create(null),e),t):t}function y0(e,t){if(!e)return t;if(!t)return e;const n=ut(Object.create(null),e);for(const r in t)n[r]=lt(e[r],t[r]);return n}function v0(e,t,n,r=!1){const i={},o={};Ns(o,vu,1),e.propsDefaults=Object.create(null),yp(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:Dv(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function w0(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,u=he(i),[a]=e.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let h=l[f];if(pu(e.emitsOptions,h))continue;const d=t[h];if(a)if(ce(o,h))d!==o[h]&&(o[h]=d,c=!0);else{const g=cn(h);i[g]=Ma(a,u,g,d,e,!1)}else d!==o[h]&&(o[h]=d,c=!0)}}}else{yp(e,t,i,o)&&(c=!0);let l;for(const f in u)(!t||!ce(t,f)&&((l=xi(f))===f||!ce(t,l)))&&(a?n&&(n[f]!==void 0||n[l]!==void 0)&&(i[f]=Ma(a,u,f,void 0,e,!0)):delete i[f]);if(o!==u)for(const f in o)(!t||!ce(t,f))&&(delete o[f],c=!0)}c&&In(e,"set","$attrs")}function yp(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,u;if(t)for(let a in t){if(gs(a))continue;const c=t[a];let l;i&&ce(i,l=cn(a))?!o||!o.includes(l)?n[l]=c:(u||(u={}))[l]=c:pu(e.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=he(n),c=u||Se;for(let l=0;l<o.length;l++){const f=o[l];n[f]=Ma(i,a,f,c[f],e,!ce(c,f))}}return s}function Ma(e,t,n,r,i,o){const s=e[n];if(s!=null){const u=ce(s,"default");if(u&&r===void 0){const a=s.default;if(s.type!==Function&&ne(a)){const{propsDefaults:c}=i;n in c?r=c[n]:(si(i),r=c[n]=a.call(null,t),gr())}else r=a}s[0]&&(o&&!u?r=!1:s[1]&&(r===""||r===xi(n))&&(r=!0))}return r}function vp(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},u=[];let a=!1;if(!ne(e)){const l=f=>{a=!0;const[h,d]=vp(f,t,!0);ut(s,h),d&&u.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!o&&!a)return Ce(e)&&r.set(e,Jr),Jr;if(ee(o))for(let l=0;l<o.length;l++){const f=cn(o[l]);_f(f)&&(s[f]=Se)}else if(o)for(const l in o){const f=cn(l);if(_f(f)){const h=o[l],d=s[f]=ee(h)||ne(h)?{type:h}:Object.assign({},h);if(d){const g=Tf(Boolean,d.type),m=Tf(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||ce(d,"default"))&&u.push(f)}}}const c=[s,u];return Ce(e)&&r.set(e,c),c}function _f(e){return e[0]!=="$"}function Ef(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function If(e,t){return Ef(e)===Ef(t)}function Tf(e,t){return ee(t)?t.findIndex(n=>If(n,e)):ne(t)&&If(t,e)?0:-1}const wp=e=>e[0]==="_"||e==="$stable",Vc=e=>ee(e)?e.map(nn):[nn(e)],b0=(e,t,n)=>{if(t._n)return t;const r=Gi((...i)=>Vc(t(...i)),n);return r._c=!1,r},bp=(e,t,n)=>{const r=e._ctx;for(const i in e){if(wp(i))continue;const o=e[i];if(ne(o))t[i]=b0(i,o,r);else if(o!=null){const s=Vc(o);t[i]=()=>s}}},_p=(e,t)=>{const n=Vc(t);e.slots.default=()=>n},_0=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=he(t),Ns(t,"_",n)):bp(t,e.slots={})}else e.slots={},t&&_p(e,t);Ns(e.slots,vu,1)},E0=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=Se;if(r.shapeFlag&32){const u=t._;u?n&&u===1?o=!1:(ut(i,t),!n&&u===1&&delete i._):(o=!t.$stable,bp(t,i)),s=t}else t&&(_p(e,t),s={default:1});if(o)for(const u in i)!wp(u)&&!(u in s)&&delete i[u]};function Ep(){return{app:null,config:{isNativeTag:Wy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let I0=0;function T0(e,t){return function(r,i=null){ne(r)||(r=Object.assign({},r)),i!=null&&!Ce(i)&&(i=null);const o=Ep(),s=new Set;let u=!1;const a=o.app={_uid:I0++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:z0,get config(){return o.config},set config(c){},use(c,...l){return s.has(c)||(c&&ne(c.install)?(s.add(c),c.install(a,...l)):ne(c)&&(s.add(c),c(a,...l))),a},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),a},component(c,l){return l?(o.components[c]=l,a):o.components[c]},directive(c,l){return l?(o.directives[c]=l,a):o.directives[c]},mount(c,l,f){if(!u){const h=Oe(r,i);return h.appContext=o,l&&t?t(h,c):e(h,c,f),u=!0,a._container=c,c.__vue_app__=a,wu(h.component)||h.component.proxy}},unmount(){u&&(e(null,a._container),delete a._container.__vue_app__)},provide(c,l){return o.provides[c]=l,a}};return a}}function Fa(e,t,n,r,i=!1){if(ee(e)){e.forEach((h,d)=>Fa(h,t&&(ee(t)?t[d]:t),n,r,i));return}if(ws(r)&&!i)return;const o=r.shapeFlag&4?wu(r.component)||r.component.proxy:r.el,s=i?null:o,{i:u,r:a}=e,c=t&&t.r,l=u.refs===Se?u.refs={}:u.refs,f=u.setupState;if(c!=null&&c!==a&&(Ke(c)?(l[c]=null,ce(f,c)&&(f[c]=null)):it(c)&&(c.value=null)),ne(a))jn(a,u,12,[s,l]);else{const h=Ke(a),d=it(a);if(h||d){const g=()=>{if(e.f){const m=h?ce(f,a)?f[a]:l[a]:a.value;i?ee(m)&&Sc(m,o):ee(m)?m.includes(o)||m.push(o):h?(l[a]=[o],ce(f,a)&&(f[a]=l[a])):(a.value=[o],e.k&&(l[e.k]=a.value))}else h?(l[a]=s,ce(f,a)&&(f[a]=s)):d&&(a.value=s,e.k&&(l[e.k]=s))};s?(g.id=-1,yt(g,n)):g()}}}const yt=Gv;function S0(e){return A0(e)}function A0(e,t){const n=ev();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:u,createComment:a,setText:c,setElementText:l,parentNode:f,nextSibling:h,setScopeId:d=zt,insertStaticContent:g}=e,m=(p,y,_,I=null,N=null,k=null,V=!1,P=null,L=!!y.dynamicChildren)=>{if(p===y)return;p&&!or(p,y)&&(I=F(p),mt(p,N,k,!0),p=null),y.patchFlag===-2&&(L=!1,y.dynamicChildren=null);const{type:D,ref:G,shapeFlag:q}=y;switch(D){case yu:w(p,y,_,I);break;case wn:v(p,y,_,I);break;case na:p==null&&T(y,_,I,V);break;case Ct:Ze(p,y,_,I,N,k,V,P,L);break;default:q&1?$(p,y,_,I,N,k,V,P,L):q&6?Ut(p,y,_,I,N,k,V,P,L):(q&64||q&128)&&D.process(p,y,_,I,N,k,V,P,L,ae)}G!=null&&N&&Fa(G,p&&p.ref,k,y||p,!y)},w=(p,y,_,I)=>{if(p==null)r(y.el=u(y.children),_,I);else{const N=y.el=p.el;y.children!==p.children&&c(N,y.children)}},v=(p,y,_,I)=>{p==null?r(y.el=a(y.children||""),_,I):y.el=p.el},T=(p,y,_,I)=>{[p.el,p.anchor]=g(p.children,y,_,I,p.el,p.anchor)},E=({el:p,anchor:y},_,I)=>{let N;for(;p&&p!==y;)N=h(p),r(p,_,I),p=N;r(y,_,I)},M=({el:p,anchor:y})=>{let _;for(;p&&p!==y;)_=h(p),i(p),p=_;i(y)},$=(p,y,_,I,N,k,V,P,L)=>{V=V||y.type==="svg",p==null?X(y,_,I,N,k,V,P,L):be(p,y,N,k,V,P,L)},X=(p,y,_,I,N,k,V,P)=>{let L,D;const{type:G,props:q,shapeFlag:W,transition:Z,dirs:oe}=p;if(L=p.el=s(p.type,k,q&&q.is,q),W&8?l(L,p.children):W&16&&te(p.children,L,null,I,N,k&&G!=="foreignObject",V,P),oe&&Zn(p,null,I,"created"),le(L,p,p.scopeId,V,I),q){for(const we in q)we!=="value"&&!gs(we)&&o(L,we,null,q[we],k,p.children,I,N,j);"value"in q&&o(L,"value",null,q.value),(D=q.onVnodeBeforeMount)&&Zt(D,I,p)}oe&&Zn(p,null,I,"beforeMount");const Ee=(!N||N&&!N.pendingBranch)&&Z&&!Z.persisted;Ee&&Z.beforeEnter(L),r(L,y,_),((D=q&&q.onVnodeMounted)||Ee||oe)&&yt(()=>{D&&Zt(D,I,p),Ee&&Z.enter(L),oe&&Zn(p,null,I,"mounted")},N)},le=(p,y,_,I,N)=>{if(_&&d(p,_),I)for(let k=0;k<I.length;k++)d(p,I[k]);if(N){let k=N.subTree;if(y===k){const V=N.vnode;le(p,V,V.scopeId,V.slotScopeIds,N.parent)}}},te=(p,y,_,I,N,k,V,P,L=0)=>{for(let D=L;D<p.length;D++){const G=p[D]=P?On(p[D]):nn(p[D]);m(null,G,y,_,I,N,k,V,P)}},be=(p,y,_,I,N,k,V)=>{const P=y.el=p.el;let{patchFlag:L,dynamicChildren:D,dirs:G}=y;L|=p.patchFlag&16;const q=p.props||Se,W=y.props||Se;let Z;_&&er(_,!1),(Z=W.onVnodeBeforeUpdate)&&Zt(Z,_,y,p),G&&Zn(y,p,_,"beforeUpdate"),_&&er(_,!0);const oe=N&&y.type!=="foreignObject";if(D?ye(p.dynamicChildren,D,P,_,I,oe,k):V||ve(p,y,P,null,_,I,oe,k,!1),L>0){if(L&16)Be(P,y,q,W,_,I,N);else if(L&2&&q.class!==W.class&&o(P,"class",null,W.class,N),L&4&&o(P,"style",q.style,W.style,N),L&8){const Ee=y.dynamicProps;for(let we=0;we<Ee.length;we++){const Le=Ee[we],Bt=q[Le],Vr=W[Le];(Vr!==Bt||Le==="value")&&o(P,Le,Bt,Vr,N,p.children,_,I,j)}}L&1&&p.children!==y.children&&l(P,y.children)}else!V&&D==null&&Be(P,y,q,W,_,I,N);((Z=W.onVnodeUpdated)||G)&&yt(()=>{Z&&Zt(Z,_,y,p),G&&Zn(y,p,_,"updated")},I)},ye=(p,y,_,I,N,k,V)=>{for(let P=0;P<y.length;P++){const L=p[P],D=y[P],G=L.el&&(L.type===Ct||!or(L,D)||L.shapeFlag&70)?f(L.el):_;m(L,D,G,null,I,N,k,V,!0)}},Be=(p,y,_,I,N,k,V)=>{if(_!==I){if(_!==Se)for(const P in _)!gs(P)&&!(P in I)&&o(p,P,_[P],null,V,y.children,N,k,j);for(const P in I){if(gs(P))continue;const L=I[P],D=_[P];L!==D&&P!=="value"&&o(p,P,D,L,V,y.children,N,k,j)}"value"in I&&o(p,"value",_.value,I.value)}},Ze=(p,y,_,I,N,k,V,P,L)=>{const D=y.el=p?p.el:u(""),G=y.anchor=p?p.anchor:u("");let{patchFlag:q,dynamicChildren:W,slotScopeIds:Z}=y;Z&&(P=P?P.concat(Z):Z),p==null?(r(D,_,I),r(G,_,I),te(y.children,_,G,N,k,V,P,L)):q>0&&q&64&&W&&p.dynamicChildren?(ye(p.dynamicChildren,W,_,N,k,V,P),(y.key!=null||N&&y===N.subTree)&&Ip(p,y,!0)):ve(p,y,_,G,N,k,V,P,L)},Ut=(p,y,_,I,N,k,V,P,L)=>{y.slotScopeIds=P,p==null?y.shapeFlag&512?N.ctx.activate(y,_,I,V,L):hn(y,_,I,N,k,V,L):Bi(p,y,L)},hn=(p,y,_,I,N,k,V)=>{const P=p.component=M0(p,I,N);if(gu(p)&&(P.ctx.renderer=ae),U0(P),P.asyncDep){if(N&&N.registerDep(P,ke),!p.el){const L=P.subTree=Oe(wn);v(null,L,y,_)}return}ke(P,p,y,_,N,k,V)},Bi=(p,y,_)=>{const I=y.component=p.component;if(Kv(p,y,_))if(I.asyncDep&&!I.asyncResolved){_e(I,y,_);return}else I.next=y,Uv(I.update),I.update();else y.el=p.el,I.vnode=y},ke=(p,y,_,I,N,k,V)=>{const P=()=>{if(p.isMounted){let{next:G,bu:q,u:W,parent:Z,vnode:oe}=p,Ee=G,we;er(p,!1),G?(G.el=oe.el,_e(p,G,V)):G=oe,q&&ms(q),(we=G.props&&G.props.onVnodeBeforeUpdate)&&Zt(we,Z,G,oe),er(p,!0);const Le=Zu(p),Bt=p.subTree;p.subTree=Le,m(Bt,Le,f(Bt.el),F(Bt),p,N,k),G.el=Le.el,Ee===null&&Hv(p,Le.el),W&&yt(W,N),(we=G.props&&G.props.onVnodeUpdated)&&yt(()=>Zt(we,Z,G,oe),N)}else{let G;const{el:q,props:W}=y,{bm:Z,m:oe,parent:Ee}=p,we=ws(y);if(er(p,!1),Z&&ms(Z),!we&&(G=W&&W.onVnodeBeforeMount)&&Zt(G,Ee,y),er(p,!0),q&&re){const Le=()=>{p.subTree=Zu(p),re(q,p.subTree,p,N,null)};we?y.type.__asyncLoader().then(()=>!p.isUnmounted&&Le()):Le()}else{const Le=p.subTree=Zu(p);m(null,Le,_,I,p,N,k),y.el=Le.el}if(oe&&yt(oe,N),!we&&(G=W&&W.onVnodeMounted)){const Le=y;yt(()=>Zt(G,Ee,Le),N)}(y.shapeFlag&256||Ee&&ws(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&p.a&&yt(p.a,N),p.isMounted=!0,y=_=I=null}},L=p.effect=new xc(P,()=>Fc(D),p.scope),D=p.update=()=>L.run();D.id=p.uid,er(p,!0),D()},_e=(p,y,_)=>{y.component=p;const I=p.vnode.props;p.vnode=y,p.next=null,w0(p,y.props,I,_),E0(p,y.children,_),Di(),gf(),Ri()},ve=(p,y,_,I,N,k,V,P,L=!1)=>{const D=p&&p.children,G=p?p.shapeFlag:0,q=y.children,{patchFlag:W,shapeFlag:Z}=y;if(W>0){if(W&128){Jn(D,q,_,I,N,k,V,P,L);return}else if(W&256){Vt(D,q,_,I,N,k,V,P,L);return}}Z&8?(G&16&&j(D,N,k),q!==D&&l(_,q)):G&16?Z&16?Jn(D,q,_,I,N,k,V,P,L):j(D,N,k,!0):(G&8&&l(_,""),Z&16&&te(q,_,I,N,k,V,P,L))},Vt=(p,y,_,I,N,k,V,P,L)=>{p=p||Jr,y=y||Jr;const D=p.length,G=y.length,q=Math.min(D,G);let W;for(W=0;W<q;W++){const Z=y[W]=L?On(y[W]):nn(y[W]);m(p[W],Z,_,null,N,k,V,P,L)}D>G?j(p,N,k,!0,!1,q):te(y,_,I,N,k,V,P,L,q)},Jn=(p,y,_,I,N,k,V,P,L)=>{let D=0;const G=y.length;let q=p.length-1,W=G-1;for(;D<=q&&D<=W;){const Z=p[D],oe=y[D]=L?On(y[D]):nn(y[D]);if(or(Z,oe))m(Z,oe,_,null,N,k,V,P,L);else break;D++}for(;D<=q&&D<=W;){const Z=p[q],oe=y[W]=L?On(y[W]):nn(y[W]);if(or(Z,oe))m(Z,oe,_,null,N,k,V,P,L);else break;q--,W--}if(D>q){if(D<=W){const Z=W+1,oe=Z<G?y[Z].el:I;for(;D<=W;)m(null,y[D]=L?On(y[D]):nn(y[D]),_,oe,N,k,V,P,L),D++}}else if(D>W)for(;D<=q;)mt(p[D],N,k,!0),D++;else{const Z=D,oe=D,Ee=new Map;for(D=oe;D<=W;D++){const St=y[D]=L?On(y[D]):nn(y[D]);St.key!=null&&Ee.set(St.key,D)}let we,Le=0;const Bt=W-oe+1;let Vr=!1,rf=0;const qi=new Array(Bt);for(D=0;D<Bt;D++)qi[D]=0;for(D=Z;D<=q;D++){const St=p[D];if(Le>=Bt){mt(St,N,k,!0);continue}let Jt;if(St.key!=null)Jt=Ee.get(St.key);else for(we=oe;we<=W;we++)if(qi[we-oe]===0&&or(St,y[we])){Jt=we;break}Jt===void 0?mt(St,N,k,!0):(qi[Jt-oe]=D+1,Jt>=rf?rf=Jt:Vr=!0,m(St,y[Jt],_,null,N,k,V,P,L),Le++)}const of=Vr?C0(qi):Jr;for(we=of.length-1,D=Bt-1;D>=0;D--){const St=oe+D,Jt=y[St],sf=St+1<G?y[St+1].el:I;qi[D]===0?m(null,Jt,_,sf,N,k,V,P,L):Vr&&(we<0||D!==of[we]?jt(Jt,_,sf,2):we--)}}},jt=(p,y,_,I,N=null)=>{const{el:k,type:V,transition:P,children:L,shapeFlag:D}=p;if(D&6){jt(p.component.subTree,y,_,I);return}if(D&128){p.suspense.move(y,_,I);return}if(D&64){V.move(p,y,_,ae);return}if(V===Ct){r(k,y,_);for(let q=0;q<L.length;q++)jt(L[q],y,_,I);r(p.anchor,y,_);return}if(V===na){E(p,y,_);return}if(I!==2&&D&1&&P)if(I===0)P.beforeEnter(k),r(k,y,_),yt(()=>P.enter(k),N);else{const{leave:q,delayLeave:W,afterLeave:Z}=P,oe=()=>r(k,y,_),Ee=()=>{q(k,()=>{oe(),Z&&Z()})};W?W(k,oe,Ee):Ee()}else r(k,y,_)},mt=(p,y,_,I=!1,N=!1)=>{const{type:k,props:V,ref:P,children:L,dynamicChildren:D,shapeFlag:G,patchFlag:q,dirs:W}=p;if(P!=null&&Fa(P,null,_,p,!0),G&256){y.ctx.deactivate(p);return}const Z=G&1&&W,oe=!ws(p);let Ee;if(oe&&(Ee=V&&V.onVnodeBeforeUnmount)&&Zt(Ee,y,p),G&6)A(p.component,_,I);else{if(G&128){p.suspense.unmount(_,I);return}Z&&Zn(p,null,y,"beforeUnmount"),G&64?p.type.remove(p,y,_,N,ae,I):D&&(k!==Ct||q>0&&q&64)?j(D,y,_,!1,!0):(k===Ct&&q&384||!N&&G&16)&&j(L,y,_),I&&Ur(p)}(oe&&(Ee=V&&V.onVnodeUnmounted)||Z)&&yt(()=>{Ee&&Zt(Ee,y,p),Z&&Zn(p,null,y,"unmounted")},_)},Ur=p=>{const{type:y,el:_,anchor:I,transition:N}=p;if(y===Ct){Jo(_,I);return}if(y===na){M(p);return}const k=()=>{i(_),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(p.shapeFlag&1&&N&&!N.persisted){const{leave:V,delayLeave:P}=N,L=()=>V(_,k);P?P(p.el,k,L):L()}else k()},Jo=(p,y)=>{let _;for(;p!==y;)_=h(p),i(p),p=_;i(y)},A=(p,y,_)=>{const{bum:I,scope:N,update:k,subTree:V,um:P}=p;I&&ms(I),N.stop(),k&&(k.active=!1,mt(V,p,y,_)),P&&yt(P,y),yt(()=>{p.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},j=(p,y,_,I=!1,N=!1,k=0)=>{for(let V=k;V<p.length;V++)mt(p[V],y,_,I,N)},F=p=>p.shapeFlag&6?F(p.component.subTree):p.shapeFlag&128?p.suspense.next():h(p.anchor||p.el),z=(p,y,_)=>{p==null?y._vnode&&mt(y._vnode,null,null,!0):m(y._vnode||null,p,y,null,null,null,_),gf(),tp(),y._vnode=p},ae={p:m,um:mt,m:jt,r:Ur,mt:hn,mc:te,pc:ve,pbc:ye,n:F,o:e};let Ne,re;return t&&([Ne,re]=t(ae)),{render:z,hydrate:Ne,createApp:T0(z,Ne)}}function er({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ip(e,t,n=!1){const r=e.children,i=t.children;if(ee(r)&&ee(i))for(let o=0;o<r.length;o++){const s=r[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=On(i[o]),u.el=s.el),n||Ip(s,u)),u.type===yu&&(u.el=s.el)}}function C0(e){const t=e.slice(),n=[0];let r,i,o,s,u;const a=e.length;for(r=0;r<a;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=o+s>>1,e[n[u]]<c?o=u+1:s=u;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}const N0=e=>e.__isTeleport,Ct=Symbol(void 0),yu=Symbol(void 0),wn=Symbol(void 0),na=Symbol(void 0),Ji=[];let Ht=null;function on(e=!1){Ji.push(Ht=e?null:[])}function x0(){Ji.pop(),Ht=Ji[Ji.length-1]||null}let lo=1;function Sf(e){lo+=e}function D0(e){return e.dynamicChildren=lo>0?Ht||Jr:null,x0(),lo>0&&Ht&&Ht.push(e),e}function sn(e,t,n,r,i,o){return D0(pe(e,t,n,r,i,o,!0))}function Ua(e){return e?e.__v_isVNode===!0:!1}function or(e,t){return e.type===t.type&&e.key===t.key}const vu="__vInternal",Tp=({key:e})=>e??null,bs=({ref:e,ref_key:t,ref_for:n})=>e!=null?Ke(e)||it(e)||ne(e)?{i:Dt,r:e,k:t,f:!!n}:e:null;function pe(e,t=null,n=null,r=0,i=null,o=e===Ct?0:1,s=!1,u=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Tp(t),ref:t&&bs(t),scopeId:ip,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Dt};return u?(jc(a,n),o&128&&e.normalize(a)):n&&(a.shapeFlag|=Ke(n)?8:16),lo>0&&!s&&Ht&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Ht.push(a),a}const Oe=R0;function R0(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===c0)&&(e=wn),Ua(e)){const u=Kn(e,t,!0);return n&&jc(u,n),lo>0&&!o&&Ht&&(u.shapeFlag&6?Ht[Ht.indexOf(e)]=u:Ht.push(u)),u.patchFlag|=-2,u}if($0(e)&&(e=e.__vccOpts),t){t=O0(t);let{class:u,style:a}=t;u&&!Ke(u)&&(t.class=uu(u)),Ce(a)&&(Hd(a)&&!ee(a)&&(a=ut({},a)),t.style=Ic(a))}const s=Ke(e)?1:zv(e)?128:N0(e)?64:Ce(e)?4:ne(e)?2:0;return pe(e,t,n,r,i,s,o,!0)}function O0(e){return e?Hd(e)||vu in e?ut({},e):e:null}function Kn(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=e,u=t?P0(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Tp(u),ref:t&&t.ref?n&&i?ee(i)?i.concat(bs(t)):[i,bs(t)]:bs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ct?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Kn(e.ssContent),ssFallback:e.ssFallback&&Kn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Va(e=" ",t=0){return Oe(yu,null,e,t)}function nn(e){return e==null||typeof e=="boolean"?Oe(wn):ee(e)?Oe(Ct,null,e.slice()):typeof e=="object"?On(e):Oe(yu,null,String(e))}function On(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Kn(e)}function jc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ee(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),jc(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(vu in t)?t._ctx=Dt:i===3&&Dt&&(Dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:Dt},n=32):(t=String(t),r&64?(n=16,t=[Va(t)]):n=8);e.children=t,e.shapeFlag|=n}function P0(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=uu([t.class,r.class]));else if(i==="style")t.style=Ic([t.style,r.style]);else if(au(i)){const o=t[i],s=r[i];s&&o!==s&&!(ee(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function Zt(e,t,n,r=null){Ft(e,t,7,[n,r])}const k0=Ep();let L0=0;function M0(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||k0,o={uid:L0++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Pd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vp(r,i),emitsOptions:rp(r,i),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:r.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Bv.bind(null,o),e.ce&&e.ce(o),o}let Pe=null;const F0=()=>Pe||Dt,si=e=>{Pe=e,e.scope.on()},gr=()=>{Pe&&Pe.scope.off(),Pe=null};function Sp(e){return e.vnode.shapeFlag&4}let fo=!1;function U0(e,t=!1){fo=t;const{props:n,children:r}=e.vnode,i=Sp(e);v0(e,n,i,t),_0(e,r);const o=i?V0(e,t):void 0;return fo=!1,o}function V0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=kc(new Proxy(e.ctx,h0));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?B0(e):null;si(e),Di();const o=jn(r,e,0,[e.props,i]);if(Ri(),gr(),Dd(o)){if(o.then(gr,gr),t)return o.then(s=>{Af(e,s,t)}).catch(s=>{du(s,e,0)});e.asyncDep=o}else Af(e,o,t)}else Ap(e,t)}function Af(e,t,n){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=Yd(t)),Ap(e,n)}let Cf;function Ap(e,t,n){const r=e.type;if(!e.render){if(!t&&Cf&&!r.render){const i=r.template||Uc(e).template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:u,compilerOptions:a}=r,c=ut(ut({isCustomElement:o,delimiters:u},s),a);r.render=Cf(i,c)}}e.render=r.render||zt}si(e),Di(),d0(e),Ri(),gr()}function j0(e){return new Proxy(e.attrs,{get(t,n){return _t(e,"get","$attrs"),t[n]}})}function B0(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=j0(e))},slots:e.slots,emit:e.emit,expose:t}}function wu(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Yd(kc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xi)return Xi[n](e)},has(t,n){return n in t||n in Xi}}))}function q0(e,t=!0){return ne(e)?e.displayName||e.name:e.name||t&&e.__name}function $0(e){return ne(e)&&"__vccOpts"in e}const Mt=(e,t)=>Lv(e,t,fo);function Cp(e,t,n){const r=arguments.length;return r===2?Ce(t)&&!ee(t)?Ua(t)?Oe(e,null,[t]):Oe(e,t):Oe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ua(n)&&(n=[n]),Oe(e,t,n))}const K0=Symbol(""),H0=()=>vn(K0),z0="3.2.47",G0="http://www.w3.org/2000/svg",sr=typeof document<"u"?document:null,Nf=sr&&sr.createElement("template"),W0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?sr.createElementNS(G0,e):sr.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>sr.createTextNode(e),createComment:e=>sr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Nf.innerHTML=r?`<svg>${e}</svg>`:e;const u=Nf.content;if(r){const a=u.firstChild;for(;a.firstChild;)u.appendChild(a.firstChild);u.removeChild(a)}t.insertBefore(u,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Q0(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Y0(e,t,n){const r=e.style,i=Ke(n);if(n&&!i){if(t&&!Ke(t))for(const o in t)n[o]==null&&ja(r,o,"");for(const o in n)ja(r,o,n[o])}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const xf=/\s*!important$/;function ja(e,t,n){if(ee(n))n.forEach(r=>ja(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=X0(e,t);xf.test(n)?e.setProperty(xi(r),n.replace(xf,""),"important"):e[r]=n}}const Df=["Webkit","Moz","ms"],ra={};function X0(e,t){const n=ra[t];if(n)return n;let r=cn(t);if(r!=="filter"&&r in e)return ra[t]=r;r=fu(r);for(let i=0;i<Df.length;i++){const o=Df[i]+r;if(o in e)return ra[t]=o}return t}const Rf="http://www.w3.org/1999/xlink";function J0(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Rf,t.slice(6,t.length)):e.setAttributeNS(Rf,t,n);else{const o=zy(t);n==null||o&&!Cd(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function Z0(e,t,n,r,i,o,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,o),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n??"";(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Cd(n):n==null&&a==="string"?(n="",u=!0):a==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function $r(e,t,n,r){e.addEventListener(t,n,r)}function ew(e,t,n,r){e.removeEventListener(t,n,r)}function tw(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[u,a]=nw(t);if(r){const c=o[t]=ow(r,i);$r(e,u,c,a)}else s&&(ew(e,u,s,a),o[t]=void 0)}}const Of=/(?:Once|Passive|Capture)$/;function nw(e){let t;if(Of.test(e)){t={};let r;for(;r=e.match(Of);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xi(e.slice(2)),t]}let ia=0;const rw=Promise.resolve(),iw=()=>ia||(rw.then(()=>ia=0),ia=Date.now());function ow(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ft(sw(r,n.value),t,5,[r])};return n.value=e,n.attached=iw(),n}function sw(e,t){if(ee(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Pf=/^on[a-z]/,uw=(e,t,n,r,i=!1,o,s,u,a)=>{t==="class"?Q0(e,r,i):t==="style"?Y0(e,n,r):au(t)?Tc(t)||tw(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):aw(e,t,r,i))?Z0(e,t,r,o,s,u,a):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),J0(e,t,r,i))};function aw(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Pf.test(t)&&ne(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Pf.test(t)&&Ke(n)?!1:t in e}const cw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Xv.props;const kf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ee(t)?n=>ms(t,n):t};function lw(e){e.target.composing=!0}function Lf(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Mf={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=kf(i);const o=r||i.props&&i.props.type==="number";$r(e,t?"change":"input",s=>{if(s.target.composing)return;let u=e.value;n&&(u=u.trim()),o&&(u=Ta(u)),e._assign(u)}),n&&$r(e,"change",()=>{e.value=e.value.trim()}),t||($r(e,"compositionstart",lw),$r(e,"compositionend",Lf),$r(e,"change",Lf))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=kf(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ta(e.value)===t))return;const s=t??"";e.value!==s&&(e.value=s)}},fw=["ctrl","shift","alt","meta"],hw={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>fw.some(n=>e[`${n}Key`]&&!t.includes(n))},dw=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const o=hw[t[i]];if(o&&o(n,t))return}return e(n,...r)},pw=ut({patchProp:uw},W0);let Ff;function gw(){return Ff||(Ff=S0(pw))}const mw=(...e)=>{const t=gw().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=yw(r);if(!i)return;const o=t._component;!ne(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function yw(e){return Ke(e)?document.querySelector(e):e}let os;const vw=new Uint8Array(16);function ww(){if(!os&&(os=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!os))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return os(vw)}const Ge=[];for(let e=0;e<256;++e)Ge.push((e+256).toString(16).slice(1));function bw(e,t=0){return(Ge[e[t+0]]+Ge[e[t+1]]+Ge[e[t+2]]+Ge[e[t+3]]+"-"+Ge[e[t+4]]+Ge[e[t+5]]+"-"+Ge[e[t+6]]+Ge[e[t+7]]+"-"+Ge[e[t+8]]+Ge[e[t+9]]+"-"+Ge[e[t+10]]+Ge[e[t+11]]+Ge[e[t+12]]+Ge[e[t+13]]+Ge[e[t+14]]+Ge[e[t+15]]).toLowerCase()}const _w=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Uf={randomUUID:_w};function Ew(e,t,n){if(Uf.randomUUID&&!t&&!e)return Uf.randomUUID();e=e||{};const r=e.random||(e.rng||ww)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return bw(r)}const Nr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Iw={},Tw={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Sw=pe("path",{fill:"currentColor",d:"m16.9 17.3l-4.6-4.6q-.15-.15-.213-.325T12.026 12q0-.2.063-.375t.212-.325l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L14.425 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Zm-6.6 0l-4.6-4.6q-.15-.15-.213-.325T5.425 12q0-.2.063-.375T5.7 11.3l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L7.825 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Z"},null,-1),Aw=[Sw];function Cw(e,t){return on(),sn("svg",Tw,Aw)}const Nw=Nr(Iw,[["render",Cw]]),xw={},Dw={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Rw=pe("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[pe("circle",{cx:"12",cy:"12",r:"10"}),pe("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),Ow=[Rw];function Pw(e,t){return on(),sn("svg",Dw,Ow)}const kw=Nr(xw,[["render",Pw]]),Lw={},Mw={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Fw=pe("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[pe("circle",{cx:"12",cy:"12",r:"10"}),pe("path",{"stroke-linecap":"round",d:"M15 12h-3m0 0H9m3 0V9m0 3v3"})],-1),Uw=[Fw];function Vw(e,t){return on(),sn("svg",Mw,Uw)}const jw=Nr(Lw,[["render",Vw]]);var Ba=function(e,t){return Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ba(e,t)};function Q(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ba(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ho=function(){return ho=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ho.apply(this,arguments)};function C(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(l){try{c(r.next(l))}catch(f){s(f)}}function a(l){try{c(r.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(u,a)}c((r=r.apply(e,t||[])).next())})}function S(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(l){return a([c,l])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function oa(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ss(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Re(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Bw=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=e[n++],s=e[n++],u=e[n++],a=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(a&1023))}else{var o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,u=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=o>>2,f=(o&3)<<4|u>>4,h=(u&15)<<2|c>>6,d=c&63;a||(d=64,s||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Np(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Bw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length,u=s?n[e.charAt(i)]:0;++i;var a=i<e.length,c=a?n[e.charAt(i)]:64;++i;var l=i<e.length,f=l?n[e.charAt(i)]:64;if(++i,o==null||u==null||c==null||f==null)throw Error();var h=o<<2|u>>4;if(r.push(h),c!==64){var d=u<<4&240|c>>2;if(r.push(d),f!==64){var g=c<<6&192|f;r.push(g)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},$w=function(e){var t=Np(e);return qw.encodeByteArray(t,!0)},Vf=function(e){return $w(e).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(e){return po(void 0,e)}function po(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!Hw(r)||(e[r]=po(e[r],t[r]));return e}function Hw(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zw=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=ho({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[Vf(JSON.stringify(n)),Vf(JSON.stringify(s)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ww(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function xp(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qw(){return typeof self=="object"&&self.self===self}function Yw(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Xw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jw(){return wr().indexOf("Electron/")>=0}function Zw(){var e=wr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function eb(){return wr().indexOf("MSAppHost/")>=0}function tb(){return!xp()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nb="FirebaseError",rb=function(e){Q(t,e);function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=nb,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Bc.prototype.create),o}return t}(Error),Bc=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},o=this.service+"/"+t,s=this.errors[t],u=s?ib(s,i):"Error",a=this.serviceName+": "+u+" ("+o+").",c=new rb(o,a,i);return c},e}();function ib(e,t){return e.replace(ob,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var ob=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function sb(e,t){var n=new ub(e,t);return n.subscribe.bind(n)}var ub=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ab(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=sa),o.error===void 0&&(o.error=sa),o.complete===void 0&&(o.complete=sa);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function ab(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function sa(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(e){return e&&e._delegate?e._delegate:e}var bu=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cb=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new zw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(fb(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}try{for(var i=oa(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=ss(o.value,2),u=s[0],a=s[1],c=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:c});a.resolve(l)}catch{}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=rr),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Re(Re([],ss(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),ss(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=rr),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=rr),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var a=oa(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var l=ss(c.value,2),f=l[0],h=l[1],d=this.normalizeInstanceIdentifier(f);s===d&&h.resolve(u)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return u},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&t(s,i),function(){o.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,o=this.onInitCallbacks.get(n);if(o)try{for(var s=oa(o),u=s.next();!u.done;u=s.next()){var a=u.value;try{a(t,n)}catch{}}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:lb(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=rr),this.component?this.component.multipleInstances?t:rr:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function lb(e){return e===rr?void 0:e}function fb(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hb=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new cb(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function qt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr,qc=[],fe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(fe||(fe={}));var Dp={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},db=fe.INFO,pb=(tr={},tr[fe.DEBUG]="log",tr[fe.VERBOSE]="log",tr[fe.INFO]="info",tr[fe.WARN]="warn",tr[fe.ERROR]="error",tr),gb=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),o=pb[t];if(o)console[o].apply(console,qt(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Rp=function(){function e(t){this.name=t,this._logLevel=db,this._logHandler=gb,this._userLogHandler=null,qc.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in fe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?Dp[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,fe.DEBUG],t)),this._logHandler.apply(this,qt([this,fe.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,fe.VERBOSE],t)),this._logHandler.apply(this,qt([this,fe.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,fe.INFO],t)),this._logHandler.apply(this,qt([this,fe.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,fe.WARN],t)),this._logHandler.apply(this,qt([this,fe.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,fe.ERROR],t)),this._logHandler.apply(this,qt([this,fe.ERROR],t))},e}();function mb(e){qc.forEach(function(t){t.setLogLevel(e)})}function yb(e,t){for(var n=function(s){var u=null;t&&t.level&&(u=Dp[t.level]),e===null?s.userLogHandler=null:s.userLogHandler=function(a,c){for(var l=[],f=2;f<arguments.length;f++)l[f-2]=arguments[f];var h=l.map(function(d){if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(function(d){return d}).join(" ");c>=(u??a.logLevel)&&e({level:fe[c].toLowerCase(),message:h,args:l,type:a.name})}},r=0,i=qc;r<i.length;r++){var o=i[r];n(o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,vb=(Nn={},Nn["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Nn["bad-app-name"]="Illegal App name: '{$appName}",Nn["duplicate-app"]="Firebase App named '{$appName}' already exists",Nn["app-deleted"]="Firebase App named '{$appName}' already deleted",Nn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Nn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Nn),Kr=new Bc("app","Firebase",vb),Op="@firebase/app",wb="0.6.30",bb="@firebase/analytics",_b="@firebase/app-check",Eb="@firebase/auth",Ib="@firebase/database",Tb="@firebase/functions",Sb="@firebase/installations",Ab="@firebase/messaging",Cb="@firebase/performance",Nb="@firebase/remote-config",xb="@firebase/storage",Db="@firebase/firestore",Rb="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,Os="[DEFAULT]",Ob=(et={},et[Op]="fire-core",et[bb]="fire-analytics",et[_b]="fire-app-check",et[Eb]="fire-auth",et[Ib]="fire-rtdb",et[Tb]="fire-fn",et[Sb]="fire-iid",et[Ab]="fire-fcm",et[Cb]="fire-perf",et[Nb]="fire-rc",et[xb]="fire-gcs",et[Db]="fire-fst",et["fire-js"]="fire-js",et[Rb]="fire-js-all",et);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui=new Rp("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _s=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=Kw(t),this.container=new hb(n.name),this._addComponent(new bu("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(o){return i._addComponent(o)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=Os),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=Os),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){ui.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Kr.create("app-deleted",{appName:this.name_})},e}();_s.prototype.name&&_s.prototype.options||_s.prototype.delete||console.log("dc");var Pb="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(e){var t={},n=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:c,setLogLevel:mb,onLog:l,apps:null,SDK_VERSION:Pb,INTERNAL:{registerComponent:a,removeApp:i,components:n,useAsService:f}};r.default=r,Object.defineProperty(r,"apps",{get:u});function i(h){delete t[h]}function o(h){if(h=h||Os,!jf(t,h))throw Kr.create("no-app",{appName:h});return t[h]}o.App=e;function s(h,d){if(d===void 0&&(d={}),typeof d!="object"||d===null){var g=d;d={name:g}}var m=d;m.name===void 0&&(m.name=Os);var w=m.name;if(typeof w!="string"||!w)throw Kr.create("bad-app-name",{appName:String(w)});if(jf(t,w))throw Kr.create("duplicate-app",{appName:w});var v=new e(h,m,r);return t[w]=v,v}function u(){return Object.keys(t).map(function(h){return t[h]})}function a(h){var d=h.name;if(n.has(d))return ui.debug("There were multiple attempts to register component "+d+"."),h.type==="PUBLIC"?r[d]:null;if(n.set(d,h),h.type==="PUBLIC"){var g=function(T){if(T===void 0&&(T=o()),typeof T[d]!="function")throw Kr.create("invalid-app-argument",{appName:d});return T[d]()};h.serviceProps!==void 0&&po(g,h.serviceProps),r[d]=g,e.prototype[d]=function(){for(var T=[],E=0;E<arguments.length;E++)T[E]=arguments[E];var M=this._getService.bind(this,d);return M.apply(this,h.multipleInstances?T:[])}}for(var m=0,w=Object.keys(t);m<w.length;m++){var v=w[m];t[v]._addComponent(h)}return h.type==="PUBLIC"?r[d]:null}function c(h,d,g){var m,w=(m=Ob[h])!==null&&m!==void 0?m:h;g&&(w+="-"+g);var v=w.match(/\s|\//),T=d.match(/\s|\//);if(v||T){var E=['Unable to register library "'+w+'" with version "'+d+'":'];v&&E.push('library name "'+w+'" contains illegal characters (whitespace or "/")'),v&&T&&E.push("and"),T&&E.push('version name "'+d+'" contains illegal characters (whitespace or "/")'),ui.warn(E.join(" "));return}a(new bu(w+"-version",function(){return{library:w,version:d}},"VERSION"))}function l(h,d){if(h!==null&&typeof h!="function")throw Kr.create("invalid-log-argument");yb(h,d)}function f(h,d){if(d==="serverAuth")return null;var g=d;return g}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){var e=kb(_s);e.INTERNAL=ho(ho({},e.INTERNAL),{createFirebaseNamespace:Pp,extendNamespace:t,createSubscribe:sb,ErrorFactory:Bc,deepExtend:po});function t(n){po(e,n)}return e}var $c=Pp();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lb=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(Mb(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function Mb(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(e,t){e.INTERNAL.registerComponent(new bu("platform-logger",function(n){return new Lb(n)},"PRIVATE")),e.registerVersion(Op,wb,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Qw()&&self.firebase!==void 0){ui.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var Bf=self.firebase.SDK_VERSION;Bf&&Bf.indexOf("LITE")>=0&&ui.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Ub=$c.initializeApp;$c.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xp()&&ui.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),Ub.apply(void 0,e)};var Oi=$c;Fb(Oi);var Vb="firebase",kp="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi.registerVersion(Vb,kp,"app");Oi.SDK_VERSION=kp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qa=function(e,t){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},qa(e,t)};function jb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qa(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Lp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,Kc=Kc||{},J=Bb||self;function Ps(){}function $a(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Po(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function qb(e){return Object.prototype.hasOwnProperty.call(e,ua)&&e[ua]||(e[ua]=++$b)}var ua="closure_uid_"+(1e9*Math.random()>>>0),$b=0;function Kb(e,t,n){return e.call.apply(e.bind,arguments)}function Hb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Ye(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ye=Kb:Ye=Hb,Ye.apply(null,arguments)}function us(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Je(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,o){for(var s=Array(arguments.length-2),u=2;u<arguments.length;u++)s[u-2]=arguments[u];return t.prototype[i].apply(r,s)}}function Gn(){this.s=this.s,this.o=this.o}var zb=0;Gn.prototype.s=!1;Gn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),zb!=0)&&qb(this)};Gn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Mp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Fp=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Gb(e){e:{for(var t=U_,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function qf(e){return Array.prototype.concat.apply([],arguments)}function Hc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ks(e){return/^[\s\xa0]*$/.test(e)}var $f=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ht(e,t){return e.indexOf(t)!=-1}function aa(e,t){return e<t?-1:e>t?1:0}var dt;e:{var Kf=J.navigator;if(Kf){var Hf=Kf.userAgent;if(Hf){dt=Hf;break e}}dt=""}function zc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Up(e){var t={};for(var n in e)t[n]=e[n];return t}var zf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vp(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<zf.length;o++)n=zf[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Gc(e){return Gc[" "](e),e}Gc[" "]=Ps;function Wb(e){var t=Xb;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var Qb=ht(dt,"Opera"),ai=ht(dt,"Trident")||ht(dt,"MSIE"),jp=ht(dt,"Edge"),Ka=jp||ai,Bp=ht(dt,"Gecko")&&!(ht(dt.toLowerCase(),"webkit")&&!ht(dt,"Edge"))&&!(ht(dt,"Trident")||ht(dt,"MSIE"))&&!ht(dt,"Edge"),Yb=ht(dt.toLowerCase(),"webkit")&&!ht(dt,"Edge");function qp(){var e=J.document;return e?e.documentMode:void 0}var Ls;e:{var ca="",la=function(){var e=dt;if(Bp)return/rv:([^\);]+)(\)|;)/.exec(e);if(jp)return/Edge\/([\d\.]+)/.exec(e);if(ai)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Yb)return/WebKit\/(\S+)/.exec(e);if(Qb)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(la&&(ca=la?la[1]:""),ai){var fa=qp();if(fa!=null&&fa>parseFloat(ca)){Ls=String(fa);break e}}Ls=ca}var Xb={};function Jb(){return Wb(function(){for(var e=0,t=$f(String(Ls)).split("."),n=$f("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;e=aa(o[1].length==0?0:parseInt(o[1],10),s[1].length==0?0:parseInt(s[1],10))||aa(o[2].length==0,s[2].length==0)||aa(o[2],s[2]),o=o[3],s=s[3]}while(e==0)}return 0<=e})}var Ha;if(J.document&&ai){var Gf=qp();Ha=Gf||parseInt(Ls,10)||void 0}else Ha=void 0;var Zb=Ha,e_=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{J.addEventListener("test",Ps,t),J.removeEventListener("test",Ps,t)}catch{}return e}();function st(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};function go(e,t){if(st.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bp){e:{try{Gc(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:t_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&go.Z.h.call(this)}}Je(go,st);var t_={2:"touch",3:"pen",4:"mouse"};go.prototype.h=function(){go.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ko="closure_listenable_"+(1e6*Math.random()|0),n_=0;function r_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++n_,this.ca=this.fa=!1}function _u(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Eu(e){this.src=e,this.g={},this.h=0}Eu.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=Ga(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):(t=new r_(t,this.src,o,!!r,i),t.fa=n,e.push(t)),t};function za(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=Mp(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(_u(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ga(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}var Wc="closure_lm_"+(1e6*Math.random()|0),ha={};function $p(e,t,n,r,i){if(r&&r.once)return Hp(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)$p(e,t[o],n,r,i);return null}return n=Xc(n),e&&e[ko]?e.N(t,n,Po(r)?!!r.capture:!!r,i):Kp(e,t,n,!1,r,i)}function Kp(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Po(i)?!!i.capture:!!i,u=Yc(e);if(u||(e[Wc]=u=new Eu(e)),n=u.add(t,n,r,s,o),n.proxy)return n;if(r=i_(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)e_||(i=s),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gp(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function i_(){function e(n){return t.call(e.src,e.listener,n)}var t=o_;return e}function Hp(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Hp(e,t[o],n,r,i);return null}return n=Xc(n),e&&e[ko]?e.O(t,n,Po(r)?!!r.capture:!!r,i):Kp(e,t,n,!0,r,i)}function zp(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)zp(e,t[o],n,r,i);else r=Po(r)?!!r.capture:!!r,n=Xc(n),e&&e[ko]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=Ga(o,n,r,i),-1<n&&(_u(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Yc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ga(t,n,r,i)),(n=-1<e?t[e]:null)&&Qc(n))}function Qc(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[ko])za(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yc(t))?(za(n,e),n.h==0&&(n.src=null,t[Wc]=null)):_u(e)}}}function Gp(e){return e in ha?ha[e]:ha[e]="on"+e}function o_(e,t){if(e.ca)e=!0;else{t=new go(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Qc(e),e=n.call(r,t)}return e}function Yc(e){return e=e[Wc],e instanceof Eu?e:null}var da="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xc(e){return typeof e=="function"?e:(e[da]||(e[da]=function(t){return e.handleEvent(t)}),e[da])}function ze(){Gn.call(this),this.i=new Eu(this),this.P=this,this.I=null}Je(ze,Gn);ze.prototype[ko]=!0;ze.prototype.removeEventListener=function(e,t,n,r){zp(this,e,t,n,r)};function Xe(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new st(t,e);else if(t instanceof st)t.target=t.target||e;else{var i=t;t=new st(r,e),Vp(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=as(s,r,!0,t)&&i}if(s=t.g=e,i=as(s,r,!0,t)&&i,i=as(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=as(s,r,!1,t)&&i}ze.prototype.M=function(){if(ze.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)_u(n[r]);delete e.g[t],e.h--}}this.I=null};ze.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};ze.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function as(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ca&&s.capture==n){var u=s.listener,a=s.ia||s.src;s.fa&&za(e.i,s),i=u.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var Jc=J.JSON.stringify;function s_(){var e=Qp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var u_=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=Wp.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),Wp=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new a_},function(e){return e.reset()}),a_=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function c_(e){J.setTimeout(function(){throw e},0)}function Zc(e,t){Wa||l_(),Qa||(Wa(),Qa=!0),Qp.add(e,t)}var Wa;function l_(){var e=J.Promise.resolve(void 0);Wa=function(){e.then(f_)}}var Qa=!1,Qp=new u_;function f_(){for(var e;e=s_();){try{e.h.call(e.g)}catch(n){c_(n)}var t=Wp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Qa=!1}function Iu(e,t){ze.call(this),this.h=e||1,this.g=t||J,this.j=Ye(this.kb,this),this.l=Date.now()}Je(Iu,ze);B=Iu.prototype;B.da=!1;B.S=null;B.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xe(this,"tick"),this.da&&(el(this),this.start()))}};B.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function el(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}B.M=function(){Iu.Z.M.call(this),el(this),delete this.g};function tl(e,t,n){if(typeof e=="function")n&&(e=Ye(e,n));else if(e&&typeof e.handleEvent=="function")e=Ye(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:J.setTimeout(e,t||0)}function Yp(e){e.g=tl(function(){e.g=null,e.i&&(e.i=!1,Yp(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var h_=function(e){jb(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:Yp(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Gn);function mo(e){Gn.call(this),this.h=e,this.g={}}Je(mo,Gn);var Wf=[];function Xp(e,t,n,r){Array.isArray(n)||(n&&(Wf[0]=n.toString()),n=Wf);for(var i=0;i<n.length;i++){var o=$p(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Jp(e){zc(e.g,function(t,n){this.g.hasOwnProperty(n)&&Qc(t)},e),e.g={}}mo.prototype.M=function(){mo.Z.M.call(this),Jp(this)};mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Tu(){this.g=!0}Tu.prototype.Aa=function(){this.g=!1};function d_(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");s=2<=f.length&&f[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+s})}function p_(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+o+" "+s})}function Qr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+m_(e,n)+(r?" "+r:"")})}function g_(e,t){e.info(function(){return"TIMEOUT: "+t})}Tu.prototype.info=function(){};function m_(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Jc(n)}catch{return t}}var xr={},Qf=null;function Su(){return Qf=Qf||new ze}xr.Ma="serverreachability";function Zp(e){st.call(this,xr.Ma,e)}Je(Zp,st);function yo(e){var t=Su();Xe(t,new Zp(t))}xr.STAT_EVENT="statevent";function eg(e,t){st.call(this,xr.STAT_EVENT,e),this.stat=t}Je(eg,st);function pt(e){var t=Su();Xe(t,new eg(t,e))}xr.Na="timingevent";function tg(e,t){st.call(this,xr.Na,e),this.size=t}Je(tg,st);function Lo(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){e()},t)}var Au={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ng={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function nl(){}nl.prototype.h=null;function Yf(e){return e.h||(e.h=e.i())}function rg(){}var Mo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rl(){st.call(this,"d")}Je(rl,st);function il(){st.call(this,"c")}Je(il,st);var Ya;function Cu(){}Je(Cu,nl);Cu.prototype.g=function(){return new XMLHttpRequest};Cu.prototype.i=function(){return{}};Ya=new Cu;function Fo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new mo(this),this.P=y_,e=Ka?125:void 0,this.W=new Iu(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ig}function ig(){this.i=null,this.g="",this.h=!1}var y_=45e3,Xa={},Ms={};B=Fo.prototype;B.setTimeout=function(e){this.P=e};function Ja(e,t,n){e.K=1,e.v=xu(Tn(t)),e.s=n,e.U=!0,og(e,null)}function og(e,t){e.F=Date.now(),Uo(e),e.A=Tn(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),hg(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ig,e.g=Og(e.l,n?t:null,!e.s),0<e.O&&(e.L=new h_(Ye(e.Ia,e,e.g),e.O)),Xp(e.V,e.g,"readystatechange",e.gb),t=e.H?Up(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),yo(),d_(e.j,e.u,e.A,e.m,e.X,e.s)}B.gb=function(e){e=e.target;var t=this.L;t&&gn(e)==3?t.l():this.Ia(e)};B.Ia=function(e){try{if(e==this.g)e:{var t=gn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||Ka||this.g&&(this.h.h||this.g.ga()||eh(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?yo(3):yo(2)),Nu(this);var i=this.g.ba();this.N=i;t:if(sg(this)){var o=eh(this.g);e="";var s=o.length,u=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),Zi(this);var a="";break t}this.h.i=new J.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:u&&n==s-1});o.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=i==200,p_(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ks(c)){var f=c;break t}}f=null}if(i=f)Qr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Za(this,i);else{this.i=!1,this.o=3,pt(12),cr(this),Zi(this);break e}}this.U?(ug(this,t,a),Ka&&this.i&&t==3&&(Xp(this.V,this.W,"tick",this.fb),this.W.start())):(Qr(this.j,this.m,a,null),Za(this,a)),t==4&&cr(this),this.i&&!this.I&&(t==4?Ng(this.l,this):(this.i=!1,Uo(this)))}else i==400&&0<a.indexOf("Unknown SID")?(this.o=3,pt(12)):(this.o=0,pt(13)),cr(this),Zi(this)}}}catch{}finally{}};function sg(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function ug(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=v_(e,n),i==Ms){t==4&&(e.o=4,pt(14),r=!1),Qr(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Xa){e.o=4,pt(15),Qr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Qr(e.j,e.m,i,null),Za(e,i);sg(e)&&i!=Ms&&i!=Xa&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,pt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),dl(t),t.L=!0,pt(11))):(Qr(e.j,e.m,n,"[Invalid Chunked Response]"),cr(e),Zi(e))}B.fb=function(){if(this.g){var e=gn(this.g),t=this.g.ga();this.C<t.length&&(Nu(this),ug(this,e,t),this.i&&e!=4&&Uo(this))}};function v_(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Ms:(n=Number(t.substring(n,r)),isNaN(n)?Xa:(r+=1,r+n>t.length?Ms:(t=t.substr(r,n),e.C=r+n,t)))}B.cancel=function(){this.I=!0,cr(this)};function Uo(e){e.Y=Date.now()+e.P,ag(e,e.P)}function ag(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Lo(Ye(e.eb,e),t)}function Nu(e){e.B&&(J.clearTimeout(e.B),e.B=null)}B.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(g_(this.j,this.A),this.K!=2&&(yo(),pt(17)),cr(this),this.o=2,Zi(this)):ag(this,this.Y-e)};function Zi(e){e.l.G==0||e.I||Ng(e.l,e)}function cr(e){Nu(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,el(e.W),Jp(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Za(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||ec(n.i,e))){if(n.I=e.N,!e.J&&ec(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)js(n),Ou(n);else break e;hl(n),pt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Lo(Ye(n.ab,n),6e3));if(1>=gg(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else lr(n,11)}else if((e.J||n.g==e)&&js(n),!ks(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],n.G==2)if(o[0]=="c"){n.J=o[1],n.la=o[2];var s=o[3];s!=null&&(n.ma=s,n.h.info("VER="+n.ma));var u=o[4];u!=null&&(n.za=u,n.h.info("SVER="+n.za));var a=o[5];a!=null&&typeof a=="number"&&0<a&&(r=1.5*a,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ht(l,"spdy")||ht(l,"quic")||ht(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ul(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ae(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=e;if(r.oa=Rg(r,r.H?r.la:null,r.W),d.J){mg(r.i,d);var g=d,m=r.K;m&&g.setTimeout(m),g.B&&(Nu(g),Uo(g)),r.g=d}else Ag(r);0<n.l.length&&Pu(n)}else o[0]!="stop"&&o[0]!="close"||lr(n,7);else n.G==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?lr(n,7):fl(n):o[0]!="noop"&&n.j&&n.j.wa(o),n.A=0)}}yo(4)}catch{}}function w_(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if($a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function ol(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if($a(e)||typeof e=="string")Fp(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if($a(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=w_(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Pi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pi)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}B=Pi.prototype;B.R=function(){sl(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};B.T=function(){return sl(this),this.g.concat()};function sl(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];br(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],br(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}B.get=function(e,t){return br(this.h,e)?this.h[e]:t};B.set=function(e,t){br(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};B.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};function br(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var cg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function b_(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function _r(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof _r){this.g=t!==void 0?t:e.g,Fs(this,e.j),this.s=e.s,Us(this,e.i),Vs(this,e.m),this.l=e.l,t=e.h;var n=new vo;n.i=t.i,t.g&&(n.g=new Pi(t.g),n.h=t.h),Xf(this,n),this.o=e.o}else e&&(n=String(e).match(cg))?(this.g=!!t,Fs(this,n[1]||"",!0),this.s=eo(n[2]||""),Us(this,n[3]||"",!0),Vs(this,n[4]),this.l=eo(n[5]||"",!0),Xf(this,n[6]||"",!0),this.o=eo(n[7]||"")):(this.g=!!t,this.h=new vo(null,this.g))}_r.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wi(t,Jf,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Wi(t,Jf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Wi(n,n.charAt(0)=="/"?S_:T_,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wi(n,C_)),e.join("")};function Tn(e){return new _r(e)}function Fs(e,t,n){e.j=n?eo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Us(e,t,n){e.i=n?eo(t,!0):t}function Vs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xf(e,t,n){t instanceof vo?(e.h=t,N_(e.h,e.g)):(n||(t=Wi(t,A_)),e.h=new vo(t,e.g))}function Ae(e,t,n){e.h.set(t,n)}function xu(e){return Ae(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function __(e){return e instanceof _r?Tn(e):new _r(e,void 0)}function E_(e,t,n,r){var i=new _r(null,void 0);return e&&Fs(i,e),t&&Us(i,t),n&&Vs(i,n),r&&(i.l=r),i}function eo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wi(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,I_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function I_(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Jf=/[#\/\?@]/g,T_=/[#\?:]/g,S_=/[#\?]/g,A_=/[#\?@]/g,C_=/#/g;function vo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wn(e){e.g||(e.g=new Pi,e.h=0,e.i&&b_(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}B=vo.prototype;B.add=function(e,t){Wn(this),this.i=null,e=ki(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function lg(e,t){Wn(e),t=ki(e,t),br(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,br(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&sl(e)))}function fg(e,t){return Wn(e),t=ki(e,t),br(e.g.h,t)}B.forEach=function(e,t){Wn(this),this.g.forEach(function(n,r){Fp(n,function(i){e.call(t,i,r,this)},this)},this)};B.T=function(){Wn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n};B.R=function(e){Wn(this);var t=[];if(typeof e=="string")fg(this,e)&&(t=qf(t,this.g.get(ki(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=qf(t,e[n])}return t};B.set=function(e,t){return Wn(this),this.i=null,e=ki(this,e),fg(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};B.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function hg(e,t,n){lg(e,t),0<n.length&&(e.i=null,e.g.set(ki(e,t),Hc(n)),e.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;r[o]!==""&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.i=e.join("&")};function ki(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function N_(e,t){t&&!e.j&&(Wn(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(lg(this,r),hg(this,i,n))},e)),e.j=t}var x_=function(){function e(t,n){this.h=t,this.g=n}return e}();function dg(e){this.l=e||D_,J.PerformanceNavigationTiming?(e=J.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(J.g&&J.g.Ea&&J.g.Ea()&&J.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var D_=10;function pg(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function gg(e){return e.h?1:e.g?e.g.size:0}function ec(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function ul(e,t){e.g?e.g.add(t):e.h=t}function mg(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}dg.prototype.cancel=function(){var e,t;if(this.i=yg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=Lp(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function yg(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=Lp(e.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Hc(e.i)}function al(){}al.prototype.stringify=function(e){return J.JSON.stringify(e,void 0)};al.prototype.parse=function(e){return J.JSON.parse(e,void 0)};function R_(){this.g=new al}function O_(e,t,n){var r=n||"";try{ol(e,function(i,o){var s=i;Po(i)&&(s=Jc(i)),t.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function P_(e,t){var n=new Tu;if(J.Image){var r=new Image;r.onload=us(cs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=us(cs,n,r,"TestLoadImage: error",!1,t),r.onabort=us(cs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=us(cs,n,r,"TestLoadImage: timeout",!1,t),J.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function cs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Vo(e){this.l=e.$b||null,this.j=e.ib||!1}Je(Vo,nl);Vo.prototype.g=function(){return new Du(this.l,this.j)};Vo.prototype.i=function(e){return function(){return e}}({});function Du(e,t){ze.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=cl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Je(Du,ze);var cl=0;B=Du.prototype;B.open=function(e,t){if(this.readyState!=cl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,wo(this)};B.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||J).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=cl};B.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vg(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function vg(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}B.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jo(this):wo(this),this.readyState==3&&vg(this)}};B.Ua=function(e){this.g&&(this.response=this.responseText=e,jo(this))};B.Ta=function(e){this.g&&(this.response=e,jo(this))};B.ha=function(){this.g&&jo(this)};function jo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,wo(e)}B.setRequestHeader=function(e,t){this.v.append(e,t)};B.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function wo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var k_=J.JSON.parse;function je(e){ze.call(this),this.headers=new Pi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wg,this.K=this.L=!1}Je(je,ze);var wg="",L_=/^https?$/i,M_=["POST","PUT"];B=je.prototype;B.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ya.g(),this.C=this.u?Yf(this.u):Yf(Ya),this.g.onreadystatechange=Ye(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){Zf(this,o);return}e=n||"";var i=new Pi(this.headers);r&&ol(r,function(o,s){i.set(s,o)}),r=Gb(i.T()),n=J.FormData&&e instanceof J.FormData,!(0<=Mp(M_,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,s){this.g.setRequestHeader(s,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Eg(this),0<this.B&&((this.K=F_(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.pa,this)):this.A=tl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Zf(this,o)}};function F_(e){return ai&&Jb()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function U_(e){return e.toLowerCase()=="content-type"}B.pa=function(){typeof Kc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xe(this,"timeout"),this.abort(8))};function Zf(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,bg(e),Ru(e)}function bg(e){e.D||(e.D=!0,Xe(e,"complete"),Xe(e,"error"))}B.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Xe(this,"complete"),Xe(this,"abort"),Ru(this))};B.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ru(this,!0)),je.Z.M.call(this)};B.Fa=function(){this.s||(this.F||this.v||this.l?_g(this):this.cb())};B.cb=function(){_g(this)};function _g(e){if(e.h&&typeof Kc<"u"&&(!e.C[1]||gn(e)!=4||e.ba()!=2)){if(e.v&&gn(e)==4)tl(e.Fa,0,e);else if(Xe(e,"readystatechange"),gn(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var o=String(e.H).match(cg)[1]||null;if(!o&&J.self&&J.self.location){var s=J.self.location.protocol;o=s.substr(0,s.length-1)}i=!L_.test(o?o.toLowerCase():"")}r=i}if(r)Xe(e,"complete"),Xe(e,"success");else{e.m=6;try{var u=2<gn(e)?e.g.statusText:""}catch{u=""}e.j=u+" ["+e.ba()+"]",bg(e)}}finally{Ru(e)}}}}function Ru(e,t){if(e.g){Eg(e);var n=e.g,r=e.C[0]?Ps:null;e.g=null,e.C=null,t||Xe(e,"ready");try{n.onreadystatechange=r}catch{}}}function Eg(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(J.clearTimeout(e.A),e.A=null)}function gn(e){return e.g?e.g.readyState:0}B.ba=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};B.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),k_(t)}};function eh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case wg:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}B.Da=function(){return this.m};B.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function V_(e){var t="";return zc(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function ll(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=V_(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Ae(e,t,n))}function $i(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ig(e){this.za=0,this.l=[],this.h=new Tu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$i("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$i("baseRetryDelayMs",5e3,e),this.$a=$i("retryDelaySeedMs",1e4,e),this.Ya=$i("forwardChannelMaxRetries",2,e),this.ra=$i("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new dg(e&&e.concurrentRequestLimit),this.Ca=new R_,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}B=Ig.prototype;B.ma=8;B.G=1;function fl(e){if(Tg(e),e.G==3){var t=e.V++,n=Tn(e.F);Ae(n,"SID",e.J),Ae(n,"RID",t),Ae(n,"TYPE","terminate"),Bo(e,n),t=new Fo(e,e.h,t,void 0),t.K=2,t.v=xu(Tn(n)),n=!1,J.navigator&&J.navigator.sendBeacon&&(n=J.navigator.sendBeacon(t.v.toString(),"")),!n&&J.Image&&(new Image().src=t.v,n=!0),n||(t.g=Og(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Uo(t)}Dg(e)}B.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Ou(e){e.g&&(dl(e),e.g.cancel(),e.g=null)}function Tg(e){Ou(e),e.u&&(J.clearTimeout(e.u),e.u=null),js(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&J.clearTimeout(e.m),e.m=null)}function pa(e,t){e.l.push(new x_(e.Za++,t)),e.G==3&&Pu(e)}function Pu(e){pg(e.i)||e.m||(e.m=!0,Zc(e.Ha,e),e.C=0)}function j_(e,t){return gg(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=Lo(Ye(e.Ha,e,t),xg(e,e.C)),e.C++,!0)}B.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Fo(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=Up(n),Vp(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var o=this.l[i];if("__data__"in o.g&&(o=o.g.__data__,typeof o=="string")){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sg(this,t,r),i=Tn(this.F),Ae(i,"RID",e),Ae(i,"CVER",22),this.D&&Ae(i,"X-HTTP-Session-Id",this.D),Bo(this,i),this.o&&n&&ll(i,this.o,n),ul(this.i,t),this.Ra&&Ae(i,"TYPE","init"),this.ja?(Ae(i,"$req",r),Ae(i,"SID","null"),t.$=!0,Ja(t,i,null)):Ja(t,i,r),this.G=2}}else this.G==3&&(e?th(this,e):this.l.length==0||pg(this.i)||th(this))};function th(e,t){var n;t?n=t.m:n=e.V++;var r=Tn(e.F);Ae(r,"SID",e.J),Ae(r,"RID",n),Ae(r,"AID",e.U),Bo(e,r),e.o&&e.s&&ll(r,e.o,e.s),n=new Fo(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Sg(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ul(e.i,n),Ja(n,r,t)}function Bo(e,t){e.j&&ol({},function(n,r){Ae(t,r,n)})}function Sg(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ye(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var s=["count="+n];o==-1?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].h,l=i[a].g;if(c-=o,0>c)o=Math.max(0,i[a].h-100),u=!1;else try{O_(l,s,"req"+c+"_")}catch{r&&r(l)}}if(u){r=s.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ag(e){e.g||e.u||(e.Y=1,Zc(e.Ga,e),e.A=0)}function hl(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=Lo(Ye(e.Ga,e),xg(e,e.A)),e.A++,!0)}B.Ga=function(){if(this.u=null,Cg(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Lo(Ye(this.bb,this),e)}};B.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pt(10),Ou(this),Cg(this))};function dl(e){e.B!=null&&(J.clearTimeout(e.B),e.B=null)}function Cg(e){e.g=new Fo(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Tn(e.oa);Ae(t,"RID","rpc"),Ae(t,"SID",e.J),Ae(t,"CI",e.N?"0":"1"),Ae(t,"AID",e.U),Bo(e,t),Ae(t,"TYPE","xmlhttp"),e.o&&e.s&&ll(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=xu(Tn(t)),n.s=null,n.U=!0,og(n,e)}B.ab=function(){this.v!=null&&(this.v=null,Ou(this),hl(this),pt(19))};function js(e){e.v!=null&&(J.clearTimeout(e.v),e.v=null)}function Ng(e,t){var n=null;if(e.g==t){js(e),dl(e),e.g=null;var r=2}else if(ec(e.i,t))n=t.D,mg(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=Su(),Xe(r,new tg(r,n)),Pu(e)}else Ag(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&j_(e,t)||r==2&&hl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lr(e,5);break;case 4:lr(e,10);break;case 3:lr(e,6);break;default:lr(e,2)}}}function xg(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function lr(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=Ye(e.jb,e);n||(n=new _r("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||Fs(n,"https"),xu(n)),P_(n.toString(),r)}else pt(2);e.G=0,e.j&&e.j.va(t),Dg(e),Tg(e)}B.jb=function(e){e?(this.h.info("Successfully pinged google.com"),pt(2)):(this.h.info("Failed to ping google.com"),pt(1))};function Dg(e){e.G=0,e.I=-1,e.j&&((yg(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,Hc(e.l),e.l.length=0),e.j.ua())}function Rg(e,t,n){var r=__(n);if(r.i!="")t&&Us(r,t+"."+r.i),Vs(r,r.m);else{var i=J.location;r=E_(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&zc(e.aa,function(o,s){Ae(r,s,o)}),t=e.D,n=e.sa,t&&n&&Ae(r,t,n),Ae(r,"VER",e.ma),Bo(e,r),r}function Og(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new je(new Vo({ib:!0})):new je(e.qa),t.L=e.H,t}function Pg(){}B=Pg.prototype;B.xa=function(){};B.wa=function(){};B.va=function(){};B.ua=function(){};B.Oa=function(){};function Bs(){if(ai&&!(10<=Number(Zb)))throw Error("Environmental error: no available transport.")}Bs.prototype.g=function(e,t){return new kt(e,t)};function kt(e,t){ze.call(this),this.g=new Ig(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ks(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ks(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Li(this)}Je(kt,ze);kt.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Zc(Ye(e.hb,e,t))),pt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Rg(e,null,e.W),Pu(e)};kt.prototype.close=function(){fl(this.g)};kt.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,pa(this.g,t)}else this.v?(t={},t.__data__=Jc(e),pa(this.g,t)):pa(this.g,e)};kt.prototype.M=function(){this.g.j=null,delete this.j,fl(this.g),delete this.g,kt.Z.M.call(this)};function kg(e){rl.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Je(kg,rl);function Lg(){il.call(this),this.status=1}Je(Lg,il);function Li(e){this.g=e}Je(Li,Pg);Li.prototype.xa=function(){Xe(this.g,"a")};Li.prototype.wa=function(e){Xe(this.g,new kg(e))};Li.prototype.va=function(e){Xe(this.g,new Lg)};Li.prototype.ua=function(){Xe(this.g,"b")};Bs.prototype.createWebChannel=Bs.prototype.g;kt.prototype.send=kt.prototype.u;kt.prototype.open=kt.prototype.m;kt.prototype.close=kt.prototype.close;Au.NO_ERROR=0;Au.TIMEOUT=8;Au.HTTP_ERROR=6;ng.COMPLETE="complete";rg.EventType=Mo;Mo.OPEN="a";Mo.CLOSE="b";Mo.ERROR="c";Mo.MESSAGE="d";ze.prototype.listen=ze.prototype.N;je.prototype.listenOnce=je.prototype.O;je.prototype.getLastError=je.prototype.La;je.prototype.getLastErrorCode=je.prototype.Da;je.prototype.getStatus=je.prototype.ba;je.prototype.getResponseJson=je.prototype.Qa;je.prototype.getResponseText=je.prototype.ga;je.prototype.send=je.prototype.ea;var B_=function(){return new Bs},q_=function(){return Su()},ga=Au,$_=ng,K_=xr,nh={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},H_=Vo,ls=rg,z_=je;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();Rt.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Q(t,e),t}(Error),Gt=new Rp("@firebase/firestore");function tc(){return Gt.logLevel}function O(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gt.logLevel<=fe.DEBUG){var r=t.map(pl);Gt.debug.apply(Gt,Re(["Firestore (8.10.1): "+e],r))}}function Ue(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gt.logLevel<=fe.ERROR){var r=t.map(pl);Gt.error.apply(Gt,Re(["Firestore (8.10.1): "+e],r))}}function qs(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Gt.logLevel<=fe.WARN){var r=t.map(pl);Gt.warn.apply(Gt,Re(["Firestore (8.10.1): "+e],r))}}function pl(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Ue(t),new Error(t)}function Y(e,t){e||K()}function U(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mg=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=G_(40),o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length));return r},e}();function se(e,t){return e<t?-1:e>t?1:0}function ci(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function Fg(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?se(this.nanoseconds,t.nanoseconds):se(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),ie=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new wt(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ug(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vg=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&K(),r===void 0?r=t.length-n:r>t.length-n&&K(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var o=t.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),de=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new x(b.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");i.push.apply(i,u.split("/").filter(function(a){return a.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(Vg),W_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return W_.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",o=0,s=function(){if(i.length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},u=!1;o<n.length;){var a=n[o];if(a==="\\"){if(o+1===n.length)throw new x(b.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var c=n[o+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new x(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=c,o+=2}else a==="`"?(u=!u,o++):a!=="."||u?(i+=a,o++):(s(),o++)}if(s(),u)throw new x(b.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(Vg),li=function(){function e(t){this.fields=t,t.sort(Yt.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return ci(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),Et=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return se(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();Et.EMPTY_BYTE_STRING=new Et("");var Q_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(e){if(Y(!!e),typeof e=="string"){var t=0,n=Q_.exec(e);if(Y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fe(e.seconds),nanos:Fe(e.nanos)}}function Fe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fi(e){return typeof e=="string"?Et.fromBase64String(e):Et.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jg(e){var t=e.mapValue.fields.__previous_value__;return gl(t)?jg(t):t}function bo(e){var t=Hn(e.mapValue.fields.__local_write_time__.timestampValue);return new wt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e){return e==null}function $s(e){return e===0&&1/e==-1/0}function Bg(e){return typeof e=="number"&&Number.isInteger(e)&&!$s(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(de.fromString(t))},e.fromName=function(t){return new e(de.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&de.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return de.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new de(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gl(e)?4:10:K()}function ln(e,t){var n=Er(e);if(n!==Er(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bo(e).isEqual(bo(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=Hn(r.timestampValue),s=Hn(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return fi(r.bytesValue).isEqual(fi(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Fe(r.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fe(r.integerValue)===Fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=Fe(r.doubleValue),s=Fe(i.doubleValue);return o===s?$s(o)===$s(s):isNaN(o)&&isNaN(s)}return!1}(e,t);case 9:return ci(e.arrayValue.values||[],t.arrayValue.values||[],ln);case 10:return function(r,i){var o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(rh(o)!==rh(s))return!1;for(var u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!ln(o[u],s[u])))return!1;return!0}(e,t);default:return K()}}function _o(e,t){return(e.values||[]).find(function(n){return ln(n,t)})!==void 0}function hi(e,t){var n=Er(e),r=Er(t);if(n!==r)return se(n,r);switch(n){case 0:return 0;case 1:return se(e.booleanValue,t.booleanValue);case 2:return function(i,o){var s=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(e,t);case 3:return ih(e.timestampValue,t.timestampValue);case 4:return ih(bo(e),bo(t));case 5:return se(e.stringValue,t.stringValue);case 6:return function(i,o){var s=fi(i),u=fi(o);return s.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){for(var s=i.split("/"),u=o.split("/"),a=0;a<s.length&&a<u.length;a++){var c=se(s[a],u[a]);if(c!==0)return c}return se(s.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){var s=se(Fe(i.latitude),Fe(o.latitude));return s!==0?s:se(Fe(i.longitude),Fe(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){for(var s=i.values||[],u=o.values||[],a=0;a<s.length&&a<u.length;++a){var c=hi(s[a],u[a]);if(c)return c}return se(s.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){var s=i.fields||{},u=Object.keys(s),a=o.fields||{},c=Object.keys(a);u.sort(),c.sort();for(var l=0;l<u.length&&l<c.length;++l){var f=se(u[l],c[l]);if(f!==0)return f;var h=hi(s[u[l]],a[c[l]]);if(h!==0)return h}return se(u.length,c.length)}(e.mapValue,t.mapValue);default:throw K()}}function ih(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return se(e,t);var n=Hn(e),r=Hn(t),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function ml(e){return nc(e)}function nc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Hn(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?fi(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,H.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",o=!0,s=0,u=r.values||[];s<u.length;s++)o?o=!1:i+=",",i+=nc(u[s]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",o=!0,s=0,u=Object.keys(r.fields||{}).sort();s<u.length;s++){var a=u[s];o?o=!1:i+=",",i+=a+":"+nc(r.fields[a])}return i+"}"}(e.mapValue):K();var t,n}function Ks(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function rc(e){return!!e&&"integerValue"in e}function yl(e){return!!e&&"arrayValue"in e}function oh(e){return!!e&&"nullValue"in e}function sh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Es(e){return!!e&&"mapValue"in e}function to(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Dr(e.mapValue.fields,function(i,o){return t.mapValue.fields[i]=to(o)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=to(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!Es(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=to(n)},e.prototype.setAll=function(t){var n=this,r=Yt.emptyPath(),i={},o=[];t.forEach(function(u,a){if(!r.isImmediateParentOf(a)){var c=n.getFieldsMap(r);n.applyChanges(c,i,o),i={},o=[],r=a.popLast()}u?i[a.lastSegment()]=to(u):o.push(a.lastSegment())});var s=this.getFieldsMap(r);this.applyChanges(s,i,o)},e.prototype.delete=function(t){var n=this.field(t.popLast());Es(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return ln(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];Es(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){Dr(n,function(u,a){return t[u]=a});for(var i=0,o=r;i<o.length;i++){var s=o[i];delete t[s]}},e.prototype.clone=function(){return new e(to(this.value))},e}();function qg(e){var t=[];return Dr(e.fields,function(n,r){var i=new Yt([n]);if(Es(r)){var o=qg(r.mapValue).fields;if(o.length===0)t.push(i);else for(var s=0,u=o;s<u.length;s++){var a=u[s];t.push(i.child(a))}}else t.push(i)}),new li(t)}var at=function(){function e(t,n,r,i,o){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return e.newInvalidDocument=function(t){return new e(t,0,ie.min(),xt.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,xt.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,xt.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=xt.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=xt.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Y_=function(e,t,n,r,i,o,s){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(e,t,n,r,i,o,s){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),new Y_(e,t,n,r,i,o,s)}function qo(e){var t=U(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+ml(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),Rr(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=zs(t.startAt)),t.endAt&&(n+="|ub:",n+=zs(t.endAt)),t.h=n}return t.h}function ku(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!iE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ln(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ch(e.startAt,t.startAt)&&ch(e.endAt,t.endAt)}function Hs(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Ot=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).field=n,o.op=r,o.value=i,o}return Q(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new X_(n,r,i):r==="array-contains"?new eE(n,i):r==="in"?new tE(n,i):r==="not-in"?new nE(n,i):r==="array-contains-any"?new rE(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new J_(n,i):new Z_(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(hi(r,this.value)):r!==null&&Er(this.value)===Er(r)&&this.m(hi(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return K()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),X_=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,i)||this).key=H.fromName(i.referenceValue),o}return Q(t,e),t.prototype.matches=function(n){var r=H.comparator(n.key,this.key);return this.m(r)},t}(Ot),J_=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=$g("in",r),i}return Q(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(Ot),Z_=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=$g("not-in",r),i}return Q(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(Ot);function $g(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return H.fromName(r.referenceValue)})}var eE=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return yl(r)&&_o(r.arrayValue,this.value)},t}(Ot),tE=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&_o(this.value.arrayValue,r)},t}(Ot),nE=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return Q(t,e),t.prototype.matches=function(n){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!_o(this.value.arrayValue,r)},t}(Ot),rE=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!yl(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return _o(r.value.arrayValue,o)})},t}(Ot),Eo=function(e,t){this.position=e,this.before=t};function zs(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return ml(t)}).join(",")}var ri=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function iE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ah(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],s=e.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(s.referenceValue),n.key):hi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function ch(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ln(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An=function(e,t,n,r,i,o,s,u){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o="F"),s===void 0&&(s=null),u===void 0&&(u=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function Kg(e,t,n,r,i,o,s,u){return new An(e,t,n,r,i,o,s,u)}function $o(e){return new An(e)}function Is(e){return!Rr(e.limit)&&e.limitType==="F"}function Gs(e){return!Rr(e.limit)&&e.limitType==="L"}function vl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wl(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function bl(e){return e.collectionGroup!==null}function di(e){var t=U(e);if(t.p===null){t.p=[];var n=wl(t),r=vl(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new ri(n)),t.p.push(new ri(Yt.keyField(),"asc"));else{for(var i=!1,o=0,s=t.explicitOrderBy;o<s.length;o++){var u=s[o];t.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new ri(Yt.keyField(),a))}}}return t.p}function fn(e){var t=U(e);if(!t.T)if(t.limitType==="F")t.T=uh(t.path,t.collectionGroup,di(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=di(t);r<i.length;r++){var o=i[r],s=o.dir==="desc"?"asc":"desc";n.push(new ri(o.field,s))}var u=t.endAt?new Eo(t.endAt.position,!t.endAt.before):null,a=t.startAt?new Eo(t.startAt.position,!t.startAt.before):null;t.T=uh(t.path,t.collectionGroup,n,t.filters,t.limit,u,a)}return t.T}function Hg(e,t,n){return new An(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ko(e,t){return ku(fn(e),fn(t))&&e.limitType===t.limitType}function zg(e){return qo(fn(e))+"|lt:"+e.limitType}function ic(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+ml(i.value);var i}).join(", ")+"]"),Rr(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+zs(t.startAt)),t.endAt&&(n+=", endAt: "+zs(t.endAt)),"Target("+n+")"}(fn(e))+"; limitType="+e.limitType+")"}function Ho(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):H.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,o=n.explicitOrderBy;i<o.length;i++){var s=o[i];if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,o=n.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!ah(n.startAt,di(n),r))&&(!n.endAt||!ah(n.endAt,di(n),r))}(e,t)}function Gg(e){return function(t,n){for(var r=!1,i=0,o=di(e);i<o.length;i++){var s=o[i],u=oE(s,t,n);if(u!==0)return u;r=r||s.field.isKeyField()}return 0}}function oE(e,t,n){var r=e.field.isKeyField()?H.comparator(t.key,n.key):function(i,o,s){var u=o.data.field(i),a=s.data.field(i);return u!==null&&a!==null?hi(u,a):K()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$s(t)?"-0":t}}function Qg(e){return{integerValue:""+e}}function Yg(e,t){return Bg(t)?Qg(t):Wg(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lu=function(){this._=void 0};function sE(e,t,n){return e instanceof pi?function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Ir?Jg(e,t):e instanceof Tr?Zg(e,t):function(r,i){var o=Xg(r,i),s=lh(o)+lh(r.A);return rc(o)&&rc(r.A)?Qg(s):Wg(r.R,s)}(e,t)}function uE(e,t,n){return e instanceof Ir?Jg(e,t):e instanceof Tr?Zg(e,t):n}function Xg(e,t){return e instanceof gi?rc(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var pi=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t}(Lu),Ir=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Q(t,e),t}(Lu);function Jg(e,t){for(var n=em(t),r=function(s){n.some(function(u){return ln(u,s)})||n.push(s)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Tr=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Q(t,e),t}(Lu);function Zg(e,t){for(var n=em(t),r=function(s){n=n.filter(function(u){return!ln(u,s)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gi=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return Q(t,e),t}(Lu);function lh(e){return Fe(e.integerValue||e.doubleValue)}function em(e){return yl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(e,t){this.field=e,this.transform=t},aE=function(e,t){this.version=e,this.transformResults=t},ot=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function Ts(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Mu=function(){};function cE(e,t,n){e instanceof Go?function(r,i,o){var s=r.value.clone(),u=dh(r.fieldTransforms,i,o.transformResults);s.setAll(u),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Qn?function(r,i,o){if(Ts(r.precondition,i)){var s=dh(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(tm(r)),u.setAll(s),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function oc(e,t,n){e instanceof Go?function(r,i,o){if(Ts(r.precondition,i)){var s=r.value.clone(),u=ph(r.fieldTransforms,o,i);s.setAll(u),i.convertToFoundDocument(hh(i),s).setHasLocalMutations()}}(e,t,n):e instanceof Qn?function(r,i,o){if(Ts(r.precondition,i)){var s=ph(r.fieldTransforms,o,i),u=i.data;u.setAll(tm(r)),u.setAll(s),i.convertToFoundDocument(hh(i),u).setHasLocalMutations()}}(e,t,n):function(r,i){Ts(r.precondition,i)&&i.convertToNoDocument(ie.min())}(e,t)}function lE(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],s=t.data.field(o.field),u=Xg(o.transform,s||null);u!=null&&(n==null&&(n=xt.empty()),n.set(o.field,u))}return n||null}function fh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ci(n,r,function(i,o){return function(s,u){return s.field.isEqual(u.field)&&function(a,c){return a instanceof Ir&&c instanceof Ir||a instanceof Tr&&c instanceof Tr?ci(a.elements,c.elements,ln):a instanceof gi&&c instanceof gi?ln(a.A,c.A):a instanceof pi&&c instanceof pi}(s.transform,u.transform)}(i,o)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function hh(e){return e.isFoundDocument()?e.version:ie.min()}var Go=function(e){function t(n,r,i,o){o===void 0&&(o=[]);var s=this;return(s=e.call(this)||this).key=n,s.value=r,s.precondition=i,s.fieldTransforms=o,s.type=0,s}return Q(t,e),t}(Mu),Qn=function(e){function t(n,r,i,o,s){s===void 0&&(s=[]);var u=this;return(u=e.call(this)||this).key=n,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return Q(t,e),t}(Mu);function tm(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function dh(e,t,n){var r=new Map;Y(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],s=o.transform,u=t.data.field(o.field);r.set(o.field,uE(s,u,n[i]))}return r}function ph(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var s=o[i],u=s.transform,a=n.data.field(s.field);r.set(s.field,sE(u,a,t))}return r}var Me,ue,Wo=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Q(t,e),t}(Mu),_l=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Q(t,e),t}(Mu),fE=function(e){this.count=e};function nm(e){switch(e){case b.OK:return K();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return K()}}function rm(e){if(e===void 0)return Ue("GRPC error has no .code"),b.UNKNOWN;switch(e){case Me.OK:return b.OK;case Me.CANCELLED:return b.CANCELLED;case Me.UNKNOWN:return b.UNKNOWN;case Me.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Me.INTERNAL:return b.INTERNAL;case Me.UNAVAILABLE:return b.UNAVAILABLE;case Me.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Me.NOT_FOUND:return b.NOT_FOUND;case Me.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Me.ABORTED:return b.ABORTED;case Me.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Me.DATA_LOSS:return b.DATA_LOSS;default:return K()}}(ue=Me||(Me={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct=function(){function e(t,n){this.comparator=t,this.root=n||Ln.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ln.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ln.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new fs(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new fs(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new fs(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new fs(this.root,t,this.comparator,!0)},e}(),fs=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Ln=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,o=r(t,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();var t=this.left.check();if(t!==this.right.check())throw K();return t+(this.isRed()?0:1)},e}();Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1,Ln.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw K()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,o){return this},e.prototype.insert=function(t,n,r){return new Ln(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){function e(t){this.comparator=t,this.data=new ct(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new gh(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new gh(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),gh=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),hE=new ct(H.comparator);function Wt(){return hE}var dE=new ct(H.comparator);function sc(){return dE}var pE=new ct(H.comparator);function gE(){return pE}var mE=new $e(H.comparator);function Ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=mE,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var yE=new $e(se);function Fu(){return yE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(){function e(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Il.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ie.min(),r,Fu(),Wt(),Ie())},e}(),Il=function(){function e(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Et.EMPTY_BYTE_STRING,n,Ie(),Ie(),Ie())},e}(),Ss=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},im=function(e,t){this.targetId=e,this.V=t},om=function(e,t,n,r){n===void 0&&(n=Et.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},mh=function(){function e(){this.S=0,this.D=vh(),this.C=Et.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=Ie(),n=Ie(),r=Ie();return this.D.forEach(function(i,o){switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Il(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=vh()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),vE=function(){function e(t){this.W=t,this.G=new Map,this.H=Wt(),this.J=yh(),this.Y=new $e(se)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var o=0,s=t.removedTargetIds;o<s.length;o++)i=s[o],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:K()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,o){r.st(o)&&n(o)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var o=i.target;if(Hs(o))if(r===0){var s=new H(o.path);this.tt(n,s,at.newNoDocument(s,ie.min()))}else Y(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(s,u){var a=n.ot(u);if(a){if(s.current&&Hs(a.target)){var c=new H(a.target.path);n.H.get(c)!==null||n.at(u,c)||n.tt(u,c,at.newNoDocument(c,t))}s.$&&(r.set(u,s.M()),s.L())}});var i=Ie();this.J.forEach(function(s,u){var a=!0;u.forEachWhile(function(c){var l=n.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});var o=new El(t,r,this.Y,this.H,i);return this.H=Wt(),this.J=yh(),this.Y=new $e(se),o},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new mh,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new $e(se),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||O("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new mh),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function yh(){return new ct(H.comparator)}function vh(){return new ct(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE={asc:"ASCENDING",desc:"DESCENDING"},bE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_E=function(e,t){this.databaseId=e,this.I=t};function Io(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function sm(e,t){return e.I?t.toBase64():t.toUint8Array()}function EE(e,t){return Io(e,t.toTimestamp())}function gt(e){return Y(!!e),ie.fromTimestamp(function(t){var n=Hn(t);return new wt(n.seconds,n.nanos)}(e))}function Tl(e,t){return function(n){return new de(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function um(e){var t=de.fromString(e);return Y(pm(t)),t}function To(e,t){return Tl(e.databaseId,t.path)}function bn(e,t){var n=um(t);if(n.get(1)!==e.databaseId.projectId)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(cm(n))}function uc(e,t){return Tl(e.databaseId,t)}function am(e){var t=um(e);return t.length===4?de.emptyPath():cm(t)}function So(e){return new de(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cm(e){return Y(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function wh(e,t,n){return{name:To(e,t),fields:n.value.mapValue.fields}}function IE(e,t,n){var r=bn(e,t.name),i=gt(t.updateTime),o=new xt({mapValue:{fields:t.fields}}),s=at.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ws(e,t){var n;if(t instanceof Go)n={update:wh(e,t.key,t.value)};else if(t instanceof Wo)n={delete:To(e,t.key)};else if(t instanceof Qn)n={update:wh(e,t.key,t.data),updateMask:NE(t.fieldMask)};else{if(!(t instanceof _l))return K();n={verify:To(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,o){var s=o.transform;if(s instanceof pi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Ir)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Tr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof gi)return{fieldPath:o.field.canonicalString(),increment:s.A};throw K()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:EE(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(e,t.precondition)),n}function bh(e,t){var n=t.currentDocument?function(c){return c.updateTime!==void 0?ot.updateTime(gt(c.updateTime)):c.exists!==void 0?ot.exists(c.exists):ot.none()}(t.currentDocument):ot.none(),r=t.updateTransforms?t.updateTransforms.map(function(c){return function(l,f){var h=null;if("setToServerValue"in f)Y(f.setToServerValue==="REQUEST_TIME"),h=new pi;else if("appendMissingElements"in f){var d=f.appendMissingElements.values||[];h=new Ir(d)}else if("removeAllFromArray"in f){var g=f.removeAllFromArray.values||[];h=new Tr(g)}else"increment"in f?h=new gi(l,f.increment):K();var m=Yt.fromServerFormat(f.fieldPath);return new zo(m,h)}(e,c)}):[];if(t.update){t.update.name;var i=bn(e,t.update.name),o=new xt({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(c){var l=c.fieldPaths||[];return new li(l.map(function(f){return Yt.fromServerFormat(f)}))}(t.updateMask);return new Qn(i,o,s,n,r)}return new Go(i,o,n,r)}if(t.delete){var u=bn(e,t.delete);return new Wo(u,n)}if(t.verify){var a=bn(e,t.verify);return new _l(a,n)}return K()}function lm(e,t){return{documents:[uc(e,t.path)]}}function fm(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=uc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=uc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(u){if(u.length!==0){var a=u.map(function(c){return function(l){if(l.op==="=="){if(sh(l.value))return{unaryFilter:{field:jr(l.field),op:"IS_NAN"}};if(oh(l.value))return{unaryFilter:{field:jr(l.field),op:"IS_NULL"}}}else if(l.op==="!="){if(sh(l.value))return{unaryFilter:{field:jr(l.field),op:"IS_NOT_NAN"}};if(oh(l.value))return{unaryFilter:{field:jr(l.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(l.field),op:SE(l.op),value:l.value}}}(c)});return a.length===1?a[0]:{compositeFilter:{op:"AND",filters:a}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(u){if(u.length!==0)return u.map(function(a){return function(c){return{field:jr(c.field),direction:TE(c.dir)}}(a)})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(u,a){return u.I||Rr(a)?a:{value:a}}(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=_h(t.startAt)),t.endAt&&(n.structuredQuery.endAt=_h(t.endAt)),n}function hm(e){var t=am(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Y(r===1);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=dm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(f){return function(h){return new ri(Yr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(f)}));var a=null;n.limit&&(a=function(f){var h;return Rr(h=typeof f=="object"?f.value:f)?null:h}(n.limit));var c=null;n.startAt&&(c=Eh(n.startAt));var l=null;return n.endAt&&(l=Eh(n.endAt)),Kg(t,i,u,s,a,"F",c,l)}function dm(e){return e?e.unaryFilter!==void 0?[CE(e)]:e.fieldFilter!==void 0?[AE(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return dm(t)}).reduce(function(t,n){return t.concat(n)}):K():[]}function _h(e){return{before:e.before,values:e.position}}function Eh(e){var t=!!e.before,n=e.values||[];return new Eo(n,t)}function TE(e){return wE[e]}function SE(e){return bE[e]}function jr(e){return{fieldPath:e.canonicalString()}}function Yr(e){return Yt.fromServerFormat(e.fieldPath)}function AE(e){return Ot.create(Yr(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return K()}}(e.fieldFilter.op),e.fieldFilter.value)}function CE(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yr(e.unaryFilter.field);return Ot.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yr(e.unaryFilter.field);return Ot.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yr(e.unaryFilter.field);return Ot.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yr(e.unaryFilter.field);return Ot.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return K()}}function NE(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function pm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ih(t)),t=xE(e.get(n),t);return Ih(t)}function xE(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ih(e){return e+""}function mn(e){var t=e.length;if(Y(t>=2),t===2)return Y(e.charAt(0)===""&&e.charAt(1)===""),de.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf("",o);switch((s<0||s>n)&&K(),e.charAt(s+1)){case"":var u=e.substring(o,s),a=void 0;i.length===0?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=e.substring(o,s),i+="\0";break;case"":i+=e.substring(o,s+1);break;default:K()}o=s+2}return new de(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DE=function(e,t){this.seconds=e,this.nanoseconds=t},At=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};At.store="owner",At.key="owner";var Bn=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Bn.store="mutationQueues",Bn.keyPath="userId";var Te=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Te.store="mutations",Te.keyPath="batchId",Te.userMutationsIndex="userMutationsIndex",Te.userMutationsKeyPath=["userId","batchId"];var tt=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Qt(n)]},e.key=function(t,n,r){return[t,Qt(n),r]},e}();tt.store="documentMutations",tt.PLACEHOLDER=new tt;var RE=function(e,t){this.path=e,this.readTime=t},OE=function(e,t){this.path=e,this.version=t},De=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};De.store="remoteDocuments",De.readTimeIndex="readTimeIndex",De.readTimeIndexPath="readTime",De.collectionReadTimeIndex="collectionReadTimeIndex",De.collectionReadTimeIndexPath=["parentPath","readTime"];var un=function(e){this.byteSize=e};un.store="remoteDocumentGlobal",un.key="remoteDocumentGlobalKey";var vt=function(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vt.store="targets",vt.keyPath="targetId",vt.queryTargetsIndexName="queryTargetsIndex",vt.queryTargetsKeyPath=["canonicalId","targetId"];var Qe=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Qe.store="targetDocuments",Qe.keyPath=["targetId","path"],Qe.documentTargetsIndex="documentTargetsIndex",Qe.documentTargetsKeyPath=["path","targetId"];var Nt=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Nt.key="targetGlobalKey",Nt.store="targetGlobal";var mr=function(e,t){this.collectionId=e,this.parent=t};mr.store="collectionParents",mr.keyPath=["collectionId","parent"];var _n=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};_n.store="clientMetadata",_n.keyPath="clientId";var mi=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};mi.store="bundles",mi.keyPath="bundleId";var yi=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};yi.store="namedQueries",yi.keyPath="name";var PE=Re(Re([],Re(Re([],Re(Re([],Re(Re([],[Bn.store,Te.store,tt.store,De.store,vt.store,At.store,Nt.store,Qe.store]),[_n.store])),[un.store])),[mr.store])),[mi.store,yi.store]),gm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mm=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),It=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},R=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,o){r.nextCallback=function(s){r.wrapSuccess(t,s).next(i,o)},r.catchCallback=function(s){r.wrapFailure(n,s).next(i,o)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,o=0,s=!1;t.forEach(function(u){++i,u.next(function(){++o,s&&o===i&&n()},function(a){return r(a)})}),s=!0,o===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(s){n=n.next(function(u){return u?e.resolve(u):s()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(o,s){i.push(n.call(r,o,s))}),this.waitFor(i)},e}(),ym=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new It,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new no(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=Sl(i.target.error);r.ft.reject(new no(t,o))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new no(n,o)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(O("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new LE(n)},e}(),vi=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(wr())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return O("SimpleDb","Removing database:",t),ur(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=wr(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(O("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(o,s){var u=indexedDB.open(r.name,r.version);u.onsuccess=function(a){var c=a.target.result;o(c)},u.onblocked=function(){s(new no(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=function(a){var c=a.target.error;c.name==="VersionError"?s(new x(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s(new no(t,c))},u.onupgradeneeded=function(a){O("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',a.oldVersion);var c=a.target.result;r.wt.Rt(c,u.transaction,a.oldVersion,r.version).next(function(){O("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return C(this,void 0,void 0,function(){var o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:o=n==="readonly",s=0,u=function(){var f,h,d,g,m;return S(this,function(w){switch(w.label){case 0:++s,w.label=1;case 1:return w.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=w.sent(),f=ym.open(a.db,t,o?"readonly":"readwrite",r),h=i(f).catch(function(v){return f.abort(v),R.reject(v)}).toPromise(),d={},h.catch(function(){}),[4,f.dt];case 3:return[2,(d.value=(w.sent(),h),d)];case 4:return g=w.sent(),m=g.name!=="FirebaseError"&&s<3,O("SimpleDb","Transaction failed with error:",g.message,"Retrying:",m),a.close(),m?[3,5]:[2,{value:Promise.reject(g)}];case 5:return[2]}})},a=this,l.label=1;case 1:return[5,u()];case 2:if(typeof(c=l.sent())=="object")return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),kE=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return ur(this.Pt.delete())},e}(),no=function(e){function t(n,r){var i=this;return(i=e.call(this,b.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return Q(t,e),t}(x);function Or(e){return e.name==="IndexedDbTransactionError"}var LE=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ur(r)},e.prototype.add=function(t){return O("SimpleDb","ADD",this.store.name,t,t),ur(this.store.add(t))},e.prototype.get=function(t){var n=this;return ur(this.store.get(t)).next(function(r){return r===void 0&&(r=null),O("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return O("SimpleDb","DELETE",this.store.name,t),ur(this.store.delete(t))},e.prototype.count=function(){return O("SimpleDb","COUNT",this.store.name),ur(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(o,s){i.push(s)}).next(function(){return i})},e.prototype.kt=function(t,n){O("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,s,u){return u.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new R(function(r,i){n.onerror=function(o){var s=Sl(o.target.error);i(s)},n.onsuccess=function(o){var s=o.target.result;s?t(s.primaryKey,s.value).next(function(u){u?s.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new R(function(i,o){t.onerror=function(s){o(s.target.error)},t.onsuccess=function(s){var u=s.target.result;if(u){var a=new kE(u),c=n(u.primaryKey,u.value,a);if(c instanceof R){var l=c.catch(function(f){return a.done(),R.reject(f)});r.push(l)}a.isDone?i():a.Dt===null?u.continue():u.continue(a.Dt)}else i()}}).next(function(){return R.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ur(e){return new R(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=Sl(r.target.error);n(i)}})}var Th=!1;function Sl(e){var t=vi._t(wr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new x("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Th||(Th=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sh=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return Q(t,e),t}(mm);function Tt(e,t){var n=U(e);return vi.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Al=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t.key)&&cE(o,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t.key)&&oc(s,t,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t.key)&&oc(s,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),o=i;n.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(ie.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Ie())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&ci(this.mutations,t.mutations,function(n,r){return fh(n,r)})&&ci(this.baseMutations,t.baseMutations,function(n,r){return fh(n,r)})},e}(),ME=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){Y(t.mutations.length===r.length);for(var i=gE(),o=t.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new e(t,n,r,i)},e}(),Uu=function(){function e(t,n,r,i,o,s,u){o===void 0&&(o=ie.min()),s===void 0&&(s=ie.min()),u===void 0&&(u=Et.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),vm=function(e){this.Lt=e};function ac(e,t){if(t.document)return IE(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=H.fromSegments(t.noDocument.path),r=bi(t.noDocument.readTime),i=at.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=H.fromSegments(t.unknownDocument.path);return r=bi(t.unknownDocument.version),at.newUnknownDocument(o,r)}return K()}function Ah(e,t,n){var r=Cl(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(f,h){return{name:To(f,h.key),fields:h.data.value.mapValue.fields,updateTime:Io(f,h.version.toTimestamp())}}(e.Lt,t),s=t.hasCommittedMutations;return new De(null,null,o,s,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),a=wi(t.version);return s=t.hasCommittedMutations,new De(null,new RE(u,a),null,s,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=wi(t.version);return new De(new OE(c,l),null,null,!0,r,i)}return K()}function Cl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function wm(e){var t=new wt(e[0],e[1]);return ie.fromTimestamp(t)}function wi(e){var t=e.toTimestamp();return new DE(t.seconds,t.nanoseconds)}function bi(e){var t=new wt(e.seconds,e.nanoseconds);return ie.fromTimestamp(t)}function Hr(e,t){for(var n=(t.baseMutations||[]).map(function(a){return bh(e.Lt,a)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var s=t.mutations.map(function(a){return bh(e.Lt,a)}),u=wt.fromMillis(t.localWriteTimeMs);return new Al(t.batchId,u,n,s)}function Qi(e){var t,n,r=bi(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?bi(e.lastLimboFreeSnapshotVersion):ie.min();return e.query.documents!==void 0?(Y((n=e.query).documents.length===1),t=fn($o(am(n.documents[0])))):t=function(o){return fn(hm(o))}(e.query),new Uu(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Et.fromBase64String(e.resumeToken))}function bm(e,t){var n,r=wi(t.snapshotVersion),i=wi(t.lastLimboFreeSnapshotVersion);n=Hs(t.target)?lm(e.Lt,t.target):fm(e.Lt,t.target);var o=t.resumeToken.toBase64();return new vt(t.targetId,qo(t.target),r,o,t.sequenceNumber,i,n)}function _m(e){var t=hm({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Hg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FE=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return Ch(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:bi(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return Ch(t).put({bundleId:(r=n).id,createTime:wi(gt(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return Nh(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:_m(i.bundledQuery),readTime:bi(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return Nh(t).put(function(r){return{name:r.name,readTime:wi(gt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function Ch(e){return Tt(e,mi.store)}function Nh(e){return Tt(e,yi.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UE=function(){function e(){this.Bt=new Nl}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),R.resolve()},e.prototype.getCollectionParents=function(t,n){return R.resolve(this.Bt.getEntries(n))},e}(),Nl=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new $e(de.comparator),o=!i.has(r);return this.index[n]=i.add(r),o},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new $e(de.comparator)).toArray()},e}(),VE=function(){function e(){this.qt=new Nl}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),o=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var s={collectionId:i,parent:Qt(o)};return xh(t).put(s)}return R.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[Fg(n),""],!1,!0);return xh(t).Nt(i).next(function(o){for(var s=0,u=o;s<u.length;s++){var a=u[s];if(a.collectionId!==n)break;r.push(mn(a.parent))}return r})},e}();function xh(e){return Tt(e,mr.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(e,t,n){var r=e.store(Te.store),i=e.store(tt.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.$t({range:s},function(g,m,w){return u++,w.delete()});o.push(a.next(function(){Y(u===1)}));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=tt.key(t,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return R.waitFor(o).next(function(){return c})}function Qs(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw K();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var jE=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return Y(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xn(t).$t({index:Te.userMutationsIndex,range:r},function(i,o,s){n=!1,s.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var o=this,s=zr(t),u=xn(t);return u.add({}).next(function(a){Y(typeof a=="number");for(var c=new Al(a,n,r,i),l=function(v,T,E){var M=E.baseMutations.map(function(X){return Ws(v.Lt,X)}),$=E.mutations.map(function(X){return Ws(v.Lt,X)});return new Te(T,E.batchId,E.localWriteTime.toMillis(),M,$)}(o.R,o.userId,c),f=[],h=new $e(function(v,T){return se(v.canonicalString(),T.canonicalString())}),d=0,g=i;d<g.length;d++){var m=g[d],w=tt.key(o.userId,m.key.path,a);h=h.add(m.key.path.popLast()),f.push(u.put(l)),f.push(s.put(w,tt.PLACEHOLDER))}return h.forEach(function(v){f.push(o.Ut.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(function(){o.Kt[a]=c.keys()}),R.waitFor(f).next(function(){return c})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return xn(t).get(n).next(function(i){return i?(Y(i.userId===r.userId),Hr(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?R.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var o=i.keys();return r.Kt[n]=o,o}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),s=null;return xn(t).$t({index:Te.userMutationsIndex,range:o},function(u,a,c){a.userId===r.userId&&(Y(a.batchId>=i),s=Hr(r.R,a)),c.done()}).next(function(){return s})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return xn(t).$t({index:Te.userMutationsIndex,range:n,reverse:!0},function(i,o,s){r=o.batchId,s.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xn(t).Nt(Te.userMutationsIndex,r).next(function(i){return i.map(function(o){return Hr(n.R,o)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=tt.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),s=[];return zr(t).$t({range:o},function(u,a,c){var l=u[0],f=u[1],h=u[2],d=mn(f);if(l===r.userId&&n.path.isEqual(d))return xn(t).get(h).next(function(g){if(!g)throw K();Y(g.userId===r.userId),s.push(Hr(r.R,g))});c.done()}).next(function(){return s})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new $e(se),o=[];return n.forEach(function(s){var u=tt.prefixForPath(r.userId,s.path),a=IDBKeyRange.lowerBound(u),c=zr(t).$t({range:a},function(l,f,h){var d=l[0],g=l[1],m=l[2],w=mn(g);d===r.userId&&s.path.isEqual(w)?i=i.add(m):h.done()});o.push(c)}),R.waitFor(o).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,o=i.length+1,s=tt.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(s),a=new $e(se);return zr(t).$t({range:u},function(c,l,f){var h=c[0],d=c[1],g=c[2],m=mn(d);h===r.userId&&i.isPrefixOf(m)?m.length===o&&(a=a.add(g)):f.done()}).next(function(){return r.Wt(t,a)})},e.prototype.Wt=function(t,n){var r=this,i=[],o=[];return n.forEach(function(s){o.push(xn(t).get(s).next(function(u){if(u===null)throw K();Y(u.userId===r.userId),i.push(Hr(r.R,u))}))}),R.waitFor(o).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return Em(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),R.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(t,o)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return R.resolve();var i=IDBKeyRange.lowerBound(tt.prefixForUser(n.userId)),o=[];return zr(t).$t({range:i},function(s,u,a){if(s[0]===n.userId){var c=mn(s[1]);o.push(c)}else a.done()}).next(function(){Y(o.length===0)})})},e.prototype.containsKey=function(t,n){return Im(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return Tm(t).get(this.userId).next(function(r){return r||new Bn(n.userId,-1,"")})},e}();function Im(e,t,n){var r=tt.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zr(e).$t({range:o,Ft:!0},function(u,a,c){var l=u[0],f=u[1];u[2],l===t&&f===i&&(s=!0),c.done()}).next(function(){return s})}function xn(e){return Tt(e,Te.store)}function zr(e){return Tt(e,tt.store)}function Tm(e){return Tt(e,Bn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ys=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),BE=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new Ys(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return ie.fromTimestamp(new wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Zt(t,o)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Br(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return Y(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,s=[];return Br(t).$t(function(u,a){var c=Qi(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(o++,s.push(i.removeTargetData(t,c)))}).next(function(){return R.waitFor(s)}).next(function(){return o})},e.prototype.forEachTarget=function(t,n){return Br(t).$t(function(r,i){var o=Qi(i);n(o)})},e.prototype.Xt=function(t){return Rh(t).get(Nt.key).next(function(n){return Y(n!==null),n})},e.prototype.Zt=function(t,n){return Rh(t).put(Nt.key,n)},e.prototype.te=function(t,n){return Br(t).put(bm(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=qo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Br(t).$t({range:i,index:vt.queryTargetsIndexName},function(s,u,a){var c=Qi(u);ku(n,c.target)&&(o=c,a.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,o=[],s=Mn(t);return n.forEach(function(u){var a=Qt(u.path);o.push(s.put(new Qe(r,a))),o.push(i.referenceDelegate.addReference(t,r,u))}),R.waitFor(o)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,o=Mn(t);return R.forEach(n,function(s){var u=Qt(s.path);return R.waitFor([o.delete([r,u]),i.referenceDelegate.removeReference(t,r,s)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Mn(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Mn(t),o=Ie();return i.$t({range:r,Ft:!0},function(s,u,a){var c=mn(s[1]),l=new H(c);o=o.add(l)}).next(function(){return o})},e.prototype.containsKey=function(t,n){var r=Qt(n.path),i=IDBKeyRange.bound([r],[Fg(r)],!1,!0),o=0;return Mn(t).$t({index:Qe.documentTargetsIndex,Ft:!0,range:i},function(s,u,a){var c=s[0];s[1],c!==0&&(o++,a.done())}).next(function(){return o>0})},e.prototype.lt=function(t,n){return Br(t).get(n).next(function(r){return r?Qi(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(e){return Tt(e,vt.store)}function Rh(e){return Tt(e,Nt.store)}function Mn(e){return Tt(e,Qe.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){return C(this,void 0,void 0,function(){return S(this,function(t){if(e.code!==b.FAILED_PRECONDITION||e.message!==gm)throw e;return O("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],s=se(n,i);return s===0?se(r,o):s}var qE=function(){function e(t){this.ne=t,this.buffer=new $e(Oh),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();Oh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),$E=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;O("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return C(n,void 0,void 0,function(){var i;return S(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return Or(i=o.sent())?(O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Pr(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return o.sent(),[2]}})})})},e}(),KE=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return R.resolve(Rt.o);var i=new qE(n);return this.ae.forEachTarget(t,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(t,function(o){return i.re(o)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Dh)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Dh):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,o,s,u,a,c,l=this,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(h){return h>l.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+h),i=l.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),l.nthSequenceNumber(t,i)}).next(function(h){return r=h,u=Date.now(),l.removeTargets(t,r,n)}).next(function(h){return o=h,a=Date.now(),l.removeOrphanedDocuments(t,r)}).next(function(h){return c=Date.now(),tc()<=fe.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(s-f)+`ms
	Determined least recently used `+i+" in "+(u-s)+`ms
	Removed `+o+" targets in "+(a-u)+`ms
	Removed `+h+" documents in "+(c-a)+`ms
Total Duration: `+(c-f)+"ms"),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})})},e}(),HE=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new KE(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return hs(t,r)},e.prototype.removeReference=function(t,n,r){return hs(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return hs(t,n)},e.prototype._e=function(t,n){return function(r,i){var o=!1;return Tm(r).Ot(function(s){return Im(r,s,i).next(function(u){return u&&(o=!0),R.resolve(!u)})}).next(function(){return o})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],s=0;return this.we(t,function(u,a){if(a<=n){var c=r._e(t,u).next(function(l){if(!l)return s++,i.getEntry(t,u).next(function(){return i.removeEntry(u),Mn(t).delete([0,Qt(u.path)])})});o.push(c)}}).next(function(){return R.waitFor(o)}).next(function(){return i.apply(t)}).next(function(){return s})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return hs(t,n)},e.prototype.we=function(t,n){var r,i=Mn(t),o=Rt.o;return i.$t({index:Qe.documentTargetsIndex},function(s,u){var a=s[0];s[1];var c=u.path,l=u.sequenceNumber;a===0?(o!==Rt.o&&n(new H(mn(r)),o),o=l,r=c):o=Rt.o}).next(function(){o!==Rt.o&&n(new H(mn(r)),o)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function hs(e,t){return Mn(e).put(function(n,r){return new Qe(0,Qt(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];if(this.equalsFn(u,t))return a}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Dr(this.inner,function(n,r){for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];t(u,a)}})},e.prototype.isEmpty=function(){return Ug(this.inner)},e}(),Sm=function(){function e(){this.changes=new Mi(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:ie.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:at.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?R.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),zE=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return Pn(t).put(ds(n),r)},e.prototype.removeEntry=function(t,n){var r=Pn(t),i=ds(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return Pn(t).get(ds(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return Pn(t).get(ds(n)).next(function(i){return{document:r.ye(n,i),size:Qs(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Wt();return this.pe(t,n,function(o,s){var u=r.ye(o,s);i=i.insert(o,u)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Wt(),o=new ct(H.comparator);return this.pe(t,n,function(s,u){var a=r.ye(s,u);i=i.insert(s,a),o=o.insert(s,Qs(u))}).next(function(){return{documents:i,Te:o}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return R.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),o=n.getIterator(),s=o.getNext();return Pn(t).$t({range:i},function(u,a,c){for(var l=H.fromSegments(u);s&&H.comparator(s,l)<0;)r(s,null),s=o.getNext();s&&s.isEqual(l)&&(r(s,a),s=o.hasNext()?o.getNext():null),s?c.Ct(s.path.toArray()):c.done()}).next(function(){for(;s;)r(s,null),s=o.hasNext()?o.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,o=Wt(),s=n.path.length+1,u={};if(r.isEqual(ie.min())){var a=n.path.toArray();u.range=IDBKeyRange.lowerBound(a)}else{var c=n.path.toArray(),l=Cl(r);u.range=IDBKeyRange.lowerBound([c,l],!0),u.index=De.collectionReadTimeIndex}return Pn(t).$t(u,function(f,h,d){if(f.length===s){var g=ac(i.R,h);n.path.isPrefixOf(g.key.path)?Ho(n,g)&&(o=o.insert(g.key,g)):d.done()}}).next(function(){return o})},e.prototype.newChangeBuffer=function(t){return new GE(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return Ph(t).get(un.key).next(function(n){return Y(!!n),n})},e.prototype.me=function(t,n){return Ph(t).put(un.key,n)},e.prototype.ye=function(t,n){if(n){var r=ac(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(ie.min()))return r}return at.newInvalidDocument(t)},e}(),GE=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Mi(function(o){return o.toString()},function(o,s){return o.isEqual(s)}),i}return Q(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],o=0,s=new $e(function(u,a){return se(u.canonicalString(),a.canonicalString())});return this.changes.forEach(function(u,a){var c=r.Ae.get(u);if(a.document.isValidDocument()){var l=Ah(r.Ie.R,a.document,r.getReadTime(u));s=s.add(u.path.popLast());var f=Qs(l);o+=f-c,i.push(r.Ie.addEntry(n,u,l))}else if(o-=c,r.trackRemovals){var h=Ah(r.Ie.R,at.newNoDocument(u,ie.min()),r.getReadTime(u));i.push(r.Ie.addEntry(n,u,h))}else i.push(r.Ie.removeEntry(n,u))}),s.forEach(function(u){i.push(r.Ie.Ut.addToCollectionParentIndex(n,u))}),i.push(this.Ie.updateMetadata(n,o)),R.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(o){return i.Ae.set(r,o.size),o.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(o){var s=o.documents;return o.Te.forEach(function(u,a){i.Ae.set(u,a)}),s})},t}(Sm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(e){return Tt(e,un.store)}function Pn(e){return Tt(e,De.store)}function ds(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WE=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var o=this;Y(r<i&&r>=0&&i<=11);var s=new ym("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore(At.store)}(t),function(a){a.createObjectStore(Bn.store,{keyPath:Bn.keyPath}),a.createObjectStore(Te.store,{keyPath:Te.keyPath,autoIncrement:!0}).createIndex(Te.userMutationsIndex,Te.userMutationsKeyPath,{unique:!0}),a.createObjectStore(tt.store)}(t),kh(t),function(a){a.createObjectStore(De.store)}(t));var u=R.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore(Qe.store),a.deleteObjectStore(vt.store),a.deleteObjectStore(Nt.store)}(t),kh(t)),u=u.next(function(){return function(a){var c=a.store(Nt.store),l=new Nt(0,0,ie.min().toTimestamp(),0);return c.put(Nt.key,l)}(s)})),r<4&&i>=4&&(r!==0&&(u=u.next(function(){return function(a,c){return c.store(Te.store).Nt().next(function(l){a.deleteObjectStore(Te.store),a.createObjectStore(Te.store,{keyPath:Te.keyPath,autoIncrement:!0}).createIndex(Te.userMutationsIndex,Te.userMutationsKeyPath,{unique:!0});var f=c.store(Te.store),h=l.map(function(d){return f.put(d)});return R.waitFor(h)})}(t,s)})),u=u.next(function(){(function(a){a.createObjectStore(_n.store,{keyPath:_n.keyPath})})(t)})),r<5&&i>=5&&(u=u.next(function(){return o.Re(s)})),r<6&&i>=6&&(u=u.next(function(){return function(a){a.createObjectStore(un.store)}(t),o.be(s)})),r<7&&i>=7&&(u=u.next(function(){return o.ve(s)})),r<8&&i>=8&&(u=u.next(function(){return o.Pe(t,s)})),r<9&&i>=9&&(u=u.next(function(){(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(t),function(a){var c=a.objectStore(De.store);c.createIndex(De.readTimeIndex,De.readTimeIndexPath,{unique:!1}),c.createIndex(De.collectionReadTimeIndex,De.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(u=u.next(function(){return o.Ve(s)})),r<11&&i>=11&&(u=u.next(function(){(function(a){a.createObjectStore(mi.store,{keyPath:mi.keyPath})})(t),function(a){a.createObjectStore(yi.store,{keyPath:yi.keyPath})}(t)})),u},e.prototype.be=function(t){var n=0;return t.store(De.store).$t(function(r,i){n+=Qs(i)}).next(function(){var r=new un(n);return t.store(un.store).put(un.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Bn.store),i=t.store(Te.store);return r.Nt().next(function(o){return R.forEach(o,function(s){var u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.Nt(Te.userMutationsIndex,u).next(function(a){return R.forEach(a,function(c){Y(c.userId===s.userId);var l=Hr(n.R,c);return Em(t,s.userId,l).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(Qe.store),r=t.store(De.store);return t.store(Nt.store).get(Nt.key).next(function(i){var o=[];return r.$t(function(s,u){var a=new de(s),c=function(l){return[0,Qt(l)]}(a);o.push(n.get(c).next(function(l){return l?R.resolve():function(f){return n.put(new Qe(0,Qt(f),i.highestListenSequenceNumber))}(a)}))}).next(function(){return R.waitFor(o)})})},e.prototype.Pe=function(t,n){t.createObjectStore(mr.store,{keyPath:mr.keyPath});var r=n.store(mr.store),i=new Nl,o=function(s){if(i.add(s)){var u=s.lastSegment(),a=s.popLast();return r.put({collectionId:u,parent:Qt(a)})}};return n.store(De.store).$t({Ft:!0},function(s,u){var a=new de(s);return o(a.popLast())}).next(function(){return n.store(tt.store).$t({Ft:!0},function(s,u){s[0];var a=s[1];s[2];var c=mn(a);return o(c.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(vt.store);return r.$t(function(i,o){var s=Qi(o),u=bm(n.R,s);return r.put(u)})},e}();function kh(e){e.createObjectStore(Qe.store,{keyPath:Qe.keyPath}).createIndex(Qe.documentTargetsIndex,Qe.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(vt.store,{keyPath:vt.keyPath}).createIndex(vt.queryTargetsIndexName,vt.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Nt.store)}var ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",QE=function(){function e(t,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(f){return Promise.resolve()},!e.yt())throw new x(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HE(this,i),this.Le=n+"main",this.R=new vm(a),this.Be=new vi(this.Le,11,new WE(this.R)),this.qe=new BE(this.referenceDelegate,this.R),this.Ut=new VE,this.Ue=function(f,h){return new zE(f,h)}(this.R,this.Ut),this.Ke=new FE,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,l===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,ma);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new Rt(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return C(n,void 0,void 0,function(){return S(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return C(n,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return C(n,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return ps(n).put(new _n(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(Or(n))return O("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return Ki(t).get(At.key).next(function(r){return R.resolve(n.tn(r))})},e.prototype.en=function(t){return ps(t).delete(this.clientId)},e.prototype.nn=function(){return C(this,void 0,void 0,function(){var t,n,r,i,o=this;return S(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(u){var a=Tt(u,_n.store);return a.Nt().next(function(c){var l=o.rn(c,18e5),f=c.filter(function(h){return l.indexOf(h)===-1});return R.forEach(f,function(h){return a.delete(h.clientId)}).next(function(){return f})})}).catch(function(){return[]})]);case 1:if(t=s.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));s.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?R.resolve(!0):Ki(t).get(At.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,ma);return!1}}return!(!n.networkEnabled||!n.inForeground)||ps(t).Nt().next(function(i){return n.rn(i,5e3).find(function(o){if(n.clientId!==o.clientId){var s=!n.networkEnabled&&o.networkEnabled,u=!n.inForeground&&o.inForeground,a=n.networkEnabled===o.networkEnabled;if(s||u&&a)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&O("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return C(this,void 0,void 0,function(){var t=this;return S(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[At.store,_n.store],function(r){var i=new Sh(r,Rt.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return ps(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return jE.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;O("IndexedDbPersistence","Starting transaction:",t);var o,s=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,s,PE,function(u){return o=new Sh(u,i.Ne?i.Ne.next():Rt.o),n==="readwrite-primary"?i.Je(o).next(function(a){return!!a||i.Ye(o)}).next(function(a){if(!a)throw Ue("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new x(b.FAILED_PRECONDITION,gm);return r(o)}).next(function(a){return i.Ze(o).next(function(){return a})}):i.dn(o).next(function(){return r(o)})}).then(function(u){return o.raiseOnCommittedEvent(),u})},e.prototype.dn=function(t){var n=this;return Ki(t).get(At.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new x(b.FAILED_PRECONDITION,ma)})},e.prototype.Ze=function(t){var n=new At(this.clientId,this.allowTabSynchronization,Date.now());return Ki(t).put(At.key,n)},e.yt=function(){return vi.yt()},e.prototype.Xe=function(t){var n=this,r=Ki(t);return r.get(At.key).next(function(i){return n.tn(i)?(O("IndexedDbPersistence","Releasing primary lease."),r.delete(At.key)):R.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Ue("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),tb()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return O("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Ue("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ue("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Ki(e){return Tt(e,At.store)}function ps(e){return Tt(e,_n.store)}function xl(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Am=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var o=0,s=r;o<s.length;o++)s[o].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var o=0,s=n;o<s.length;o++)s[o].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return H.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):bl(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new H(n)).next(function(r){var i=sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,o=n.collectionGroup,s=sc();return this.Ut.getCollectionParents(t,o).next(function(u){return R.forEach(u,function(a){var c=function(l,f){return new An(f,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(o));return i.An(t,c,r).next(function(l){l.forEach(function(f,h){s=s.insert(f,h)})})}).next(function(){return s})})},e.prototype.An=function(t,n,r){var i,o,s=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(u){return i=u,s._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(u){return o=u,s.Rn(t,o,i).next(function(a){i=a;for(var c=0,l=o;c<l.length;c++)for(var f=l[c],h=0,d=f.mutations;h<d.length;h++){var g=d[h],m=g.key,w=i.get(m);w==null&&(w=at.newInvalidDocument(m),i=i.insert(m,w)),oc(g,w,f.localWriteTime),w.isFoundDocument()||(i=i.remove(m))}})}).next(function(){return i.forEach(function(u,a){Ho(n,a)||(i=i.remove(u))}),i})},e.prototype.Rn=function(t,n,r){for(var i=Ie(),o=0,s=n;o<s.length;o++)for(var u=0,a=s[o].mutations;u<a.length;u++){var c=a[u];c instanceof Qn&&r.get(c.key)===null&&(i=i.add(c.key))}var l=r;return this.Ue.getEntries(t,i).next(function(f){return f.forEach(function(h,d){d.isFoundDocument()&&(l=l.insert(h,d))}),l})},e}(),YE=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=Ie(),i=Ie(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Cm=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var o=this;return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(ie.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(s){var u=o.Cn(n,s);return(Is(n)||Gs(n))&&o.Nn(n.limitType,u,i,r)?o.Dn(t,n):(tc()<=fe.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ic(n)),o.Sn.getDocumentsMatchingQuery(t,n,r).next(function(a){return u.forEach(function(c){a=a.insert(c.key,c)}),a}))})},e.prototype.Cn=function(t,n){var r=new $e(Gg(t));return n.forEach(function(i,o){Ho(t,o)&&(r=r.add(o))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var o=t==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return tc()<=fe.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",ic(n)),this.Sn.getDocumentsMatchingQuery(t,n,ie.min())},e}(),XE=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new ct(se),this.Fn=new Mi(function(o){return qo(o)},ku),this.$n=ie.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Am(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(e,t,n,r){return new XE(e,t,n,r)}function xm(e,t){return C(this,void 0,void 0,function(){var n,r,i,o;return S(this,function(s){switch(s.label){case 0:return n=U(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(u){var a;return n._n.getAllMutationBatches(u).next(function(c){return a=c,r=n.persistence.getMutationQueue(t),i=new Am(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(u)}).next(function(c){for(var l=[],f=[],h=Ie(),d=0,g=a;d<g.length;d++){var m=g[d];l.push(m.batchId);for(var w=0,v=m.mutations;w<v.length;w++){var T=v[w];h=h.add(T.key)}}for(var E=0,M=c;E<M.length;E++){var $=M[E];f.push($.batchId);for(var X=0,le=$.mutations;X<le.length;X++){var te=le[X];h=h.add(te.key)}}return i.pn(u,h).next(function(be){return{Ln:be,removedBatchIds:l,addedBatchIds:f}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function JE(e,t){var n=U(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),o=n.On.newChangeBuffer({trackRemovals:!0});return function(s,u,a,c){var l=a.batch,f=l.keys(),h=R.resolve();return f.forEach(function(d){h=h.next(function(){return c.getEntry(u,d)}).next(function(g){var m=a.docVersions.get(d);Y(m!==null),g.version.compareTo(m)<0&&(l.applyToRemoteDocument(g,a),g.isValidDocument()&&c.addEntry(g,a.commitVersion))})}),h.next(function(){return s._n.removeMutationBatch(u,l)})}(n,r,t,o).next(function(){return o.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function Dm(e){var t=U(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function ZE(e,t){var n=U(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var u=[];t.targetChanges.forEach(function(l,f){var h=i.get(f);if(h){u.push(n.qe.removeMatchingKeys(o,l.removedDocuments,f).next(function(){return n.qe.addMatchingKeys(o,l.addedDocuments,f)}));var d=l.resumeToken;if(d.approximateByteSize()>0){var g=h.withResumeToken(d,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(f,g),function(m,w,v){return Y(w.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8||v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,g,l)&&u.push(n.qe.updateTargetData(o,g))}}});var a=Wt();if(t.documentUpdates.forEach(function(l,f){t.resolvedLimboDocuments.has(l)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),u.push(eI(o,s,t.documentUpdates,r,void 0).next(function(l){a=l})),!r.isEqual(ie.min())){var c=n.qe.getLastRemoteSnapshotVersion(o).next(function(l){return n.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});u.push(c)}return R.waitFor(u).next(function(){return s.apply(o)}).next(function(){return n.Mn.En(o,a)}).next(function(){return a})}).then(function(o){return n.kn=i,o})}function eI(e,t,n,r,i){var o=Ie();return n.forEach(function(s){return o=o.add(s)}),t.getEntries(e,o).next(function(s){var u=Wt();return n.forEach(function(a,c){var l=s.get(a),f=(i==null?void 0:i.get(a))||r;c.isNoDocument()&&c.version.isEqual(ie.min())?(t.removeEntry(a,f),u=u.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c,f),u=u.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),u})}function tI(e,t){var n=U(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Xs(e,t){var n=U(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(o){return o?(i=o,R.resolve(i)):n.qe.allocateTargetId(r).next(function(s){return i=new Uu(t,s,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function _i(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:r=U(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(a){return r.persistence.referenceDelegate.removeTarget(a,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Or(s=u.sent()))throw s;return O("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function Js(e,t,n){var r=U(e),i=ie.min(),o=Ie();return r.persistence.runTransaction("Execute query","readonly",function(s){return function(u,a,c){var l=U(u),f=l.Fn.get(c);return f!==void 0?R.resolve(l.kn.get(f)):l.qe.getTargetData(a,c)}(r,s,fn(t)).next(function(u){if(u)return i=u.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(s,u.targetId).next(function(a){o=a})}).next(function(){return r.xn.getDocumentsMatchingQuery(s,t,n?i:ie.min(),n?o:Ie())}).next(function(u){return{documents:u,Bn:o}})})}function Rm(e,t){var n=U(e),r=U(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,t).next(function(s){return s?s.target:null})})}function Om(e){var t=U(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,o){var s=U(r),u=Wt(),a=Cl(o),c=Pn(i),l=IDBKeyRange.lowerBound(a,!0);return c.$t({index:De.readTimeIndex,range:l},function(f,h){var d=ac(s.R,h);u=u.insert(d.key,d),a=h.readTime}).next(function(){return{wn:u,readTime:wm(a)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function nI(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,(t=U(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var o=Pn(i),s=ie.min();return o.$t({index:De.readTimeIndex,reverse:!0},function(u,a,c){a.readTime&&(s=wm(a.readTime)),c.done()}).next(function(){return s})}(r)}).then(function(r){t.$n=r})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rI=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return R.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:gt(r.createTime)}),R.resolve()},e.prototype.getNamedQuery=function(t,n){return R.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:_m(r.bundledQuery),readTime:gt(r.readTime)}}(n)),R.resolve()},e}(),Dl=function(){function e(){this.Wn=new $e(He.Gn),this.zn=new $e(He.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new He(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new He(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new H(new de([])),i=new He(r,t),o=new He(r,t+1),s=[];return this.zn.forEachInRange([i,o],function(u){n.Yn(u),s.push(u.key)}),s},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new H(new de([])),r=new He(n,t),i=new He(n,t+1),o=Ie();return this.zn.forEachInRange([r,i],function(s){o=o.add(s.key)}),o},e.prototype.containsKey=function(t){var n=new He(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),He=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return H.comparator(t.key,n.key)||se(t.ns,n.ns)},e.Hn=function(t,n){return se(t.ns,n.ns)||H.comparator(t.key,n.key)},e}(),iI=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new $e(He.Gn)}return e.prototype.checkEmpty=function(t){return R.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var o=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var s=new Al(o,n,r,i);this._n.push(s);for(var u=0,a=i;u<a.length;u++){var c=a[u];this.rs=this.rs.add(new He(c.key,o)),this.Ut.addToCollectionParentIndex(t,c.key.path.popLast())}return R.resolve(s)},e.prototype.lookupMutationBatch=function(t,n){return R.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),o=i<0?0:i;return R.resolve(this._n.length>o?this._n[o]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return R.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return R.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new He(n,0),o=new He(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([i,o],function(u){var a=r.os(u.ns);s.push(a)}),R.resolve(s)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new $e(se);return n.forEach(function(o){var s=new He(o,0),u=new He(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([s,u],function(a){i=i.add(a.ns)})}),R.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));var s=new He(new H(o),0),u=new $e(se);return this.rs.forEachWhile(function(a){var c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(a.ns)),!0)},s),R.resolve(this.us(u))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var o=n.os(i);o!==null&&r.push(o)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;Y(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return R.forEach(n.mutations,function(o){var s=new He(o.key,n.batchId);return i=i.delete(s),r.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new He(n,0),i=this.rs.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,R.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),oI=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new ct(H.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,o=this.docs.get(i),s=o?o.size:0,u=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:u,readTime:r}),this.size+=u-s,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return R.resolve(r?r.document.clone():at.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Wt();return n.forEach(function(o){var s=r.docs.get(o);i=i.insert(o,s?s.document.clone():at.newInvalidDocument(o))}),R.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Wt(),o=new H(n.path.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),a=u.key,c=u.value,l=c.document,f=c.readTime;if(!n.path.isPrefixOf(a.path))break;f.compareTo(r)<=0||Ho(n,l)&&(i=i.insert(l.key,l.clone()))}return R.resolve(i)},e.prototype.fs=function(t,n){return R.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new sI(this)},e.prototype.getSize=function(t){return R.resolve(this.size)},e}(),sI=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return Q(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(o,s){s.document.isValidDocument()?i.push(r.Ie.addEntry(n,s.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),R.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(Sm),uI=function(){function e(t){this.persistence=t,this.ds=new Mi(function(n){return qo(n)},ku),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ws=0,this._s=new Dl,this.targetCount=0,this.ys=Ys.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),R.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return R.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return R.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),R.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),R.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new Ys(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,R.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),R.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,R.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,s=[];return this.ds.forEach(function(u,a){a.sequenceNumber<=n&&r.get(a.targetId)===null&&(i.ds.delete(u),s.push(i.removeMatchingKeysForTargetId(t,a.targetId)),o++)}),R.waitFor(s).next(function(){return o})},e.prototype.getTargetCount=function(t){return R.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return R.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),R.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(function(s){o.push(i.markPotentiallyOrphaned(t,s))}),R.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),R.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return R.resolve(r)},e.prototype.containsKey=function(t,n){return R.resolve(this._s.containsKey(n))},e}(),aI=function(){function e(t,n){var r=this;this.gs={},this.Ne=new Rt(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new uI(this),this.Ut=new UE,this.Ue=function(i,o){return new oI(i,function(s){return r.referenceDelegate.ps(s)})}(this.Ut),this.R=new vm(n),this.Ke=new rI(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new iI(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;O("MemoryPersistence","Starting transaction:",t);var o=new cI(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(s){return i.referenceDelegate.Ts(o).next(function(){return s})}).toPromise().then(function(s){return o.raiseOnCommittedEvent(),s})},e.prototype.Is=function(t,n){return R.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),cI=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return Q(t,e),t}(mm),lI=function(){function e(t){this.persistence=t,this.As=new Dl,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw K()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),R.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),R.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),R.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(o){o.forEach(function(s){return r.vs.add(s.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.vs,function(i){var o=H.fromPath(i);return n.Ps(t,o).next(function(s){s||r.removeEntry(o)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return R.or([function(){return R.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),We=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(e,t){return"firestore_clients_"+e+"_"+t}function Mh(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function ya(e,t){return"firestore_targets_"+e+"_"+t}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");var Fh=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),s=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new x(o.error.code,o.error.message)),s?new e(t,n,o.state,i):(Ue("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),va=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new x(i.error.code,i.error.message)),o?new e(t,i.state,r):(Ue("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Uh=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Fu(),s=0;i&&s<r.activeTargetIds.length;++s)i=Bg(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(Ue("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),fI=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Ue("SharedClientState","Failed to parse online state: "+t),null)},e}(),cc=function(){function e(){this.activeTargetIds=Fu()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),wa=function(){function e(t,n,r,i,o){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new ct(se),this.started=!1,this.$s=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=Lh(this.persistenceKey,this.Ns),this.Ms=function(u){return"firestore_sequence_number_"+u}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new cc),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(u){return"firestore_online_state_"+u}(this.persistenceKey),this.Ks=function(u){return"firestore_bundle_loaded_"+u}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return C(this,void 0,void 0,function(){var t,n,r,i,o,s,u,a,c,l,f,h=this;return S(this,function(d){switch(d.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=d.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(o=this.getItem(Lh(this.persistenceKey,i)))&&(s=Uh.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(u=this.storage.getItem(this.Us))&&(a=this.js(u))&&this.Ws(a),c=0,l=this.$s;c<l.length;c++)f=l[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(ya(this.persistenceKey,t));if(r){var i=va.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(ya(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(o){i.Hs(o)}),this.currentUser=t,r.forEach(function(o){i.addPendingMutation(o)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return O("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){O("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){O("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(O("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return C(n,void 0,void 0,function(){var i,o,s,u,a,c;return S(this,function(l){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(s=this.si(r.key,r.newValue)))return[2,this.ii(s)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(u=this.ri(r.key,r.newValue)))return[2,this.oi(u)]}else if(r.key===this.Us){if(r.newValue!==null&&(a=this.js(r.newValue)))return[2,this.Ws(a)]}else if(r.key===this.Ms)(c=function(f){var h=Rt.o;if(f!=null)try{var d=JSON.parse(f);Y(typeof d=="number"),h=d}catch(g){Ue("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue))!==Rt.o&&this.sequenceNumberHandler(c);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new Fh(this.currentUser,t,n,r),o=Mh(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Ss())},e.prototype.Hs=function(t){var n=Mh(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=ya(this.persistenceKey,t),o=new va(t,n,r);this.setItem(i,o.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return Uh.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Fh.Vs(new We(o),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return va.Vs(i,n)},e.prototype.js=function(t){return fI.Vs(t)},e.prototype.ii=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(O("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),o=this.Gs(this.Fs),s=this.Gs(i),u=[],a=[];return s.forEach(function(c){o.has(c)||u.push(c)}),o.forEach(function(c){s.has(c)||a.push(c)}),this.syncEngine.hi(u,a).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=Fu();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),Pm=function(){function e(){this.li=new cc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new cc,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),hI=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),Vh=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),dI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pI=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),gI=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return Q(t,e),t.prototype.Fi=function(n,r,i,o){return new Promise(function(s,u){var a=new z_;a.listenOnce($_.COMPLETE,function(){try{switch(a.getLastErrorCode()){case ga.NO_ERROR:var l=a.getResponseJson();O("Connection","XHR received:",JSON.stringify(l)),s(l);break;case ga.TIMEOUT:O("Connection",'RPC "'+n+'" timed out'),u(new x(b.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:var f=a.getStatus();if(O("Connection",'RPC "'+n+'" failed with status:',f,"response text:",a.getResponseText()),f>0){var h=a.getResponseJson().error;if(h&&h.status&&h.message){var d=function(g){var m=g.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(m)>=0?m:b.UNKNOWN}(h.status);u(new x(d,h.message))}else u(new x(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else u(new x(b.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O("Connection",'RPC "'+n+'" completed.')}});var c=JSON.stringify(o);a.send(r,"POST",c,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=B_(),s=q_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new H_({})),this.ki(u.initMessageHeaders,r),Ww()||Xw()||Jw()||Zw()||eb()||Yw()||(u.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");O("Connection","Creating WebChannel: "+a,u);var c=o.createWebChannel(a,u),l=!1,f=!1,h=new pI({Ei:function(g){f?O("Connection","Not sending because WebChannel is closed:",g):(l||(O("Connection","Opening WebChannel transport."),c.open(),l=!0),O("Connection","WebChannel sending:",g),c.send(g))},Ti:function(){return c.close()}}),d=function(g,m,w){g.listen(m,function(v){try{w(v)}catch(T){setTimeout(function(){throw T},0)}})};return d(c,ls.EventType.OPEN,function(){f||O("Connection","WebChannel transport opened.")}),d(c,ls.EventType.CLOSE,function(){f||(f=!0,O("Connection","WebChannel transport closed"),h.Vi())}),d(c,ls.EventType.ERROR,function(g){f||(f=!0,qs("Connection","WebChannel transport errored:",g),h.Vi(new x(b.UNAVAILABLE,"The operation could not be completed")))}),d(c,ls.EventType.MESSAGE,function(g){var m;if(!f){var w=g.data[0];Y(!!w);var v=w,T=v.error||((m=v[0])===null||m===void 0?void 0:m.error);if(T){O("Connection","WebChannel received error:",T);var E=T.status,M=function(X){var le=Me[X];if(le!==void 0)return rm(le)}(E),$=T.message;M===void 0&&(M=b.INTERNAL,$="Unknown error status: "+E+" with message "+T.message),f=!0,h.Vi(new x(M,$)),c.close()}else O("Connection","WebChannel received:",w),h.Si(w)}}),d(s,K_.STAT_EVENT,function(g){g.stat===nh.PROXY?O("Connection","Detected buffering proxy"):g.stat===nh.NOPROXY&&O("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Pi()},0),h},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var o=this.xi(t,n);O("RestConnection","Sending: ",o,r);var s={};return this.ki(s,i),this.Fi(t,o,s,r).then(function(u){return O("RestConnection","Received: ",u),u},function(u){throw qs("RestConnection",t+" failed with error: ",u,"url: ",o,"request:",r),u})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=dI[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return typeof window<"u"?window:null}function As(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e){return new _E(e,!0)}var Rl=function(){function e(t,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&O("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Lm=function(){function e(t,n,r,i,o,s){this.Se=t,this.zi=r,this.Hi=i,this.Ji=o,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rl(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return C(this,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===b.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var o=new x(b.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(o)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return C(t,void 0,void 0,function(){return S(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return O("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),mI=function(e){function t(n,r,i,o,s){var u=this;return(u=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,s)||this).R=o,u}return Q(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(o,s){var u;if("targetChange"in s){s.targetChange;var a=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:K()}(s.targetChange.targetChangeType||"NO_CHANGE"),c=s.targetChange.targetIds||[],l=function(w,v){return w.I?(Y(v===void 0||typeof v=="string"),Et.fromBase64String(v||"")):(Y(v===void 0||v instanceof Uint8Array),Et.fromUint8Array(v||new Uint8Array))}(o,s.targetChange.resumeToken),f=(h=s.targetChange.cause)&&function(w){var v=w.code===void 0?b.UNKNOWN:rm(w.code);return new x(v,w.message||"")}(h);u=new om(a,c,l,f||null)}else if("documentChange"in s){s.documentChange,(a=s.documentChange).document,a.document.name,a.document.updateTime,c=bn(o,a.document.name),l=gt(a.document.updateTime);var h=new xt({mapValue:{fields:a.document.fields}}),d=(f=at.newFoundDocument(c,l,h),a.targetIds||[]),g=a.removedTargetIds||[];u=new Ss(d,g,f.key,f)}else if("documentDelete"in s)s.documentDelete,(a=s.documentDelete).document,c=bn(o,a.document),l=a.readTime?gt(a.readTime):ie.min(),h=at.newNoDocument(c,l),f=a.removedTargetIds||[],u=new Ss([],f,h.key,h);else if("documentRemove"in s)s.documentRemove,(a=s.documentRemove).document,c=bn(o,a.document),l=a.removedTargetIds||[],u=new Ss([],l,c,null);else{if(!("filter"in s))return K();s.filter;var m=s.filter;m.targetId,a=m.count||0,c=new fE(a),l=m.targetId,u=new im(l,c)}return u}(this.R,n),i=function(o){if(!("targetChange"in o))return ie.min();var s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?gt(s.readTime):ie.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=So(this.R),r.addTarget=function(o,s){var u,a=s.target;return(u=Hs(a)?{documents:lm(o,a)}:{query:fm(o,a)}).targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=sm(o,s.resumeToken):s.snapshotVersion.compareTo(ie.min())>0&&(u.readTime=Io(o,s.snapshotVersion.toTimestamp())),u}(this.R,n);var i=function(o,s){var u=function(a,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,s.purpose);return u==null?null:{"goog-listen-tags":u}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=So(this.R),r.removeTarget=n,this.cr(r)},t}(Lm),yI=function(e){function t(n,r,i,o,s){var u=this;return(u=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,s)||this).R=o,u.gr=!1,u}return Q(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(Y(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(o,s){return o&&o.length>0?(Y(s!==void 0),o.map(function(u){return function(a,c){var l=a.updateTime?gt(a.updateTime):gt(c);return l.isEqual(ie.min())&&(l=gt(c)),new aE(l,a.transformResults||[])}(u,s)})):[]}(n.writeResults,n.commitTime),i=gt(n.commitTime);return this.listener.Tr(i,r)}return Y(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=So(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(o){return Ws(r.R,o)})};this.cr(i)},t}(Lm),vI=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).credentials=n,o.Hi=r,o.R=i,o.Rr=!1,o}return Q(t,e),t.prototype.br=function(){if(this.Rr)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.Ni(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new x(b.UNKNOWN,s.toString())})},t.prototype.$i=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.$i(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new x(b.UNKNOWN,s.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),wI=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Ue(n),this.Vr=!1):O("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),bI=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(s){n.enqueueAndForget(function(){return C(o,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return Yn(this)?(O("RemoteStore","Restarting streams for network reachability change."),[4,function(a){return C(this,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return(c=U(a)).Or.add(4),[4,Fi(c)];case 1:return l.sent(),c.Br.set("Unknown"),c.Or.delete(4),[4,Qo(c)];case 2:return l.sent(),[2]}})})}(this)]):[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})}),this.Br=new wI(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:if(!Yn(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Fi(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ju(e,t){var n=U(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),kl(n)?Pl(n):Vi(n).er()&&Ol(n,t))}function Ao(e,t){var n=U(e),r=Vi(n);n.$r.delete(t),r.er()&&Mm(n,t),n.$r.size===0&&(r.er()?r.ir():Yn(n)&&n.Br.set("Unknown"))}function Ol(e,t){e.qr.U(t.targetId),Vi(e).mr(t)}function Mm(e,t){e.qr.U(t),Vi(e).yr(t)}function Pl(e){e.qr=new vE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Vi(e).start(),e.Br.Sr()}function kl(e){return Yn(e)&&!Vi(e).tr()&&e.$r.size>0}function Yn(e){return U(e).Or.size===0}function Fm(e){e.qr=void 0}function _I(e){return C(this,void 0,void 0,function(){return S(this,function(t){return e.$r.forEach(function(n,r){Ol(e,n)}),[2]})})}function EI(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){return Fm(e),kl(e)?(e.Br.Nr(t),Pl(e)):e.Br.set("Unknown"),[2]})})}function II(e,t,n){return C(this,void 0,void 0,function(){var r,i,o;return S(this,function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof om&&t.state===2&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(u,a){return C(this,void 0,void 0,function(){var c,l,f,h;return S(this,function(d){switch(d.label){case 0:c=a.cause,l=0,f=a.targetIds,d.label=1;case 1:return l<f.length?(h=f[l],u.$r.has(h)?[4,u.remoteSyncer.rejectListen(h,c)]:[3,3]):[3,5];case 2:d.sent(),u.$r.delete(h),u.qr.removeTarget(h),d.label=3;case 3:d.label=4;case 4:return l++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),O("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Zs(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Ss?e.qr.X(t):t instanceof im?e.qr.rt(t):e.qr.et(t),n.isEqual(ie.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Dm(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(u,a){var c=u.qr.ut(a);return c.targetChanges.forEach(function(l,f){if(l.resumeToken.approximateByteSize()>0){var h=u.$r.get(f);h&&u.$r.set(f,h.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach(function(l){var f=u.$r.get(l);if(f){u.$r.set(l,f.withResumeToken(Et.EMPTY_BYTE_STRING,f.snapshotVersion)),Mm(u,l);var h=new Uu(f.target,l,1,f.sequenceNumber);Ol(u,h)}}),u.remoteSyncer.applyRemoteEvent(c)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return O("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Zs(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Zs(e,t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:if(!Or(t))throw t;return e.Or.add(1),[4,Fi(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Dm(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(o){switch(o.label){case 0:return O("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return o.sent(),e.Or.delete(1),[4,Qo(e)];case 2:return o.sent(),[2]}})})}),[2]}})})}function Um(e,t){return t().catch(function(n){return Zs(e,n,t)})}function Ui(e){return C(this,void 0,void 0,function(){var t,n,r,i,o;return S(this,function(s){switch(s.label){case 0:t=U(e),n=zn(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(u){return Yn(u)&&u.Fr.length<10}(t))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,tI(t.localStore,r)];case 3:return(i=s.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(u,a){u.Fr.push(a);var c=zn(u);c.er()&&c.pr&&c.Er(a.mutations)}(t,i),[3,6]);case 4:return o=s.sent(),[4,Zs(t,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Vm(t)&&jm(t),[2]}})})}function Vm(e){return Yn(e)&&!zn(e).tr()&&e.Fr.length>0}function jm(e){zn(e).start()}function TI(e){return C(this,void 0,void 0,function(){return S(this,function(t){return zn(e).Ar(),[2]})})}function SI(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(o){for(t=zn(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function AI(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=ME.from(r,t,n),[4,Um(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ui(e)];case 2:return o.sent(),[2]}})})}function CI(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return t&&zn(e).pr?[4,function(r,i){return C(this,void 0,void 0,function(){var o,s;return S(this,function(u){switch(u.label){case 0:return nm(s=i.code)&&s!==b.ABORTED?(o=r.Fr.shift(),zn(r).sr(),[4,Um(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return u.sent(),[4,Ui(r)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Vm(e)&&jm(e),[2]}})})}function lc(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=U(e),t?(n.Or.delete(2),[4,Qo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Fi(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Vi(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var o=U(n);return o.br(),new mI(r,o.Hi,o.credentials,o.R,i)}(e.datastore,e.asyncQueue,{Ii:_I.bind(null,e),Ri:EI.bind(null,e),_r:II.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),kl(e)?Pl(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),Fm(e),r.label=3;case 3:return[2]}})})})),e.Ur}function zn(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var o=U(n);return o.br(),new yI(r,o.Hi,o.credentials,o.R,i)}(e.datastore,e.asyncQueue,{Ii:TI.bind(null,e),Ri:CI.bind(null,e),Ir:SI.bind(null,e),Tr:AI.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,Ui(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(O("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var NI=function(){function e(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(s){})}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function ji(e,t){if(Ue("AsyncQueue",t+": "+e),Or(e))return new x(b.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bm=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||H.comparator(n.key,r.key)}:function(n,r){return H.comparator(n.key,r.key)},this.keyedMap=sc(),this.sortedSet=new ct(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),jh=function(){function e(){this.Qr=new ct(H.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):K():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),eu=function(){function e(t,n,r,i,o,s,u,a){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(s){o.push({type:0,doc:s})}),new e(t,n,Bm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ko(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),xI=function(){this.Wr=void 0,this.listeners=[]},DI=function(){this.queries=new Mi(function(e){return zg(e)},Ko),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u,a;return S(this,function(c){switch(c.label){case 0:if(n=U(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new xI),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return u=c.sent(),a=ji(u,"Initialization of query '"+ic(t.query)+"' failed"),[2,void t.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Fl(n),[2]}})})}function Ml(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s;return S(this,function(u){return n=U(e),r=t.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function RI(e,t){for(var n=U(e),r=!1,i=0,o=t;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);a.Wr=s}}r&&Fl(n)}function OI(e,t,n){var r=U(e),i=r.queries.get(t);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(t)}function Fl(e){e.Gr.forEach(function(t){t.next()})}var Ul=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}t=new eu(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=eu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qm=function(e){this.key=e},$m=function(e){this.key=e},Km=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=Ie(),this.mutatedKeys=Ie(),this.lo=Gg(t),this.fo=new Bm(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new jh,o=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,u=o,a=!1,c=Is(this.query)&&o.size===this.query.limit?o.last():null,l=Gs(this.query)&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(function(h,d){var g=o.get(h),m=Ho(r.query,d)?d:null,w=!!g&&r.mutatedKeys.has(g.key),v=!!m&&(m.hasLocalMutations||r.mutatedKeys.has(m.key)&&m.hasCommittedMutations),T=!1;g&&m?g.data.isEqual(m.data)?w!==v&&(i.track({type:3,doc:m}),T=!0):r.yo(g,m)||(i.track({type:2,doc:m}),T=!0,(c&&r.lo(m,c)>0||l&&r.lo(m,l)<0)&&(a=!0)):!g&&m?(i.track({type:0,doc:m}),T=!0):g&&!m&&(i.track({type:1,doc:g}),T=!0,(c||l)&&(a=!0)),T&&(m?(u=u.add(m),s=v?s.add(h):s.delete(h)):(u=u.delete(h),s=s.delete(h)))}),Is(this.query)||Gs(this.query))for(;u.size>this.query.limit;){var f=Is(this.query)?u.last():u.first();u=u.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{fo:u,mo:i,Nn:a,mutatedKeys:s}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,o=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(l,f){return function(h,d){var g=function(m){switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return g(h)-g(d)}(l.type,f.type)||i.lo(l.doc,f.doc)}),this.po(r);var u=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.ao;return this.ao=a,s.length!==0||c?{snapshot:new eu(this.query,t.fo,o,s,t.mutatedKeys,a===0,c,!1),To:u}:{To:u}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new jh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=Ie(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new $m(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new qm(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ie();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return eu.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),PI=function(e,t,n){this.query=e,this.targetId=t,this.view=n},kI=function(e){this.key=e,this.bo=!1},LI=function(){function e(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Mi(function(u){return zg(u)},Ko),this.Vo=new Map,this.So=new Set,this.Do=new ct(H.comparator),this.Co=new Map,this.No=new Dl,this.xo={},this.ko=new Map,this.Fo=Ys.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function MI(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u;return S(this,function(a){switch(a.label){case 0:return n=$l(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Xs(n.localStore,fn(t))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Vl(n,t,r,u==="current")];case 3:i=a.sent(),n.isPrimaryClient&&ju(n.remoteStore,s),a.label=4;case 4:return[2,i]}})})}function Vl(e,t,n,r){return C(this,void 0,void 0,function(){var i,o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:return e.Oo=function(f,h,d){return function(g,m,w,v){return C(this,void 0,void 0,function(){var T,E,M;return S(this,function($){switch($.label){case 0:return T=m.view._o(w),T.Nn?[4,Js(g.localStore,m.query,!1).then(function(X){var le=X.documents;return m.view._o(le,T)})]:[3,2];case 1:T=$.sent(),$.label=2;case 2:return E=v&&v.targetChanges.get(m.targetId),M=m.view.applyChanges(T,g.isPrimaryClient,E),[2,(fc(g,m.targetId,M.To),M.snapshot)]}})})}(e,f,h,d)},[4,Js(e.localStore,t,!0)];case 1:return i=l.sent(),o=new Km(t,i.Bn),s=o._o(i.documents),u=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),a=o.applyChanges(s,e.isPrimaryClient,u),fc(e,n,a.To),c=new PI(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),a.snapshot)]}})})}function FI(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:return n=U(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(s){return!Ko(s,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,_i(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ao(n.remoteStore,r.targetId),Ei(n,r.targetId)}).catch(Pr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ei(n,r.targetId),[4,_i(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function UI(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:r=Kl(e),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(a,c){var l,f=U(a),h=wt.now(),d=c.reduce(function(g,m){return g.add(m.key)},Ie());return f.persistence.runTransaction("Locally write mutations","readwrite",function(g){return f.Mn.pn(g,d).next(function(m){l=m;for(var w=[],v=0,T=c;v<T.length;v++){var E=T[v],M=lE(E,l.get(E.key));M!=null&&w.push(new Qn(E.key,M,qg(M.value.mapValue),ot.exists(!0)))}return f._n.addMutationBatch(g,h,w,c)})}).then(function(g){return g.applyToLocalDocumentSet(l),{batchId:g.batchId,changes:l}})}(r.localStore,t)];case 2:return i=u.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){var f=a.xo[a.currentUser.toKey()];f||(f=new ct(se)),f=f.insert(c,l),a.xo[a.currentUser.toKey()]=f}(r,i.batchId,n),[4,Xn(r,i.changes)];case 3:return u.sent(),[4,Ui(r.remoteStore)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=ji(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Hm(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:n=U(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ZE(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(o,s){var u=n.Co.get(s);u&&(Y(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.bo=!0:o.modifiedDocuments.size>0?Y(u.bo):o.removedDocuments.size>0&&(Y(u.bo),u.bo=!1))}),[4,Xn(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Pr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Bh(e,t,n){var r=U(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(o,s){var u=s.view.zr(t);u.snapshot&&i.push(u.snapshot)}),function(o,s){var u=U(o);u.onlineState=s;var a=!1;u.queries.forEach(function(c,l){for(var f=0,h=l.listeners;f<h.length;f++)h[f].zr(s)&&(a=!0)}),a&&Fl(u)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function VI(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a;return S(this,function(c){switch(c.label){case 0:return(r=U(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(s=(s=new ct(H.comparator)).insert(o,at.newNoDocument(o,ie.min())),u=Ie().add(o),a=new El(ie.min(),new Map,new $e(se),s,u),[4,Hm(r,a)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),ql(r),[3,4];case 2:return[4,_i(r.localStore,t,!1).then(function(){return Ei(r,t,n)}).catch(Pr)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function jI(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:n=U(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,JE(n.localStore,t)];case 2:return i=o.sent(),Bl(n,r,null),jl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Xn(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function BI(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:r=U(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(s,u){var a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",function(c){var l;return a._n.lookupMutationBatch(c,u).next(function(f){return Y(f!==null),l=f.keys(),a._n.removeMutationBatch(c,f)}).next(function(){return a._n.performConsistencyCheck(c)}).next(function(){return a.Mn.pn(c,l)})})}(r.localStore,t)];case 2:return i=o.sent(),Bl(r,t,n),jl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Xn(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function qI(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s;return S(this,function(u){switch(u.label){case 0:Yn((n=U(e)).remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(a){var c=U(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(l){return c._n.getHighestUnacknowledgedBatchId(l)})}(n.localStore)];case 2:return(r=u.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=u.sent(),s=ji(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}})})}function jl(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function Bl(e,t,n){var r=U(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Ei(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(s){e.No.containsKey(s)||zm(e,s)})}function zm(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(Ao(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),ql(e))}function fc(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof qm?(e.No.addReference(o.key,t),$I(e,o)):o instanceof $m?(O("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||zm(e,o.key)):K()}}function $I(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(O("SyncEngine","New document in limbo: "+n),e.So.add(r),ql(e))}function ql(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new H(de.fromString(t)),r=e.Fo.next();e.Co.set(r,new kI(n)),e.Do=e.Do.insert(n,r),ju(e.remoteStore,new Uu(fn($o(n.path)),r,2,Rt.o))}}function Xn(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:return r=U(e),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(a,c){s.push(r.Oo(c,t,n).then(function(l){if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);var f=YE.Pn(c.targetId,l);o.push(f)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(a,c){return C(this,void 0,void 0,function(){var l,f,h,d,g,m,w,v,T;return S(this,function(E){switch(E.label){case 0:l=U(a),E.label=1;case 1:return E.trys.push([1,3,,4]),[4,l.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(M){return R.forEach(c,function($){return R.forEach($.bn,function(X){return l.persistence.referenceDelegate.addReference(M,$.targetId,X)}).next(function(){return R.forEach($.vn,function(X){return l.persistence.referenceDelegate.removeReference(M,$.targetId,X)})})})})];case 2:return E.sent(),[3,4];case 3:if(!Or(f=E.sent()))throw f;return O("LocalStore","Failed to update sequence numbers: "+f),[3,4];case 4:for(h=0,d=c;h<d.length;h++)g=d[h],m=g.targetId,g.fromCache||(w=l.kn.get(m),v=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(v),l.kn=l.kn.insert(m,T));return[2]}})})}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function KI(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return(n=U(e)).currentUser.isEqual(t)?[3,3]:(O("SyncEngine","User change. New user:",t.toKey()),[4,xm(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(o,s){o.ko.forEach(function(u){u.forEach(function(a){a.reject(new x(b.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Xn(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function HI(e,t){var n=U(e),r=n.Co.get(t);if(r&&r.bo)return Ie().add(r.key);var i=Ie(),o=n.Vo.get(t);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Po.get(a);i=i.unionWith(c.view.wo)}return i}function zI(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:return[4,Js((n=U(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&fc(n,t.targetId,i.To),i)]}})})}function GI(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,Om((t=U(e)).localStore).then(function(r){return Xn(t,r)})]})})}function WI(e,t,n,r){return C(this,void 0,void 0,function(){var i,o;return S(this,function(s){switch(s.label){case 0:return[4,function(u,a){var c=U(u),l=U(c._n);return c.persistence.runTransaction("Lookup mutation documents","readonly",function(f){return l.jt(f,a).next(function(h){return h?c.Mn.pn(f,h):R.resolve(null)})})}((i=U(e)).localStore,t)];case 1:return(o=s.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Ui(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(Bl(i,t,r||null),jl(i,t),function(u,a){U(U(u)._n).Gt(a)}(i.localStore,t)):K(),s.label=4;case 4:return[4,Xn(i,o)];case 5:return s.sent(),[3,7];case 6:O("SyncEngine","Cannot apply mutation batch with id: "+t),s.label=7;case 7:return[2]}})})}function QI(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:return $l(n=U(e)),Kl(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,qh(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,lc(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)u=s[o],ju(n.remoteStore,u);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(a=[],c=Promise.resolve(),n.Vo.forEach(function(f,h){n.sharedClientState.isLocalQueryTarget(h)?a.push(h):c=c.then(function(){return Ei(n,h),_i(n.localStore,h,!0)}),Ao(n.remoteStore,h)}),[4,c]);case 4:return l.sent(),[4,qh(n,a)];case 5:return l.sent(),function(f){var h=U(f);h.Co.forEach(function(d,g){Ao(h.remoteStore,g)}),h.No.ts(),h.Co=new Map,h.Do=new ct(H.comparator)}(n),n.$o=!1,[4,lc(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}})})}function qh(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h,d,g,m,w;return S(this,function(v){switch(v.label){case 0:r=U(e),i=[],o=[],s=0,u=t,v.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(l=r.Vo.get(a))&&l.length!==0?[4,Xs(r.localStore,fn(l[0]))]:[3,7]):[3,13];case 2:c=v.sent(),f=0,h=l,v.label=3;case 3:return f<h.length?(d=h[f],g=r.Po.get(d),[4,zI(r,g)]):[3,6];case 4:(m=v.sent()).snapshot&&o.push(m.snapshot),v.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Rm(r.localStore,a)];case 8:return w=v.sent(),[4,Xs(r.localStore,w)];case 9:return c=v.sent(),[4,Vl(r,Gm(w),a,!1)];case 10:v.sent(),v.label=11;case 11:i.push(c),v.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function Gm(e){return Kg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function YI(e){var t=U(e);return U(U(t.localStore).persistence).fn()}function XI(e,t,n,r){return C(this,void 0,void 0,function(){var i,o,s;return S(this,function(u){switch(u.label){case 0:return(i=U(e)).$o?(O("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Om(i.localStore)];case 3:return o=u.sent(),s=El.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,Xn(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,_i(i.localStore,t,!0)];case 6:return u.sent(),Ei(i,t,r),[3,8];case 7:K(),u.label=8;case 8:return[2]}})})}function JI(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h;return S(this,function(d){switch(d.label){case 0:if(!(r=$l(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(O("SyncEngine","Adding an already active target "+s),[3,5]):[4,Rm(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,Xs(r.localStore,u)];case 3:return a=d.sent(),[4,Vl(r,Gm(u),a.targetId,!1)];case 4:d.sent(),ju(r.remoteStore,a),d.label=5;case 5:return i++,[3,1];case 6:c=function(g){return S(this,function(m){switch(m.label){case 0:return r.Vo.has(g)?[4,_i(r.localStore,g,!1).then(function(){Ao(r.remoteStore,g),Ei(r,g)}).catch(Pr)]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})},l=0,f=n,d.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function $l(e){var t=U(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VI.bind(null,t),t.vo._r=RI.bind(null,t.eventManager),t.vo.Mo=OI.bind(null,t.eventManager),t}function Kl(e){var t=U(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=BI.bind(null,t),t}var Wm=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return this.R=Vu(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return Nm(this.persistence,new Cm,t.initialUser,this.R)},e.prototype.qo=function(t){return new aI(lI.bs,this.R)},e.prototype.Bo=function(t){return new Pm},e.prototype.terminate=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),Qm=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).Qo=n,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return Q(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,nI(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,Kl(this.Qo.syncEngine)];case 4:return i.sent(),[4,Ui(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return Nm(this.persistence,new Cm,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new $E(r,n.asyncQueue)},t.prototype.qo=function(n){var r=xl(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new QE(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,km(),As(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new Pm},t}(Wm),ZI=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Q(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r,i=this;return S(this,function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof wa?(this.sharedClientState.syncEngine={ui:WI.bind(null,r),ai:XI.bind(null,r),hi:JI.bind(null,r),fn:YI.bind(null,r),ci:GI.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(s){return C(i,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return[4,QI(this.Qo.syncEngine,s)];case 1:return u.sent(),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):s||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},t.prototype.Bo=function(n){var r=km();if(!wa.yt(r))throw new x(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=xl(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new wa(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(Qm),hc=function(){function e(){}return e.prototype.initialize=function(t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return Bh(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=KI.bind(null,this.syncEngine),[4,lc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new DI},e.prototype.createDatastore=function(t){var n,r=Vu(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new gI(n));return function(o,s,u){return new vI(o,s,u)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,o,s,u=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(a){return Bh(u.syncEngine,a,0)},s=Vh.yt()?new Vh:new hI,new bI(n,r,i,o,s)},e.prototype.createSyncEngine=function(t,n){return function(r,i,o,s,u,a,c){var l=new LI(r,i,o,s,u,a);return c&&(l.$o=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=U(t),O("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,Fi(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bu=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),e1=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,s){return C(this,void 0,void 0,function(){var u,a,c,l,f,h;return S(this,function(d){switch(d.label){case 0:return u=U(o),a=So(u.R)+"/documents",c={documents:s.map(function(g){return To(u.R,g)})},[4,u.$i("BatchGetDocuments",a,c)];case 1:return l=d.sent(),f=new Map,l.forEach(function(g){var m=function(w,v){return"found"in v?function(T,E){Y(!!E.found),E.found.name,E.found.updateTime;var M=bn(T,E.found.name),$=gt(E.found.updateTime),X=new xt({mapValue:{fields:E.found.fields}});return at.newFoundDocument(M,$,X)}(w,v):"missing"in v?function(T,E){Y(!!E.missing),Y(!!E.readTime);var M=bn(T,E.missing),$=gt(E.readTime);return at.newNoDocument(M,$)}(w,v):K()}(u.R,g);f.set(m.key.toString(),m)}),h=[],[2,(s.forEach(function(g){var m=f.get(g.toString());Y(!!m),h.push(m)}),h)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(o){return r.recordVersion(o)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Wo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,o){var s=H.fromPath(o);n.mutations.push(new _l(s,n.precondition(s)))}),[4,function(i,o){return C(this,void 0,void 0,function(){var s,u,a;return S(this,function(c){switch(c.label){case 0:return s=U(i),u=So(s.R)+"/documents",a={writes:o.map(function(l){return Ws(s.R,l)})},[4,s.Ni("Commit",u,a)];case 1:return c.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K();n=ie.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new x(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?ot.updateTime(n):ot.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(ie.min()))throw new x(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ot.updateTime(n)}return ot.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),t1=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new Rl(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return C(t,void 0,void 0,function(){var n,r,i=this;return S(this,function(o){return n=new e1(this.datastore),(r=this.sc(n))&&r.then(function(s){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(s)}).catch(function(u){i.ic(u)})})}).catch(function(s){i.ic(s)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!Rr(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!nm(n)}return!1},e}(),n1=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=We.UNAUTHENTICATED,this.clientId=Mg.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(o){return C(i,void 0,void 0,function(){return S(this,function(s){switch(s.label){case 0:return O("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return s.sent(),this.user=o,[2]}})})})}return e.prototype.getConfiguration=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return C(t,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=o.sent(),i=ji(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(e,t){return C(this,void 0,void 0,function(){var n,r,i=this;return S(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(s){return C(i,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return r.isEqual(s)?[3,2]:[4,xm(t.localStore,s)];case 1:u.sent(),r=s,u.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function Xm(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Hl(e)];case 1:return n=i.sent(),O("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(o){return function(s,u){return C(this,void 0,void 0,function(){var a,c;return S(this,function(l){switch(l.label){case 0:return(a=U(s)).asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials"),c=Yn(a),a.Or.add(3),[4,Fi(a)];case 1:return l.sent(),c&&a.Br.set("Unknown"),[4,a.remoteSyncer.handleCredentialChange(u)];case 2:return l.sent(),a.Or.delete(3),[4,Qo(a)];case 3:return l.sent(),[2]}})})}(t.remoteStore,o)}),e.onlineComponents=t,[2]}})})}function Hl(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(O("FirestoreClient","Using default OfflineComponentProvider"),[4,Ym(e,new Wm)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function qu(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(O("FirestoreClient","Using default OnlineComponentProvider"),[4,Xm(e,new hc)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function $h(e){return Hl(e).then(function(t){return t.persistence})}function Jm(e){return Hl(e).then(function(t){return t.localStore})}function Kh(e){return qu(e).then(function(t){return t.remoteStore})}function Zm(e){return qu(e).then(function(t){return t.syncEngine})}function Ii(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return[4,qu(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=MI.bind(null,t.syncEngine),n.onUnlisten=FI.bind(null,t.syncEngine),n)]}})})}function Hh(e,t,n){var r=this;n===void 0&&(n={});var i=new It;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new Bu({next:function(g){a.enqueueAndForget(function(){return Ml(u,d)});var m=g.docs.has(c);!m&&g.fromCache?f.reject(new x(b.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?f.reject(new x(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Ul($o(c.path),h,{includeMetadataChanges:!0,so:!0});return Ll(u,d)},[4,Ii(e)];case 1:return[2,o.apply(void 0,[s.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function zh(e,t,n){var r=this;n===void 0&&(n={});var i=new It;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new Bu({next:function(g){a.enqueueAndForget(function(){return Ml(u,d)}),g.fromCache&&l.source==="server"?f.reject(new x(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Ul(c,h,{includeMetadataChanges:!0,so:!0});return Ll(u,d)},[4,Ii(e)];case 1:return[2,o.apply(void 0,[s.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var r1=function(e,t,n,r,i,o,s,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},tu=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Gh=new Map,ey=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Wh=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(We.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),i1=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),o1=function(){function e(t){var n=this;this.currentUser=We.UNAUTHENTICATED,this.oc=new It,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){O("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(O("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(O("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(Y(typeof i.accessToken=="string"),new ey(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Y(t===null||typeof t=="string"),new We(t)},e}(),s1=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=We.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),u1=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new s1(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(We.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e,t,n){if(!n)throw new x(b.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Gl(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new x(b.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function ty(e,t,n,r){if(t===!0&&r===!0)throw new x(b.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Qh(e){if(!H.isDocumentKey(e))throw new x(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Yh(e){if(H.isDocumentKey(e))throw new x(b.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function $u(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":K()}function ge(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new x(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$u(e);throw new x(b.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Xh(e,t){if(t<=0)throw new x(b.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jh=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new x(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new x(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ty("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),Co=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jh({}),this._settingsFrozen=!1,t instanceof tu?(this._databaseId=t,this._credentials=new Wh):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new x(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(r.options.projectId)}(t),this._credentials=new o1(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jh(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Wh;switch(n.type){case"gapi":var r=n.client;return Y(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new u1(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new x(b.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=Gh.get(t))&&(O("ComponentProvider","Removing Datastore"),Gh.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),xe=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new qn(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Pt=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),qn=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,$o(i))||this)._path=i,o.type="collection",o}return Q(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new xe(this.firestore,null,new H(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(Pt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ve(e),zl("collection","path",t),e instanceof Co)return Yh(n=de.fromString.apply(de,Re([t],r))),new qn(e,null,n);if(!(e instanceof xe||e instanceof qn))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yh(n=de.fromString.apply(de,Re([e.path],r)).child(de.fromString(t))),new qn(e.firestore,null,n)}function Cs(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ve(e),arguments.length===1&&(t=Mg.u()),zl("doc","path",t),e instanceof Co)return Qh(n=de.fromString.apply(de,Re([t],r))),new xe(e,null,new H(n));if(!(e instanceof xe||e instanceof qn))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qh(n=e._path.child(de.fromString.apply(de,Re([t],r)))),new xe(e.firestore,e instanceof qn?e.converter:null,new H(n))}function ry(e,t){return e=Ve(e),t=Ve(t),(e instanceof xe||e instanceof qn)&&(t instanceof xe||t instanceof qn)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function iy(e,t){return e=Ve(e),t=Ve(t),e instanceof Pt&&t instanceof Pt&&e.firestore===t.firestore&&Ko(e._query,t._query)&&e.converter===t.converter}var a1=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rl(this,"async_queue_retry"),this.Ic=function(){var r=As();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=As();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=As();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new It;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Or(t=r.sent()))throw t;return O("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,Ue("INTERNAL UNHANDLED ERROR: ",function(o){var s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var o=NI.createAndSchedule(this,t,n,r,function(s){return i.vc(s)});return this.mc.push(o),o},e.prototype.Ac=function(){this.yc&&K()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(s,u){return s.targetTimeMs-u.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),t!=="all"&&o.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function Ti(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in r&&typeof r[s]=="function")return!0}return!1}(e)}var c1=-1,qe=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new a1,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return Q(t,e),t.prototype._terminate=function(){return this._firestoreClient||oy(this),this._firestoreClient.terminate()},t}(Co);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e){return e._firestoreClient||oy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function oy(e){var t,n=e._freezeSettings(),r=function(i,o,s,u){return new r1(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new n1(e._credentials,e._queue,r)}function Zh(e,t,n){var r=this,i=new It;return e.asyncQueue.enqueue(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Ym(e,n)];case 1:return s.sent(),[4,Xm(e,t)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(u){return u.name==="FirebaseError"?u.code===b.FAILED_PRECONDITION||u.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(o=s.sent()))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ed(e){if(e._initialized||e._terminated)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Sr=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(Et.fromBase64String(t))}catch(n){throw new x(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Et.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),kr=function(e){this._methodName=e},Ku=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new x(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new x(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return se(this._lat,t._lat)||se(this._long,t._long)},e}(),l1=/^__.*__$/,f1=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Qn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Go(t,this.data,n,this.fieldTransforms)},e}(),sy=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Qn(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var ay=function(){function e(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return nu(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(uy(this.Nc)&&l1.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),h1=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||Vu(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new ay({Nc:t,methodName:n,qc:r,path:Yt.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Lr(e){var t=e._freezeSettings(),n=Vu(e._databaseId);return new h1(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hu(e,t,n,r,i,o){o===void 0&&(o={});var s=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);Xl("Data must be an object, but it was:",s,r);var u,a,c=fy(r,s);if(o.merge)u=new li(s.fieldMask),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var d=dc(t,h[f],n);if(!s.contains(d))throw new x(b.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");dy(l,d)||l.push(d)}u=new li(l),a=s.fieldTransforms.filter(function(g){return u.covers(g.field)})}else u=null,a=s.fieldTransforms;return new f1(new xt(c),u,a)}var Wl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(kr);function cy(e,t,n){return new ay({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var d1=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype._toFieldTransform=function(n){return new zo(n.path,new pi)},t.prototype.isEqual=function(n){return n instanceof t},t}(kr),p1=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=cy(this,n,!0),i=this.Kc.map(function(s){return Mr(s,r)}),o=new Ir(i);return new zo(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(kr),g1=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=cy(this,n,!0),i=this.Kc.map(function(s){return Mr(s,r)}),o=new Tr(i);return new zo(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(kr),m1=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=new gi(n.R,Yg(n.R,this.Qc));return new zo(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(kr);function Ql(e,t,n,r){var i=e.Uc(1,t,n);Xl("Data must be an object, but it was:",i,r);var o=[],s=xt.empty();Dr(r,function(a,c){var l=Jl(t,a,n);c=Ve(c);var f=i.Oc(l);if(c instanceof Wl)o.push(l);else{var h=Mr(c,f);h!=null&&(o.push(l),s.set(l,h))}});var u=new li(o);return new sy(s,u,i.fieldTransforms)}function Yl(e,t,n,r,i,o){var s=e.Uc(1,t,n),u=[dc(t,r,n)],a=[i];if(o.length%2!=0)throw new x(b.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(dc(t,o[c])),a.push(o[c+1]);for(var l=[],f=xt.empty(),h=u.length-1;h>=0;--h)if(!dy(l,u[h])){var d=u[h],g=a[h];g=Ve(g);var m=s.Oc(d);if(g instanceof Wl)l.push(d);else{var w=Mr(g,m);w!=null&&(l.push(d),f.set(d,w))}}var v=new li(l);return new sy(f,v,s.fieldTransforms)}function ly(e,t,n,r){return r===void 0&&(r=!1),Mr(n,e.Uc(r?4:3,t))}function Mr(e,t){if(hy(e=Ve(e)))return Xl("Unsupported field value:",t,e),fy(e,t);if(e instanceof kr)return function(n,r){if(!uy(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],o=0,s=0,u=n;s<u.length;s++){var a=Mr(u[s],r.Mc(o));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Ve(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Yg(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=wt.fromDate(n);return{timestampValue:Io(r.R,i)}}if(n instanceof wt)return i=new wt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Io(r.R,i)};if(n instanceof Ku)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Sr)return{bytesValue:sm(r.R,n._byteString)};if(n instanceof xe){i=r.databaseId;var o=n.firestore._databaseId;if(!o.isEqual(i))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Tl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+$u(n))}(e,t)}function fy(e,t){var n={};return Ug(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dr(e,function(r,i){var o=Mr(i,t.kc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hy(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wt||e instanceof Ku||e instanceof Sr||e instanceof xe||e instanceof kr)}function Xl(e,t,n){if(!hy(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=$u(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function dc(e,t,n){if((t=Ve(t))instanceof an)return t._internalPath;if(typeof t=="string")return Jl(e,t);throw nu("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var y1=new RegExp("[~\\*/\\[\\]]");function Jl(e,t,n){if(t.search(y1)>=0)throw nu("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(an.bind.apply(an,Re([void 0],t.split("."))))()._internalPath}catch{throw nu("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function nu(e,t,n,r,i){var o=r&&!r.isEmpty(),s=i!==void 0,u="Function "+t+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new x(b.INVALID_ARGUMENT,(u+=". ")+e+a)}function dy(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function(){function e(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new xe(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new v1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(ru("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),v1=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(No);function ru(e,t){return typeof t=="string"?Jl(e,t):t instanceof an?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),En=function(e){function t(n,r,i,o,s,u){var a=this;return(a=e.call(this,n,r,i,o,u)||this)._firestore=n,a._firestoreImpl=n,a.metadata=s,a}return Q(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new ro(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(ru("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(No),ro=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(En),Fn=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new fr(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new ro(r._firestore,r._userDataWriter,i.key,i,new fr(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(u){return{type:"added",doc:new ro(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(u){return i||u.type!==3}).map(function(u){var a=new ro(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,l=-1;return u.type!==0&&(c=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(l=(s=s.add(u.doc)).indexOf(u.doc.key)),{type:w1(u.type),doc:a,oldIndex:c,newIndex:l}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function w1(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function py(e,t){return e instanceof En&&t instanceof En?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fn&&t instanceof Fn&&e._firestore===t._firestore&&iy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(e){if(Gs(e)&&e.explicitOrderBy.length===0)throw new x(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yo=function(){};function Dn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var b1=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).jc=n,o.Wc=r,o.Gc=i,o.type="where",o}return Q(t,e),t.prototype._apply=function(n){var r=Lr(n.firestore),i=function(o,s,u,a,c,l,f){var h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new x(b.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+l+"' queries on FieldPath.documentId().");if(l==="in"||l==="not-in"){od(f,l);for(var d=[],g=0,m=f;g<m.length;g++){var w=m[g];d.push(id(a,o,w))}h={arrayValue:{values:d}}}else h=id(a,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||od(f,l),h=ly(u,"where",f,l==="in"||l==="not-in");var v=Ot.create(c,l,h);return function(T,E){if(E.g()){var M=wl(T);if(M!==null&&!M.isEqual(E.field))throw new x(b.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+M.toString()+"' and '"+E.field.toString()+"'");var $=vl(T);$!==null&&yy(T,E.field,$)}var X=function(le,te){for(var be=0,ye=le.filters;be<ye.length;be++){var Be=ye[be];if(te.indexOf(Be.op)>=0)return Be.op}return null}(T,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(E.op));if(X!==null)throw X===E.op?new x(b.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+E.op.toString()+"' filter."):new x(b.INVALID_ARGUMENT,"Invalid query. You cannot use '"+E.op.toString()+"' filters with '"+X.toString()+"' filters.")}(o,v),v}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Pt(n.firestore,n.converter,function(o,s){var u=o.filters.concat([s]);return new An(o.path,o.collectionGroup,o.explicitOrderBy.slice(),u,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,i))},t}(Yo),_1=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return Q(t,e),t.prototype._apply=function(n){var r=function(i,o,s){if(i.startAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var u=new ri(o,s);return function(a,c){if(vl(a)===null){var l=wl(a);l!==null&&yy(a,l,c.field)}}(i,u),u}(n._query,this.jc,this.zc);return new Pt(n.firestore,n.converter,function(i,o){var s=i.explicitOrderBy.concat([o]);return new An(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Yo),td=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Hc=r,o.Jc=i,o}return Q(t,e),t.prototype._apply=function(n){return new Pt(n.firestore,n.converter,Hg(n._query,this.Hc,this.Jc))},t}(Yo),nd=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return Q(t,e),t.prototype._apply=function(n){var r=my(n,this.type,this.Yc,this.Xc);return new Pt(n.firestore,n.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(n._query,r))},t}(Yo),rd=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return Q(t,e),t.prototype._apply=function(n){var r=my(n,this.type,this.Yc,this.Xc);return new Pt(n.firestore,n.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(n._query,r))},t}(Yo);function my(e,t,n,r){if(n[0]=Ve(n[0]),n[0]instanceof No)return function(o,s,u,a,c){if(!a)throw new x(b.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+u+"().");for(var l=[],f=0,h=di(o);f<h.length;f++){var d=h[f];if(d.field.isKeyField())l.push(Ks(s,a.key));else{var g=a.data.field(d.field);if(gl(g))throw new x(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){var m=d.field.canonicalString();throw new x(b.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+m+"' (used as the orderBy) does not exist.")}l.push(g)}}return new Eo(l,c)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Lr(e.firestore);return function(o,s,u,a,c,l){var f=o.explicitOrderBy;if(c.length>f.length)throw new x(b.INVALID_ARGUMENT,"Too many arguments provided to "+a+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var h=[],d=0;d<c.length;d++){var g=c[d];if(f[d].field.isKeyField()){if(typeof g!="string")throw new x(b.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+a+"(), but got a "+typeof g);if(!bl(o)&&g.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+a+"() must be a plain document ID, but '"+g+"' contains a slash.");var m=o.path.child(de.fromString(g));if(!H.isDocumentKey(m))throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+a+"() must result in a valid document path, but '"+m+"' is not because it contains an odd number of segments.");var w=new H(m);h.push(Ks(s,w))}else{var v=ly(u,a,g);h.push(v)}}return new Eo(h,l)}(e._query,e.firestore._databaseId,i,t,n,r)}function id(e,t,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bl(t)&&n.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(de.fromString(n));if(!H.isDocumentKey(r))throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ks(e,new H(r))}if(n instanceof xe)return Ks(e,n._key);throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$u(n)+".")}function od(e,t){if(!Array.isArray(e)||e.length===0)throw new x(b.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new x(b.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function yy(e,t,n){if(!n.isEqual(t))throw new x(b.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zl=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Er(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw K()}},e.prototype.convertObject=function(t,n){var r=this,i={};return Dr(t.fields,function(o,s){i[o]=r.convertValue(s,n)}),i},e.prototype.convertGeoPoint=function(t){return new Ku(Fe(t.latitude),Fe(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=jg(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bo(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Hn(t);return new wt(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=de.fromString(t);Y(pm(r));var i=new tu(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||Ue("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),o},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var E1=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new Sr(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new xe(this.firestore,null,r)},t}(Zl),I1=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lr(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=Un(t,this._firestore),o=zu(i.converter,n,r),s=Hu(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ot.none())),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var s,u=Un(t,this._firestore);return s=typeof(n=Ve(n))=="string"||n instanceof an?Yl(this._dataReader,"WriteBatch.update",u._key,n,r,i):Ql(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(s.toMutation(u._key,ot.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=Un(t,this._firestore);return this._mutations=this._mutations.concat(new Wo(n._key,ot.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new x(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(e,t){if((e=Ve(e)).firestore!==t)throw new x(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new Sr(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new xe(this.firestore,null,r)},t}(Zl);function sd(e,t,n){e=ge(e,xe);var r=ge(e.firestore,qe),i=zu(e.converter,t,n);return Xo(r,[Hu(Lr(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ot.none())])}function ud(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=ge(e,xe);var o=ge(e.firestore,qe),s=Lr(o);return Xo(o,[(typeof(t=Ve(t))=="string"||t instanceof an?Yl(s,"updateDoc",e._key,t,n,r):Ql(s,"updateDoc",e._key,t)).toMutation(e._key,ot.exists(!0))])}function vy(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=Ve(e);var s={includeMetadataChanges:!1},u=0;typeof i[u]!="object"||Ti(i[u])||(s=i[u],u++);var a,c,l,f={includeMetadataChanges:s.includeMetadataChanges};if(Ti(i[u])){var h=i[u];i[u]=(t=h.next)===null||t===void 0?void 0:t.bind(h),i[u+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),i[u+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}if(e instanceof xe)c=ge(e.firestore,qe),l=$o(e._key.path),a={next:function(m){i[u]&&i[u](pc(c,e,m))},error:i[u+1],complete:i[u+2]};else{var d=ge(e,Pt);c=ge(d.firestore,qe),l=d._query;var g=new yr(c);a={next:function(m){i[u]&&i[u](new Fn(c,g,d,m))},error:i[u+1],complete:i[u+2]},gy(e._query)}return function(m,w,v,T){var E=this,M=new Bu(T),$=new Ul(w,M,v);return m.asyncQueue.enqueueAndForget(function(){return C(E,void 0,void 0,function(){var X;return S(this,function(le){switch(le.label){case 0:return X=Ll,[4,Ii(m)];case 1:return[2,X.apply(void 0,[le.sent(),$])]}})})}),function(){M.Wo(),m.asyncQueue.enqueueAndForget(function(){return C(E,void 0,void 0,function(){var X;return S(this,function(le){switch(le.label){case 0:return X=Ml,[4,Ii(m)];case 1:return[2,X.apply(void 0,[le.sent(),$])]}})})})}}(nt(c),l,f,a)}function Xo(e,t){return function(n,r){var i=this,o=new It;return n.asyncQueue.enqueueAndForget(function(){return C(i,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return s=UI,[4,Zm(n)];case 1:return[2,s.apply(void 0,[u.sent(),r,o])]}})})}),o.promise}(nt(e),t)}function pc(e,t,n){var r=n.docs.get(t._key),i=new yr(e);return new En(e,i,t._key,r,new fr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T1=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return Q(t,e),t.prototype.get=function(n){var r=this,i=Un(n,this._firestore),o=new yr(this._firestore);return e.prototype.get.call(this,n).then(function(s){return new En(r._firestore,o,i._key,s._document,new fr(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=Lr(t)}return e.prototype.get=function(t){var n=this,r=Un(t,this._firestore),i=new E1(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||o.length!==1)return K();var s=o[0];if(s.isFoundDocument())return new No(n._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new No(n._firestore,i,r._key,null,r.converter);throw K()})},e.prototype.set=function(t,n,r){var i=Un(t,this._firestore),o=zu(i.converter,n,r),s=Hu(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s,u=Un(t,this._firestore);return s=typeof(n=Ve(n))=="string"||n instanceof an?Yl(this._dataReader,"Transaction.update",u._key,n,r,i):Ql(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,s),this},e.prototype.delete=function(t){var n=Un(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(){if(typeof Uint8Array>"u")throw new x(b.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cd(){if(typeof atob>"u")throw new x(b.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wy=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return cd(),new e(Sr.fromBase64String(t))},e.fromUint8Array=function(t){return ad(),new e(Sr.fromUint8Array(t))},e.prototype.toBase64=function(){return cd(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return ad(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),S1=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){ed(r=ge(r,qe));var o=nt(r),s=r._freezeSettings(),u=new hc;return Zh(o,u,new Qm(u,s.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){ed(n=ge(n,qe));var r=nt(n),i=n._freezeSettings(),o=new hc;return Zh(r,o,new ZI(o,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new x(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new It;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(u){return C(this,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return vi.yt()?(a=u+"main",[4,vi.delete(a)]):[2,Promise.resolve()];case 1:return c.sent(),[2]}})})}(xl(n._databaseId,n._persistenceKey))];case 1:return s.sent(),i.resolve(),[3,3];case 2:return o=s.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),by=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tu||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||qs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,o,s,u){var a;u===void 0&&(u={});var c=(i=ge(i,Co))._getSettings();if(c.host!=="firestore.googleapis.com"&&c.host!==o&&qs("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:o+":"+s,ssl:!1})),u.mockUserToken){var l,f;if(typeof u.mockUserToken=="string")l=u.mockUserToken,f=We.MOCK_USER;else{l=Gw(u.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);var h=u.mockUserToken.sub||u.mockUserToken.user_id;if(!h)throw new x(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new We(h)}i._credentials=new i1(new ey(l,f))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return[4,$h(t)];case 1:return r=o.sent(),[4,Kh(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),function(s){var u=U(s);return u.Or.delete(0),Qo(u)}(i))]}})})})}(nt(ge(this._delegate,qe)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return[4,$h(t)];case 1:return r=o.sent(),[4,Kh(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(s){return C(this,void 0,void 0,function(){var u;return S(this,function(a){switch(a.label){case 0:return(u=U(s)).Or.add(0),[4,Fi(u)];case 1:return a.sent(),u.Br.set("Offline"),[2]}})})}(i))]}})})})}(nt(ge(this._delegate,qe)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&ty("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new It;return t.asyncQueue.enqueueAndForget(function(){return C(n,void 0,void 0,function(){var i;return S(this,function(o){switch(o.label){case 0:return i=qI,[4,Zm(t)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}(nt(ge(this._delegate,qe)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,o){var s=this,u=new Bu(o);return i.asyncQueue.enqueueAndForget(function(){return C(s,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return a=function(l,f){U(l).Gr.add(f),f.next()},[4,Ii(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})}),function(){u.Wo(),i.asyncQueue.enqueueAndForget(function(){return C(s,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return a=function(l,f){U(l).Gr.delete(f)},[4,Ii(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})})}}(nt(n=ge(n,qe)),Ti(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new iu(this,ny(this._delegate,t))}catch(n){throw ft(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new vr(this,Cs(this._delegate,t))}catch(n){throw ft(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Qu(this,function(n,r){if(n=ge(n,Co),zl("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new x(b.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Pt(n,null,function(i){return new An(de.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw ft(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(o,s){var u=this,a=new It;return o.asyncQueue.enqueueAndForget(function(){return C(u,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return[4,function(f){return qu(f).then(function(h){return h.datastore})}(o)];case 1:return c=l.sent(),new t1(o.asyncQueue,c,s,a).run(),[2]}})})}),a.promise}(nt(r),function(o){return i(new T1(r,o))})}(this._delegate,function(r){return t(new _y(n,r))})},e.prototype.batch=function(){var t=this;return nt(this._delegate),new Ey(new I1(this._delegate,function(n){return Xo(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new x(b.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new x(b.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Gu=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new wy(new Sr(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return vr.eu(r,this.firestore,null)},t}(Zl);function A1(e){var t;t=e,Gt.setLogLevel(t)}var _y=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Gu(t)}return e.prototype.get=function(t){var n=this,r=hr(t);return this._delegate.get(r).then(function(i){return new xo(n._firestore,new En(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=hr(t);return r?(Gl("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=hr(t);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Re([u,n,r],o)),this},e.prototype.delete=function(t){var n=hr(t);return this._delegate.delete(n),this},e}(),Ey=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=hr(t);return r?(Gl("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=hr(t);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Re([u,n,r],o)),this},e.prototype.delete=function(t){var n=hr(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Wu=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new ro(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Do(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Gu(t),n),i.set(n,o)),o},e}();Wu.su=new WeakMap;var vr=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Gu(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new x(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new xe(n._delegate,r,new H(t)))},e.eu=function(t,n,r){return new e(n,new xe(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new iu(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new iu(this.firestore,ny(this._delegate,t))}catch(n){throw ft(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Ve(t))instanceof xe&&ry(this._delegate,t)},e.prototype.set=function(t,n){n=Gl("DocumentReference.set",n);try{return n?sd(this._delegate,t,n):sd(this._delegate,t)}catch(r){throw ft(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?ud(this._delegate,t):ud.apply(void 0,Re([this._delegate,t,n],r))}catch(o){throw ft(o,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Xo(ge((t=this._delegate).firestore,qe),[new Wo(t._key,ot.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=Iy(n),o=Ty(n,function(s){return new xo(t.firestore,new En(t.firestore._delegate,t._userDataWriter,s._key,s._document,s.metadata,t._delegate.converter))});return vy(this._delegate,i,o)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=ge(r,xe);var i=ge(r.firestore,qe),o=nt(i),s=new yr(i);return function(u,a){var c=this,l=new It;return u.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return S(this,function(h){switch(h.label){case 0:return f=function(d,g,m){return C(this,void 0,void 0,function(){var w,v;return S(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,,3]),[4,function(E,M){var $=U(E);return $.persistence.runTransaction("read document","readonly",function(X){return $.Mn.mn(X,M)})}(d,g)];case 1:return(v=T.sent()).isFoundDocument()?m.resolve(v):v.isNoDocument()?m.resolve(null):m.reject(new x(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return w=T.sent(),v=ji(w,"Failed to get document '"+g+" from cache"),m.reject(v),[3,3];case 3:return[2]}})})},[4,Jm(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._key).then(function(u){return new En(i,s,r._key,u,new fr(u!==null&&u.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=ge(r,xe);var i=ge(r.firestore,qe);return Hh(nt(i),r._key,{source:"server"}).then(function(o){return pc(i,r,o)})}(this._delegate):function(r){r=ge(r,xe);var i=ge(r.firestore,qe);return Hh(nt(i),r._key).then(function(o){return pc(i,r,o)})}(this._delegate)).then(function(r){return new xo(n.firestore,new En(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Wu.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function ft(e,t,n){return e.message=e.message.replace(t,n),e}function Iy(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Ti(r))return r}return{}}function Ty(e,t){var n,r,i;return{next:function(o){i.next&&i.next(t(o))},error:(n=(i=Ti(e[0])?e[0]:Ti(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var xo=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new vr(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return py(this._delegate,t._delegate)},e}(),Do=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(xo),Qu=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Gu(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Dn(this._delegate,function(i,o,s){var u=o,a=ru("where",i);return new b1(a,u,s)}(t,n,r)))}catch(i){throw ft(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Dn(this._delegate,function(r,i){i===void 0&&(i="asc");var o=i,s=ru("orderBy",r);return new _1(s,o)}(t,n)))}catch(r){throw ft(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Dn(this._delegate,function(n){return Xh("limit",n),new td("limit",n,"F")}(t)))}catch(n){throw ft(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Dn(this._delegate,function(n){return Xh("limitToLast",n),new td("limitToLast",n,"L")}(t)))}catch(n){throw ft(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Dn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new nd("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw ft(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Dn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new nd("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw ft(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Dn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rd("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw ft(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Dn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rd("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw ft(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return iy(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=ge(r,Pt);var i=ge(r.firestore,qe),o=nt(i),s=new yr(i);return function(u,a){var c=this,l=new It;return u.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return S(this,function(h){switch(h.label){case 0:return f=function(d,g,m){return C(this,void 0,void 0,function(){var w,v,T,E,M;return S(this,function($){switch($.label){case 0:return $.trys.push([0,2,,3]),[4,Js(d,g,!0)];case 1:return M=$.sent(),w=new Km(g,M.Bn),v=w._o(M.documents),T=w.applyChanges(v,!1),m.resolve(T.snapshot),[3,3];case 2:return E=$.sent(),M=ji(E,"Failed to execute query '"+g+" against cache"),m.reject(M),[3,3];case 3:return[2]}})})},[4,Jm(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._query).then(function(u){return new Fn(i,s,r,u)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=ge(r,Pt);var i=ge(r.firestore,qe),o=nt(i),s=new yr(i);return zh(o,r._query,{source:"server"}).then(function(u){return new Fn(i,s,r,u)})}(this._delegate):function(r){r=ge(r,Pt);var i=ge(r.firestore,qe),o=nt(i),s=new yr(i);return gy(r._query),zh(o,r._query).then(function(u){return new Fn(i,s,r,u)})}(this._delegate)).then(function(r){return new gc(n.firestore,new Fn(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=Iy(n),o=Ty(n,function(s){return new gc(t.firestore,new Fn(t.firestore._delegate,t._userDataWriter,t._delegate,s._snapshot))});return vy(this._delegate,i,o)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Wu.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),C1=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Do(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),gc=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Qu(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new Do(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new C1(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new Do(r._firestore,i))})},e.prototype.isEqual=function(t){return py(this._delegate,t._delegate)},e}(),iu=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return Q(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new vr(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new vr(this.firestore,n===void 0?Cs(this._delegate):Cs(this._delegate,n))}catch(r){throw ft(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,o){var s=ge(i.firestore,qe),u=Cs(i),a=zu(i.converter,o);return Xo(s,[Hu(Lr(i.firestore),"addDoc",u._key,a,i.converter!==null,{}).toMutation(u._key,ot.exists(!1))]).then(function(){return u})}(this._delegate,n).then(function(i){return new vr(r.firestore,i)})},t.prototype.isEqual=function(n){return ry(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(Wu.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Qu);function hr(e){return ge(e,xe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N1=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(an.bind.apply(an,Re([void 0],t)))}return e.documentId=function(){return new e(Yt.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Ve(t))instanceof an&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),x1=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new d1("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Wl("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new p1("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new g1("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new m1("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(),D1={Firestore:by,GeoPoint:Ku,Timestamp:wt,Blob:wy,Transaction:_y,WriteBatch:Ey,DocumentReference:vr,DocumentSnapshot:xo,Query:Qu,QueryDocumentSnapshot:Do,QuerySnapshot:gc,CollectionReference:iu,FieldPath:N1,FieldValue:x1,setLogLevel:A1,CACHE_SIZE_UNLIMITED:c1};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(e){(function(t,n){t.INTERNAL.registerComponent(new bu("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},D1)))})(e,function(t,n){return new by(t,new qe(t,n),new S1)}),e.registerVersion("@firebase/firestore","2.4.1")}R1(Oi);const O1={apiKey:"AIzaSyASUUhv96yP8JuJ1YcFY-yl9w8AwqtoBc8",authDomain:"potion-14662.firebaseapp.com",projectId:"potion-14662",storageBucket:"potion-14662.appspot.com",messagingSenderId:"1063584598591",appId:"1:1063584598591:web:953af8a3b6f835bb2e868a",measurementId:"G-01KL92CGGC"};Oi.initializeApp(O1);const dr=Oi.firestore(),P1={components:{close:Nw,DeleteButton:kw,AddButton:jw},data(){return{pages:[],isSidebarVisible:!1,rotate:!1}},created(){this.fetchPages()},methods:{async fetchPages(){const e=await dr.collection("pages").get();this.pages=e.docs.map(t=>({id:t.id,...t.data()}))},clearAllAndToggleSidebar(){this.clearAll(),this.toggleSidebar()},toggleSidebar(){this.isSidebarVisible=!this.isSidebarVisible,this.rotate=!this.rotate,this.rotate?this.$refs.closeButton.classList.add("rotate"):this.$refs.closeButton.classList.remove("rotate")},async addPage(){const e={id:Ew(),title:`Page ${this.pages.length+1}`,content:""};this.pages.push(e),await dr.collection("pages").doc(e.id).set(e)},async deletePage(e){const t=this.pages[e].id;this.pages.splice(e,1),await dr.collection("pages").doc(t).delete()},async clearAll(){for(const e of this.pages)await dr.collection("pages").doc(e.id).delete();this.pages=[]}}};const k1=pe("h1",{class:"sidebar-header"},"Potion",-1),L1={class:"menu"},M1={class:"page-title"},F1={class:"button-wrapper"},U1=["onClick"],V1={class:"buttons"},j1=pe("p",null,"Clear all",-1),B1=pe("p",null,"New Page",-1);function q1(e,t,n,r,i,o){const s=Wr("close"),u=Wr("router-link"),a=Wr("delete-button"),c=Wr("add-button"),l=l0("auto-animate");return on(),sn(Ct,null,[pe("button",{ref:"closeButton",class:"close",onClick:t[0]||(t[0]=(...f)=>o.toggleSidebar&&o.toggleSidebar(...f))},[Oe(s)],512),pe("ul",{class:uu(["sidebar",{"slide-out":!i.isSidebarVisible}])},[Oe(u,{to:"/"},{default:Gi(()=>[k1]),_:1}),Oa((on(),sn("span",L1,[(on(!0),sn(Ct,null,f0(i.pages,(f,h)=>(on(),sn("li",{class:"menu-item",key:f.id},[Oe(u,{to:`/page/${f.id}`,class:"menu-item",onClick:o.toggleSidebar},{default:Gi(()=>[pe("p",M1,Gy(f.title),1),pe("div",F1,[Oe(u,{to:"/"},{default:Gi(()=>[pe("button",{class:"delete",onClick:dw(d=>o.deletePage(h),["stop"])},[Oe(a)],8,U1)]),_:2},1024)])]),_:2},1032,["to","onClick"])]))),128))])),[[l]]),pe("div",V1,[Oe(u,{to:"/"},{default:Gi(()=>[pe("button",{onClick:t[1]||(t[1]=(...f)=>o.clearAllAndToggleSidebar&&o.clearAllAndToggleSidebar(...f)),class:"clear-all"},[Oe(a,{class:"clear-button"}),j1])]),_:1}),pe("button",{onClick:t[2]||(t[2]=(...f)=>o.addPage&&o.addPage(...f)),class:"new-page"},[Oe(c,{class:"add-button"}),B1])])],2)],64)}const $1=Nr(P1,[["render",q1]]),K1={components:{Sidebar:$1}};function H1(e,t,n,r,i,o){const s=Wr("sidebar"),u=Wr("router-view");return on(),sn(Ct,null,[Oe(s),Oe(u)],64)}const z1=Nr(K1,[["render",H1],["__scopeId","data-v-a8707c09"]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Gr=typeof window<"u";function G1(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const me=Object.assign;function ba(e,t){const n={};for(const r in t){const i=t[r];n[r]=Xt(i)?i.map(e):e(i)}return n}const io=()=>{},Xt=Array.isArray,W1=/\/$/,Q1=e=>e.replace(W1,"");function _a(e,t,n="/"){let r,i={},o="",s="";const u=t.indexOf("#");let a=t.indexOf("?");return u<a&&u>=0&&(a=-1),a>-1&&(r=t.slice(0,a),o=t.slice(a+1,u>-1?u:t.length),i=e(o)),u>-1&&(r=r||t.slice(0,u),s=t.slice(u,t.length)),r=Z1(r??t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function Y1(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ld(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function X1(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Si(t.matched[r],n.matched[i])&&Sy(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Si(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Sy(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!J1(e[n],t[n]))return!1;return!0}function J1(e,t){return Xt(e)?fd(e,t):Xt(t)?fd(t,e):e===t}function fd(e,t){return Xt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Z1(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Ro;(function(e){e.pop="pop",e.push="push"})(Ro||(Ro={}));var oo;(function(e){e.back="back",e.forward="forward",e.unknown=""})(oo||(oo={}));function eT(e){if(!e)if(Gr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Q1(e)}const tT=/^[^#]+#/;function nT(e,t){return e.replace(tT,"#")+t}function rT(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Yu=()=>({left:window.pageXOffset,top:window.pageYOffset});function iT(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=rT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function hd(e,t){return(history.state?history.state.position-t:-1)+e}const mc=new Map;function oT(e,t){mc.set(e,t)}function sT(e){const t=mc.get(e);return mc.delete(e),t}let uT=()=>location.protocol+"//"+location.host;function Ay(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let u=i.includes(e.slice(o))?e.slice(o).length:1,a=i.slice(u);return a[0]!=="/"&&(a="/"+a),ld(a,"")}return ld(n,e)+r+i}function aT(e,t,n,r){let i=[],o=[],s=null;const u=({state:h})=>{const d=Ay(e,location),g=n.value,m=t.value;let w=0;if(h){if(n.value=d,t.value=h,s&&s===g){s=null;return}w=m?h.position-m.position:0}else r(d);i.forEach(v=>{v(n.value,g,{delta:w,type:Ro.pop,direction:w?w>0?oo.forward:oo.back:oo.unknown})})};function a(){s=n.value}function c(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return o.push(d),d}function l(){const{history:h}=window;h.state&&h.replaceState(me({},h.state,{scroll:Yu()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",l),{pauseListeners:a,listen:c,destroy:f}}function dd(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Yu():null}}function cT(e){const{history:t,location:n}=window,r={value:Ay(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,c,l){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+a:uT()+e+a;try{t[l?"replaceState":"pushState"](c,"",h),i.value=c}catch(d){console.error(d),n[l?"replace":"assign"](h)}}function s(a,c){const l=me({},t.state,dd(i.value.back,a,i.value.forward,!0),c,{position:i.value.position});o(a,l,!0),r.value=a}function u(a,c){const l=me({},i.value,t.state,{forward:a,scroll:Yu()});o(l.current,l,!0);const f=me({},dd(r.value,a,null),{position:l.position+1},c);o(a,f,!1),r.value=a}return{location:r,state:i,push:u,replace:s}}function lT(e){e=eT(e);const t=cT(e),n=aT(e,t.state,t.location,t.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=me({location:"",base:e,go:r,createHref:nT.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function fT(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),lT(e)}function hT(e){return typeof e=="string"||e&&typeof e=="object"}function Cy(e){return typeof e=="string"||typeof e=="symbol"}const Rn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ny=Symbol("");var pd;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(pd||(pd={}));function Ai(e,t){return me(new Error,{type:e,[Ny]:!0},t)}function dn(e,t){return e instanceof Error&&Ny in e&&(t==null||!!(e.type&t))}const gd="[^/]+?",dT={sensitive:!1,strict:!1,start:!0,end:!0},pT=/[.+*?^${}()[\]/\\]/g;function gT(e,t){const n=me({},dT,t),r=[];let i=n.start?"^":"";const o=[];for(const c of e){const l=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(pT,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:w,regexp:v}=h;o.push({name:g,repeatable:m,optional:w});const T=v||gd;if(T!==gd){d+=10;try{new RegExp(`(${T})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${g}" (${T}): `+M.message)}}let E=m?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;f||(E=w&&c.length<2?`(?:/${E})`:"/"+E),w&&(E+="?"),i+=E,d+=20,w&&(d+=-8),m&&(d+=-20),T===".*"&&(d+=-50)}l.push(d)}r.push(l)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function u(c){const l=c.match(s),f={};if(!l)return null;for(let h=1;h<l.length;h++){const d=l[h]||"",g=o[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function a(c){let l="",f=!1;for(const h of e){(!f||!l.endsWith("/"))&&(l+="/"),f=!1;for(const d of h)if(d.type===0)l+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:w}=d,v=g in c?c[g]:"";if(Xt(v)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const T=Xt(v)?v.join("/"):v;if(!T)if(w)h.length<2&&(l.endsWith("/")?l=l.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);l+=T}}return l||"/"}return{re:s,score:r,keys:o,parse:u,stringify:a}}function mT(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function yT(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=mT(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(md(r))return 1;if(md(i))return-1}return i.length-r.length}function md(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const vT={type:0,value:""},wT=/[a-zA-Z0-9_]/;function bT(e){if(!e)return[[]];if(e==="/")return[[vT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let u=0,a,c="",l="";function f(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;u<e.length;){if(a=e[u++],a==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:a==="/"?(c&&f(),s()):a===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:a==="("?n=2:wT.test(a)?h():(f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&u--);break;case 2:a===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&u--,l="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),s(),i}function _T(e,t,n){const r=gT(bT(e.path),n),i=me(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ET(e,t){const n=[],r=new Map;t=wd({strict:!1,end:!0,sensitive:!1},t);function i(l){return r.get(l)}function o(l,f,h){const d=!h,g=IT(l);g.aliasOf=h&&h.record;const m=wd(t,l),w=[g];if("alias"in l){const E=typeof l.alias=="string"?[l.alias]:l.alias;for(const M of E)w.push(me({},g,{components:h?h.record.components:g.components,path:M,aliasOf:h?h.record:g}))}let v,T;for(const E of w){const{path:M}=E;if(f&&M[0]!=="/"){const $=f.record.path,X=$[$.length-1]==="/"?"":"/";E.path=f.record.path+(M&&X+M)}if(v=_T(E,f,m),h?h.alias.push(v):(T=T||v,T!==v&&T.alias.push(v),d&&l.name&&!vd(v)&&s(l.name)),g.children){const $=g.children;for(let X=0;X<$.length;X++)o($[X],v,h&&h.children[X])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&a(v)}return T?()=>{s(T)}:io}function s(l){if(Cy(l)){const f=r.get(l);f&&(r.delete(l),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(l);f>-1&&(n.splice(f,1),l.record.name&&r.delete(l.record.name),l.children.forEach(s),l.alias.forEach(s))}}function u(){return n}function a(l){let f=0;for(;f<n.length&&yT(l,n[f])>=0&&(l.record.path!==n[f].record.path||!xy(l,n[f]));)f++;n.splice(f,0,l),l.record.name&&!vd(l)&&r.set(l.record.name,l)}function c(l,f){let h,d={},g,m;if("name"in l&&l.name){if(h=r.get(l.name),!h)throw Ai(1,{location:l});m=h.record.name,d=me(yd(f.params,h.keys.filter(T=>!T.optional).map(T=>T.name)),l.params&&yd(l.params,h.keys.map(T=>T.name))),g=h.stringify(d)}else if("path"in l)g=l.path,h=n.find(T=>T.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?r.get(f.name):n.find(T=>T.re.test(f.path)),!h)throw Ai(1,{location:l,currentLocation:f});m=h.record.name,d=me({},f.params,l.params),g=h.stringify(d)}const w=[];let v=h;for(;v;)w.unshift(v.record),v=v.parent;return{name:m,path:g,params:d,matched:w,meta:ST(w)}}return e.forEach(l=>o(l)),{addRoute:o,resolve:c,removeRoute:s,getRoutes:u,getRecordMatcher:i}}function yd(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function IT(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:TT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function TT(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function vd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ST(e){return e.reduce((t,n)=>me(t,n.meta),{})}function wd(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function xy(e,t){return t.children.some(n=>n===e||xy(e,n))}const Dy=/#/g,AT=/&/g,CT=/\//g,NT=/=/g,xT=/\?/g,Ry=/\+/g,DT=/%5B/g,RT=/%5D/g,Oy=/%5E/g,OT=/%60/g,Py=/%7B/g,PT=/%7C/g,ky=/%7D/g,kT=/%20/g;function ef(e){return encodeURI(""+e).replace(PT,"|").replace(DT,"[").replace(RT,"]")}function LT(e){return ef(e).replace(Py,"{").replace(ky,"}").replace(Oy,"^")}function yc(e){return ef(e).replace(Ry,"%2B").replace(kT,"+").replace(Dy,"%23").replace(AT,"%26").replace(OT,"`").replace(Py,"{").replace(ky,"}").replace(Oy,"^")}function MT(e){return yc(e).replace(NT,"%3D")}function FT(e){return ef(e).replace(Dy,"%23").replace(xT,"%3F")}function UT(e){return e==null?"":FT(e).replace(CT,"%2F")}function ou(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function VT(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(Ry," "),s=o.indexOf("="),u=ou(s<0?o:o.slice(0,s)),a=s<0?null:ou(o.slice(s+1));if(u in t){let c=t[u];Xt(c)||(c=t[u]=[c]),c.push(a)}else t[u]=a}return t}function bd(e){let t="";for(let n in e){const r=e[n];if(n=MT(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Xt(r)?r.map(o=>o&&yc(o)):[r&&yc(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function jT(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Xt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const BT=Symbol(""),_d=Symbol(""),tf=Symbol(""),Ly=Symbol(""),vc=Symbol("");function Hi(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function kn(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,u)=>{const a=f=>{f===!1?u(Ai(4,{from:n,to:t})):f instanceof Error?u(f):hT(f)?u(Ai(2,{from:t,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},c=e.call(r&&r.instances[i],t,n,a);let l=Promise.resolve(c);e.length<3&&(l=l.then(a)),l.catch(f=>u(f))})}function Ea(e,t,n,r){const i=[];for(const o of e)for(const s in o.components){let u=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(qT(u)){const c=(u.__vccOpts||u)[t];c&&i.push(kn(c,n,r,o,s))}else{let a=u();i.push(()=>a.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const l=G1(c)?c.default:c;o.components[s]=l;const h=(l.__vccOpts||l)[t];return h&&kn(h,n,r,o,s)()}))}}return i}function qT(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ed(e){const t=vn(tf),n=vn(Ly),r=Mt(()=>t.resolve(ti(e.to))),i=Mt(()=>{const{matched:a}=r.value,{length:c}=a,l=a[c-1],f=n.matched;if(!l||!f.length)return-1;const h=f.findIndex(Si.bind(null,l));if(h>-1)return h;const d=Id(a[c-2]);return c>1&&Id(l)===d&&f[f.length-1].path!==d?f.findIndex(Si.bind(null,a[c-2])):h}),o=Mt(()=>i.value>-1&&zT(n.params,r.value.params)),s=Mt(()=>i.value>-1&&i.value===n.matched.length-1&&Sy(n.params,r.value.params));function u(a={}){return HT(a)?t[ti(e.replace)?"replace":"push"](ti(e.to)).catch(io):Promise.resolve()}return{route:r,href:Mt(()=>r.value.href),isActive:o,isExactActive:s,navigate:u}}const $T=cp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ed,setup(e,{slots:t}){const n=Oo(Ed(e)),{options:r}=vn(tf),i=Mt(()=>({[Td(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Td(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:Cp("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),KT=$T;function HT(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function zT(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Xt(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Id(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Td=(e,t,n)=>e??t??n,GT=cp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=vn(vc),i=Mt(()=>e.route||r.value),o=vn(_d,0),s=Mt(()=>{let c=ti(o);const{matched:l}=i.value;let f;for(;(f=l[c])&&!f.components;)c++;return c}),u=Mt(()=>i.value.matched[s.value]);ys(_d,Mt(()=>s.value+1)),ys(BT,u),ys(vc,i);const a=Wd();return vs(()=>[a.value,u.value,e.name],([c,l,f],[h,d,g])=>{l&&(l.instances[f]=c,d&&d!==l&&c&&c===h&&(l.leaveGuards.size||(l.leaveGuards=d.leaveGuards),l.updateGuards.size||(l.updateGuards=d.updateGuards))),c&&l&&(!d||!Si(l,d)||!h)&&(l.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,l=e.name,f=u.value,h=f&&f.components[l];if(!h)return Sd(n.default,{Component:h,route:c});const d=f.props[l],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,w=Cp(h,me({},g,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[l]=null)},ref:a}));return Sd(n.default,{Component:w,route:c})||w}}});function Sd(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const WT=GT;function QT(e){const t=ET(e.routes,e),n=e.parseQuery||VT,r=e.stringifyQuery||bd,i=e.history,o=Hi(),s=Hi(),u=Hi(),a=Rv(Rn);let c=Rn;Gr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=ba.bind(null,A=>""+A),f=ba.bind(null,UT),h=ba.bind(null,ou);function d(A,j){let F,z;return Cy(A)?(F=t.getRecordMatcher(A),z=j):z=A,t.addRoute(z,F)}function g(A){const j=t.getRecordMatcher(A);j&&t.removeRoute(j)}function m(){return t.getRoutes().map(A=>A.record)}function w(A){return!!t.getRecordMatcher(A)}function v(A,j){if(j=me({},j||a.value),typeof A=="string"){const p=_a(n,A,j.path),y=t.resolve({path:p.path},j),_=i.createHref(p.fullPath);return me(p,y,{params:h(y.params),hash:ou(p.hash),redirectedFrom:void 0,href:_})}let F;if("path"in A)F=me({},A,{path:_a(n,A.path,j.path).path});else{const p=me({},A.params);for(const y in p)p[y]==null&&delete p[y];F=me({},A,{params:f(A.params)}),j.params=f(j.params)}const z=t.resolve(F,j),ae=A.hash||"";z.params=l(h(z.params));const Ne=Y1(r,me({},A,{hash:LT(ae),path:z.path})),re=i.createHref(Ne);return me({fullPath:Ne,hash:ae,query:r===bd?jT(A.query):A.query||{}},z,{redirectedFrom:void 0,href:re})}function T(A){return typeof A=="string"?_a(n,A,a.value.path):me({},A)}function E(A,j){if(c!==A)return Ai(8,{from:j,to:A})}function M(A){return le(A)}function $(A){return M(me(T(A),{replace:!0}))}function X(A){const j=A.matched[A.matched.length-1];if(j&&j.redirect){const{redirect:F}=j;let z=typeof F=="function"?F(A):F;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=T(z):{path:z},z.params={}),me({query:A.query,hash:A.hash,params:"path"in z?{}:A.params},z)}}function le(A,j){const F=c=v(A),z=a.value,ae=A.state,Ne=A.force,re=A.replace===!0,p=X(F);if(p)return le(me(T(p),{state:typeof p=="object"?me({},ae,p.state):ae,force:Ne,replace:re}),j||F);const y=F;y.redirectedFrom=j;let _;return!Ne&&X1(r,z,F)&&(_=Ai(16,{to:y,from:z}),Jn(z,z,!0,!1)),(_?Promise.resolve(_):be(y,z)).catch(I=>dn(I)?dn(I,2)?I:Vt(I):_e(I,y,z)).then(I=>{if(I){if(dn(I,2))return le(me({replace:re},T(I.to),{state:typeof I.to=="object"?me({},ae,I.to.state):ae,force:Ne}),j||y)}else I=Be(y,z,!0,re,ae);return ye(y,z,I),I})}function te(A,j){const F=E(A,j);return F?Promise.reject(F):Promise.resolve()}function be(A,j){let F;const[z,ae,Ne]=YT(A,j);F=Ea(z.reverse(),"beforeRouteLeave",A,j);for(const p of z)p.leaveGuards.forEach(y=>{F.push(kn(y,A,j))});const re=te.bind(null,A,j);return F.push(re),qr(F).then(()=>{F=[];for(const p of o.list())F.push(kn(p,A,j));return F.push(re),qr(F)}).then(()=>{F=Ea(ae,"beforeRouteUpdate",A,j);for(const p of ae)p.updateGuards.forEach(y=>{F.push(kn(y,A,j))});return F.push(re),qr(F)}).then(()=>{F=[];for(const p of A.matched)if(p.beforeEnter&&!j.matched.includes(p))if(Xt(p.beforeEnter))for(const y of p.beforeEnter)F.push(kn(y,A,j));else F.push(kn(p.beforeEnter,A,j));return F.push(re),qr(F)}).then(()=>(A.matched.forEach(p=>p.enterCallbacks={}),F=Ea(Ne,"beforeRouteEnter",A,j),F.push(re),qr(F))).then(()=>{F=[];for(const p of s.list())F.push(kn(p,A,j));return F.push(re),qr(F)}).catch(p=>dn(p,8)?p:Promise.reject(p))}function ye(A,j,F){for(const z of u.list())z(A,j,F)}function Be(A,j,F,z,ae){const Ne=E(A,j);if(Ne)return Ne;const re=j===Rn,p=Gr?history.state:{};F&&(z||re?i.replace(A.fullPath,me({scroll:re&&p&&p.scroll},ae)):i.push(A.fullPath,ae)),a.value=A,Jn(A,j,F,re),Vt()}let Ze;function Ut(){Ze||(Ze=i.listen((A,j,F)=>{if(!Jo.listening)return;const z=v(A),ae=X(z);if(ae){le(me(ae,{replace:!0}),z).catch(io);return}c=z;const Ne=a.value;Gr&&oT(hd(Ne.fullPath,F.delta),Yu()),be(z,Ne).catch(re=>dn(re,12)?re:dn(re,2)?(le(re.to,z).then(p=>{dn(p,20)&&!F.delta&&F.type===Ro.pop&&i.go(-1,!1)}).catch(io),Promise.reject()):(F.delta&&i.go(-F.delta,!1),_e(re,z,Ne))).then(re=>{re=re||Be(z,Ne,!1),re&&(F.delta&&!dn(re,8)?i.go(-F.delta,!1):F.type===Ro.pop&&dn(re,20)&&i.go(-1,!1)),ye(z,Ne,re)}).catch(io)}))}let hn=Hi(),Bi=Hi(),ke;function _e(A,j,F){Vt(A);const z=Bi.list();return z.length?z.forEach(ae=>ae(A,j,F)):console.error(A),Promise.reject(A)}function ve(){return ke&&a.value!==Rn?Promise.resolve():new Promise((A,j)=>{hn.add([A,j])})}function Vt(A){return ke||(ke=!A,Ut(),hn.list().forEach(([j,F])=>A?F(A):j()),hn.reset()),A}function Jn(A,j,F,z){const{scrollBehavior:ae}=e;if(!Gr||!ae)return Promise.resolve();const Ne=!F&&sT(hd(A.fullPath,0))||(z||!F)&&history.state&&history.state.scroll||null;return Zd().then(()=>ae(A,j,Ne)).then(re=>re&&iT(re)).catch(re=>_e(re,A,j))}const jt=A=>i.go(A);let mt;const Ur=new Set,Jo={currentRoute:a,listening:!0,addRoute:d,removeRoute:g,hasRoute:w,getRoutes:m,resolve:v,options:e,push:M,replace:$,go:jt,back:()=>jt(-1),forward:()=>jt(1),beforeEach:o.add,beforeResolve:s.add,afterEach:u.add,onError:Bi.add,isReady:ve,install(A){const j=this;A.component("RouterLink",KT),A.component("RouterView",WT),A.config.globalProperties.$router=j,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>ti(a)}),Gr&&!mt&&a.value===Rn&&(mt=!0,M(i.location).catch(ae=>{}));const F={};for(const ae in Rn)F[ae]=Mt(()=>a.value[ae]);A.provide(tf,j),A.provide(Ly,Oo(F)),A.provide(vc,a);const z=A.unmount;Ur.add(A),A.unmount=function(){Ur.delete(A),Ur.size<1&&(c=Rn,Ze&&Ze(),Ze=null,a.value=Rn,mt=!1,ke=!1),z()}}};return Jo}function qr(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function YT(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const u=t.matched[s];u&&(e.matched.find(c=>Si(c,u))?r.push(u):n.push(u));const a=e.matched[s];a&&(t.matched.find(c=>Si(c,a))||i.push(a))}return[n,r,i]}const XT={name:"Home"},JT="/potion-productivity/assets/logo-13530169.svg";const ZT={class:"home"},eS=pe("div",{class:"header-section"},[pe("img",{src:JT,alt:"",class:"logo"}),pe("h1",{class:"header"},"Welcome to Potion."),pe("p",{class:"page-content"},[Va(" here, you can write notes that automatically save as you type them."),pe("br"),Va(' Open the sidebar and click "New Page" to start writing! ')])],-1),tS=[eS];function nS(e,t,n,r,i,o){return on(),sn("div",ZT,tS)}const rS=Nr(XT,[["render",nS]]),iS={props:["id"],data(){return{title:"",content:"",unsubscribe:()=>{}}},methods:{async saveData(){try{await dr.collection("pages").doc(this.id).update({title:this.title,content:this.content})}catch(e){console.error("Error while saving data to Firestore:",e)}}},watch:{async id(){const e=dr.collection("pages").doc(this.id);this.unsubscribe=await e.onSnapshot(t=>{if(t.exists){const n=t.data();this.content=n.content,this.title=n.title}else this.content="",this.title=""})}},beforeDestroy(){this.unsubscribe&&this.unsubscribe()},async mounted(){console.log("Page mounted with id",this.id);const e=dr.collection("pages").doc(this.id);this.unsubscribe=await e.onSnapshot(t=>{if(t.exists){const n=t.data();this.content=n.content,this.title=n.title}})}};const oS={class:"home"},sS={class:"page"},uS={class:"page-header"},aS={class:"page-content"};function cS(e,t,n,r,i,o){return on(),sn("div",oS,[pe("div",sS,[pe("h1",uS,[Oa(pe("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.title=s),key:"title",id:"title",onInput:t[1]||(t[1]=(...s)=>o.saveData&&o.saveData(...s)),placeholder:"Title..."},null,544),[[Mf,i.title]])]),pe("p",aS,[Oa(pe("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.content=s),key:"content",id:"content",onInput:t[3]||(t[3]=(...s)=>o.saveData&&o.saveData(...s)),placeholder:"Write your note...",oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},null,544),[[Mf,i.content]])])])])}const lS=Nr(iS,[["render",cS],["__scopeId","data-v-3cda617f"]]),fS=[{path:"/",name:"home",component:rS},{path:"/page/:id",name:"Page",component:lS,props:!0}],hS=QT({history:fT(),routes:fS}),My=new Set,bt=new WeakMap,ii=new WeakMap,Ar=new WeakMap,wc=new WeakMap,dS=new WeakMap,Ci=new WeakMap,su=new WeakMap,Yi=new WeakSet;let Cr;const yn="__aa_tgt",bc="__aa_del",pS=e=>{const t=wS(e);t&&t.forEach(n=>bS(n))},gS=e=>{e.forEach(t=>{t.target===Cr&&yS(),bt.has(t.target)&&Fr(t.target)})};function mS(e){const t=wc.get(e);t==null||t.disconnect();let n=bt.get(e),r=0;const i=5;n||(n=Ni(e),bt.set(e,n));const{offsetWidth:o,offsetHeight:s}=Cr,a=[n.top-i,o-(n.left+i+n.width),s-(n.top+i+n.height),n.left-i].map(l=>`${-1*Math.floor(l)}px`).join(" "),c=new IntersectionObserver(()=>{++r>1&&Fr(e)},{root:Cr,threshold:1,rootMargin:a});c.observe(e),wc.set(e,c)}function Fr(e){clearTimeout(su.get(e));const t=Xu(e),n=typeof t=="function"?500:t.duration;su.set(e,setTimeout(async()=>{const r=Ar.get(e);try{await(r==null?void 0:r.finished),bt.set(e,Ni(e)),mS(e)}catch{}},n))}function yS(){clearTimeout(su.get(Cr)),su.set(Cr,setTimeout(()=>{My.forEach(e=>jy(e,t=>Fy(()=>Fr(t))))},100))}function vS(e){setTimeout(()=>{dS.set(e,setInterval(()=>Fy(Fr.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function Fy(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let _c,Xr;typeof window<"u"&&(Cr=document.documentElement,_c=new MutationObserver(pS),Xr=new ResizeObserver(gS),Xr.observe(Cr));function wS(e){return e.reduce((r,i)=>[...r,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(r=>r.nodeName==="#comment")?!1:e.reduce((r,i)=>{if(r===!1)return!1;if(i.target instanceof Element){if(Ia(i.target),!r.has(i.target)){r.add(i.target);for(let o=0;o<i.target.children.length;o++){const s=i.target.children.item(o);if(s){if(bc in s)return!1;Ia(i.target,s),r.add(s)}}}if(i.removedNodes.length)for(let o=0;o<i.removedNodes.length;o++){const s=i.removedNodes[o];if(bc in s)return!1;s instanceof Element&&(r.add(s),Ia(i.target,s),ii.set(s,[i.previousSibling,i.nextSibling]))}}return r},new Set)}function Ia(e,t){!t&&!(yn in e)?Object.defineProperty(e,yn,{value:e}):t&&!(yn in t)&&Object.defineProperty(t,yn,{value:e})}function bS(e){var t;const n=e.isConnected,r=bt.has(e);n&&ii.has(e)&&ii.delete(e),Ar.has(e)&&((t=Ar.get(e))===null||t===void 0||t.cancel()),r&&n?_S(e):r&&!n?IS(e):ES(e)}function tn(e){return Number(e.replace(/[^0-9.\-]/g,""))}function Ni(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}}function Uy(e,t,n){let r=t.width,i=t.height,o=n.width,s=n.height;const u=getComputedStyle(e);if(u.getPropertyValue("box-sizing")==="content-box"){const c=tn(u.paddingTop)+tn(u.paddingBottom)+tn(u.borderTopWidth)+tn(u.borderBottomWidth),l=tn(u.paddingLeft)+tn(u.paddingRight)+tn(u.borderRightWidth)+tn(u.borderLeftWidth);r-=l,o-=l,i-=c,s-=c}return[r,o,i,s].map(Math.round)}function Xu(e){return yn in e&&Ci.has(e[yn])?Ci.get(e[yn]):{duration:250,easing:"ease-in-out"}}function Vy(e){if(yn in e)return e[yn]}function nf(e){const t=Vy(e);return t?Yi.has(t):!1}function jy(e,...t){t.forEach(n=>n(e,Ci.has(e)));for(let n=0;n<e.children.length;n++){const r=e.children.item(n);r&&t.forEach(i=>i(r,Ci.has(r)))}}function _S(e){const t=bt.get(e),n=Ni(e);if(!nf(e))return bt.set(e,n);let r;if(!t)return;const i=Xu(e);if(typeof i!="function"){const o=t.left-n.left,s=t.top-n.top,[u,a,c,l]=Uy(e,t,n),f={transform:`translate(${o}px, ${s}px)`},h={transform:"translate(0, 0)"};u!==a&&(f.width=`${u}px`,h.width=`${a}px`),c!==l&&(f.height=`${c}px`,h.height=`${l}px`),r=e.animate([f,h],{duration:i.duration,easing:i.easing})}else r=new Animation(i(e,"remain",t,n)),r.play();Ar.set(e,r),bt.set(e,n),r.addEventListener("finish",Fr.bind(null,e))}function ES(e){const t=Ni(e);bt.set(e,t);const n=Xu(e);if(!nf(e))return;let r;typeof n!="function"?r=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"}):(r=new Animation(n(e,"add",t)),r.play()),Ar.set(e,r),r.addEventListener("finish",Fr.bind(null,e))}function IS(e){var t;if(!ii.has(e)||!bt.has(e))return;const[n,r]=ii.get(e);Object.defineProperty(e,bc,{value:!0}),r&&r.parentNode&&r.parentNode instanceof Element?r.parentNode.insertBefore(e,r):n&&n.parentNode?n.parentNode.appendChild(e):(t=Vy(e))===null||t===void 0||t.appendChild(e);function i(){var h;e.remove(),bt.delete(e),ii.delete(e),Ar.delete(e),(h=wc.get(e))===null||h===void 0||h.disconnect()}if(!nf(e))return i();const[o,s,u,a]=TS(e),c=Xu(e),l=bt.get(e);let f;Object.assign(e.style,{position:"absolute",top:`${o}px`,left:`${s}px`,width:`${u}px`,height:`${a}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof c!="function"?f=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"}):(f=new Animation(c(e,"remove",l)),f.play()),Ar.set(e,f),f.addEventListener("finish",i)}function TS(e){const t=bt.get(e),[n,,r]=Uy(e,t,Ni(e));let i=e.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);const o=getComputedStyle(i),s=bt.get(i)||Ni(i),u=Math.round(t.top-s.top)-tn(o.borderTopWidth),a=Math.round(t.left-s.left)-tn(o.borderLeftWidth);return[u,a,n,r]}function SS(e,t={}){return _c&&Xr&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof t!="function"&&!t.disrespectUserMotionPreference||(Yi.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),jy(e,Fr,vS,i=>Xr==null?void 0:Xr.observe(i)),typeof t=="function"?Ci.set(e,t):Ci.set(e,{duration:250,easing:"ease-in-out",...t}),_c.observe(e,{childList:!0}),My.add(e))),Object.freeze({parent:e,enable:()=>{Yi.add(e)},disable:()=>{Yi.delete(e)},isEnabled:()=>Yi.has(e)})}const AS={mounted:(e,t)=>{SS(e,t.value||{})}},CS={install(e){e.directive("auto-animate",AS)}};var NS=!1;/*!
  * pinia v2.0.33
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const xS=Symbol();var Ad;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ad||(Ad={}));function DS(){const e=tv(!0),t=e.run(()=>Wd({}));let n=[],r=[];const i=kc({install(o){i._a=o,o.provide(xS,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return!this._a&&!NS?r.push(o):n.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}mw(z1).use(DS).use(hS).use(CS).mount("#app");
