(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function ww(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function bw(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Ht(i)?HO(i):bw(i);if(s)for(const o in s)e[o]=s[o]}return e}else{if(Ht(t))return t;if(vt(t))return t}}const KO=/;(?![^(]*\))/g,zO=/:([^]+)/,GO=/\/\*.*?\*\//gs;function HO(t){const e={};return t.replace(GO,"").split(KO).forEach(n=>{if(n){const i=n.split(zO);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ap(t){let e="";if(Ht(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const i=Ap(t[n]);i&&(e+=i+" ")}else if(vt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const WO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",YO=ww(WO);function WC(t){return!!t||t===""}const QO=t=>Ht(t)?t:t==null?"":_e(t)||vt(t)&&(t.toString===XC||!Ae(t.toString))?JSON.stringify(t,YC,2):String(t),YC=(t,e)=>e&&e.__v_isRef?YC(t,e.value):Za(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:QC(e)?{[`Set(${e.size})`]:[...e.values()]}:vt(e)&&!_e(e)&&!ZC(e)?String(e):e,ct={},Xa=[],Ri=()=>{},JO=()=>!1,XO=/^on[^a-z]/,kp=t=>XO.test(t),Iw=t=>t.startsWith("onUpdate:"),Un=Object.assign,_w=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ZO=Object.prototype.hasOwnProperty,Ke=(t,e)=>ZO.call(t,e),_e=Array.isArray,Za=t=>Rp(t)==="[object Map]",QC=t=>Rp(t)==="[object Set]",Ae=t=>typeof t=="function",Ht=t=>typeof t=="string",Ew=t=>typeof t=="symbol",vt=t=>t!==null&&typeof t=="object",JC=t=>vt(t)&&Ae(t.then)&&Ae(t.catch),XC=Object.prototype.toString,Rp=t=>XC.call(t),eM=t=>Rp(t).slice(8,-1),ZC=t=>Rp(t)==="[object Object]",Sw=t=>Ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Af=ww(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},tM=/-(\w)/g,Zi=xp(t=>t.replace(tM,(e,n)=>n?n.toUpperCase():"")),nM=/\B([A-Z])/g,Pc=xp(t=>t.replace(nM,"-$1").toLowerCase()),Dp=xp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Iv=xp(t=>t?`on${Dp(t)}`:""),jl=(t,e)=>!Object.is(t,e),kf=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Kf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},iy=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let JE;const iM=()=>JE||(JE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ai;class eA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ai,!e&&ai&&(this.index=(ai.scopes||(ai.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ai;try{return ai=this,e()}finally{ai=n}}}on(){ai=this}off(){ai=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function tA(t){return new eA(t)}function rM(t,e=ai){e&&e.active&&e.effects.push(t)}function nA(){return ai}function sM(t){ai&&ai.cleanups.push(t)}const Tw=t=>{const e=new Set(t);return e.w=0,e.n=0,e},iA=t=>(t.w&ps)>0,rA=t=>(t.n&ps)>0,oM=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ps},aM=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];iA(s)&&!rA(s)?s.delete(t):e[n++]=s,s.w&=~ps,s.n&=~ps}e.length=n}},zf=new WeakMap;let ml=0,ps=1;const ry=30;let Ci;const bo=Symbol(""),sy=Symbol("");class Cw{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,rM(this,i)}run(){if(!this.active)return this.fn();let e=Ci,n=us;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ci,Ci=this,us=!0,ps=1<<++ml,ml<=ry?oM(this):XE(this),this.fn()}finally{ml<=ry&&aM(this),ps=1<<--ml,Ci=this.parent,us=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ci===this?this.deferStop=!0:this.active&&(XE(this),this.onStop&&this.onStop(),this.active=!1)}}function XE(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let us=!0;const sA=[];function Oc(){sA.push(us),us=!1}function Mc(){const t=sA.pop();us=t===void 0?!0:t}function Xn(t,e,n){if(us&&Ci){let i=zf.get(t);i||zf.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=Tw()),oA(s)}}function oA(t,e){let n=!1;ml<=ry?rA(t)||(t.n|=ps,n=!iA(t)):n=!t.has(Ci),n&&(t.add(Ci),Ci.deps.push(t))}function wr(t,e,n,i,s,o){const c=zf.get(t);if(!c)return;let l=[];if(e==="clear")l=[...c.values()];else if(n==="length"&&_e(t)){const d=Number(i);c.forEach((f,g)=>{(g==="length"||g>=d)&&l.push(f)})}else switch(n!==void 0&&l.push(c.get(n)),e){case"add":_e(t)?Sw(n)&&l.push(c.get("length")):(l.push(c.get(bo)),Za(t)&&l.push(c.get(sy)));break;case"delete":_e(t)||(l.push(c.get(bo)),Za(t)&&l.push(c.get(sy)));break;case"set":Za(t)&&l.push(c.get(bo));break}if(l.length===1)l[0]&&oy(l[0]);else{const d=[];for(const f of l)f&&d.push(...f);oy(Tw(d))}}function oy(t,e){const n=_e(t)?t:[...t];for(const i of n)i.computed&&ZE(i);for(const i of n)i.computed||ZE(i)}function ZE(t,e){(t!==Ci||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function cM(t,e){var n;return(n=zf.get(t))===null||n===void 0?void 0:n.get(e)}const uM=ww("__proto__,__v_isRef,__isVue"),aA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ew)),lM=Aw(),hM=Aw(!1,!0),dM=Aw(!0),eS=fM();function fM(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ge(this);for(let o=0,c=this.length;o<c;o++)Xn(i,"get",o+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(Ge)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Oc();const i=Ge(this)[e].apply(this,n);return Mc(),i}}),t}function pM(t){const e=Ge(this);return Xn(e,"has",t),e.hasOwnProperty(t)}function Aw(t=!1,e=!1){return function(i,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?xM:dA:e?hA:lA).get(i))return i;const c=_e(i);if(!t){if(c&&Ke(eS,s))return Reflect.get(eS,s,o);if(s==="hasOwnProperty")return pM}const l=Reflect.get(i,s,o);return(Ew(s)?aA.has(s):uM(s))||(t||Xn(i,"get",s),e)?l:Lt(l)?c&&Sw(s)?l:l.value:vt(l)?t?fA(l):Lc(l):l}}const mM=cA(),gM=cA(!0);function cA(t=!1){return function(n,i,s,o){let c=n[i];if(cc(c)&&Lt(c)&&!Lt(s))return!1;if(!t&&(!Gf(s)&&!cc(s)&&(c=Ge(c),s=Ge(s)),!_e(n)&&Lt(c)&&!Lt(s)))return c.value=s,!0;const l=_e(n)&&Sw(i)?Number(i)<n.length:Ke(n,i),d=Reflect.set(n,i,s,o);return n===Ge(o)&&(l?jl(s,c)&&wr(n,"set",i,s):wr(n,"add",i,s)),d}}function vM(t,e){const n=Ke(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&wr(t,"delete",e,void 0),i}function yM(t,e){const n=Reflect.has(t,e);return(!Ew(e)||!aA.has(e))&&Xn(t,"has",e),n}function wM(t){return Xn(t,"iterate",_e(t)?"length":bo),Reflect.ownKeys(t)}const uA={get:lM,set:mM,deleteProperty:vM,has:yM,ownKeys:wM},bM={get:dM,set(t,e){return!0},deleteProperty(t,e){return!0}},IM=Un({},uA,{get:hM,set:gM}),kw=t=>t,Np=t=>Reflect.getPrototypeOf(t);function cf(t,e,n=!1,i=!1){t=t.__v_raw;const s=Ge(t),o=Ge(e);n||(e!==o&&Xn(s,"get",e),Xn(s,"get",o));const{has:c}=Np(s),l=i?kw:n?Dw:$l;if(c.call(s,e))return l(t.get(e));if(c.call(s,o))return l(t.get(o));t!==s&&t.get(e)}function uf(t,e=!1){const n=this.__v_raw,i=Ge(n),s=Ge(t);return e||(t!==s&&Xn(i,"has",t),Xn(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function lf(t,e=!1){return t=t.__v_raw,!e&&Xn(Ge(t),"iterate",bo),Reflect.get(t,"size",t)}function tS(t){t=Ge(t);const e=Ge(this);return Np(e).has.call(e,t)||(e.add(t),wr(e,"add",t,t)),this}function nS(t,e){e=Ge(e);const n=Ge(this),{has:i,get:s}=Np(n);let o=i.call(n,t);o||(t=Ge(t),o=i.call(n,t));const c=s.call(n,t);return n.set(t,e),o?jl(e,c)&&wr(n,"set",t,e):wr(n,"add",t,e),this}function iS(t){const e=Ge(this),{has:n,get:i}=Np(e);let s=n.call(e,t);s||(t=Ge(t),s=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return s&&wr(e,"delete",t,void 0),o}function rS(){const t=Ge(this),e=t.size!==0,n=t.clear();return e&&wr(t,"clear",void 0,void 0),n}function hf(t,e){return function(i,s){const o=this,c=o.__v_raw,l=Ge(c),d=e?kw:t?Dw:$l;return!t&&Xn(l,"iterate",bo),c.forEach((f,g)=>i.call(s,d(f),d(g),o))}}function df(t,e,n){return function(...i){const s=this.__v_raw,o=Ge(s),c=Za(o),l=t==="entries"||t===Symbol.iterator&&c,d=t==="keys"&&c,f=s[t](...i),g=n?kw:e?Dw:$l;return!e&&Xn(o,"iterate",d?sy:bo),{next(){const{value:v,done:w}=f.next();return w?{value:v,done:w}:{value:l?[g(v[0]),g(v[1])]:g(v),done:w}},[Symbol.iterator](){return this}}}}function Qr(t){return function(...e){return t==="delete"?!1:this}}function _M(){const t={get(o){return cf(this,o)},get size(){return lf(this)},has:uf,add:tS,set:nS,delete:iS,clear:rS,forEach:hf(!1,!1)},e={get(o){return cf(this,o,!1,!0)},get size(){return lf(this)},has:uf,add:tS,set:nS,delete:iS,clear:rS,forEach:hf(!1,!0)},n={get(o){return cf(this,o,!0)},get size(){return lf(this,!0)},has(o){return uf.call(this,o,!0)},add:Qr("add"),set:Qr("set"),delete:Qr("delete"),clear:Qr("clear"),forEach:hf(!0,!1)},i={get(o){return cf(this,o,!0,!0)},get size(){return lf(this,!0)},has(o){return uf.call(this,o,!0)},add:Qr("add"),set:Qr("set"),delete:Qr("delete"),clear:Qr("clear"),forEach:hf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=df(o,!1,!1),n[o]=df(o,!0,!1),e[o]=df(o,!1,!0),i[o]=df(o,!0,!0)}),[t,n,e,i]}const[EM,SM,TM,CM]=_M();function Rw(t,e){const n=e?t?CM:TM:t?SM:EM;return(i,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Ke(n,s)&&s in i?n:i,s,o)}const AM={get:Rw(!1,!1)},kM={get:Rw(!1,!0)},RM={get:Rw(!0,!1)},lA=new WeakMap,hA=new WeakMap,dA=new WeakMap,xM=new WeakMap;function DM(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NM(t){return t.__v_skip||!Object.isExtensible(t)?0:DM(eM(t))}function Lc(t){return cc(t)?t:xw(t,!1,uA,AM,lA)}function PM(t){return xw(t,!1,IM,kM,hA)}function fA(t){return xw(t,!0,bM,RM,dA)}function xw(t,e,n,i,s){if(!vt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const c=NM(t);if(c===0)return t;const l=new Proxy(t,c===2?i:n);return s.set(t,l),l}function ls(t){return cc(t)?ls(t.__v_raw):!!(t&&t.__v_isReactive)}function cc(t){return!!(t&&t.__v_isReadonly)}function Gf(t){return!!(t&&t.__v_isShallow)}function pA(t){return ls(t)||cc(t)}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function uc(t){return Kf(t,"__v_skip",!0),t}const $l=t=>vt(t)?Lc(t):t,Dw=t=>vt(t)?fA(t):t;function mA(t){us&&Ci&&(t=Ge(t),oA(t.dep||(t.dep=Tw())))}function gA(t,e){t=Ge(t);const n=t.dep;n&&oy(n)}function Lt(t){return!!(t&&t.__v_isRef===!0)}function Nw(t){return vA(t,!1)}function OM(t){return vA(t,!0)}function vA(t,e){return Lt(t)?t:new MM(t,e)}class MM{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ge(e),this._value=n?e:$l(e)}get value(){return mA(this),this._value}set value(e){const n=this.__v_isShallow||Gf(e)||cc(e);e=n?e:Ge(e),jl(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:$l(e),gA(this))}}function ec(t){return Lt(t)?t.value:t}const LM={get:(t,e,n)=>ec(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Lt(s)&&!Lt(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function yA(t){return ls(t)?t:new Proxy(t,LM)}function FM(t){const e=_e(t)?new Array(t.length):{};for(const n in t)e[n]=VM(t,n);return e}class UM{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return cM(Ge(this._object),this._key)}}function VM(t,e,n){const i=t[e];return Lt(i)?i:new UM(t,e,n)}var wA;class BM{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[wA]=!1,this._dirty=!0,this.effect=new Cw(e,()=>{this._dirty||(this._dirty=!0,gA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=Ge(this);return mA(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}wA="__v_isReadonly";function jM(t,e,n=!1){let i,s;const o=Ae(t);return o?(i=t,s=Ri):(i=t.get,s=t.set),new BM(i,s,o||!s,n)}function hs(t,e,n,i){let s;try{s=i?t(...i):t()}catch(o){Pp(o,e,n)}return s}function xi(t,e,n,i){if(Ae(t)){const o=hs(t,e,n,i);return o&&JC(o)&&o.catch(c=>{Pp(c,e,n)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(xi(t[o],e,n,i));return s}function Pp(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const c=e.proxy,l=n;for(;o;){const f=o.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](t,c,l)===!1)return}o=o.parent}const d=e.appContext.config.errorHandler;if(d){hs(d,null,10,[t,c,l]);return}}$M(t,n,s,i)}function $M(t,e,n,i=!0){console.error(t)}let ql=!1,ay=!1;const En=[];let $i=0;const tc=[];let hr=null,ro=0;const bA=Promise.resolve();let Pw=null;function Ow(t){const e=Pw||bA;return t?e.then(this?t.bind(this):t):e}function qM(t){let e=$i+1,n=En.length;for(;e<n;){const i=e+n>>>1;Kl(En[i])<t?e=i+1:n=i}return e}function Mw(t){(!En.length||!En.includes(t,ql&&t.allowRecurse?$i+1:$i))&&(t.id==null?En.push(t):En.splice(qM(t.id),0,t),IA())}function IA(){!ql&&!ay&&(ay=!0,Pw=bA.then(EA))}function KM(t){const e=En.indexOf(t);e>$i&&En.splice(e,1)}function zM(t){_e(t)?tc.push(...t):(!hr||!hr.includes(t,t.allowRecurse?ro+1:ro))&&tc.push(t),IA()}function sS(t,e=ql?$i+1:0){for(;e<En.length;e++){const n=En[e];n&&n.pre&&(En.splice(e,1),e--,n())}}function _A(t){if(tc.length){const e=[...new Set(tc)];if(tc.length=0,hr){hr.push(...e);return}for(hr=e,hr.sort((n,i)=>Kl(n)-Kl(i)),ro=0;ro<hr.length;ro++)hr[ro]();hr=null,ro=0}}const Kl=t=>t.id==null?1/0:t.id,GM=(t,e)=>{const n=Kl(t)-Kl(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function EA(t){ay=!1,ql=!0,En.sort(GM);const e=Ri;try{for($i=0;$i<En.length;$i++){const n=En[$i];n&&n.active!==!1&&hs(n,null,14)}}finally{$i=0,En.length=0,_A(),ql=!1,Pw=null,(En.length||tc.length)&&EA()}}function HM(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||ct;let s=n;const o=e.startsWith("update:"),c=o&&e.slice(7);if(c&&c in i){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:v,trim:w}=i[g]||ct;w&&(s=n.map(I=>Ht(I)?I.trim():I)),v&&(s=n.map(iy))}let l,d=i[l=Iv(e)]||i[l=Iv(Zi(e))];!d&&o&&(d=i[l=Iv(Pc(e))]),d&&xi(d,t,6,s);const f=i[l+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,xi(f,t,6,s)}}function SA(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const o=t.emits;let c={},l=!1;if(!Ae(t)){const d=f=>{const g=SA(f,e,!0);g&&(l=!0,Un(c,g))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!o&&!l?(vt(t)&&i.set(t,null),null):(_e(o)?o.forEach(d=>c[d]=null):Un(c,o),vt(t)&&i.set(t,c),c)}function Op(t,e){return!t||!kp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(t,e[0].toLowerCase()+e.slice(1))||Ke(t,Pc(e))||Ke(t,e))}let ui=null,TA=null;function Hf(t){const e=ui;return ui=t,TA=t&&t.type.__scopeId||null,e}function gl(t,e=ui,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&pS(-1);const o=Hf(e);let c;try{c=t(...s)}finally{Hf(o),i._d&&pS(1)}return c};return i._n=!0,i._c=!0,i._d=!0,i}function _v(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[c],slots:l,attrs:d,emit:f,render:g,renderCache:v,data:w,setupState:I,ctx:A,inheritAttrs:b}=t;let S,C;const P=Hf(t);try{if(n.shapeFlag&4){const Q=s||i;S=ji(g.call(Q,Q,v,o,I,w,A)),C=d}else{const Q=e;S=ji(Q.length>1?Q(o,{attrs:d,slots:l,emit:f}):Q(o,null)),C=e.props?d:WM(d)}}catch(Q){Cl.length=0,Pp(Q,t,1),S=ft(Ao)}let O=S;if(C&&b!==!1){const Q=Object.keys(C),{shapeFlag:Y}=O;Q.length&&Y&7&&(c&&Q.some(Iw)&&(C=YM(C,c)),O=lc(O,C))}return n.dirs&&(O=lc(O),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&(O.transition=n.transition),S=O,Hf(P),S}const WM=t=>{let e;for(const n in t)(n==="class"||n==="style"||kp(n))&&((e||(e={}))[n]=t[n]);return e},YM=(t,e)=>{const n={};for(const i in t)(!Iw(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function QM(t,e,n){const{props:i,children:s,component:o}=t,{props:c,children:l,patchFlag:d}=e,f=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return i?oS(i,c,f):!!c;if(d&8){const g=e.dynamicProps;for(let v=0;v<g.length;v++){const w=g[v];if(c[w]!==i[w]&&!Op(f,w))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===c?!1:i?c?oS(i,c,f):!0:!!c;return!1}function oS(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==t[o]&&!Op(n,o))return!0}return!1}function JM({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const XM=t=>t.__isSuspense;function ZM(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):zM(t)}function Rf(t,e){if(Pt){let n=Pt.provides;const i=Pt.parent&&Pt.parent.provides;i===n&&(n=Pt.provides=Object.create(i)),n[t]=e}}function Di(t,e,n=!1){const i=Pt||ui;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ae(e)?e.call(i.proxy):e}}const ff={};function Sl(t,e,n){return CA(t,e,n)}function CA(t,e,{immediate:n,deep:i,flush:s,onTrack:o,onTrigger:c}=ct){const l=nA()===(Pt==null?void 0:Pt.scope)?Pt:null;let d,f=!1,g=!1;if(Lt(t)?(d=()=>t.value,f=Gf(t)):ls(t)?(d=()=>t,i=!0):_e(t)?(g=!0,f=t.some(O=>ls(O)||Gf(O)),d=()=>t.map(O=>{if(Lt(O))return O.value;if(ls(O))return ho(O);if(Ae(O))return hs(O,l,2)})):Ae(t)?e?d=()=>hs(t,l,2):d=()=>{if(!(l&&l.isUnmounted))return v&&v(),xi(t,l,3,[w])}:d=Ri,e&&i){const O=d;d=()=>ho(O())}let v,w=O=>{v=C.onStop=()=>{hs(O,l,4)}},I;if(Gl)if(w=Ri,e?n&&xi(e,l,3,[d(),g?[]:void 0,w]):d(),s==="sync"){const O=YL();I=O.__watcherHandles||(O.__watcherHandles=[])}else return Ri;let A=g?new Array(t.length).fill(ff):ff;const b=()=>{if(C.active)if(e){const O=C.run();(i||f||(g?O.some((Q,Y)=>jl(Q,A[Y])):jl(O,A)))&&(v&&v(),xi(e,l,3,[O,A===ff?void 0:g&&A[0]===ff?[]:A,w]),A=O)}else C.run()};b.allowRecurse=!!e;let S;s==="sync"?S=b:s==="post"?S=()=>$n(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),S=()=>Mw(b));const C=new Cw(d,S);e?n?b():A=C.run():s==="post"?$n(C.run.bind(C),l&&l.suspense):C.run();const P=()=>{C.stop(),l&&l.scope&&_w(l.scope.effects,C)};return I&&I.push(P),P}function eL(t,e,n){const i=this.proxy,s=Ht(t)?t.includes(".")?AA(i,t):()=>i[t]:t.bind(i,i);let o;Ae(e)?o=e:(o=e.handler,n=e);const c=Pt;hc(this);const l=CA(s,o.bind(i),n);return c?hc(c):Io(),l}function AA(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function ho(t,e){if(!vt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Lt(t))ho(t.value,e);else if(_e(t))for(let n=0;n<t.length;n++)ho(t[n],e);else if(QC(t)||Za(t))t.forEach(n=>{ho(n,e)});else if(ZC(t))for(const n in t)ho(t[n],e);return t}function kA(t){return Ae(t)?{setup:t,name:t.name}:t}const xf=t=>!!t.type.__asyncLoader,RA=t=>t.type.__isKeepAlive;function tL(t,e){xA(t,"a",e)}function nL(t,e){xA(t,"da",e)}function xA(t,e,n=Pt){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Mp(e,i,n),n){let s=n.parent;for(;s&&s.parent;)RA(s.parent.vnode)&&iL(i,e,n,s),s=s.parent}}function iL(t,e,n,i){const s=Mp(e,t,i,!0);DA(()=>{_w(i[e],s)},n)}function Mp(t,e,n=Pt,i=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...c)=>{if(n.isUnmounted)return;Oc(),hc(n);const l=xi(e,n,t,c);return Io(),Mc(),l});return i?s.unshift(o):s.push(o),o}}const Sr=t=>(e,n=Pt)=>(!Gl||t==="sp")&&Mp(t,(...i)=>e(...i),n),rL=Sr("bm"),Lp=Sr("m"),sL=Sr("bu"),oL=Sr("u"),aL=Sr("bum"),DA=Sr("um"),cL=Sr("sp"),uL=Sr("rtg"),lL=Sr("rtc");function hL(t,e=Pt){Mp("ec",t,e)}function cy(t,e){const n=ui;if(n===null)return t;const i=Vp(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[c,l,d,f=ct]=e[o];c&&(Ae(c)&&(c={mounted:c,updated:c}),c.deep&&ho(l),s.push({dir:c,instance:i,value:l,oldValue:void 0,arg:d,modifiers:f}))}return t}function Xs(t,e,n,i){const s=t.dirs,o=e&&e.dirs;for(let c=0;c<s.length;c++){const l=s[c];o&&(l.oldValue=o[c].value);let d=l.dir[i];d&&(Oc(),xi(d,n,8,[t.el,l,t,e]),Mc())}}const NA="components",dL="directives";function fo(t,e){return PA(NA,t,!0,e)||t}const fL=Symbol();function pL(t){return PA(dL,t)}function PA(t,e,n=!0,i=!1){const s=ui||Pt;if(s){const o=s.type;if(t===NA){const l=GL(o,!1);if(l&&(l===e||l===Zi(e)||l===Dp(Zi(e))))return o}const c=aS(s[t]||o[t],e)||aS(s.appContext[t],e);return!c&&i?o:c}}function aS(t,e){return t&&(t[e]||t[Zi(e)]||t[Dp(Zi(e))])}function mL(t,e,n,i){let s;const o=n&&n[i];if(_e(t)||Ht(t)){s=new Array(t.length);for(let c=0,l=t.length;c<l;c++)s[c]=e(t[c],c,void 0,o&&o[c])}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,o&&o[c])}else if(vt(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,o&&o[l]));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,d=c.length;l<d;l++){const f=c[l];s[l]=e(t[f],f,l,o&&o[l])}}else s=[];return n&&(n[i]=s),s}const uy=t=>t?KA(t)?Vp(t)||t.proxy:uy(t.parent):null,Tl=Un(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uy(t.parent),$root:t=>uy(t.root),$emit:t=>t.emit,$options:t=>Lw(t),$forceUpdate:t=>t.f||(t.f=()=>Mw(t.update)),$nextTick:t=>t.n||(t.n=Ow.bind(t.proxy)),$watch:t=>eL.bind(t)}),Ev=(t,e)=>t!==ct&&!t.__isScriptSetup&&Ke(t,e),gL={get({_:t},e){const{ctx:n,setupState:i,data:s,props:o,accessCache:c,type:l,appContext:d}=t;let f;if(e[0]!=="$"){const I=c[e];if(I!==void 0)switch(I){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(Ev(i,e))return c[e]=1,i[e];if(s!==ct&&Ke(s,e))return c[e]=2,s[e];if((f=t.propsOptions[0])&&Ke(f,e))return c[e]=3,o[e];if(n!==ct&&Ke(n,e))return c[e]=4,n[e];ly&&(c[e]=0)}}const g=Tl[e];let v,w;if(g)return e==="$attrs"&&Xn(t,"get",e),g(t);if((v=l.__cssModules)&&(v=v[e]))return v;if(n!==ct&&Ke(n,e))return c[e]=4,n[e];if(w=d.config.globalProperties,Ke(w,e))return w[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:o}=t;return Ev(s,e)?(s[e]=n,!0):i!==ct&&Ke(i,e)?(i[e]=n,!0):Ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},c){let l;return!!n[c]||t!==ct&&Ke(t,c)||Ev(e,c)||(l=o[0])&&Ke(l,c)||Ke(i,c)||Ke(Tl,c)||Ke(s.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ke(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let ly=!0;function vL(t){const e=Lw(t),n=t.proxy,i=t.ctx;ly=!1,e.beforeCreate&&cS(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:c,watch:l,provide:d,inject:f,created:g,beforeMount:v,mounted:w,beforeUpdate:I,updated:A,activated:b,deactivated:S,beforeDestroy:C,beforeUnmount:P,destroyed:O,unmounted:Q,render:Y,renderTracked:ie,renderTriggered:ne,errorCaptured:me,serverPrefetch:it,expose:ht,inheritAttrs:be,components:ot,directives:Ue,filters:Rt}=e;if(f&&yL(f,i,null,t.appContext.config.unwrapInjectedRef),c)for(const ke in c){const He=c[ke];Ae(He)&&(i[ke]=He.bind(n))}if(s){const ke=s.call(n,n);vt(ke)&&(t.data=Lc(ke))}if(ly=!0,o)for(const ke in o){const He=o[ke],Cn=Ae(He)?He.bind(n,n):Ae(He.get)?He.get.bind(n,n):Ri,hn=!Ae(He)&&Ae(He.set)?He.set.bind(n):Ri,Vn=zn({get:Cn,set:hn});Object.defineProperty(i,ke,{enumerable:!0,configurable:!0,get:()=>Vn.value,set:Ut=>Vn.value=Ut})}if(l)for(const ke in l)OA(l[ke],i,n,ke);if(d){const ke=Ae(d)?d.call(n):d;Reflect.ownKeys(ke).forEach(He=>{Rf(He,ke[He])})}g&&cS(g,t,"c");function oe(ke,He){_e(He)?He.forEach(Cn=>ke(Cn.bind(n))):He&&ke(He.bind(n))}if(oe(rL,v),oe(Lp,w),oe(sL,I),oe(oL,A),oe(tL,b),oe(nL,S),oe(hL,me),oe(lL,ie),oe(uL,ne),oe(aL,P),oe(DA,Q),oe(cL,it),_e(ht))if(ht.length){const ke=t.exposed||(t.exposed={});ht.forEach(He=>{Object.defineProperty(ke,He,{get:()=>n[He],set:Cn=>n[He]=Cn})})}else t.exposed||(t.exposed={});Y&&t.render===Ri&&(t.render=Y),be!=null&&(t.inheritAttrs=be),ot&&(t.components=ot),Ue&&(t.directives=Ue)}function yL(t,e,n=Ri,i=!1){_e(t)&&(t=hy(t));for(const s in t){const o=t[s];let c;vt(o)?"default"in o?c=Di(o.from||s,o.default,!0):c=Di(o.from||s):c=Di(o),Lt(c)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>c.value,set:l=>c.value=l}):e[s]=c}}function cS(t,e,n){xi(_e(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function OA(t,e,n,i){const s=i.includes(".")?AA(n,i):()=>n[i];if(Ht(t)){const o=e[t];Ae(o)&&Sl(s,o)}else if(Ae(t))Sl(s,t.bind(n));else if(vt(t))if(_e(t))t.forEach(o=>OA(o,e,n,i));else{const o=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(o)&&Sl(s,o,t)}}function Lw(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:c}}=t.appContext,l=o.get(e);let d;return l?d=l:!s.length&&!n&&!i?d=e:(d={},s.length&&s.forEach(f=>Wf(d,f,c,!0)),Wf(d,e,c)),vt(e)&&o.set(e,d),d}function Wf(t,e,n,i=!1){const{mixins:s,extends:o}=e;o&&Wf(t,o,n,!0),s&&s.forEach(c=>Wf(t,c,n,!0));for(const c in e)if(!(i&&c==="expose")){const l=wL[c]||n&&n[c];t[c]=l?l(t[c],e[c]):e[c]}return t}const wL={data:uS,props:to,emits:to,methods:to,computed:to,beforeCreate:Dn,created:Dn,beforeMount:Dn,mounted:Dn,beforeUpdate:Dn,updated:Dn,beforeDestroy:Dn,beforeUnmount:Dn,destroyed:Dn,unmounted:Dn,activated:Dn,deactivated:Dn,errorCaptured:Dn,serverPrefetch:Dn,components:to,directives:to,watch:IL,provide:uS,inject:bL};function uS(t,e){return e?t?function(){return Un(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function bL(t,e){return to(hy(t),hy(e))}function hy(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Dn(t,e){return t?[...new Set([].concat(t,e))]:e}function to(t,e){return t?Un(Un(Object.create(null),t),e):e}function IL(t,e){if(!t)return e;if(!e)return t;const n=Un(Object.create(null),t);for(const i in e)n[i]=Dn(t[i],e[i]);return n}function _L(t,e,n,i=!1){const s={},o={};Kf(o,Up,1),t.propsDefaults=Object.create(null),MA(t,e,s,o);for(const c in t.propsOptions[0])c in s||(s[c]=void 0);n?t.props=i?s:PM(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function EL(t,e,n,i){const{props:s,attrs:o,vnode:{patchFlag:c}}=t,l=Ge(s),[d]=t.propsOptions;let f=!1;if((i||c>0)&&!(c&16)){if(c&8){const g=t.vnode.dynamicProps;for(let v=0;v<g.length;v++){let w=g[v];if(Op(t.emitsOptions,w))continue;const I=e[w];if(d)if(Ke(o,w))I!==o[w]&&(o[w]=I,f=!0);else{const A=Zi(w);s[A]=dy(d,l,A,I,t,!1)}else I!==o[w]&&(o[w]=I,f=!0)}}}else{MA(t,e,s,o)&&(f=!0);let g;for(const v in l)(!e||!Ke(e,v)&&((g=Pc(v))===v||!Ke(e,g)))&&(d?n&&(n[v]!==void 0||n[g]!==void 0)&&(s[v]=dy(d,l,v,void 0,t,!0)):delete s[v]);if(o!==l)for(const v in o)(!e||!Ke(e,v))&&(delete o[v],f=!0)}f&&wr(t,"set","$attrs")}function MA(t,e,n,i){const[s,o]=t.propsOptions;let c=!1,l;if(e)for(let d in e){if(Af(d))continue;const f=e[d];let g;s&&Ke(s,g=Zi(d))?!o||!o.includes(g)?n[g]=f:(l||(l={}))[g]=f:Op(t.emitsOptions,d)||(!(d in i)||f!==i[d])&&(i[d]=f,c=!0)}if(o){const d=Ge(n),f=l||ct;for(let g=0;g<o.length;g++){const v=o[g];n[v]=dy(s,d,v,f[v],t,!Ke(f,v))}}return c}function dy(t,e,n,i,s,o){const c=t[n];if(c!=null){const l=Ke(c,"default");if(l&&i===void 0){const d=c.default;if(c.type!==Function&&Ae(d)){const{propsDefaults:f}=s;n in f?i=f[n]:(hc(s),i=f[n]=d.call(null,e),Io())}else i=d}c[0]&&(o&&!l?i=!1:c[1]&&(i===""||i===Pc(n))&&(i=!0))}return i}function LA(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const o=t.props,c={},l=[];let d=!1;if(!Ae(t)){const g=v=>{d=!0;const[w,I]=LA(v,e,!0);Un(c,w),I&&l.push(...I)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!o&&!d)return vt(t)&&i.set(t,Xa),Xa;if(_e(o))for(let g=0;g<o.length;g++){const v=Zi(o[g]);lS(v)&&(c[v]=ct)}else if(o)for(const g in o){const v=Zi(g);if(lS(v)){const w=o[g],I=c[v]=_e(w)||Ae(w)?{type:w}:Object.assign({},w);if(I){const A=fS(Boolean,I.type),b=fS(String,I.type);I[0]=A>-1,I[1]=b<0||A<b,(A>-1||Ke(I,"default"))&&l.push(v)}}}const f=[c,l];return vt(t)&&i.set(t,f),f}function lS(t){return t[0]!=="$"}function hS(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function dS(t,e){return hS(t)===hS(e)}function fS(t,e){return _e(e)?e.findIndex(n=>dS(n,t)):Ae(e)&&dS(e,t)?0:-1}const FA=t=>t[0]==="_"||t==="$stable",Fw=t=>_e(t)?t.map(ji):[ji(t)],SL=(t,e,n)=>{if(e._n)return e;const i=gl((...s)=>Fw(e(...s)),n);return i._c=!1,i},UA=(t,e,n)=>{const i=t._ctx;for(const s in t){if(FA(s))continue;const o=t[s];if(Ae(o))e[s]=SL(s,o,i);else if(o!=null){const c=Fw(o);e[s]=()=>c}}},VA=(t,e)=>{const n=Fw(e);t.slots.default=()=>n},TL=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ge(e),Kf(e,"_",n)):UA(e,t.slots={})}else t.slots={},e&&VA(t,e);Kf(t.slots,Up,1)},CL=(t,e,n)=>{const{vnode:i,slots:s}=t;let o=!0,c=ct;if(i.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:(Un(s,e),!n&&l===1&&delete s._):(o=!e.$stable,UA(e,s)),c=e}else e&&(VA(t,e),c={default:1});if(o)for(const l in s)!FA(l)&&!(l in c)&&delete s[l]};function BA(){return{app:null,config:{isNativeTag:JO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AL=0;function kL(t,e){return function(i,s=null){Ae(i)||(i=Object.assign({},i)),s!=null&&!vt(s)&&(s=null);const o=BA(),c=new Set;let l=!1;const d=o.app={_uid:AL++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:QL,get config(){return o.config},set config(f){},use(f,...g){return c.has(f)||(f&&Ae(f.install)?(c.add(f),f.install(d,...g)):Ae(f)&&(c.add(f),f(d,...g))),d},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),d},component(f,g){return g?(o.components[f]=g,d):o.components[f]},directive(f,g){return g?(o.directives[f]=g,d):o.directives[f]},mount(f,g,v){if(!l){const w=ft(i,s);return w.appContext=o,g&&e?e(w,f):t(w,f,v),l=!0,d._container=f,f.__vue_app__=d,Vp(w.component)||w.component.proxy}},unmount(){l&&(t(null,d._container),delete d._container.__vue_app__)},provide(f,g){return o.provides[f]=g,d}};return d}}function fy(t,e,n,i,s=!1){if(_e(t)){t.forEach((w,I)=>fy(w,e&&(_e(e)?e[I]:e),n,i,s));return}if(xf(i)&&!s)return;const o=i.shapeFlag&4?Vp(i.component)||i.component.proxy:i.el,c=s?null:o,{i:l,r:d}=t,f=e&&e.r,g=l.refs===ct?l.refs={}:l.refs,v=l.setupState;if(f!=null&&f!==d&&(Ht(f)?(g[f]=null,Ke(v,f)&&(v[f]=null)):Lt(f)&&(f.value=null)),Ae(d))hs(d,l,12,[c,g]);else{const w=Ht(d),I=Lt(d);if(w||I){const A=()=>{if(t.f){const b=w?Ke(v,d)?v[d]:g[d]:d.value;s?_e(b)&&_w(b,o):_e(b)?b.includes(o)||b.push(o):w?(g[d]=[o],Ke(v,d)&&(v[d]=g[d])):(d.value=[o],t.k&&(g[t.k]=d.value))}else w?(g[d]=c,Ke(v,d)&&(v[d]=c)):I&&(d.value=c,t.k&&(g[t.k]=c))};c?(A.id=-1,$n(A,n)):A()}}}const $n=ZM;function RL(t){return xL(t)}function xL(t,e){const n=iM();n.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:c,createText:l,createComment:d,setText:f,setElementText:g,parentNode:v,nextSibling:w,setScopeId:I=Ri,insertStaticContent:A}=t,b=(_,T,D,N=null,U=null,G=null,X=!1,K=null,H=!!T.dynamicChildren)=>{if(_===T)return;_&&!il(_,T)&&(N=z(_),Ut(_,U,G,!0),_=null),T.patchFlag===-2&&(H=!1,T.dynamicChildren=null);const{type:j,ref:ge,shapeFlag:re}=T;switch(j){case Fp:S(_,T,D,N);break;case Ao:C(_,T,D,N);break;case Sv:_==null&&P(T,D,N,X);break;case mi:ot(_,T,D,N,U,G,X,K,H);break;default:re&1?Y(_,T,D,N,U,G,X,K,H):re&6?Ue(_,T,D,N,U,G,X,K,H):(re&64||re&128)&&j.process(_,T,D,N,U,G,X,K,H,Ne)}ge!=null&&U&&fy(ge,_&&_.ref,G,T||_,!T)},S=(_,T,D,N)=>{if(_==null)i(T.el=l(T.children),D,N);else{const U=T.el=_.el;T.children!==_.children&&f(U,T.children)}},C=(_,T,D,N)=>{_==null?i(T.el=d(T.children||""),D,N):T.el=_.el},P=(_,T,D,N)=>{[_.el,_.anchor]=A(_.children,T,D,N,_.el,_.anchor)},O=({el:_,anchor:T},D,N)=>{let U;for(;_&&_!==T;)U=w(_),i(_,D,N),_=U;i(T,D,N)},Q=({el:_,anchor:T})=>{let D;for(;_&&_!==T;)D=w(_),s(_),_=D;s(T)},Y=(_,T,D,N,U,G,X,K,H)=>{X=X||T.type==="svg",_==null?ie(T,D,N,U,G,X,K,H):it(_,T,U,G,X,K,H)},ie=(_,T,D,N,U,G,X,K)=>{let H,j;const{type:ge,props:re,shapeFlag:ue,transition:we,dirs:xe}=_;if(H=_.el=c(_.type,G,re&&re.is,re),ue&8?g(H,_.children):ue&16&&me(_.children,H,null,N,U,G&&ge!=="foreignObject",X,K),xe&&Xs(_,null,N,"created"),ne(H,_,_.scopeId,X,N),re){for(const $e in re)$e!=="value"&&!Af($e)&&o(H,$e,null,re[$e],G,_.children,N,U,Z);"value"in re&&o(H,"value",null,re.value),(j=re.onVnodeBeforeMount)&&Vi(j,N,_)}xe&&Xs(_,null,N,"beforeMount");const Xe=(!U||U&&!U.pendingBranch)&&we&&!we.persisted;Xe&&we.beforeEnter(H),i(H,T,D),((j=re&&re.onVnodeMounted)||Xe||xe)&&$n(()=>{j&&Vi(j,N,_),Xe&&we.enter(H),xe&&Xs(_,null,N,"mounted")},U)},ne=(_,T,D,N,U)=>{if(D&&I(_,D),N)for(let G=0;G<N.length;G++)I(_,N[G]);if(U){let G=U.subTree;if(T===G){const X=U.vnode;ne(_,X,X.scopeId,X.slotScopeIds,U.parent)}}},me=(_,T,D,N,U,G,X,K,H=0)=>{for(let j=H;j<_.length;j++){const ge=_[j]=K?is(_[j]):ji(_[j]);b(null,ge,T,D,N,U,G,X,K)}},it=(_,T,D,N,U,G,X)=>{const K=T.el=_.el;let{patchFlag:H,dynamicChildren:j,dirs:ge}=T;H|=_.patchFlag&16;const re=_.props||ct,ue=T.props||ct;let we;D&&Zs(D,!1),(we=ue.onVnodeBeforeUpdate)&&Vi(we,D,T,_),ge&&Xs(T,_,D,"beforeUpdate"),D&&Zs(D,!0);const xe=U&&T.type!=="foreignObject";if(j?ht(_.dynamicChildren,j,K,D,N,xe,G):X||He(_,T,K,null,D,N,xe,G,!1),H>0){if(H&16)be(K,T,re,ue,D,N,U);else if(H&2&&re.class!==ue.class&&o(K,"class",null,ue.class,U),H&4&&o(K,"style",re.style,ue.style,U),H&8){const Xe=T.dynamicProps;for(let $e=0;$e<Xe.length;$e++){const rt=Xe[$e],Kt=re[rt],ir=ue[rt];(ir!==Kt||rt==="value")&&o(K,rt,Kt,ir,U,_.children,D,N,Z)}}H&1&&_.children!==T.children&&g(K,T.children)}else!X&&j==null&&be(K,T,re,ue,D,N,U);((we=ue.onVnodeUpdated)||ge)&&$n(()=>{we&&Vi(we,D,T,_),ge&&Xs(T,_,D,"updated")},N)},ht=(_,T,D,N,U,G,X)=>{for(let K=0;K<T.length;K++){const H=_[K],j=T[K],ge=H.el&&(H.type===mi||!il(H,j)||H.shapeFlag&70)?v(H.el):D;b(H,j,ge,null,N,U,G,X,!0)}},be=(_,T,D,N,U,G,X)=>{if(D!==N){if(D!==ct)for(const K in D)!Af(K)&&!(K in N)&&o(_,K,D[K],null,X,T.children,U,G,Z);for(const K in N){if(Af(K))continue;const H=N[K],j=D[K];H!==j&&K!=="value"&&o(_,K,j,H,X,T.children,U,G,Z)}"value"in N&&o(_,"value",D.value,N.value)}},ot=(_,T,D,N,U,G,X,K,H)=>{const j=T.el=_?_.el:l(""),ge=T.anchor=_?_.anchor:l("");let{patchFlag:re,dynamicChildren:ue,slotScopeIds:we}=T;we&&(K=K?K.concat(we):we),_==null?(i(j,D,N),i(ge,D,N),me(T.children,D,ge,U,G,X,K,H)):re>0&&re&64&&ue&&_.dynamicChildren?(ht(_.dynamicChildren,ue,D,U,G,X,K),(T.key!=null||U&&T===U.subTree)&&jA(_,T,!0)):He(_,T,D,ge,U,G,X,K,H)},Ue=(_,T,D,N,U,G,X,K,H)=>{T.slotScopeIds=K,_==null?T.shapeFlag&512?U.ctx.activate(T,D,N,X,H):Rt(T,D,N,U,G,X,H):Ee(_,T,H)},Rt=(_,T,D,N,U,G,X)=>{const K=_.component=BL(_,N,U);if(RA(_)&&(K.ctx.renderer=Ne),$L(K),K.asyncDep){if(U&&U.registerDep(K,oe),!_.el){const H=K.subTree=ft(Ao);C(null,H,T,D)}return}oe(K,_,T,D,U,G,X)},Ee=(_,T,D)=>{const N=T.component=_.component;if(QM(_,T,D))if(N.asyncDep&&!N.asyncResolved){ke(N,T,D);return}else N.next=T,KM(N.update),N.update();else T.el=_.el,N.vnode=T},oe=(_,T,D,N,U,G,X)=>{const K=()=>{if(_.isMounted){let{next:ge,bu:re,u:ue,parent:we,vnode:xe}=_,Xe=ge,$e;Zs(_,!1),ge?(ge.el=xe.el,ke(_,ge,X)):ge=xe,re&&kf(re),($e=ge.props&&ge.props.onVnodeBeforeUpdate)&&Vi($e,we,ge,xe),Zs(_,!0);const rt=_v(_),Kt=_.subTree;_.subTree=rt,b(Kt,rt,v(Kt.el),z(Kt),_,U,G),ge.el=rt.el,Xe===null&&JM(_,rt.el),ue&&$n(ue,U),($e=ge.props&&ge.props.onVnodeUpdated)&&$n(()=>Vi($e,we,ge,xe),U)}else{let ge;const{el:re,props:ue}=T,{bm:we,m:xe,parent:Xe}=_,$e=xf(T);if(Zs(_,!1),we&&kf(we),!$e&&(ge=ue&&ue.onVnodeBeforeMount)&&Vi(ge,Xe,T),Zs(_,!0),re&&Re){const rt=()=>{_.subTree=_v(_),Re(re,_.subTree,_,U,null)};$e?T.type.__asyncLoader().then(()=>!_.isUnmounted&&rt()):rt()}else{const rt=_.subTree=_v(_);b(null,rt,D,N,_,U,G),T.el=rt.el}if(xe&&$n(xe,U),!$e&&(ge=ue&&ue.onVnodeMounted)){const rt=T;$n(()=>Vi(ge,Xe,rt),U)}(T.shapeFlag&256||Xe&&xf(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&_.a&&$n(_.a,U),_.isMounted=!0,T=D=N=null}},H=_.effect=new Cw(K,()=>Mw(j),_.scope),j=_.update=()=>H.run();j.id=_.uid,Zs(_,!0),j()},ke=(_,T,D)=>{T.component=_;const N=_.vnode.props;_.vnode=T,_.next=null,EL(_,T.props,N,D),CL(_,T.children,D),Oc(),sS(),Mc()},He=(_,T,D,N,U,G,X,K,H=!1)=>{const j=_&&_.children,ge=_?_.shapeFlag:0,re=T.children,{patchFlag:ue,shapeFlag:we}=T;if(ue>0){if(ue&128){hn(j,re,D,N,U,G,X,K,H);return}else if(ue&256){Cn(j,re,D,N,U,G,X,K,H);return}}we&8?(ge&16&&Z(j,U,G),re!==j&&g(D,re)):ge&16?we&16?hn(j,re,D,N,U,G,X,K,H):Z(j,U,G,!0):(ge&8&&g(D,""),we&16&&me(re,D,N,U,G,X,K,H))},Cn=(_,T,D,N,U,G,X,K,H)=>{_=_||Xa,T=T||Xa;const j=_.length,ge=T.length,re=Math.min(j,ge);let ue;for(ue=0;ue<re;ue++){const we=T[ue]=H?is(T[ue]):ji(T[ue]);b(_[ue],we,D,null,U,G,X,K,H)}j>ge?Z(_,U,G,!0,!1,re):me(T,D,N,U,G,X,K,H,re)},hn=(_,T,D,N,U,G,X,K,H)=>{let j=0;const ge=T.length;let re=_.length-1,ue=ge-1;for(;j<=re&&j<=ue;){const we=_[j],xe=T[j]=H?is(T[j]):ji(T[j]);if(il(we,xe))b(we,xe,D,null,U,G,X,K,H);else break;j++}for(;j<=re&&j<=ue;){const we=_[re],xe=T[ue]=H?is(T[ue]):ji(T[ue]);if(il(we,xe))b(we,xe,D,null,U,G,X,K,H);else break;re--,ue--}if(j>re){if(j<=ue){const we=ue+1,xe=we<ge?T[we].el:N;for(;j<=ue;)b(null,T[j]=H?is(T[j]):ji(T[j]),D,xe,U,G,X,K,H),j++}}else if(j>ue)for(;j<=re;)Ut(_[j],U,G,!0),j++;else{const we=j,xe=j,Xe=new Map;for(j=xe;j<=ue;j++){const Jt=T[j]=H?is(T[j]):ji(T[j]);Jt.key!=null&&Xe.set(Jt.key,j)}let $e,rt=0;const Kt=ue-xe+1;let ir=!1,Hh=0;const Os=new Array(Kt);for(j=0;j<Kt;j++)Os[j]=0;for(j=we;j<=re;j++){const Jt=_[j];if(rt>=Kt){Ut(Jt,U,G,!0);continue}let Xt;if(Jt.key!=null)Xt=Xe.get(Jt.key);else for($e=xe;$e<=ue;$e++)if(Os[$e-xe]===0&&il(Jt,T[$e])){Xt=$e;break}Xt===void 0?Ut(Jt,U,G,!0):(Os[Xt-xe]=j+1,Xt>=Hh?Hh=Xt:ir=!0,b(Jt,T[Xt],D,null,U,G,X,K,H),rt++)}const Ms=ir?DL(Os):Xa;for($e=Ms.length-1,j=Kt-1;j>=0;j--){const Jt=xe+j,Xt=T[Jt],Wh=Jt+1<ge?T[Jt+1].el:N;Os[j]===0?b(null,Xt,D,Wh,U,G,X,K,H):ir&&($e<0||j!==Ms[$e]?Vn(Xt,D,Wh,2):$e--)}}},Vn=(_,T,D,N,U=null)=>{const{el:G,type:X,transition:K,children:H,shapeFlag:j}=_;if(j&6){Vn(_.component.subTree,T,D,N);return}if(j&128){_.suspense.move(T,D,N);return}if(j&64){X.move(_,T,D,Ne);return}if(X===mi){i(G,T,D);for(let re=0;re<H.length;re++)Vn(H[re],T,D,N);i(_.anchor,T,D);return}if(X===Sv){O(_,T,D);return}if(N!==2&&j&1&&K)if(N===0)K.beforeEnter(G),i(G,T,D),$n(()=>K.enter(G),U);else{const{leave:re,delayLeave:ue,afterLeave:we}=K,xe=()=>i(G,T,D),Xe=()=>{re(G,()=>{xe(),we&&we()})};ue?ue(G,xe,Xe):Xe()}else i(G,T,D)},Ut=(_,T,D,N=!1,U=!1)=>{const{type:G,props:X,ref:K,children:H,dynamicChildren:j,shapeFlag:ge,patchFlag:re,dirs:ue}=_;if(K!=null&&fy(K,null,D,_,!0),ge&256){T.ctx.deactivate(_);return}const we=ge&1&&ue,xe=!xf(_);let Xe;if(xe&&(Xe=X&&X.onVnodeBeforeUnmount)&&Vi(Xe,T,_),ge&6)L(_.component,D,N);else{if(ge&128){_.suspense.unmount(D,N);return}we&&Xs(_,null,T,"beforeUnmount"),ge&64?_.type.remove(_,T,D,U,Ne,N):j&&(G!==mi||re>0&&re&64)?Z(j,T,D,!1,!0):(G===mi&&re&384||!U&&ge&16)&&Z(H,T,D),N&&Nr(_)}(xe&&(Xe=X&&X.onVnodeUnmounted)||we)&&$n(()=>{Xe&&Vi(Xe,T,_),we&&Xs(_,null,T,"unmounted")},D)},Nr=_=>{const{type:T,el:D,anchor:N,transition:U}=_;if(T===mi){ea(D,N);return}if(T===Sv){Q(_);return}const G=()=>{s(D),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(_.shapeFlag&1&&U&&!U.persisted){const{leave:X,delayLeave:K}=U,H=()=>X(D,G);K?K(_.el,G,H):H()}else G()},ea=(_,T)=>{let D;for(;_!==T;)D=w(_),s(_),_=D;s(T)},L=(_,T,D)=>{const{bum:N,scope:U,update:G,subTree:X,um:K}=_;N&&kf(N),U.stop(),G&&(G.active=!1,Ut(X,_,T,D)),K&&$n(K,T),$n(()=>{_.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},Z=(_,T,D,N=!1,U=!1,G=0)=>{for(let X=G;X<_.length;X++)Ut(_[X],T,D,N,U)},z=_=>_.shapeFlag&6?z(_.component.subTree):_.shapeFlag&128?_.suspense.next():w(_.anchor||_.el),de=(_,T,D)=>{_==null?T._vnode&&Ut(T._vnode,null,null,!0):b(T._vnode||null,_,T,null,null,null,D),sS(),_A(),T._vnode=_},Ne={p:b,um:Ut,m:Vn,r:Nr,mt:Rt,mc:me,pc:He,pbc:ht,n:z,o:t};let at,Re;return e&&([at,Re]=e(Ne)),{render:de,hydrate:at,createApp:kL(de,at)}}function Zs({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function jA(t,e,n=!1){const i=t.children,s=e.children;if(_e(i)&&_e(s))for(let o=0;o<i.length;o++){const c=i[o];let l=s[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[o]=is(s[o]),l.el=c.el),n||jA(c,l)),l.type===Fp&&(l.el=c.el)}}function DL(t){const e=t.slice(),n=[0];let i,s,o,c,l;const d=t.length;for(i=0;i<d;i++){const f=t[i];if(f!==0){if(s=n[n.length-1],t[s]<f){e[i]=s,n.push(i);continue}for(o=0,c=n.length-1;o<c;)l=o+c>>1,t[n[l]]<f?o=l+1:c=l;f<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}for(o=n.length,c=n[o-1];o-- >0;)n[o]=c,c=e[c];return n}const NL=t=>t.__isTeleport,mi=Symbol(void 0),Fp=Symbol(void 0),Ao=Symbol(void 0),Sv=Symbol(void 0),Cl=[];let Ai=null;function On(t=!1){Cl.push(Ai=t?null:[])}function PL(){Cl.pop(),Ai=Cl[Cl.length-1]||null}let zl=1;function pS(t){zl+=t}function $A(t){return t.dynamicChildren=zl>0?Ai||Xa:null,PL(),zl>0&&Ai&&Ai.push(t),t}function Gn(t,e,n,i,s,o){return $A(Ye(t,e,n,i,s,o,!0))}function OL(t,e,n,i,s){return $A(ft(t,e,n,i,s,!0))}function py(t){return t?t.__v_isVNode===!0:!1}function il(t,e){return t.type===e.type&&t.key===e.key}const Up="__vInternal",qA=({key:t})=>t??null,Df=({ref:t,ref_key:e,ref_for:n})=>t!=null?Ht(t)||Lt(t)||Ae(t)?{i:ui,r:t,k:e,f:!!n}:t:null;function Ye(t,e=null,n=null,i=0,s=null,o=t===mi?0:1,c=!1,l=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qA(e),ref:e&&Df(e),scopeId:TA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ui};return l?(Uw(d,n),o&128&&t.normalize(d)):n&&(d.shapeFlag|=Ht(n)?8:16),zl>0&&!c&&Ai&&(d.patchFlag>0||o&6)&&d.patchFlag!==32&&Ai.push(d),d}const ft=ML;function ML(t,e=null,n=null,i=0,s=null,o=!1){if((!t||t===fL)&&(t=Ao),py(t)){const l=lc(t,e,!0);return n&&Uw(l,n),zl>0&&!o&&Ai&&(l.shapeFlag&6?Ai[Ai.indexOf(t)]=l:Ai.push(l)),l.patchFlag|=-2,l}if(HL(t)&&(t=t.__vccOpts),e){e=LL(e);let{class:l,style:d}=e;l&&!Ht(l)&&(e.class=Ap(l)),vt(d)&&(pA(d)&&!_e(d)&&(d=Un({},d)),e.style=bw(d))}const c=Ht(t)?1:XM(t)?128:NL(t)?64:vt(t)?4:Ae(t)?2:0;return Ye(t,e,n,i,s,c,o,!0)}function LL(t){return t?pA(t)||Up in t?Un({},t):t:null}function lc(t,e,n=!1){const{props:i,ref:s,patchFlag:o,children:c}=t,l=e?FL(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&qA(l),ref:e&&e.ref?n&&s?_e(s)?s.concat(Df(e)):[s,Df(e)]:Df(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==mi?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&lc(t.ssContent),ssFallback:t.ssFallback&&lc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function my(t=" ",e=0){return ft(Fp,null,t,e)}function gy(t="",e=!1){return e?(On(),OL(Ao,null,t)):ft(Ao,null,t)}function ji(t){return t==null||typeof t=="boolean"?ft(Ao):_e(t)?ft(mi,null,t.slice()):typeof t=="object"?is(t):ft(Fp,null,String(t))}function is(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:lc(t)}function Uw(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Uw(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Up in e)?e._ctx=ui:s===3&&ui&&(ui.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:ui},n=32):(e=String(e),i&64?(n=16,e=[my(e)]):n=8);t.children=e,t.shapeFlag|=n}function FL(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Ap([e.class,i.class]));else if(s==="style")e.style=bw([e.style,i.style]);else if(kp(s)){const o=e[s],c=i[s];c&&o!==c&&!(_e(o)&&o.includes(c))&&(e[s]=o?[].concat(o,c):c)}else s!==""&&(e[s]=i[s])}return e}function Vi(t,e,n,i=null){xi(t,e,7,[n,i])}const UL=BA();let VL=0;function BL(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||UL,o={uid:VL++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new eA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:LA(i,s),emitsOptions:SA(i,s),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:i.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=HM.bind(null,o),t.ce&&t.ce(o),o}let Pt=null;const jL=()=>Pt||ui,hc=t=>{Pt=t,t.scope.on()},Io=()=>{Pt&&Pt.scope.off(),Pt=null};function KA(t){return t.vnode.shapeFlag&4}let Gl=!1;function $L(t,e=!1){Gl=e;const{props:n,children:i}=t.vnode,s=KA(t);_L(t,n,s,e),TL(t,i);const o=s?qL(t,e):void 0;return Gl=!1,o}function qL(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=uc(new Proxy(t.ctx,gL));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?zL(t):null;hc(t),Oc();const o=hs(i,t,0,[t.props,s]);if(Mc(),Io(),JC(o)){if(o.then(Io,Io),e)return o.then(c=>{mS(t,c,e)}).catch(c=>{Pp(c,t,0)});t.asyncDep=o}else mS(t,o,e)}else zA(t,e)}function mS(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vt(e)&&(t.setupState=yA(e)),zA(t,n)}let gS;function zA(t,e,n){const i=t.type;if(!t.render){if(!e&&gS&&!i.render){const s=i.template||Lw(t).template;if(s){const{isCustomElement:o,compilerOptions:c}=t.appContext.config,{delimiters:l,compilerOptions:d}=i,f=Un(Un({isCustomElement:o,delimiters:l},c),d);i.render=gS(s,f)}}t.render=i.render||Ri}hc(t),Oc(),vL(t),Mc(),Io()}function KL(t){return new Proxy(t.attrs,{get(e,n){return Xn(t,"get","$attrs"),e[n]}})}function zL(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=KL(t))},slots:t.slots,emit:t.emit,expose:e}}function Vp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(yA(uc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Tl)return Tl[n](t)},has(e,n){return n in e||n in Tl}}))}function GL(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function HL(t){return Ae(t)&&"__vccOpts"in t}const zn=(t,e)=>jM(t,e,Gl);function GA(t,e,n){const i=arguments.length;return i===2?vt(e)&&!_e(e)?py(e)?ft(t,null,[e]):ft(t,e):ft(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&py(n)&&(n=[n]),ft(t,e,n))}const WL=Symbol(""),YL=()=>Di(WL),QL="3.2.47",JL="http://www.w3.org/2000/svg",so=typeof document<"u"?document:null,vS=so&&so.createElement("template"),XL={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?so.createElementNS(JL,t):so.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>so.createTextNode(t),createComment:t=>so.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>so.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,o){const c=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{vS.innerHTML=i?`<svg>${t}</svg>`:t;const l=vS.content;if(i){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}e.insertBefore(l,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function ZL(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function eF(t,e,n){const i=t.style,s=Ht(n);if(n&&!s){if(e&&!Ht(e))for(const o in e)n[o]==null&&vy(i,o,"");for(const o in n)vy(i,o,n[o])}else{const o=i.display;s?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=o)}}const yS=/\s*!important$/;function vy(t,e,n){if(_e(n))n.forEach(i=>vy(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=tF(t,e);yS.test(n)?t.setProperty(Pc(i),n.replace(yS,""),"important"):t[i]=n}}const wS=["Webkit","Moz","ms"],Tv={};function tF(t,e){const n=Tv[e];if(n)return n;let i=Zi(e);if(i!=="filter"&&i in t)return Tv[e]=i;i=Dp(i);for(let s=0;s<wS.length;s++){const o=wS[s]+i;if(o in t)return Tv[e]=o}return e}const bS="http://www.w3.org/1999/xlink";function nF(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(bS,e.slice(6,e.length)):t.setAttributeNS(bS,e,n);else{const o=YO(e);n==null||o&&!WC(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function iF(t,e,n,i,s,o,c){if(e==="innerHTML"||e==="textContent"){i&&c(i,s,o),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const d=n??"";(t.value!==d||t.tagName==="OPTION")&&(t.value=d),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=WC(n):n==null&&d==="string"?(n="",l=!0):d==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ka(t,e,n,i){t.addEventListener(e,n,i)}function rF(t,e,n,i){t.removeEventListener(e,n,i)}function sF(t,e,n,i,s=null){const o=t._vei||(t._vei={}),c=o[e];if(i&&c)c.value=i;else{const[l,d]=oF(e);if(i){const f=o[e]=uF(i,s);Ka(t,l,f,d)}else c&&(rF(t,l,c,d),o[e]=void 0)}}const IS=/(?:Once|Passive|Capture)$/;function oF(t){let e;if(IS.test(t)){e={};let i;for(;i=t.match(IS);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pc(t.slice(2)),e]}let Cv=0;const aF=Promise.resolve(),cF=()=>Cv||(aF.then(()=>Cv=0),Cv=Date.now());function uF(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;xi(lF(i,n.value),e,5,[i])};return n.value=t,n.attached=cF(),n}function lF(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const _S=/^on[a-z]/,hF=(t,e,n,i,s=!1,o,c,l,d)=>{e==="class"?ZL(t,i,s):e==="style"?eF(t,n,i):kp(e)?Iw(e)||sF(t,e,n,i,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dF(t,e,i,s))?iF(t,e,i,o,c,l,d):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),nF(t,e,i,s))};function dF(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&_S.test(e)&&Ae(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||_S.test(e)&&Ht(n)?!1:e in t}const ES=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>kf(e,n):e};function fF(t){t.target.composing=!0}function SS(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const TS={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t._assign=ES(s);const o=i||s.props&&s.props.type==="number";Ka(t,e?"change":"input",c=>{if(c.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=iy(l)),t._assign(l)}),n&&Ka(t,"change",()=>{t.value=t.value.trim()}),e||(Ka(t,"compositionstart",fF),Ka(t,"compositionend",SS),Ka(t,"change",SS))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(t._assign=ES(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(s||t.type==="number")&&iy(t.value)===e))return;const c=e??"";t.value!==c&&(t.value=c)}},pF=["ctrl","shift","alt","meta"],mF={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>pF.some(n=>t[`${n}Key`]&&!e.includes(n))},gF=(t,e)=>(n,...i)=>{for(let s=0;s<e.length;s++){const o=mF[e[s]];if(o&&o(n,e))return}return t(n,...i)},vF=Un({patchProp:hF},XL);let CS;function yF(){return CS||(CS=RL(vF))}const wF=(...t)=>{const e=yF().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=bF(i);if(!s)return;const o=e._component;!Ae(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const c=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},e};function bF(t){return Ht(t)?document.querySelector(t):t}var IF=!1;/*!
  * pinia v2.0.34
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let HA;const Bp=t=>HA=t,WA=Symbol();function yy(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Al;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Al||(Al={}));function _F(){const t=tA(!0),e=t.run(()=>Nw({}));let n=[],i=[];const s=uc({install(o){Bp(s),s._a=o,o.provide(WA,s),o.config.globalProperties.$pinia=s,i.forEach(c=>n.push(c)),i=[]},use(o){return!this._a&&!IF?i.push(o):n.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const YA=()=>{};function AS(t,e,n,i=YA){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),i())};return!n&&nA()&&sM(s),s}function Va(t,...e){t.slice().forEach(n=>{n(...e)})}function wy(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,i)=>t.set(i,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],s=t[n];yy(s)&&yy(i)&&t.hasOwnProperty(n)&&!Lt(i)&&!ls(i)?t[n]=wy(s,i):t[n]=i}return t}const EF=Symbol();function SF(t){return!yy(t)||!t.hasOwnProperty(EF)}const{assign:ns}=Object;function TF(t){return!!(Lt(t)&&t.effect)}function CF(t,e,n,i){const{state:s,actions:o,getters:c}=e,l=n.state.value[t];let d;function f(){l||(n.state.value[t]=s?s():{});const g=FM(n.state.value[t]);return ns(g,o,Object.keys(c||{}).reduce((v,w)=>(v[w]=uc(zn(()=>{Bp(n);const I=n._s.get(t);return c[w].call(I,I)})),v),{}))}return d=QA(t,f,e,n,i,!0),d}function QA(t,e,n={},i,s,o){let c;const l=ns({actions:{}},n),d={deep:!0};let f,g,v=uc([]),w=uc([]),I;const A=i.state.value[t];!o&&!A&&(i.state.value[t]={}),Nw({});let b;function S(ne){let me;f=g=!1,typeof ne=="function"?(ne(i.state.value[t]),me={type:Al.patchFunction,storeId:t,events:I}):(wy(i.state.value[t],ne),me={type:Al.patchObject,payload:ne,storeId:t,events:I});const it=b=Symbol();Ow().then(()=>{b===it&&(f=!0)}),g=!0,Va(v,me,i.state.value[t])}const C=o?function(){const{state:me}=n,it=me?me():{};this.$patch(ht=>{ns(ht,it)})}:YA;function P(){c.stop(),v=[],w=[],i._s.delete(t)}function O(ne,me){return function(){Bp(i);const it=Array.from(arguments),ht=[],be=[];function ot(Ee){ht.push(Ee)}function Ue(Ee){be.push(Ee)}Va(w,{args:it,name:ne,store:Y,after:ot,onError:Ue});let Rt;try{Rt=me.apply(this&&this.$id===t?this:Y,it)}catch(Ee){throw Va(be,Ee),Ee}return Rt instanceof Promise?Rt.then(Ee=>(Va(ht,Ee),Ee)).catch(Ee=>(Va(be,Ee),Promise.reject(Ee))):(Va(ht,Rt),Rt)}}const Q={_p:i,$id:t,$onAction:AS.bind(null,w),$patch:S,$reset:C,$subscribe(ne,me={}){const it=AS(v,ne,me.detached,()=>ht()),ht=c.run(()=>Sl(()=>i.state.value[t],be=>{(me.flush==="sync"?g:f)&&ne({storeId:t,type:Al.direct,events:I},be)},ns({},d,me)));return it},$dispose:P},Y=Lc(Q);i._s.set(t,Y);const ie=i._e.run(()=>(c=tA(),c.run(()=>e())));for(const ne in ie){const me=ie[ne];if(Lt(me)&&!TF(me)||ls(me))o||(A&&SF(me)&&(Lt(me)?me.value=A[ne]:wy(me,A[ne])),i.state.value[t][ne]=me);else if(typeof me=="function"){const it=O(ne,me);ie[ne]=it,l.actions[ne]=me}}return ns(Y,ie),ns(Ge(Y),ie),Object.defineProperty(Y,"$state",{get:()=>i.state.value[t],set:ne=>{S(me=>{ns(me,ne)})}}),i._p.forEach(ne=>{ns(Y,c.run(()=>ne({store:Y,app:i._a,pinia:i,options:l})))}),A&&o&&n.hydrate&&n.hydrate(Y.$state,A),f=!0,g=!0,Y}function JA(t,e,n){let i,s;const o=typeof e=="function";typeof t=="string"?(i=t,s=o?n:e):(s=t,i=t.id);function c(l,d){const f=jL();return l=l||f&&Di(WA,null),l&&Bp(l),l=HA,l._s.has(i)||(o?QA(i,e,s,l):CF(i,s,l)),l._s.get(i)}return c.$id=i,c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},AF=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],c=t[n++],l=t[n++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},ZA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],c=s+1<t.length,l=c?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,g=o>>2,v=(o&3)<<4|l>>4;let w=(l&15)<<2|f>>6,I=f&63;d||(I=64,c||(w=64)),i.push(n[g],n[v],n[w],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||f==null||v==null)throw new kF;const w=o<<2|l>>4;if(i.push(w),f!==64){const I=l<<4&240|f>>2;if(i.push(I),v!==64){const A=f<<6&192|v;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RF=function(t){const e=XA(t);return ZA.encodeByteArray(e,!0)},Yf=function(t){return RF(t).replace(/\./g,"")},ek=function(t){try{return ZA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xF(n)||(t[n]=Qf(t[n],e[n]));return t}function xF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=()=>DF().__FIREBASE_DEFAULTS__,PF=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ek(t[1]);return e&&JSON.parse(e)},jp=()=>{try{return NF()||PF()||OF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tk=t=>{var e,n;return(n=(e=jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MF=t=>{const e=tk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},LF=()=>{var t;return(t=jp())===null||t===void 0?void 0:t.config},nk=t=>{var e;return(e=jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Yf(JSON.stringify(n)),Yf(JSON.stringify(c)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function Vw(){var t;const e=(t=jp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BF(){return typeof self=="object"&&self.self===self}function Bw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ik(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jF(){return!Vw()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dc(){try{return typeof indexedDB=="object"}catch{return!1}}function rk(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function $F(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="FirebaseError";class gn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qF,Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tr.prototype.create)}}class Tr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?KF(o,i):"Error",l=`${this.serviceName}: ${c} (${s}).`;return new gn(s,l,i)}}function KF(t,e){return t.replace(zF,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const zF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function GF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],c=e[s];if(RS(o)&&RS(c)){if(!Hl(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function RS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function vl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sk(t,e){const n=new HF(t,e);return n.subscribe.bind(n)}class HF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");WF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Av),s.error===void 0&&(s.error=Av),s.complete===void 0&&(s.complete=Av);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Av(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=1e3,QF=2,JF=4*60*60*1e3,XF=.5;function xS(t,e=YF,n=QF){const i=e*Math.pow(n,t),s=Math.round(XF*i*(Math.random()-.5)*2);return Math.min(JF,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t){return t&&t._delegate?t._delegate:t}class Zn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FF;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tU(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&c.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eU(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eU(t){return t===no?void 0:t}function tU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=[];var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const ok={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},iU=ze.INFO,rU={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},sU=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=rU[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=iU,this._logHandler=sU,this._userLogHandler=null,$w.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ok[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}function oU(t){$w.forEach(e=>{e.setLogLevel(t)})}function aU(t,e){for(const n of $w){let i=null;e&&e.level&&(i=ok[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,o,...c)=>{const l=c.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(i??s.logLevel)&&t({level:ze[o].toLowerCase(),message:l,args:c,type:s.name})}}}const cU=(t,e)=>e.some(n=>t instanceof n);let DS,NS;function uU(){return DS||(DS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lU(){return NS||(NS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ak=new WeakMap,by=new WeakMap,ck=new WeakMap,kv=new WeakMap,qw=new WeakMap;function hU(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(ds(t.result)),s()},c=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&ak.set(n,t)}).catch(()=>{}),qw.set(e,t),e}function dU(t){if(by.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});by.set(t,e)}let Iy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return by.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ck.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fU(t){Iy=t(Iy)}function pU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rv(this),e,...n);return ck.set(i,e.sort?e.sort():[e]),ds(i)}:lU().includes(t)?function(...e){return t.apply(Rv(this),e),ds(ak.get(this))}:function(...e){return ds(t.apply(Rv(this),e))}}function mU(t){return typeof t=="function"?pU(t):(t instanceof IDBTransaction&&dU(t),cU(t,uU())?new Proxy(t,Iy):t)}function ds(t){if(t instanceof IDBRequest)return hU(t);if(kv.has(t))return kv.get(t);const e=mU(t);return e!==t&&(kv.set(t,e),qw.set(e,t)),e}const Rv=t=>qw.get(t);function uk(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(t,e),l=ds(c);return i&&c.addEventListener("upgradeneeded",d=>{i(ds(c.result),d.oldVersion,d.newVersion,ds(c.transaction))}),n&&c.addEventListener("blocked",()=>n()),l.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}const gU=["get","getKey","getAll","getAllKeys","count"],vU=["put","add","delete","clear"],xv=new Map;function PS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xv.get(e))return xv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=vU.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||gU.includes(n)))return;const o=async function(c,...l){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&d.done]))[0]};return xv.set(e,o),o}fU(t=>({...t,get:(e,n,i)=>PS(e,n)||t.get(e,n,i),has:(e,n)=>!!PS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wU(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _y="@firebase/app",OS="0.9.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new wh("@firebase/app"),bU="@firebase/app-compat",IU="@firebase/analytics-compat",_U="@firebase/analytics",EU="@firebase/app-check-compat",SU="@firebase/app-check",TU="@firebase/auth",CU="@firebase/auth-compat",AU="@firebase/database",kU="@firebase/database-compat",RU="@firebase/functions",xU="@firebase/functions-compat",DU="@firebase/installations",NU="@firebase/installations-compat",PU="@firebase/messaging",OU="@firebase/messaging-compat",MU="@firebase/performance",LU="@firebase/performance-compat",FU="@firebase/remote-config",UU="@firebase/remote-config-compat",VU="@firebase/storage",BU="@firebase/storage-compat",jU="@firebase/firestore",$U="@firebase/firestore-compat",qU="firebase",KU="9.19.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]",zU={[_y]:"fire-core",[bU]:"fire-core-compat",[_U]:"fire-analytics",[IU]:"fire-analytics-compat",[SU]:"fire-app-check",[EU]:"fire-app-check-compat",[TU]:"fire-auth",[CU]:"fire-auth-compat",[AU]:"fire-rtdb",[kU]:"fire-rtdb-compat",[RU]:"fire-fn",[xU]:"fire-fn-compat",[DU]:"fire-iid",[NU]:"fire-iid-compat",[PU]:"fire-fcm",[OU]:"fire-fcm-compat",[MU]:"fire-perf",[LU]:"fire-perf-compat",[FU]:"fire-rc",[UU]:"fire-rc-compat",[VU]:"fire-gcs",[BU]:"fire-gcs-compat",[jU]:"fire-fst",[$U]:"fire-fst-compat","fire-js":"fire-js",[qU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Map,Wl=new Map;function Jf(t,e){try{t.container.addComponent(e)}catch(n){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lk(t,e){t.container.addOrOverwriteComponent(e)}function yi(t){const e=t.name;if(Wl.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;Wl.set(e,t);for(const n of gs.values())Jf(n,t);return!0}function Cr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GU(t,e,n=ms){Cr(t,e).clearInstance(n)}function HU(){Wl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},vr=new Tr("app","Firebase",WU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YU=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=KU;function $p(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ms,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw vr.create("bad-app-name",{appName:String(s)});if(n||(n=LF()),!n)throw vr.create("no-options");const o=gs.get(s);if(o){if(Hl(n,o.options)&&Hl(i,o.config))return o;throw vr.create("duplicate-app",{appName:s})}const c=new nU(s);for(const d of Wl.values())c.addComponent(d);const l=new YU(n,i,c);return gs.set(s,l),l}function qp(t=ms){const e=gs.get(t);if(!e&&t===ms)return $p();if(!e)throw vr.create("no-app",{appName:t});return e}function QU(){return Array.from(gs.values())}async function hk(t){const e=t.name;gs.has(e)&&(gs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Ln(t,e,n){var i;let s=(i=zU[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(l.join(" "));return}yi(new Zn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function dk(t,e){if(t!==null&&typeof t!="function")throw vr.create("invalid-log-argument");aU(t,e)}function fk(t){oU(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU="firebase-heartbeat-database",XU=1,Yl="firebase-heartbeat-store";let Dv=null;function pk(){return Dv||(Dv=uk(JU,XU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yl)}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Dv}async function ZU(t){try{return(await pk()).transaction(Yl).objectStore(Yl).get(mk(t))}catch(e){if(e instanceof gn)ko.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ko.warn(n.message)}}}async function MS(t,e){try{const i=(await pk()).transaction(Yl,"readwrite");return await i.objectStore(Yl).put(e,mk(t)),i.done}catch(n){if(n instanceof gn)ko.warn(n.message);else{const i=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ko.warn(i.message)}}}function mk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=1024,t3=30*24*60*60*1e3;class n3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=LS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=t3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LS(),{heartbeatsToSend:n,unsentEntries:i}=i3(this._heartbeatsCache.heartbeats),s=Yf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function LS(){return new Date().toISOString().substring(0,10)}function i3(t,e=e3){const n=[];let i=t.slice();for(const s of t){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),FS(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),FS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class r3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dc()?rk().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ZU(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return MS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return MS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function FS(t){return Yf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){yi(new Zn("platform-logger",e=>new yU(e),"PRIVATE")),yi(new Zn("heartbeat",e=>new n3(e),"PRIVATE")),Ln(_y,OS,t),Ln(_y,OS,"esm2017"),Ln("fire-js","")}s3("");const o3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gn,SDK_VERSION:zo,_DEFAULT_ENTRY_NAME:ms,_addComponent:Jf,_addOrOverwriteComponent:lk,_apps:gs,_clearComponents:HU,_components:Wl,_getProvider:Cr,_registerComponent:yi,_removeServiceInstance:GU,deleteApp:hk,getApp:qp,getApps:QU,initializeApp:$p,onLog:dk,registerVersion:Ln,setLogLevel:fk},Symbol.toStringTag,{value:"Module"}));var a3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},le,Kw=Kw||{},Ie=a3||self;function Xf(){}function Kp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function bh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function c3(t){return Object.prototype.hasOwnProperty.call(t,Nv)&&t[Nv]||(t[Nv]=++u3)}var Nv="closure_uid_"+(1e9*Math.random()>>>0),u3=0;function l3(t,e,n){return t.call.apply(t.bind,arguments)}function h3(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Sn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Sn=l3:Sn=h3,Sn.apply(null,arguments)}function pf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function bn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,s,o){for(var c=Array(arguments.length-2),l=2;l<arguments.length;l++)c[l-2]=arguments[l];return e.prototype[s].apply(i,c)}}function Cs(){this.s=this.s,this.o=this.o}var d3=0;Cs.prototype.s=!1;Cs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),d3!=0)&&c3(this)};Cs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zw(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function US(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Kp(i)){const s=t.length||0,o=i.length||0;t.length=s+o;for(let c=0;c<o;c++)t[s+c]=i[c]}else t.push(i)}}function Tn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tn.prototype.h=function(){this.defaultPrevented=!0};var f3=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ie.addEventListener("test",Xf,e),Ie.removeEventListener("test",Xf,e)}catch{}return t}();function Zf(t){return/^[\s\xa0]*$/.test(t)}var VS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Pv(t,e){return t<e?-1:t>e?1:0}function zp(){var t=Ie.navigator;return t&&(t=t.userAgent)?t:""}function qi(t){return zp().indexOf(t)!=-1}function Gw(t){return Gw[" "](t),t}Gw[" "]=Xf;function p3(t){var e=v3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var m3=qi("Opera"),fc=qi("Trident")||qi("MSIE"),vk=qi("Edge"),Ey=vk||fc,yk=qi("Gecko")&&!(zp().toLowerCase().indexOf("webkit")!=-1&&!qi("Edge"))&&!(qi("Trident")||qi("MSIE"))&&!qi("Edge"),g3=zp().toLowerCase().indexOf("webkit")!=-1&&!qi("Edge");function wk(){var t=Ie.document;return t?t.documentMode:void 0}var ep;e:{var Ov="",Mv=function(){var t=zp();if(yk)return/rv:([^\);]+)(\)|;)/.exec(t);if(vk)return/Edge\/([\d\.]+)/.exec(t);if(fc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(g3)return/WebKit\/(\S+)/.exec(t);if(m3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Mv&&(Ov=Mv?Mv[1]:""),fc){var Lv=wk();if(Lv!=null&&Lv>parseFloat(Ov)){ep=String(Lv);break e}}ep=Ov}var v3={};function y3(){return p3(function(){let t=0;const e=VS(String(ep)).split("."),n=VS("9").split("."),i=Math.max(e.length,n.length);for(let c=0;t==0&&c<i;c++){var s=e[c]||"",o=n[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s[0].length==0&&o[0].length==0)break;t=Pv(s[1].length==0?0:parseInt(s[1],10),o[1].length==0?0:parseInt(o[1],10))||Pv(s[2].length==0,o[2].length==0)||Pv(s[2],o[2]),s=s[3],o=o[3]}while(t==0)}return 0<=t})}var Sy;if(Ie.document&&fc){var BS=wk();Sy=BS||parseInt(ep,10)||void 0}else Sy=void 0;var w3=Sy;function Ql(t,e){if(Tn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yk){e:{try{Gw(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:b3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ql.X.h.call(this)}}bn(Ql,Tn);var b3={2:"touch",3:"pen",4:"mouse"};Ql.prototype.h=function(){Ql.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ih="closure_listenable_"+(1e6*Math.random()|0),I3=0;function _3(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++I3,this.ba=this.ea=!1}function Gp(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Hw(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function bk(t){const e={};for(const n in t)e[n]=t[n];return e}const jS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ik(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let o=0;o<jS.length;o++)n=jS[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Hp(t){this.src=t,this.g={},this.h=0}Hp.prototype.add=function(t,e,n,i,s){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var c=Cy(t,e,i,s);return-1<c?(e=t[c],n||(e.ea=!1)):(e=new _3(e,this.src,o,!!i,s),e.ea=n,t.push(e)),e};function Ty(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=gk(i,e),o;(o=0<=s)&&Array.prototype.splice.call(i,s,1),o&&(Gp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Cy(t,e,n,i){for(var s=0;s<t.length;++s){var o=t[s];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==i)return s}return-1}var Ww="closure_lm_"+(1e6*Math.random()|0),Fv={};function _k(t,e,n,i,s){if(i&&i.once)return Sk(t,e,n,i,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_k(t,e[o],n,i,s);return null}return n=Jw(n),t&&t[Ih]?t.N(e,n,bh(i)?!!i.capture:!!i,s):Ek(t,e,n,!1,i,s)}function Ek(t,e,n,i,s,o){if(!e)throw Error("Invalid event type");var c=bh(s)?!!s.capture:!!s,l=Qw(t);if(l||(t[Ww]=l=new Hp(t)),n=l.add(e,n,i,c,o),n.proxy)return n;if(i=E3(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)f3||(s=c),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(Ck(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function E3(){function t(n){return e.call(t.src,t.listener,n)}const e=S3;return t}function Sk(t,e,n,i,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sk(t,e[o],n,i,s);return null}return n=Jw(n),t&&t[Ih]?t.O(e,n,bh(i)?!!i.capture:!!i,s):Ek(t,e,n,!0,i,s)}function Tk(t,e,n,i,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tk(t,e[o],n,i,s);else i=bh(i)?!!i.capture:!!i,n=Jw(n),t&&t[Ih]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Cy(o,n,i,s),-1<n&&(Gp(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Qw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cy(e,n,i,s)),(n=-1<t?e[t]:null)&&Yw(n))}function Yw(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Ih])Ty(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ck(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Qw(e))?(Ty(n,t),n.h==0&&(n.src=null,e[Ww]=null)):Gp(t)}}}function Ck(t){return t in Fv?Fv[t]:Fv[t]="on"+t}function S3(t,e){if(t.ba)t=!0;else{e=new Ql(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&Yw(t),t=n.call(i,e)}return t}function Qw(t){return t=t[Ww],t instanceof Hp?t:null}var Uv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jw(t){return typeof t=="function"?t:(t[Uv]||(t[Uv]=function(e){return t.handleEvent(e)}),t[Uv])}function on(){Cs.call(this),this.i=new Hp(this),this.P=this,this.I=null}bn(on,Cs);on.prototype[Ih]=!0;on.prototype.removeEventListener=function(t,e,n,i){Tk(this,t,e,n,i)};function vn(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new Tn(e,t);else if(e instanceof Tn)e.target=e.target||t;else{var s=e;e=new Tn(i,t),Ik(e,s)}if(s=!0,n)for(var o=n.length-1;0<=o;o--){var c=e.g=n[o];s=mf(c,i,!0,e)&&s}if(c=e.g=t,s=mf(c,i,!0,e)&&s,s=mf(c,i,!1,e)&&s,n)for(o=0;o<n.length;o++)c=e.g=n[o],s=mf(c,i,!1,e)&&s}on.prototype.M=function(){if(on.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Gp(n[i]);delete t.g[e],t.h--}}this.I=null};on.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};on.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function mf(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ba&&c.capture==n){var l=c.listener,d=c.ha||c.src;c.ea&&Ty(t.i,c),s=l.call(d,i)!==!1&&s}}return s&&!i.defaultPrevented}var Xw=Ie.JSON.stringify;function T3(){var t=Rk;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class C3{constructor(){this.h=this.g=null}add(e,n){const i=Ak.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Ak=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new A3,t=>t.reset());class A3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function k3(t){Ie.setTimeout(()=>{throw t},0)}function kk(t,e){Ay||R3(),ky||(Ay(),ky=!0),Rk.add(t,e)}var Ay;function R3(){var t=Ie.Promise.resolve(void 0);Ay=function(){t.then(x3)}}var ky=!1,Rk=new C3;function x3(){for(var t;t=T3();){try{t.h.call(t.g)}catch(n){k3(n)}var e=Ak;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ky=!1}function Wp(t,e){on.call(this),this.h=t||1,this.g=e||Ie,this.j=Sn(this.lb,this),this.l=Date.now()}bn(Wp,on);le=Wp.prototype;le.ca=!1;le.R=null;le.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vn(this,"tick"),this.ca&&(Zw(this),this.start()))}};le.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Zw(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}le.M=function(){Wp.X.M.call(this),Zw(this),delete this.g};function e0(t,e,n){if(typeof t=="function")n&&(t=Sn(t,n));else if(t&&typeof t.handleEvent=="function")t=Sn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ie.setTimeout(t,e||0)}function xk(t){t.g=e0(()=>{t.g=null,t.i&&(t.i=!1,xk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class D3 extends Cs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xk(this)}M(){super.M(),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jl(t){Cs.call(this),this.h=t,this.g={}}bn(Jl,Cs);var $S=[];function Dk(t,e,n,i){Array.isArray(n)||(n&&($S[0]=n.toString()),n=$S);for(var s=0;s<n.length;s++){var o=_k(e,n[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Nk(t){Hw(t.g,function(e,n){this.g.hasOwnProperty(n)&&Yw(e)},t),t.g={}}Jl.prototype.M=function(){Jl.X.M.call(this),Nk(this)};Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yp(){this.g=!0}Yp.prototype.Aa=function(){this.g=!1};function N3(t,e,n,i,s,o){t.info(function(){if(t.g)if(o)for(var c="",l=o.split("&"),d=0;d<l.length;d++){var f=l[d].split("=");if(1<f.length){var g=f[0];f=f[1];var v=g.split("_");c=2<=v.length&&v[1]=="type"?c+(g+"="+f+"&"):c+(g+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+c})}function P3(t,e,n,i,s,o,c){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+o+" "+c})}function Qa(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+M3(t,n)+(i?" "+i:"")})}function O3(t,e){t.info(function(){return"TIMEOUT: "+e})}Yp.prototype.info=function(){};function M3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var c=1;c<s.length;c++)s[c]=""}}}}return Xw(n)}catch{return e}}var Go={},qS=null;function Qp(){return qS=qS||new on}Go.Pa="serverreachability";function Pk(t){Tn.call(this,Go.Pa,t)}bn(Pk,Tn);function Xl(t){const e=Qp();vn(e,new Pk(e))}Go.STAT_EVENT="statevent";function Ok(t,e){Tn.call(this,Go.STAT_EVENT,t),this.stat=e}bn(Ok,Tn);function Mn(t){const e=Qp();vn(e,new Ok(e,t))}Go.Qa="timingevent";function Mk(t,e){Tn.call(this,Go.Qa,t),this.size=e}bn(Mk,Tn);function _h(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){t()},e)}var Jp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Lk={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function t0(){}t0.prototype.h=null;function KS(t){return t.h||(t.h=t.i())}function Fk(){}var Eh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function n0(){Tn.call(this,"d")}bn(n0,Tn);function i0(){Tn.call(this,"c")}bn(i0,Tn);var Ry;function Xp(){}bn(Xp,t0);Xp.prototype.g=function(){return new XMLHttpRequest};Xp.prototype.i=function(){return{}};Ry=new Xp;function Sh(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new Jl(this),this.O=L3,t=Ey?125:void 0,this.T=new Wp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Uk}function Uk(){this.i=null,this.g="",this.h=!1}var L3=45e3,xy={},tp={};le=Sh.prototype;le.setTimeout=function(t){this.O=t};function Dy(t,e,n){t.K=1,t.v=em(br(e)),t.s=n,t.P=!0,Vk(t,null)}function Vk(t,e){t.F=Date.now(),Th(t),t.A=br(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),Hk(n.i,"t",i),t.C=0,n=t.l.H,t.h=new Uk,t.g=pR(t.l,n?e:null,!t.s),0<t.N&&(t.L=new D3(Sn(t.La,t,t.g),t.N)),Dk(t.S,t.g,"readystatechange",t.ib),e=t.H?bk(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Xl(),N3(t.j,t.u,t.A,t.m,t.U,t.s)}le.ib=function(t){t=t.target;const e=this.L;e&&fr(t)==3?e.l():this.La(t)};le.La=function(t){try{if(t==this.g)e:{const g=fr(this.g);var e=this.g.Ea();const v=this.g.aa();if(!(3>g)&&(g!=3||Ey||this.g&&(this.h.h||this.g.fa()||WS(this.g)))){this.I||g!=4||e==7||(e==8||0>=v?Xl(3):Xl(2)),Zp(this);var n=this.g.aa();this.Y=n;t:if(Bk(this)){var i=WS(this.g);t="";var s=i.length,o=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){po(this),kl(this);var c="";break t}this.h.i=new Ie.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=n==200,P3(this.j,this.u,this.A,this.m,this.U,g,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zf(l)){var f=l;break t}}f=null}if(n=f)Qa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ny(this,n);else{this.i=!1,this.o=3,Mn(12),po(this),kl(this);break e}}this.P?(jk(this,g,c),Ey&&this.i&&g==3&&(Dk(this.S,this.T,"tick",this.hb),this.T.start())):(Qa(this.j,this.m,c,null),Ny(this,c)),g==4&&po(this),this.i&&!this.I&&(g==4?lR(this.l,this):(this.i=!1,Th(this)))}else n==400&&0<c.indexOf("Unknown SID")?(this.o=3,Mn(12)):(this.o=0,Mn(13)),po(this),kl(this)}}}catch{}finally{}};function Bk(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function jk(t,e,n){let i=!0,s;for(;!t.I&&t.C<n.length;)if(s=F3(t,n),s==tp){e==4&&(t.o=4,Mn(14),i=!1),Qa(t.j,t.m,null,"[Incomplete Response]");break}else if(s==xy){t.o=4,Mn(15),Qa(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Qa(t.j,t.m,s,null),Ny(t,s);Bk(t)&&s!=tp&&s!=xy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),l0(e),e.K=!0,Mn(11))):(Qa(t.j,t.m,n,"[Invalid Chunked Response]"),po(t),kl(t))}le.hb=function(){if(this.g){var t=fr(this.g),e=this.g.fa();this.C<e.length&&(Zp(this),jk(this,t,e),this.i&&t!=4&&Th(this))}};function F3(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?tp:(n=Number(e.substring(n,i)),isNaN(n)?xy:(i+=1,i+n>e.length?tp:(e=e.substr(i,n),t.C=i+n,e)))}le.cancel=function(){this.I=!0,po(this)};function Th(t){t.V=Date.now()+t.O,$k(t,t.O)}function $k(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=_h(Sn(t.gb,t),e)}function Zp(t){t.B&&(Ie.clearTimeout(t.B),t.B=null)}le.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(O3(this.j,this.A),this.K!=2&&(Xl(),Mn(17)),po(this),this.o=2,kl(this)):$k(this,this.V-t)};function kl(t){t.l.G==0||t.I||lR(t.l,t)}function po(t){Zp(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Zw(t.T),Nk(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ny(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Py(n.h,t))){if(!t.J&&Py(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)rp(n),im(n);else break e;u0(n),Mn(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=_h(Sn(n.cb,n),6e3));if(1>=Qk(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else mo(n,11)}else if((t.J||n.g==t)&&rp(n),!Zf(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let f=s[e];if(n.T=f[0],f=f[1],n.G==2)if(f[0]=="c"){n.I=f[1],n.ka=f[2];const g=f[3];g!=null&&(n.ma=g,n.j.info("VER="+n.ma));const v=f[4];v!=null&&(n.Ca=v,n.j.info("SVER="+n.Ca));const w=f[5];w!=null&&typeof w=="number"&&0<w&&(i=1.5*w,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const I=t.g;if(I){const A=I.g?I.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var o=i.h;o.g||A.indexOf("spdy")==-1&&A.indexOf("quic")==-1&&A.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(r0(o,o.h),o.h=null))}if(i.D){const b=I.g?I.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(i.za=b,pt(i.F,i.D,b))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var c=t;if(i.sa=fR(i,i.H?i.ka:null,i.V),c.J){Jk(i.h,c);var l=c,d=i.J;d&&l.setTimeout(d),l.B&&(Zp(l),Th(l)),i.g=c}else cR(i);0<n.i.length&&rm(n)}else f[0]!="stop"&&f[0]!="close"||mo(n,7);else n.G==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?mo(n,7):c0(n):f[0]!="noop"&&n.l&&n.l.wa(f),n.A=0)}}Xl(4)}catch{}}function U3(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Kp(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function V3(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Kp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function qk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Kp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=V3(t),i=U3(t),s=i.length,o=0;o<s;o++)e.call(void 0,i[o],n&&n[o],t)}var Kk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var o=t[n].substring(0,i);s=t[n].substring(i+1)}else o=t[n];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function _o(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof _o){this.h=e!==void 0?e:t.h,np(this,t.j),this.s=t.s,this.g=t.g,ip(this,t.m),this.l=t.l,e=t.i;var n=new Zl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),zS(this,n),this.o=t.o}else t&&(n=String(t).match(Kk))?(this.h=!!e,np(this,n[1]||"",!0),this.s=yl(n[2]||""),this.g=yl(n[3]||"",!0),ip(this,n[4]),this.l=yl(n[5]||"",!0),zS(this,n[6]||"",!0),this.o=yl(n[7]||"")):(this.h=!!e,this.i=new Zl(null,this.h))}_o.prototype.toString=function(){var t=[],e=this.j;e&&t.push(wl(e,GS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(wl(e,GS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(wl(n,n.charAt(0)=="/"?q3:$3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",wl(n,z3)),t.join("")};function br(t){return new _o(t)}function np(t,e,n){t.j=n?yl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ip(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zS(t,e,n){e instanceof Zl?(t.i=e,G3(t.i,t.h)):(n||(e=wl(e,K3)),t.i=new Zl(e,t.h))}function pt(t,e,n){t.i.set(e,n)}function em(t){return pt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,j3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function j3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var GS=/[#\/\?@]/g,$3=/[#\?:]/g,q3=/[#\?]/g,K3=/[#\?@]/g,z3=/#/g;function Zl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function As(t){t.g||(t.g=new Map,t.h=0,t.i&&B3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}le=Zl.prototype;le.add=function(t,e){As(this),this.i=null,t=Uc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zk(t,e){As(t),e=Uc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Gk(t,e){return As(t),e=Uc(t,e),t.g.has(e)}le.forEach=function(t,e){As(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};le.oa=function(){As(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let o=0;o<s.length;o++)n.push(e[i])}return n};le.W=function(t){As(this);let e=[];if(typeof t=="string")Gk(this,t)&&(e=e.concat(this.g.get(Uc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};le.set=function(t,e){return As(this),this.i=null,t=Uc(this,t),Gk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};le.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Hk(t,e,n){zk(t,e),0<n.length&&(t.i=null,t.g.set(Uc(t,e),zw(n)),t.h+=n.length)}le.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var s=o;c[i]!==""&&(s+="="+encodeURIComponent(String(c[i]))),t.push(s)}}return this.i=t.join("&")};function Uc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function G3(t,e){e&&!t.j&&(As(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(zk(this,i),Hk(this,s,n))},t)),t.j=e}var H3=class{constructor(e,n){this.h=e,this.g=n}};function Wk(t){this.l=t||W3,Ie.PerformanceNavigationTiming?(t=Ie.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ie.g&&Ie.g.Ga&&Ie.g.Ga()&&Ie.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var W3=10;function Yk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Qk(t){return t.h?1:t.g?t.g.size:0}function Py(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function r0(t,e){t.g?t.g.add(e):t.h=e}function Jk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Wk.prototype.cancel=function(){if(this.i=Xk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Xk(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return zw(t.i)}function s0(){}s0.prototype.stringify=function(t){return Ie.JSON.stringify(t,void 0)};s0.prototype.parse=function(t){return Ie.JSON.parse(t,void 0)};function Y3(){this.g=new s0}function Q3(t,e,n){const i=n||"";try{qk(t,function(s,o){let c=s;bh(s)&&(c=Xw(s)),e.push(i+o+"="+encodeURIComponent(c))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function J3(t,e){const n=new Yp;if(Ie.Image){const i=new Image;i.onload=pf(gf,n,i,"TestLoadImage: loaded",!0,e),i.onerror=pf(gf,n,i,"TestLoadImage: error",!1,e),i.onabort=pf(gf,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=pf(gf,n,i,"TestLoadImage: timeout",!1,e),Ie.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function gf(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function Ch(t){this.l=t.ac||null,this.j=t.jb||!1}bn(Ch,t0);Ch.prototype.g=function(){return new tm(this.l,this.j)};Ch.prototype.i=function(t){return function(){return t}}({});function tm(t,e){on.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=o0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bn(tm,on);var o0=0;le=tm.prototype;le.open=function(t,e){if(this.readyState!=o0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,eh(this)};le.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ie).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ah(this)),this.readyState=o0};le.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,eh(this)),this.g&&(this.readyState=3,eh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zk(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function Zk(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}le.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ah(this):eh(this),this.readyState==3&&Zk(this)}};le.Va=function(t){this.g&&(this.response=this.responseText=t,Ah(this))};le.Ua=function(t){this.g&&(this.response=t,Ah(this))};le.ga=function(){this.g&&Ah(this)};function Ah(t){t.readyState=4,t.l=null,t.j=null,t.A=null,eh(t)}le.setRequestHeader=function(t,e){this.v.append(t,e)};le.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};le.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function eh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(tm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var X3=Ie.JSON.parse;function At(t){on.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eR,this.K=this.L=!1}bn(At,on);var eR="",Z3=/^https?$/i,eV=["POST","PUT"];le=At.prototype;le.Ka=function(t){this.L=t};le.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ry.g(),this.C=this.u?KS(this.u):KS(Ry),this.g.onreadystatechange=Sn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){HS(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),s=Ie.FormData&&t instanceof Ie.FormData,!(0<=gk(eV,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,c]of n)this.g.setRequestHeader(o,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iR(this),0<this.B&&((this.K=tV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.qa,this)):this.A=e0(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){HS(this,o)}};function tV(t){return fc&&y3()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}le.qa=function(){typeof Kw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))};function HS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tR(t),nm(t)}function tR(t){t.D||(t.D=!0,vn(t,"complete"),vn(t,"error"))}le.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vn(this,"complete"),vn(this,"abort"),nm(this))};le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nm(this,!0)),At.X.M.call(this)};le.Ha=function(){this.s||(this.F||this.v||this.l?nR(this):this.fb())};le.fb=function(){nR(this)};function nR(t){if(t.h&&typeof Kw<"u"&&(!t.C[1]||fr(t)!=4||t.aa()!=2)){if(t.v&&fr(t)==4)e0(t.Ha,0,t);else if(vn(t,"readystatechange"),fr(t)==4){t.h=!1;try{const l=t.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=l===0){var s=String(t.H).match(Kk)[1]||null;if(!s&&Ie.self&&Ie.self.location){var o=Ie.self.location.protocol;s=o.substr(0,o.length-1)}i=!Z3.test(s?s.toLowerCase():"")}n=i}if(n)vn(t,"complete"),vn(t,"success");else{t.m=6;try{var c=2<fr(t)?t.g.statusText:""}catch{c=""}t.j=c+" ["+t.aa()+"]",tR(t)}}finally{nm(t)}}}}function nm(t,e){if(t.g){iR(t);const n=t.g,i=t.C[0]?Xf:null;t.g=null,t.C=null,e||vn(t,"ready");try{n.onreadystatechange=i}catch{}}}function iR(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ie.clearTimeout(t.A),t.A=null)}function fr(t){return t.g?t.g.readyState:0}le.aa=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}};le.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};le.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),X3(e)}};function WS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case eR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}le.Ea=function(){return this.m};le.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function rR(t){let e="";return Hw(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function a0(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=rR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pt(t,e,n))}function rl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sR(t){this.Ca=0,this.i=[],this.j=new Yp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=rl("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=rl("baseRetryDelayMs",5e3,t),this.bb=rl("retryDelaySeedMs",1e4,t),this.$a=rl("forwardChannelMaxRetries",2,t),this.ta=rl("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Wk(t&&t.concurrentRequestLimit),this.Fa=new Y3,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}le=sR.prototype;le.ma=8;le.G=1;function c0(t){if(oR(t),t.G==3){var e=t.U++,n=br(t.F);pt(n,"SID",t.I),pt(n,"RID",e),pt(n,"TYPE","terminate"),kh(t,n),e=new Sh(t,t.j,e,void 0),e.K=2,e.v=em(br(n)),n=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(n=Ie.navigator.sendBeacon(e.v.toString(),"")),!n&&Ie.Image&&(new Image().src=e.v,n=!0),n||(e.g=pR(e.l,null),e.g.da(e.v)),e.F=Date.now(),Th(e)}dR(t)}function im(t){t.g&&(l0(t),t.g.cancel(),t.g=null)}function oR(t){im(t),t.u&&(Ie.clearTimeout(t.u),t.u=null),rp(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ie.clearTimeout(t.m),t.m=null)}function rm(t){Yk(t.h)||t.m||(t.m=!0,kk(t.Ja,t),t.C=0)}function nV(t,e){return Qk(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=_h(Sn(t.Ja,t,e),hR(t,t.C)),t.C++,!0)}le.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Sh(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=bk(o),Ik(o,this.S)):o=this.S),this.o!==null||this.N||(s.H=o,o=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aR(this,s,e),n=br(this.F),pt(n,"RID",t),pt(n,"CVER",22),this.D&&pt(n,"X-HTTP-Session-Id",this.D),kh(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(rR(o)))+"&"+e:this.o&&a0(n,this.o,o)),r0(this.h,s),this.Ya&&pt(n,"TYPE","init"),this.O?(pt(n,"$req",e),pt(n,"SID","null"),s.Z=!0,Dy(s,n,null)):Dy(s,n,e),this.G=2}}else this.G==3&&(t?YS(this,t):this.i.length==0||Yk(this.h)||YS(this))};function YS(t,e){var n;e?n=e.m:n=t.U++;const i=br(t.F);pt(i,"SID",t.I),pt(i,"RID",n),pt(i,"AID",t.T),kh(t,i),t.o&&t.s&&a0(i,t.o,t.s),n=new Sh(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=aR(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),r0(t.h,n),Dy(n,i,e)}function kh(t,e){t.ia&&Hw(t.ia,function(n,i){pt(e,i,n)}),t.l&&qk({},function(n,i){pt(e,i,n)})}function aR(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Sn(t.l.Ra,t.l,t):null;e:{var s=t.i;let o=-1;for(;;){const c=["count="+n];o==-1?0<n?(o=s[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let l=!0;for(let d=0;d<n;d++){let f=s[d].h;const g=s[d].g;if(f-=o,0>f)o=Math.max(0,s[d].h-100),l=!1;else try{Q3(g,c,"req"+f+"_")}catch{i&&i(g)}}if(l){i=c.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function cR(t){t.g||t.u||(t.Z=1,kk(t.Ia,t),t.A=0)}function u0(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=_h(Sn(t.Ia,t),hR(t,t.A)),t.A++,!0)}le.Ia=function(){if(this.u=null,uR(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=_h(Sn(this.eb,this),t)}};le.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Mn(10),im(this),uR(this))};function l0(t){t.B!=null&&(Ie.clearTimeout(t.B),t.B=null)}function uR(t){t.g=new Sh(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=br(t.sa);pt(e,"RID","rpc"),pt(e,"SID",t.I),pt(e,"CI",t.L?"0":"1"),pt(e,"AID",t.T),pt(e,"TYPE","xmlhttp"),kh(t,e),t.o&&t.s&&a0(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=em(br(e)),n.s=null,n.P=!0,Vk(n,t)}le.cb=function(){this.v!=null&&(this.v=null,im(this),u0(this),Mn(19))};function rp(t){t.v!=null&&(Ie.clearTimeout(t.v),t.v=null)}function lR(t,e){var n=null;if(t.g==e){rp(t),l0(t),t.g=null;var i=2}else if(Py(t.h,e))n=e.D,Jk(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;i=Qp(),vn(i,new Mk(i,n)),rm(t)}else cR(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(i==1&&nV(t,e)||i==2&&u0(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:mo(t,5);break;case 4:mo(t,10);break;case 3:mo(t,6);break;default:mo(t,2)}}}function hR(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function mo(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Sn(t.kb,t);n||(n=new _o("//www.google.com/images/cleardot.gif"),Ie.location&&Ie.location.protocol=="http"||np(n,"https"),em(n)),J3(n.toString(),i)}else Mn(2);t.G=0,t.l&&t.l.va(e),dR(t),oR(t)}le.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function dR(t){if(t.G=0,t.la=[],t.l){const e=Xk(t.h);(e.length!=0||t.i.length!=0)&&(US(t.la,e),US(t.la,t.i),t.h.i.length=0,zw(t.i),t.i.length=0),t.l.ua()}}function fR(t,e,n){var i=n instanceof _o?br(n):new _o(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),ip(i,i.m);else{var s=Ie.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new _o(null,void 0);i&&np(o,i),e&&(o.g=e),s&&ip(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.za,n&&e&&pt(i,n,e),pt(i,"VER",t.ma),kh(t,i),i}function pR(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new At(new Ch({jb:!0})):new At(t.ra),e.Ka(t.H),e}function mR(){}le=mR.prototype;le.xa=function(){};le.wa=function(){};le.va=function(){};le.ua=function(){};le.Ra=function(){};function sp(){if(fc&&!(10<=Number(w3)))throw Error("Environmental error: no available transport.")}sp.prototype.g=function(t,e){return new di(t,e)};function di(t,e){on.call(this),this.g=new sR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Zf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zf(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vc(this)}bn(di,on);di.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Mn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=fR(t,null,t.V),rm(t)};di.prototype.close=function(){c0(this.g)};di.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Xw(t),t=n);e.i.push(new H3(e.ab++,t)),e.G==3&&rm(e)};di.prototype.M=function(){this.g.l=null,delete this.j,c0(this.g),delete this.g,di.X.M.call(this)};function gR(t){n0.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bn(gR,n0);function vR(){i0.call(this),this.status=1}bn(vR,i0);function Vc(t){this.g=t}bn(Vc,mR);Vc.prototype.xa=function(){vn(this.g,"a")};Vc.prototype.wa=function(t){vn(this.g,new gR(t))};Vc.prototype.va=function(t){vn(this.g,new vR)};Vc.prototype.ua=function(){vn(this.g,"b")};sp.prototype.createWebChannel=sp.prototype.g;di.prototype.send=di.prototype.u;di.prototype.open=di.prototype.m;di.prototype.close=di.prototype.close;Jp.NO_ERROR=0;Jp.TIMEOUT=8;Jp.HTTP_ERROR=6;Lk.COMPLETE="complete";Fk.EventType=Eh;Eh.OPEN="a";Eh.CLOSE="b";Eh.ERROR="c";Eh.MESSAGE="d";on.prototype.listen=on.prototype.N;At.prototype.listenOnce=At.prototype.O;At.prototype.getLastError=At.prototype.Oa;At.prototype.getLastErrorCode=At.prototype.Ea;At.prototype.getStatus=At.prototype.aa;At.prototype.getResponseJson=At.prototype.Sa;At.prototype.getResponseText=At.prototype.fa;At.prototype.send=At.prototype.da;At.prototype.setWithCredentials=At.prototype.Ka;var iV=function(){return new sp},rV=function(){return Qp()},Vv=Jp,sV=Lk,oV=Go,QS={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},aV=Ch,vf=Fk,cV=At;const JS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc="9.19.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new wh("@firebase/firestore");function Oy(){return vs.logLevel}function uV(t){vs.setLogLevel(t)}function B(t,...e){if(vs.logLevel<=ze.DEBUG){const n=e.map(h0);vs.debug(`Firestore (${Bc}): ${t}`,...n)}}function Ot(t,...e){if(vs.logLevel<=ze.ERROR){const n=e.map(h0);vs.error(`Firestore (${Bc}): ${t}`,...n)}}function Ir(t,...e){if(vs.logLevel<=ze.WARN){const n=e.map(h0);vs.warn(`Firestore (${Bc}): ${t}`,...n)}}function h0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function he(t,e){t||te()}function lV(t,e){t||te()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class dV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fV{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},l=d=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(he(typeof i.accessToken=="string"),new yR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new rn(e)}}class pV{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class mV{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new pV(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vV{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.T;return this.T=o.token,B("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?s(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.T=n.token,new gV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=yV(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function Te(t,e){return t<e?-1:t>e?1:0}function pc(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}function bR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new gt(0,0))}static max(){return new pe(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,i){n===void 0?n=0:n>e.length&&te(),i===void 0?i=e.length-n:i>e.length-n&&te(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return th.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof th?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),c=n.get(s);if(o<c)return-1;if(o>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends th{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const wV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends th{construct(e,n,i){return new Mt(e,n,i)}static isValidIdentifier(e){return wV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new V(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new V(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(o(),s++)}if(o(),c)throw new V(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(Be.fromString(e))}static fromName(e){return new W(Be.fromString(e).popFirst(5))}static empty(){return new W(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,i,s){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=s}}function My(t){return t.fields.find(e=>e.kind===2)}function io(t){return t.fields.filter(e=>e.kind!==2)}IR.UNKNOWN_ID=-1;class bV{constructor(e,n){this.fieldPath=e,this.kind=n}}class op{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new op(0,fi.min())}}function _R(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new fi(s,W.empty(),e)}function ER(t){return new fi(t.readTime,t.key,-1)}class fi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new fi(pe.min(),W.empty(),-1)}static max(){return new fi(pe.max(),W.empty(),-1)}}function d0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==SR)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,i)=>{n(e)})}static reject(e){return new k((n,i)=>{i(e)})}static waitFor(e){return new k((n,i)=>{let s=0,o=0,c=!1;e.forEach(l=>{++s,l.next(()=>{++o,c&&o===s&&n()},d=>i(d))}),c=!0,o===s&&n()})}static or(e){let n=k.resolve(!1);for(const i of e)n=n.next(s=>s?k.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new k((i,s)=>{const o=e.length,c=new Array(o);let l=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{c[f]=g,++l,l===o&&i(c)},g=>s(g))}})}static doWhile(e,n){return new k((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.R=new sn,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{n.error?this.R.reject(new Rl(e,n.error)):this.R.resolve()},this.transaction.onerror=i=>{const s=f0(i.target.error);this.R.reject(new Rl(e,s))}}static open(e,n,i,s){try{return new sm(n,e.transaction(s,i))}catch(o){throw new Rl(n,o)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new _V(n)}}class ki{constructor(e,n,i){this.name=e,this.version=n,this.V=i,ki.S(bt())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return B("SimpleDb","Removing database:",e),oo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!dc())return!1;if(ki.C())return!0;const e=bt(),n=ki.S(e),i=0<n&&n<10,s=ki.N(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static O(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async $(e){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;n(c)},s.onblocked=()=>{i(new Rl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?i(new V(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new V(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Rl(e,c))},s.onupgradeneeded=o=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.V.M(c,s.transaction,o.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,s){const o=n==="readonly";let c=0;for(;;){++c;try{this.db=await this.$(e);const l=sm.open(this.db,e,o?"readonly":"readwrite",i),d=s(l).next(f=>(l.P(),f)).catch(f=>(l.abort(f),k.reject(f))).toPromise();return d.catch(()=>{}),await l.v,d}catch(l){const d=l,f=d.name!=="FirebaseError"&&c<3;if(B("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}class IV{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return oo(this.L.delete())}}class Rl extends V{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Rs(t){return t.name==="IndexedDbTransactionError"}class _V{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),oo(i)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),oo(this.store.count())}j(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const s=this.cursor(i),o=[];return this.W(s,(c,l)=>{o.push(l)}).next(()=>o)}{const s=this.store.getAll(i.range);return new k((o,c)=>{s.onerror=l=>{c(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new k((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}J(e,n){B("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.Y=!1;const s=this.cursor(i);return this.W(s,(o,c,l)=>l.delete())}Z(e,n){let i;n?i=e:(i={},n=e);const s=this.cursor(i);return this.W(s,n)}X(e){const n=this.cursor({});return new k((i,s)=>{n.onerror=o=>{const c=f0(o.target.error);s(c)},n.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(l=>{l?c.continue():i()}):i()}})}W(e,n){const i=[];return new k((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const l=c.target.result;if(!l)return void s();const d=new IV(l),f=n(l.primaryKey,l.value,d);if(f instanceof k){const g=f.catch(v=>(d.done(),k.reject(v)));i.push(g)}d.isDone?s():d.K===null?l.continue():l.continue(d.K)}}).next(()=>k.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function oo(t){return new k((e,n)=>{t.onsuccess=i=>{const s=i.target.result;e(s)},t.onerror=i=>{const s=f0(i.target.error);n(s)}})}let XS=!1;function f0(t){const e=ki.S(bt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XS||(XS=!0,setTimeout(()=>{throw i},0)),i}}return t}class EV{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){B("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{B("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Rs(n)?B("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ks(n)}await this.et(6e4)})}}class SV{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const i=new Set;let s=n,o=!0;return k.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!i.has(c))return B("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,s).next(l=>{s-=l,i.add(c)});o=!1})).next(()=>n-s)}it(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,i).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(s,o)).next(l=>(B("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>c.size)}))}rt(e,n){let i=e;return n.changes.forEach((s,o)=>{const c=ER(o);d0(c,i)>0&&(i=c)}),new fi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Hn.ct=-1;function Rh(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ZS(e)),e=TV(t.get(n),e);return ZS(e)}function TV(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ZS(t){return t+""}function Hi(t){const e=t.length;if(he(e>=2),e===2)return he(t.charAt(0)===""&&t.charAt(1)===""),Be.emptyPath();const n=e-2,i=[];let s="";for(let o=0;o<e;){const c=t.indexOf("",o);switch((c<0||c>n)&&te(),t.charAt(c+1)){case"":const l=t.substring(o,c);let d;s.length===0?d=l:(s+=l,d=s,s=""),i.push(d);break;case"":s+=t.substring(o,c),s+="\0";break;case"":s+=t.substring(o,c+1);break;default:te()}o=c+2}return new Be(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e){return[t,Fn(e)]}function AR(t,e,n){return[t,Fn(e),n]}const CV={},AV=["prefixPath","collectionGroup","readTime","documentId"],kV=["prefixPath","collectionGroup","documentId"],RV=["collectionGroup","readTime","prefixPath","documentId"],xV=["canonicalId","targetId"],DV=["targetId","path"],NV=["path","targetId"],PV=["collectionId","parent"],OV=["indexId","uid"],MV=["uid","sequenceNumber"],LV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FV=["indexId","uid","orderedDocumentKey"],UV=["userId","collectionPath","documentId"],VV=["userId","collectionPath","largestBatchId"],BV=["userId","collectionGroup","largestBatchId"],kR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jV=[...kR,"documentOverlays"],RR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xR=RR,$V=[...xR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends TR{constructor(e,n){super(),this.at=e,this.currentSequenceNumber=n}}function un(t,e){const n=J(t);return ki.O(n.at,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??pn.RED,this.left=s??pn.EMPTY,this.right=o??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new pn(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,e,n,i,s){return this}insert(t,e,n){return new pn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nT(this.data.getIterator())}getIteratorFrom(e){return new nT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class nT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ba(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new nt(Mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qV("Invalid base64 string: "+s):s}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const zV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(t){if(he(!!t),typeof t=="string"){let e=0;const n=zV.exec(t);if(he(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ro(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function NR(t){const e=t.mapValue.fields.__previous_value__;return p0(e)?NR(e):e}function ih(t){const e=ys(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n,i,s,o,c,l,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=l,this.useFetchStreams=d}}class ws{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ws("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ws&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pf={nullValue:"NULL_VALUE"};function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p0(t)?4:PR(t)?9007199254740991:10:te()}function er(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ih(t).isEqual(ih(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ys(i.timestampValue),c=ys(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ro(i.bytesValue).isEqual(Ro(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ct(i.geoPointValue.latitude)===Ct(s.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ct(i.integerValue)===Ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ct(i.doubleValue),c=Ct(s.doubleValue);return o===c?nh(o)===nh(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return pc(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(tT(o)!==tT(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!er(o[l],c[l])))return!1;return!0}(t,e);default:return te()}}function rh(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function bs(t,e){if(t===e)return 0;const n=xo(t),i=xo(e);if(n!==i)return Te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=Ct(s.integerValue||s.doubleValue),l=Ct(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return iT(t.timestampValue,e.timestampValue);case 4:return iT(ih(t),ih(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){const c=Ro(s),l=Ro(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){const f=Te(c[d],l[d]);if(f!==0)return f}return Te(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=Te(Ct(s.latitude),Ct(o.latitude));return c!==0?c:Te(Ct(s.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const c=s.values||[],l=o.values||[];for(let d=0;d<c.length&&d<l.length;++d){const f=bs(c[d],l[d]);if(f)return f}return Te(c.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===as.mapValue&&o===as.mapValue)return 0;if(s===as.mapValue)return 1;if(o===as.mapValue)return-1;const c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){const v=Te(l[g],f[g]);if(v!==0)return v;const w=bs(c[l[g]],d[f[g]]);if(w!==0)return w}return Te(l.length,f.length)}(t.mapValue,e.mapValue);default:throw te()}}function iT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=ys(t),i=ys(e),s=Te(n.seconds,i.seconds);return s!==0?s:Te(n.nanos,i.nanos)}function mc(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=ys(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ro(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,W.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",o=!0;for(const c of i.values||[])o?o=!1:s+=",",s+=Fy(c);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const l of s)c?c=!1:o+=",",o+=`${l}:${Fy(i.fields[l])}`;return o+"}"}(t.mapValue):te();var e,n}function Do(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uy(t){return!!t&&"integerValue"in t}function sh(t){return!!t&&"arrayValue"in t}function rT(t){return!!t&&"nullValue"in t}function sT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Of(t){return!!t&&"mapValue"in t}function xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function HV(t){return"nullValue"in t?Pf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Do(ws.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:te()}function WV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Do(ws.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?as:te()}function oT(t,e){const n=bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function aT(t,e){const n=bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Of(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=Mt.emptyPath(),i={},s=[];e.forEach((c,l)=>{if(!n.isImmediateParentOf(l)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=l.popLast()}c?i[l.lastSegment()]=xl(c):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Of(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Of(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Ho(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new mn(xl(this.value))}}function OR(t){const e=[];return Ho(t.fields,(n,i)=>{const s=new Mt([n]);if(Of(i)){const o=OR(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,i,s,o,c,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,pe.min(),pe.min(),pe.min(),mn.empty(),0)}static newFoundDocument(e,n,i,s){return new ut(e,1,n,pe.min(),i,s,0)}static newNoDocument(e,n){return new ut(e,2,n,pe.min(),pe.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,pe.min(),pe.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.position=e,this.inclusive=n}}function cT(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],c=t.position[s];if(o.field.isKeyField()?i=W.comparator(W.fromName(c.referenceValue),n.key):i=bs(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function uT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function YV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{}class Me extends MR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new QV(e,n,i):n==="array-contains"?new ZV(e,i):n==="in"?new jR(e,i):n==="not-in"?new eB(e,i):n==="array-contains-any"?new tB(e,i):new Me(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JV(e,i):new XV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bs(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class tt extends MR{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new tt(e,n)}matches(e){return gc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function gc(t){return t.op==="and"}function Vy(t){return t.op==="or"}function m0(t){return LR(t)&&gc(t)}function LR(t){for(const e of t.filters)if(e instanceof tt)return!1;return!0}function By(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+mc(t.value);if(m0(t))return t.filters.map(e=>By(e)).join(",");{const e=t.filters.map(n=>By(n)).join(",");return`${t.op}(${e})`}}function FR(t,e){return t instanceof Me?function(n,i){return i instanceof Me&&n.op===i.op&&n.field.isEqual(i.field)&&er(n.value,i.value)}(t,e):t instanceof tt?function(n,i){return i instanceof tt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,c)=>s&&FR(o,i.filters[c]),!0):!1}(t,e):void te()}function UR(t,e){const n=t.filters.concat(e);return tt.create(n,t.op)}function VR(t){return t instanceof Me?function(e){return`${e.field.canonicalString()} ${e.op} ${mc(e.value)}`}(t):t instanceof tt?function(e){return e.op.toString()+" {"+e.getFilters().map(VR).join(" ,")+"}"}(t):"Filter"}class QV extends Me{constructor(e,n,i){super(e,n,i),this.key=W.fromName(i.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class JV extends Me{constructor(e,n){super(e,"in",n),this.keys=BR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XV extends Me{constructor(e,n){super(e,"not-in",n),this.keys=BR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>W.fromName(i.referenceValue))}class ZV extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sh(n)&&rh(n.arrayValue,this.value)}}class jR extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rh(this.value.arrayValue,n)}}class eB extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rh(this.value.arrayValue,n)}}class tB extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>rh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n=null,i=[],s=[],o=null,c=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=l,this.ft=null}}function jy(t,e=null,n=[],i=[],s=null,o=null,c=null){return new nB(t,e,n,i,s,o,c)}function No(t){const e=J(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>By(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>mc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>mc(i)).join(",")),e.ft=n}return e.ft}function xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uT(t.startAt,e.startAt)&&uT(t.endAt,e.endAt)}function ap(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function cp(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function lT(t,e,n){let i=Pf,s=!0;for(const o of cp(t,e)){let c=Pf,l=!0;switch(o.op){case"<":case"<=":c=HV(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,l=!1;break;case"!=":case"not-in":c=Pf}oT({value:i,inclusive:s},{value:c,inclusive:l})<0&&(i=c,s=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const c=n.position[o];oT({value:i,inclusive:s},{value:c,inclusive:n.inclusive})<0&&(i=c,s=n.inclusive);break}}return{value:i,inclusive:s}}function hT(t,e,n){let i=as,s=!0;for(const o of cp(t,e)){let c=as,l=!0;switch(o.op){case">=":case">":c=WV(o.value),l=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,l=!1;break;case"!=":case"not-in":c=as}aT({value:i,inclusive:s},{value:c,inclusive:l})>0&&(i=c,s=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const c=n.position[o];aT({value:i,inclusive:s},{value:c,inclusive:n.inclusive})>0&&(i=c,s=n.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n=null,i=[],s=[],o=null,c="F",l=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=l,this.endAt=d,this.dt=null,this.wt=null,this.startAt,this.endAt}}function $R(t,e,n,i,s,o,c,l){return new Ar(t,e,n,i,s,o,c,l)}function jc(t){return new Ar(t)}function dT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function om(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function v0(t){return t.collectionGroup!==null}function Eo(t){const e=J(t);if(e.dt===null){e.dt=[];const n=om(e),i=g0(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new nc(n)),e.dt.push(new nc(Mt.keyField(),"asc"));else{let s=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(s=!0);if(!s){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new nc(Mt.keyField(),o))}}}return e.dt}function ei(t){const e=J(t);if(!e.wt)if(e.limitType==="F")e.wt=jy(e.path,e.collectionGroup,Eo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of Eo(e)){const c=o.dir==="desc"?"asc":"desc";n.push(new nc(o.field,c))}const i=e.endAt?new Is(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Is(e.startAt.position,e.startAt.inclusive):null;e.wt=jy(e.path,e.collectionGroup,n,e.filters,e.limit,i,s)}return e.wt}function $y(t,e){e.getFirstInequalityField(),om(t);const n=t.filters.concat([e]);return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function up(t,e,n){return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dh(t,e){return xh(ei(t),ei(e))&&t.limitType===e.limitType}function qR(t){return`${No(ei(t))}|lt:${t.limitType}`}function qy(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>VR(i)).join(", ")}]`),Rh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>mc(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>mc(i)).join(",")),`Target(${n})`}(ei(t))}; limitType=${t.limitType})`}function Nh(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):W.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Eo(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,c){const l=cT(s,o,c);return s.inclusive?l<=0:l<0}(n.startAt,Eo(n),i)||n.endAt&&!function(s,o,c){const l=cT(s,o,c);return s.inclusive?l>=0:l>0}(n.endAt,Eo(n),i))}(t,e)}function KR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zR(t){return(e,n)=>{let i=!1;for(const s of Eo(t)){const o=iB(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function iB(t,e,n){const i=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,c){const l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?bs(l,d):te()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return DR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=new kt(W.comparator);function Yn(){return rB}const GR=new kt(W.comparator);function bl(...t){let e=GR;for(const n of t)e=e.insert(n.key,n);return e}function HR(t){let e=GR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Wi(){return Dl()}function WR(){return Dl()}function Dl(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const sB=new kt(W.comparator),oB=new nt(W.comparator);function Ce(...t){let e=oB;for(const n of t)e=e.add(n);return e}const aB=new nt(Te);function am(){return aB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function QR(t){return{integerValue:""+t}}function JR(t,e){return CR(e)?QR(e):YR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this._=void 0}}function cB(t,e,n){return t instanceof vc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Po?ZR(t,e):t instanceof Oo?ex(t,e):function(i,s){const o=XR(i,s),c=fT(o)+fT(i._t);return Uy(o)&&Uy(i._t)?QR(c):YR(i.serializer,c)}(t,e)}function uB(t,e,n){return t instanceof Po?ZR(t,e):t instanceof Oo?ex(t,e):n}function XR(t,e){return t instanceof yc?Uy(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class vc extends cm{}class Po extends cm{constructor(e){super(),this.elements=e}}function ZR(t,e){const n=tx(e);for(const i of t.elements)n.some(s=>er(s,i))||n.push(i);return{arrayValue:{values:n}}}class Oo extends cm{constructor(e){super(),this.elements=e}}function ex(t,e){let n=tx(e);for(const i of t.elements)n=n.filter(s=>!er(s,i));return{arrayValue:{values:n}}}class yc extends cm{constructor(e,n){super(),this.serializer=e,this._t=n}}function fT(t){return Ct(t.integerValue||t.doubleValue)}function tx(t){return sh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.field=e,this.transform=n}}function lB(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Po&&i instanceof Po||n instanceof Oo&&i instanceof Oo?pc(n.elements,i.elements,er):n instanceof yc&&i instanceof yc?er(n._t,i._t):n instanceof vc&&i instanceof vc}(t.transform,e.transform)}class hB{constructor(e,n){this.version=e,this.transformResults=n}}class mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class um{}function nx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qc(t.key,mt.none()):new $c(t.key,t.data,mt.none());{const n=t.data,i=mn.empty();let s=new nt(Mt.comparator);for(let o of e.fields)if(!s.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new kr(t.key,i,new Wn(s.toArray()),mt.none())}}function dB(t,e,n){t instanceof $c?function(i,s,o){const c=i.value.clone(),l=mT(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof kr?function(i,s,o){if(!Mf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=mT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ix(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,i){return t instanceof $c?function(s,o,c,l){if(!Mf(s.precondition,o))return c;const d=s.value.clone(),f=gT(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof kr?function(s,o,c,l){if(!Mf(s.precondition,o))return c;const d=gT(s.fieldTransforms,l,o),f=o.data;return f.setAll(ix(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,o,c){return Mf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function fB(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=XR(i.transform,s||null);o!=null&&(n===null&&(n=mn.empty()),n.set(i.field,o))}return n||null}function pT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&pc(n,i,(s,o)=>lB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $c extends um{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class kr extends um{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ix(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function mT(t,e,n){const i=new Map;he(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],c=o.transform,l=e.data.field(o.field);i.set(o.field,uB(c,l,n[s]))}return i}function gT(t,e,n){const i=new Map;for(const s of t){const o=s.transform,c=n.data.field(s.field);i.set(s.field,cB(o,c,e))}return i}class qc extends um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&dB(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Nl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Nl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=WR();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let l=this.applyToLocalView(c,o.mutatedFields);l=n.has(s.key)?null:l;const d=nx(c,l);d!==null&&i.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&pc(this.mutations,e.mutations,(n,i)=>pT(n,i))&&pc(this.baseMutations,e.baseMutations,(n,i)=>pT(n,i))}}class b0{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){he(e.mutations.length===i.length);let s=sB;const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new b0(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ve;function rx(t){switch(t){default:return te();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function sx(t){if(t===void 0)return Ot("GRPC error has no .code"),x.UNKNOWN;switch(t){case qt.OK:return x.OK;case qt.CANCELLED:return x.CANCELLED;case qt.UNKNOWN:return x.UNKNOWN;case qt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case qt.INTERNAL:return x.INTERNAL;case qt.UNAVAILABLE:return x.UNAVAILABLE;case qt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case qt.NOT_FOUND:return x.NOT_FOUND;case qt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case qt.ABORTED:return x.ABORTED;case qt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case qt.DATA_LOSS:return x.DATA_LOSS;default:return te()}}(Ve=qt||(qt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return wf}static getOrCreateInstance(){return wf===null&&(wf=new _0),wf}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let wf=null;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Oh(pe.min(),s,am(),Yn(),Ce())}}class Mh{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Mh(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,i,s){this.It=e,this.removedTargetIds=n,this.key=i,this.Tt=s}}class ox{constructor(e,n){this.targetId=e,this.Et=n}}class ax{constructor(e,n,i=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class vT{constructor(){this.At=0,this.Rt=wT(),this.vt=Wt.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return this.At!==0}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Ce(),n=Ce(),i=Ce();return this.Rt.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:te()}}),new Mh(this.vt,this.bt,e,n,i)}xt(){this.Pt=!1,this.Rt=wT()}Nt(e,n){this.Pt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class mB{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Yn(),this.qt=yT(),this.Ut=new nt(Te)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}zt(e){this.forEachTarget(e,n=>{const i=this.jt(n);switch(e.state){case 0:this.Wt(n)&&i.Dt(e.resumeToken);break;case 1:i.$t(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.$t(),i.Vt||this.removeTarget(n);break;case 3:this.Wt(n)&&(i.Mt(),i.Dt(e.resumeToken));break;case 4:this.Wt(n)&&(this.Ht(n),i.Dt(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((i,s)=>{this.Wt(s)&&n(s)})}Jt(e){var n;const i=e.targetId,s=e.Et.count,o=this.Yt(i);if(o){const c=o.target;if(ap(c))if(s===0){const l=new W(c.path);this.Qt(i,l,ut.newNoDocument(l,pe.min()))}else he(s===1);else{const l=this.Zt(i);l!==s&&(this.Ht(i),this.Ut=this.Ut.add(i),(n=_0.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch({localCacheCount:l,existenceFilterCount:e.Et.count}))}}}Xt(e){const n=new Map;this.Bt.forEach((o,c)=>{const l=this.Yt(c);if(l){if(o.current&&ap(l.target)){const d=new W(l.target.path);this.Lt.get(d)!==null||this.te(c,d)||this.Qt(c,d,ut.newNoDocument(d,e))}o.St&&(n.set(c,o.Ct()),o.xt())}});let i=Ce();this.qt.forEach((o,c)=>{let l=!0;c.forEachWhile(d=>{const f=this.Yt(d);return!f||f.purpose===2||(l=!1,!1)}),l&&(i=i.add(o))}),this.Lt.forEach((o,c)=>c.setReadTime(e));const s=new Oh(e,n,this.Ut,this.Lt,i);return this.Lt=Yn(),this.qt=yT(),this.Ut=new nt(Te),s}Gt(e,n){if(!this.Wt(e))return;const i=this.te(e,n.key)?2:0;this.jt(e).Nt(n.key,i),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,i){if(!this.Wt(e))return;const s=this.jt(e);this.te(e,n)?s.Nt(n,1):s.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),i&&(this.Lt=this.Lt.insert(n,i))}removeTarget(e){this.Bt.delete(e)}Zt(e){const n=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let n=this.Bt.get(e);return n||(n=new vT,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new nt(Te),this.qt=this.qt.insert(e,n)),n}Wt(e){const n=this.Yt(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new vT),this.Ft.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.Ft.getRemoteKeysForTarget(e).has(n)}}function yT(){return new kt(W.comparator)}function wT(){return new kt(W.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),vB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yB=(()=>({and:"AND",or:"OR"}))();class wB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bB(t,e){return wc(t,e.toTimestamp())}function Ft(t){return he(!!t),pe.fromTimestamp(function(e){const n=ys(e);return new gt(n.seconds,n.nanos)}(t))}function E0(t,e){return function(n){return new Be(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function ux(t){const e=Be.fromString(t);return he(yx(e)),e}function oh(t,e){return E0(t.databaseId,e.path)}function Ji(t,e){const n=ux(e);if(n.get(1)!==t.databaseId.projectId)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(hx(n))}function Ky(t,e){return E0(t.databaseId,e)}function lx(t){const e=ux(t);return e.length===4?Be.emptyPath():hx(e)}function ah(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hx(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bT(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function dx(t,e,n){const i=Ji(t,e.name),s=Ft(e.updateTime),o=e.createTime?Ft(e.createTime):pe.min(),c=new mn({mapValue:{fields:e.fields}}),l=ut.newFoundDocument(i,s,o,c);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function IB(t,e){return"found"in e?function(n,i){he(!!i.found),i.found.name,i.found.updateTime;const s=Ji(n,i.found.name),o=Ft(i.found.updateTime),c=i.found.createTime?Ft(i.found.createTime):pe.min(),l=new mn({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(s,o,c,l)}(t,e):"missing"in e?function(n,i){he(!!i.missing),he(!!i.readTime);const s=Ji(n,i.missing),o=Ft(i.readTime);return ut.newNoDocument(s,o)}(t,e):te()}function _B(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(he(f===void 0||typeof f=="string"),Wt.fromBase64String(f||"")):(he(f===void 0||f instanceof Uint8Array),Wt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,l=c&&function(d){const f=d.code===void 0?x.UNKNOWN:sx(d.code);return new V(f,d.message||"")}(c);n=new ax(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ji(t,i.document.name),o=Ft(i.document.updateTime),c=i.document.createTime?Ft(i.document.createTime):pe.min(),l=new mn({mapValue:{fields:i.document.fields}}),d=ut.newFoundDocument(s,o,c,l),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Lf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ji(t,i.document),o=i.readTime?Ft(i.readTime):pe.min(),c=ut.newNoDocument(s,o),l=i.removedTargetIds||[];n=new Lf([],l,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ji(t,i.document),o=i.removedTargetIds||[];n=new Lf([],o,s,null)}else{if(!("filter"in e))return te();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,o=new pB(s),c=i.targetId;n=new ox(c,o)}}return n}function ch(t,e){let n;if(e instanceof $c)n={update:bT(t,e.key,e.value)};else if(e instanceof qc)n={delete:oh(t,e.key)};else if(e instanceof kr)n={update:bT(t,e.key,e.data),updateMask:kB(e.fieldMask)};else{if(!(e instanceof y0))return te();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const c=o.transform;if(c instanceof vc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Po)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yc)return{fieldPath:o.field.canonicalString(),increment:c._t};throw te()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function zy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?mt.updateTime(Ft(s.updateTime)):s.exists!==void 0?mt.exists(s.exists):mt.none()}(e.currentDocument):mt.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(o,c){let l=null;if("setToServerValue"in c)he(c.setToServerValue==="REQUEST_TIME"),l=new vc;else if("appendMissingElements"in c){const f=c.appendMissingElements.values||[];l=new Po(f)}else if("removeAllFromArray"in c){const f=c.removeAllFromArray.values||[];l=new Oo(f)}else"increment"in c?l=new yc(o,c.increment):te();const d=Mt.fromServerFormat(c.fieldPath);return new Ph(d,l)}(t,s)):[];if(e.update){e.update.name;const s=Ji(t,e.update.name),o=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(l){const d=l.fieldPaths||[];return new Wn(d.map(f=>Mt.fromServerFormat(f)))}(e.updateMask);return new kr(s,o,c,n,i)}return new $c(s,o,n,i)}if(e.delete){const s=Ji(t,e.delete);return new qc(s,n)}if(e.verify){const s=Ji(t,e.verify);return new y0(s,n)}return te()}function EB(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ft(i.updateTime):Ft(s);return o.isEqual(pe.min())&&(o=Ft(s)),new hB(o,i.transformResults||[])}(n,e))):[]}function fx(t,e){return{documents:[Ky(t,e.path)]}}function px(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Ky(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ky(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(d){if(d.length!==0)return vx(tt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:za(g.field),direction:TB(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=function(d,f){return d.useProto3Json||Rh(f)?f:{value:f}}(t,e.limit);var l;return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),n}function mx(t){let e=lx(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){he(i===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(g){const v=gx(g);return v instanceof tt&&m0(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=n.orderBy.map(g=>function(v){return new nc(Ga(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g)));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,Rh(v)?null:v}(n.limit));let d=null;n.startAt&&(d=function(g){const v=!!g.before,w=g.values||[];return new Is(w,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,w=g.values||[];return new Is(w,v)}(n.endAt)),$R(e,s,c,o,l,"F",d,f)}function SB(t,e){const n=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return te()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function gx(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ga(e.unaryFilter.field);return Me.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ga(e.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ga(e.unaryFilter.field);return Me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ga(e.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(e){return Me.create(Ga(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return tt.create(e.compositeFilter.filters.map(n=>gx(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return te()}}(e.compositeFilter.op))}(t):te()}function TB(t){return gB[t]}function CB(t){return vB[t]}function AB(t){return yB[t]}function za(t){return{fieldPath:t.canonicalString()}}function Ga(t){return Mt.fromServerFormat(t.fieldPath)}function vx(t){return t instanceof Me?function(e){if(e.op==="=="){if(sT(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(rT(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(sT(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(rT(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:CB(e.op),value:e.value}}}(t):t instanceof tt?function(e){const n=e.getFilters().map(i=>vx(i));return n.length===1?n[0]:{compositeFilter:{op:AB(e.op),filters:n}}}(t):te()}function kB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,i,s,o=pe.min(),c=pe.min(),l=Wt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.se=e}}function RB(t,e){let n;if(e.document)n=dx(t.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=W.fromSegments(e.noDocument.path),s=Lo(e.noDocument.readTime);n=ut.newNoDocument(i,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te();{const i=W.fromSegments(e.unknownDocument.path),s=Lo(e.unknownDocument.version);n=ut.newUnknownDocument(i,s)}}return e.readTime&&n.setReadTime(function(i){const s=new gt(i[0],i[1]);return pe.fromTimestamp(s)}(e.readTime)),n}function IT(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:oh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:wc(s,o.version.toTimestamp()),createTime:wc(s,o.createTime.toTimestamp())}}(t.se,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Mo(e.version)};else{if(!e.isUnknownDocument())return te();i.unknownDocument={path:n.path.toArray(),version:Mo(e.version)}}return i}function lp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lo(t){const e=new gt(t.seconds,t.nanoseconds);return pe.fromTimestamp(e)}function ao(t,e){const n=(e.baseMutations||[]).map(o=>zy(t.se,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const l=e.mutations[o+1];c.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map(o=>zy(t.se,o)),s=gt.fromMillis(e.localWriteTimeMs);return new w0(e.batchId,s,n,i)}function Il(t){const e=Lo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Lo(t.lastLimboFreeSnapshotVersion):pe.min();let i;var s;return t.query.documents!==void 0?(he((s=t.query).documents.length===1),i=ei(jc(lx(s.documents[0])))):i=function(o){return ei(mx(o))}(t.query),new fs(i,t.targetId,0,t.lastListenSequenceNumber,e,n,Wt.fromBase64String(t.resumeToken))}function bx(t,e){const n=Mo(e.snapshotVersion),i=Mo(e.lastLimboFreeSnapshotVersion);let s;s=ap(e.target)?fx(t.se,e.target):px(t.se,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function S0(t){const e=mx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?up(e,e.limit,"L"):e}function Bv(t,e){return new I0(e.largestBatchId,zy(t.se,e.overlayMutation))}function _T(t,e){const n=e.path.lastSegment();return[t,Fn(e.path.popLast()),n]}function ET(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Mo(i.readTime),documentKey:Fn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{getBundleMetadata(e,n){return ST(e).get(n).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Lo(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return ST(e).put({bundleId:(i=n).id,createTime:Mo(Ft(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return TT(e).get(n).next(i=>{if(i)return{name:(s=i).name,query:S0(s.bundledQuery),readTime:Lo(s.readTime)};var s})}saveNamedQuery(e,n){return TT(e).put(function(i){return{name:i.name,readTime:Mo(Ft(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function ST(t){return un(t,"bundles")}function TT(t){return un(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.serializer=e,this.userId=n}static ie(e,n){const i=n.uid||"";return new lm(e,i)}getOverlay(e,n){return sl(e).get(_T(this.userId,n)).next(i=>i?Bv(this.serializer,i):null)}getOverlays(e,n){const i=Wi();return k.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){const s=[];return i.forEach((o,c)=>{const l=new I0(n,c);s.push(this.re(e,l))}),k.waitFor(s)}removeOverlaysForBatchId(e,n,i){const s=new Set;n.forEach(c=>s.add(Fn(c.getCollectionPath())));const o=[];return s.forEach(c=>{const l=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(sl(e).J("collectionPathOverlayIndex",l))}),k.waitFor(o)}getOverlaysForCollection(e,n,i){const s=Wi(),o=Fn(n),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return sl(e).j("collectionPathOverlayIndex",c).next(l=>{for(const d of l){const f=Bv(this.serializer,d);s.set(f.getKey(),f)}return s})}getOverlaysForCollectionGroup(e,n,i,s){const o=Wi();let c;const l=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sl(e).Z({index:"collectionGroupOverlayIndex",range:l},(d,f,g)=>{const v=Bv(this.serializer,f);o.size()<s||v.largestBatchId===c?(o.set(v.getKey(),v),c=v.largestBatchId):g.done()}).next(()=>o)}re(e,n){return sl(e).put(function(i,s,o){const[c,l,d]=_T(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ch(i.se,o.mutation)}}(this.serializer,this.userId,n))}}function sl(t){return un(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){}oe(e,n){this.ue(e,n),n.ce()}ue(e,n){if("nullValue"in e)this.ae(n,5);else if("booleanValue"in e)this.ae(n,10),n.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(n,15),n.he(Ct(e.integerValue));else if("doubleValue"in e){const i=Ct(e.doubleValue);isNaN(i)?this.ae(n,13):(this.ae(n,15),nh(i)?n.he(0):n.he(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ae(n,20),typeof i=="string"?n.le(i):(n.le(`${i.seconds||""}`),n.he(i.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,n),this.de(n);else if("bytesValue"in e)this.ae(n,30),n.we(Ro(e.bytesValue)),this.de(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.ae(n,45),n.he(i.latitude||0),n.he(i.longitude||0)}else"mapValue"in e?PR(e)?this.ae(n,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,n),this.de(n)):"arrayValue"in e?(this.ge(e.arrayValue,n),this.de(n)):te()}fe(e,n){this.ae(n,25),this.ye(e,n)}ye(e,n){n.le(e)}me(e,n){const i=e.fields||{};this.ae(n,55);for(const s of Object.keys(i))this.fe(s,n),this.ue(i[s],n)}ge(e,n){const i=e.values||[];this.ae(n,50);for(const s of i)this.ue(s,n)}_e(e,n){this.ae(n,37),W.fromName(e).path.forEach(i=>{this.ae(n,60),this.ye(i,n)})}ae(e,n){e.he(n)}de(e){e.he(2)}}co.pe=new co;function DB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function CT(t){const e=64-function(n){let i=0;for(let s=0;s<8;++s){const o=DB(255&n[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class NB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Te(i.value),i=n.next();this.Ee()}Ae(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Re(i.value),i=n.next();this.ve()}be(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{const s=n.codePointAt(0);this.Te(240|s>>>18),this.Te(128|63&s>>>12),this.Te(128|63&s>>>6),this.Te(128|63&s)}}this.Ee()}Pe(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{const s=n.codePointAt(0);this.Re(240|s>>>18),this.Re(128|63&s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s)}}this.ve()}Ve(e){const n=this.Se(e),i=CT(n);this.De(1+i),this.buffer[this.position++]=255&i;for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Ce(e){const n=this.Se(e),i=CT(n);this.De(1+i),this.buffer[this.position++]=~(255&i);for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let s=1;s<n.length;++s)n[s]^=i?255:0;return n}Te(e){const n=255&e;n===0?(this.Ne(0),this.Ne(255)):n===255?(this.Ne(255),this.Ne(0)):this.Ne(n)}Re(e){const n=255&e;n===0?(this.Oe(0),this.Oe(255)):n===255?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class PB{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class OB{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class ol{constructor(){this.Me=new NB,this.Fe=new PB(this.Me),this.Be=new OB(this.Me)}seed(e){this.Me.seed(e)}Le(e){return e===0?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,i,s){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=s}qe(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new uo(this.indexId,this.documentKey,this.arrayValue,i)}}function Jr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=AT(t.arrayValue,e.arrayValue),n!==0?n:(n=AT(t.directionalValue,e.directionalValue),n!==0?n:W.comparator(t.documentKey,e.documentKey)))}function AT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const n of e.filters){const i=n;i.isInequality()?this.Ge=i:this.Ke.push(i)}}Qe(e){he(e.collectionGroup===this.collectionId);const n=My(e);if(n!==void 0&&!this.ze(n))return!1;const i=io(e);let s=0,o=0;for(;s<i.length&&this.ze(i[s]);++s);if(s===i.length)return!0;if(this.Ge!==void 0){const c=i[s];if(!this.je(this.Ge,c)||!this.We(this.Ue[o++],c))return!1;++s}for(;s<i.length;++s){const c=i[s];if(o>=this.Ue.length||!this.We(this.Ue[o++],c))return!1}return!0}ze(e){for(const n of this.Ke)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){var e,n;if(he(t instanceof Me||t instanceof tt),t instanceof Me){if(t instanceof jR){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Me.create(t.field,"==",o)))||[];return tt.create(s,"or")}return t}const i=t.filters.map(s=>Ix(s));return tt.create(i,t.op)}function LB(t){if(t.getFilters().length===0)return[];const e=Wy(Ix(t));return he(_x(e)),Gy(e)||Hy(e)?[e]:e.getFilters()}function Gy(t){return t instanceof Me}function Hy(t){return t instanceof tt&&m0(t)}function _x(t){return Gy(t)||Hy(t)||function(e){if(e instanceof tt&&Vy(e)){for(const n of e.getFilters())if(!Gy(n)&&!Hy(n))return!1;return!0}return!1}(t)}function Wy(t){if(he(t instanceof Me||t instanceof tt),t instanceof Me)return t;if(t.filters.length===1)return Wy(t.filters[0]);const e=t.filters.map(i=>Wy(i));let n=tt.create(e,t.op);return n=hp(n),_x(n)?n:(he(n instanceof tt),he(gc(n)),he(n.filters.length>1),n.filters.reduce((i,s)=>T0(i,s)))}function T0(t,e){let n;return he(t instanceof Me||t instanceof tt),he(e instanceof Me||e instanceof tt),n=t instanceof Me?e instanceof Me?function(i,s){return tt.create([i,s],"and")}(t,e):kT(t,e):e instanceof Me?kT(e,t):function(i,s){if(he(i.filters.length>0&&s.filters.length>0),gc(i)&&gc(s))return UR(i,s.getFilters());const o=Vy(i)?i:s,c=Vy(i)?s:i,l=o.filters.map(d=>T0(d,c));return tt.create(l,"or")}(t,e),hp(n)}function kT(t,e){if(gc(e))return UR(e,t.getFilters());{const n=e.filters.map(i=>T0(t,i));return tt.create(n,"or")}}function hp(t){if(he(t instanceof Me||t instanceof tt),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return hp(e[0]);if(LR(t))return t;const n=e.map(s=>hp(s)),i=[];return n.forEach(s=>{s instanceof Me?i.push(s):s instanceof tt&&(s.op===t.op?i.push(...s.filters):i.push(s))}),i.length===1?i[0]:tt.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.He=new C0}addToCollectionParentIndex(e,n){return this.He.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.He.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(fi.min())}updateCollectionGroup(e,n,i){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class C0{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new nt(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new nt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Uint8Array(0);class UB{constructor(e,n){this.user=e,this.databaseId=n,this.Je=new C0,this.Ye=new xs(i=>No(i),(i,s)=>xh(i,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Je.has(n)){const i=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Je.add(n)});const o={collectionId:i,parent:Fn(s)};return RT(e).put(o)}return k.resolve()}getCollectionParents(e,n){const i=[],s=IDBKeyRange.bound([n,""],[bR(n),""],!1,!0);return RT(e).j(s).next(o=>{for(const c of o){if(c.collectionId!==n)break;i.push(Hi(c.parent))}return i})}addFieldIndex(e,n){const i=If(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const o=i.add(s);if(n.indexState){const c=cl(e);return o.next(l=>{c.put(ET(l,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const i=If(e),s=cl(e),o=al(e);return i.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const i=al(e);let s=!0;const o=new Map;return k.forEach(this.Ze(n),c=>this.Xe(e,c).next(l=>{s&&(s=!!l),o.set(c,l)})).next(()=>{if(s){let c=Ce();const l=[];return k.forEach(o,(d,f)=>{var g;B("IndexedDbIndexManager",`Using index ${g=d,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`} to execute ${No(n)}`);const v=function(O,Q){const Y=My(Q);if(Y===void 0)return null;for(const ie of cp(O,Y.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(f,d),w=function(O,Q){const Y=new Map;for(const ie of io(Q))for(const ne of cp(O,ie.fieldPath))switch(ne.op){case"==":case"in":Y.set(ie.fieldPath.canonicalString(),ne.value);break;case"not-in":case"!=":return Y.set(ie.fieldPath.canonicalString(),ne.value),Array.from(Y.values())}return null}(f,d),I=function(O,Q){const Y=[];let ie=!0;for(const ne of io(Q)){const me=ne.kind===0?lT(O,ne.fieldPath,O.startAt):hT(O,ne.fieldPath,O.startAt);Y.push(me.value),ie&&(ie=me.inclusive)}return new Is(Y,ie)}(f,d),A=function(O,Q){const Y=[];let ie=!0;for(const ne of io(Q)){const me=ne.kind===0?hT(O,ne.fieldPath,O.endAt):lT(O,ne.fieldPath,O.endAt);Y.push(me.value),ie&&(ie=me.inclusive)}return new Is(Y,ie)}(f,d),b=this.tn(d,f,I),S=this.tn(d,f,A),C=this.en(d,f,w),P=this.nn(d.indexId,v,b,I.inclusive,S,A.inclusive,C);return k.forEach(P,O=>i.H(O,n.limit).next(Q=>{Q.forEach(Y=>{const ie=W.fromSegments(Y.documentKey);c.has(ie)||(c=c.add(ie),l.push(ie))})}))}).next(()=>l)}return k.resolve(null)})}Ze(e){let n=this.Ye.get(e);return n||(e.filters.length===0?n=[e]:n=LB(tt.create(e.filters,"and")).map(i=>jy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,n),n)}nn(e,n,i,s,o,c,l){const d=(n!=null?n.length:1)*Math.max(i.length,o.length),f=d/(n!=null?n.length:1),g=[];for(let v=0;v<d;++v){const w=n?this.sn(n[v/f]):bf,I=this.rn(e,w,i[v%f],s),A=this.on(e,w,o[v%f],c),b=l.map(S=>this.rn(e,w,S,!0));g.push(...this.createRange(I,A,b))}return g}rn(e,n,i,s){const o=new uo(e,W.empty(),n,i);return s?o:o.qe()}on(e,n,i,s){const o=new uo(e,W.empty(),n,i);return s?o.qe():o}Xe(e,n){const i=new MB(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let c=null;for(const l of o)i.Qe(l)&&(!c||l.fields.length>c.fields.length)&&(c=l);return c})}getIndexType(e,n){let i=2;const s=this.Ze(n);return k.forEach(s,o=>this.Xe(e,o).next(c=>{c?i!==0&&c.fields.length<function(l){let d=new nt(Mt.comparator),f=!1;for(const g of l.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:d=d.add(v.field));for(const g of l.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(o)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&i===2?1:i)}un(e,n){const i=new ol;for(const s of io(e)){const o=n.data.field(s.fieldPath);if(o==null)return null;const c=i.Le(s.kind);co.pe.oe(o,c)}return i.$e()}sn(e){const n=new ol;return co.pe.oe(e,n.Le(0)),n.$e()}cn(e,n){const i=new ol;return co.pe.oe(Do(this.databaseId,n),i.Le(function(s){const o=io(s);return o.length===0?0:o[o.length-1].kind}(e))),i.$e()}en(e,n,i){if(i===null)return[];let s=[];s.push(new ol);let o=0;for(const c of io(e)){const l=i[o++];for(const d of s)if(this.an(n,c.fieldPath)&&sh(l))s=this.hn(s,c,l);else{const f=d.Le(c.kind);co.pe.oe(l,f)}}return this.ln(s)}tn(e,n,i){return this.en(e,n,i.position)}ln(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].$e();return n}hn(e,n,i){const s=[...e],o=[];for(const c of i.arrayValue.values||[])for(const l of s){const d=new ol;d.seed(l.$e()),co.pe.oe(c,d.Le(n.kind)),o.push(d)}return o}an(e,n){return!!e.filters.find(i=>i instanceof Me&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=If(e),s=cl(e);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next(o=>{const c=[];return k.forEach(o,l=>s.get([l.indexId,this.uid]).next(d=>{c.push(function(f,g){const v=g?new op(g.sequenceNumber,new fi(Lo(g.readTime),new W(Hi(g.documentKey)),g.largestBatchId)):op.empty(),w=f.fields.map(([I,A])=>new bV(Mt.fromServerFormat(I),A));return new IR(f.indexId,f.collectionGroup,w,v)}(l,d))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,s)=>{const o=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Te(i.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const s=If(e),o=cl(e);return this.fn(e).next(c=>s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>k.forEach(l,d=>o.put(ET(d.indexId,this.user,c,i)))))}updateIndexEntries(e,n){const i=new Map;return k.forEach(n,(s,o)=>{const c=i.get(s.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(i.set(s.collectionGroup,l),k.forEach(l,d=>this.dn(e,s,d).next(f=>{const g=this.wn(o,d);return f.isEqual(g)?k.resolve():this._n(e,o,d,f,g)}))))})}mn(e,n,i,s){return al(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.cn(i,n.key),documentKey:n.key.path.toArray()})}gn(e,n,i,s){return al(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.cn(i,n.key),n.key.path.toArray()])}dn(e,n,i){const s=al(e);let o=new nt(Jr);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.cn(i,n)])},(c,l)=>{o=o.add(new uo(i.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>o)}wn(e,n){let i=new nt(Jr);const s=this.un(n,e);if(s==null)return i;const o=My(n);if(o!=null){const c=e.data.field(o.fieldPath);if(sh(c))for(const l of c.arrayValue.values||[])i=i.add(new uo(n.indexId,e.key,this.sn(l),s))}else i=i.add(new uo(n.indexId,e.key,bf,s));return i}_n(e,n,i,s,o){B("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const c=[];return function(l,d,f,g,v){const w=l.getIterator(),I=d.getIterator();let A=Ba(w),b=Ba(I);for(;A||b;){let S=!1,C=!1;if(A&&b){const P=f(A,b);P<0?C=!0:P>0&&(S=!0)}else A!=null?C=!0:S=!0;S?(g(b),b=Ba(I)):C?(v(A),A=Ba(w)):(A=Ba(w),b=Ba(I))}}(s,o,Jr,l=>{c.push(this.mn(e,n,i,l))},l=>{c.push(this.gn(e,n,i,l))}),k.waitFor(c)}fn(e){let n=1;return cl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,o)=>{o.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((c,l)=>Jr(c,l)).filter((c,l,d)=>!l||Jr(c,d[l-1])!==0);const s=[];s.push(e);for(const c of i){const l=Jr(c,e),d=Jr(c,n);if(l===0)s[0]=e.qe();else if(l>0&&d<0)s.push(c),s.push(c.qe());else if(d>0)break}s.push(n);const o=[];for(let c=0;c<s.length;c+=2){if(this.yn(s[c],s[c+1]))return[];const l=[s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,bf,[]],d=[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,bf,[]];o.push(IDBKeyRange.bound(l,d))}return o}yn(e,n){return Jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(xT)}getMinOffset(e,n){return k.mapArray(this.Ze(n),i=>this.Xe(e,i).next(s=>s||te())).next(xT)}}function RT(t){return un(t,"collectionParents")}function al(t){return un(t,"indexEntries")}function If(t){return un(t,"indexConfiguration")}function cl(t){return un(t,"indexState")}function xT(t){he(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;d0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new fi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qn{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),o=[],c=IDBKeyRange.only(n.batchId);let l=0;const d=i.Z({range:c},(g,v,w)=>(l++,w.delete()));o.push(d.next(()=>{he(l===1)}));const f=[];for(const g of n.mutations){const v=AR(e,g.key.path,n.batchId);o.push(s.delete(v)),f.push(g.key)}return k.waitFor(o).next(()=>f)}function dp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(41943040,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class hm{constructor(e,n,i,s){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=s,this.pn={}}static ie(e,n,i,s){he(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new hm(o,n,i,s)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).Z({index:"userMutationsIndex",range:i},(s,o,c)=>{n=!1,c.done()}).next(()=>n)}addMutationBatch(e,n,i,s){const o=Ha(e),c=Xr(e);return c.add({}).next(l=>{he(typeof l=="number");const d=new w0(l,n,i,s),f=function(w,I,A){const b=A.baseMutations.map(C=>ch(w.se,C)),S=A.mutations.map(C=>ch(w.se,C));return{userId:I,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:b,mutations:S}}(this.serializer,this.userId,d),g=[];let v=new nt((w,I)=>Te(w.canonicalString(),I.canonicalString()));for(const w of s){const I=AR(this.userId,w.key.path,l);v=v.add(w.key.path.popLast()),g.push(c.put(f)),g.push(o.put(I,CV))}return v.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.pn[l]=d.keys()}),k.waitFor(g).next(()=>d)})}lookupMutationBatch(e,n){return Xr(e).get(n).next(i=>i?(he(i.userId===this.userId),ao(this.serializer,i)):null)}In(e,n){return this.pn[n]?k.resolve(this.pn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const s=i.keys();return this.pn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Xr(e).Z({index:"userMutationsIndex",range:s},(c,l,d)=>{l.userId===this.userId&&(he(l.batchId>=i),o=ao(this.serializer,l)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Xr(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,o,c)=>{i=o.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).j("userMutationsIndex",n).next(i=>i.map(s=>ao(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Nf(this.userId,n.path),s=IDBKeyRange.lowerBound(i),o=[];return Ha(e).Z({range:s},(c,l,d)=>{const[f,g,v]=c,w=Hi(g);if(f===this.userId&&n.path.isEqual(w))return Xr(e).get(v).next(I=>{if(!I)throw te();he(I.userId===this.userId),o.push(ao(this.serializer,I))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nt(Te);const s=[];return n.forEach(o=>{const c=Nf(this.userId,o.path),l=IDBKeyRange.lowerBound(c),d=Ha(e).Z({range:l},(f,g,v)=>{const[w,I,A]=f,b=Hi(I);w===this.userId&&o.path.isEqual(b)?i=i.add(A):v.done()});s.push(d)}),k.waitFor(s).next(()=>this.Tn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1,o=Nf(this.userId,i),c=IDBKeyRange.lowerBound(o);let l=new nt(Te);return Ha(e).Z({range:c},(d,f,g)=>{const[v,w,I]=d,A=Hi(w);v===this.userId&&i.isPrefixOf(A)?A.length===s&&(l=l.add(I)):g.done()}).next(()=>this.Tn(e,l))}Tn(e,n){const i=[],s=[];return n.forEach(o=>{s.push(Xr(e).get(o).next(c=>{if(c===null)throw te();he(c.userId===this.userId),i.push(ao(this.serializer,c))}))}),k.waitFor(s).next(()=>i)}removeMutationBatch(e,n){return Ex(e.at,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.En(n.batchId)}),k.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();const i=IDBKeyRange.lowerBound([this.userId]),s=[];return Ha(e).Z({range:i},(o,c,l)=>{if(o[0]===this.userId){const d=Hi(o[1]);s.push(d)}else l.done()}).next(()=>{he(s.length===0)})})}containsKey(e,n){return Sx(e,this.userId,n)}An(e){return Tx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Sx(t,e,n){const i=Nf(e,n.path),s=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return Ha(t).Z({range:o,Y:!0},(l,d,f)=>{const[g,v,w]=l;g===e&&v===s&&(c=!0),f.done()}).next(()=>c)}function Xr(t){return un(t,"mutations")}function Ha(t){return un(t,"documentMutations")}function Tx(t){return un(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Fo(0)}static bn(){return new Fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Pn(e).next(n=>{const i=new Fo(n.highestTargetId);return n.highestTargetId=i.next(),this.Vn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(n=>pe.fromTimestamp(new gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Pn(e).next(s=>(s.highestListenSequenceNumber=n,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Vn(e,s)))}addTargetData(e,n){return this.Sn(e,n).next(()=>this.Pn(e).next(i=>(i.targetCount+=1,this.Dn(n,i),this.Vn(e,i))))}updateTargetData(e,n){return this.Sn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ja(e).delete(n.targetId)).next(()=>this.Pn(e)).next(i=>(he(i.targetCount>0),i.targetCount-=1,this.Vn(e,i)))}removeTargets(e,n,i){let s=0;const o=[];return ja(e).Z((c,l)=>{const d=Il(l);d.sequenceNumber<=n&&i.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>k.waitFor(o)).next(()=>s)}forEachTarget(e,n){return ja(e).Z((i,s)=>{const o=Il(s);n(o)})}Pn(e){return NT(e).get("targetGlobalKey").next(n=>(he(n!==null),n))}Vn(e,n){return NT(e).put("targetGlobalKey",n)}Sn(e,n){return ja(e).put(bx(this.serializer,n))}Dn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Pn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=No(n),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return ja(e).Z({range:s,index:"queryTargetsIndex"},(c,l,d)=>{const f=Il(l);xh(n,f.target)&&(o=f,d.done())}).next(()=>o)}addMatchingKeys(e,n,i){const s=[],o=ss(e);return n.forEach(c=>{const l=Fn(c.path);s.push(o.put({targetId:i,path:l})),s.push(this.referenceDelegate.addReference(e,i,c))}),k.waitFor(s)}removeMatchingKeys(e,n,i){const s=ss(e);return k.forEach(n,o=>{const c=Fn(o.path);return k.waitFor([s.delete([i,c]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){const i=ss(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),s=ss(e);let o=Ce();return s.Z({range:i,Y:!0},(c,l,d)=>{const f=Hi(c[1]),g=new W(f);o=o.add(g)}).next(()=>o)}containsKey(e,n){const i=Fn(n.path),s=IDBKeyRange.bound([i],[bR(i)],!1,!0);let o=0;return ss(e).Z({index:"documentTargetsIndex",Y:!0,range:s},([c,l],d,f)=>{c!==0&&(o++,f.done())}).next(()=>o>0)}ne(e,n){return ja(e).get(n).next(i=>i?Il(i):null)}}function ja(t){return un(t,"targets")}function NT(t){return un(t,"targetGlobal")}function ss(t){return un(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT([t,e],[n,i]){const s=Te(t,n);return s===0?Te(e,i):s}class BB{constructor(e){this.Cn=e,this.buffer=new nt(PT),this.xn=0}Nn(){return++this.xn}kn(e){const n=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();PT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jB{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.On=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return this.On!==null}$n(e){B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.On=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rs(n)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ks(n)}await this.$n(3e5)})}}class $B{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.Fn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return k.resolve(Hn.ct);const i=new BB(n);return this.Mn.forEachTarget(e,s=>i.kn(s.sequenceNumber)).next(()=>this.Mn.Bn(e,s=>i.kn(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Mn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(DT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DT):this.Ln(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,n){let i,s,o,c,l,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,l=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),Oy()<=ze.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(l-c)+`ms
	Removed ${o} targets in `+(d-l)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n){this.db=e,this.garbageCollector=function(i,s){return new $B(i,s)}(this,n)}Fn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}qn(e){let n=0;return this.Bn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Bn(e,n){return this.Un(e,(i,s)=>n(s))}addReference(e,n,i){return _f(e,i)}removeReference(e,n,i){return _f(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return _f(e,n)}Kn(e,n){return function(i,s){let o=!1;return Tx(i).X(c=>Sx(i,c,s).next(l=>(l&&(o=!0),k.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Un(e,(c,l)=>{if(l<=n){const d=this.Kn(e,c).next(f=>{if(!f)return o++,i.getEntry(e,c).next(()=>(i.removeEntry(c,pe.min()),ss(e).delete([0,Fn(c.path)])))});s.push(d)}}).next(()=>k.waitFor(s)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return _f(e,n)}Un(e,n){const i=ss(e);let s,o=Hn.ct;return i.Z({index:"documentTargetsIndex"},([c,l],{path:d,sequenceNumber:f})=>{c===0?(o!==Hn.ct&&n(new W(Hi(s)),o),o=f,s=d):o=Hn.ct}).next(()=>{o!==Hn.ct&&n(new W(Hi(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _f(t,e){return ss(t).put(function(n,i){return{targetId:0,path:Fn(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return eo(e).put(i)}removeEntry(e,n,i){return eo(e).delete(function(s,o){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],lp(o),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Gn(e,i)))}getEntry(e,n){let i=ut.newInvalidDocument(n);return eo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ul(n))},(s,o)=>{i=this.Qn(n,o)}).next(()=>i)}zn(e,n){let i={size:0,document:ut.newInvalidDocument(n)};return eo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ul(n))},(s,o)=>{i={document:this.Qn(n,o),size:dp(o)}}).next(()=>i)}getEntries(e,n){let i=Yn();return this.jn(e,n,(s,o)=>{const c=this.Qn(s,o);i=i.insert(s,c)}).next(()=>i)}Wn(e,n){let i=Yn(),s=new kt(W.comparator);return this.jn(e,n,(o,c)=>{const l=this.Qn(o,c);i=i.insert(o,l),s=s.insert(o,dp(c))}).next(()=>({documents:i,Hn:s}))}jn(e,n,i){if(n.isEmpty())return k.resolve();let s=new nt(LT);n.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(ul(s.first()),ul(s.last())),c=s.getIterator();let l=c.getNext();return eo(e).Z({index:"documentKeyIndex",range:o},(d,f,g)=>{const v=W.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;l&&LT(l,v)<0;)i(l,null),l=c.getNext();l&&l.isEqual(v)&&(i(l,f),l=c.hasNext()?c.getNext():null),l?g.G(ul(l)):g.done()}).next(()=>{for(;l;)i(l,null),l=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,n,i,s){const o=n.path,c=[o.popLast().toArray(),o.lastSegment(),lp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eo(e).j(IDBKeyRange.bound(c,l,!0)).next(d=>{let f=Yn();for(const g of d){const v=this.Qn(W.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Nh(n,v)||s.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(e,n,i,s){let o=Yn();const c=MT(n,i),l=MT(n,fi.max());return eo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,l,!0)},(d,f,g)=>{const v=this.Qn(W.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===s&&g.done()}).next(()=>o)}newChangeBuffer(e){return new zB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return OT(e).get("remoteDocumentGlobalKey").next(n=>(he(!!n),n))}Gn(e,n){return OT(e).put("remoteDocumentGlobalKey",n)}Qn(e,n){if(n){const i=RB(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(pe.min())))return i}return ut.newInvalidDocument(e)}}function Ax(t){return new KB(t)}class zB extends Cx{constructor(e,n){super(),this.Jn=e,this.trackRemovals=n,this.Yn=new xs(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const n=[];let i=0,s=new nt((o,c)=>Te(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const l=this.Yn.get(o);if(n.push(this.Jn.removeEntry(e,o,l.readTime)),c.isValidDocument()){const d=IT(this.Jn.serializer,c);s=s.add(o.path.popLast());const f=dp(d);i+=f-l.size,n.push(this.Jn.addEntry(e,o,d))}else if(i-=l.size,this.trackRemovals){const d=IT(this.Jn.serializer,c.convertToNoDocument(pe.min()));n.push(this.Jn.addEntry(e,o,d))}}),s.forEach(o=>{n.push(this.Jn.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.Jn.updateMetadata(e,i)),k.waitFor(n)}getFromCache(e,n){return this.Jn.zn(e,n).next(i=>(this.Yn.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Jn.Wn(e,n).next(({documents:i,Hn:s})=>(s.forEach((o,c)=>{this.Yn.set(o,{size:c,readTime:i.get(o).readTime})}),i))}}function OT(t){return un(t,"remoteDocumentGlobal")}function eo(t){return un(t,"remoteDocumentsV14")}function ul(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MT(t,e){const n=e.documentKey.path.toArray();return[t,lp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function LT(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(s=Te(n[o],i[o]),s)return s;return s=Te(n.length,i.length),s||(s=Te(n[n.length-2],i[i.length-2]),s||Te(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Nl(i.mutation,s,Wn.empty(),gt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const s=Wi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let c=bl();return o.forEach((l,d)=>{c=c.insert(l,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,l)=>{n.set(c,l)})})}computeViews(e,n,i,s){let o=Yn();const c=Dl(),l=Dl();return n.forEach((d,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof kr)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Nl(g.mutation,f,g.mutation.getFieldMask(),gt.now())):c.set(f.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var v;return l.set(f,new GB(g,(v=c.get(f))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Dl();let s=new kt((c,l)=>c-l),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const l of c)l.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=i.get(d)||Wn.empty();g=l.applyToLocalView(f,g),i.set(d,g);const v=(s.get(l.batchId)||Ce()).add(d);s=s.insert(l.batchId,v)})}).next(()=>{const c=[],l=s.getReverseIterator();for(;l.hasNext();){const d=l.getNext(),f=d.key,g=d.value,v=WR();g.forEach(w=>{if(!o.has(w)){const I=nx(n.get(w),i.get(w));I!==null&&v.set(w,I),o=o.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return k.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):k.resolve(Wi());let l=-1,d=o;return c.next(f=>k.forEach(f,(g,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(g)?k.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{d=d.insert(g,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ce())).next(g=>({batchId:l,changes:HR(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(i=>{let s=bl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const s=n.collectionGroup;let o=bl();return this.indexManager.getCollectionParents(e,s).next(c=>k.forEach(c,l=>{const d=function(f,g){return new Ar(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s))).next(o=>{s.forEach((l,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ut.newInvalidDocument(f)))});let c=bl();return o.forEach((l,d)=>{const f=s.get(l);f!==void 0&&Nl(f.mutation,d,Wn.empty(),gt.now()),Nh(n,d)&&(c=c.insert(l,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return k.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var i;return this.Zn.set(n.id,{id:(i=n).id,version:i.version,createTime:Ft(i.createTime)}),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(i){return{name:i.name,query:S0(i.bundledQuery),readTime:Ft(i.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this.overlays=new kt(W.comparator),this.ts=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Wi();return k.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.re(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.ts.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.ts.delete(i)),k.resolve()}getOverlaysForCollection(e,n,i){const s=Wi(),o=n.length+1,c=new W(n.child("")),l=this.overlays.getIteratorFrom(c);for(;l.hasNext();){const d=l.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return k.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new kt((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=Wi(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const l=Wi(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>l.set(f,g)),!(l.size()>=s)););return k.resolve(l)}re(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.ts.get(s.largestBatchId).delete(i.key);this.ts.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new I0(n,i));let o=this.ts.get(n);o===void 0&&(o=Ce(),this.ts.set(n,o)),this.ts.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.es=new nt(nn.ns),this.ss=new nt(nn.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,n){const i=new nn(e,n);this.es=this.es.add(i),this.ss=this.ss.add(i)}os(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.us(new nn(e,n))}cs(e,n){e.forEach(i=>this.removeReference(i,n))}hs(e){const n=new W(new Be([])),i=new nn(n,e),s=new nn(n,e+1),o=[];return this.ss.forEachInRange([i,s],c=>{this.us(c),o.push(c.key)}),o}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const n=new W(new Be([])),i=new nn(n,e),s=new nn(n,e+1);let o=Ce();return this.ss.forEachInRange([i,s],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new nn(e,0),i=this.es.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class nn{constructor(e,n){this.key=e,this.ds=n}static ns(e,n){return W.comparator(e.key,n.key)||Te(e.ds,n.ds)}static rs(e,n){return Te(e.ds,n.ds)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new nt(nn.ns)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new w0(o,n,i,s);this.mutationQueue.push(c);for(const l of s)this._s=this._s.add(new nn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return k.resolve(c)}lookupMutationBatch(e,n){return k.resolve(this.gs(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ys(i),o=s<0?0:s;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new nn(n,0),s=new nn(n,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([i,s],c=>{const l=this.gs(c.ds);o.push(l)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nt(Te);return n.forEach(s=>{const o=new nn(s,0),c=new nn(s,Number.POSITIVE_INFINITY);this._s.forEachInRange([o,c],l=>{i=i.add(l.ds)})}),k.resolve(this.ps(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;W.isDocumentKey(o)||(o=o.child(""));const c=new nn(new W(o),0);let l=new nt(Te);return this._s.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(l=l.add(d.ds)),!0)},c),k.resolve(this.ps(l))}ps(e){const n=[];return e.forEach(i=>{const s=this.gs(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.Is(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this._s;return k.forEach(n.mutations,s=>{const o=new nn(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this._s=i})}En(e){}containsKey(e,n){const i=new nn(n,0),s=this._s.firstAfterOrEqual(i);return k.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Is(e,n){return this.ys(e)}ys(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}gs(e){const n=this.ys(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.Ts=e,this.docs=new kt(W.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,c=this.Ts(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let i=Yn();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():ut.newInvalidDocument(s))}),k.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Yn();const c=n.path,l=new W(c.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||d0(ER(g),i)<=0||(s.has(g.key)||Nh(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,i,s){te()}Es(e,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new JB(this)}getSize(e){return k.resolve(this.size)}}class JB extends Cx{constructor(e){super(),this.Jn=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Jn.addEntry(e,s)):this.Jn.removeEntry(i)}),k.waitFor(n)}getFromCache(e,n){return this.Jn.getEntry(e,n)}getAllFromCache(e,n){return this.Jn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.persistence=e,this.As=new xs(n=>No(n),xh),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Rs=0,this.vs=new A0,this.targetCount=0,this.bs=Fo.vn()}forEachTarget(e,n){return this.As.forEach((i,s)=>n(s)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Rs&&(this.Rs=n),k.resolve()}Sn(e){this.As.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.bs=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,n){return this.Sn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Sn(n),k.resolve()}removeTargetData(e,n){return this.As.delete(n.target),this.vs.hs(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.As.forEach((c,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.As.delete(c),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),k.waitFor(o).next(()=>s)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const i=this.As.get(n)||null;return k.resolve(i)}addMatchingKeys(e,n,i){return this.vs.os(n,i),k.resolve()}removeMatchingKeys(e,n,i){this.vs.cs(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.vs.hs(n),k.resolve()}getMatchingKeysForTargetId(e,n){const i=this.vs.fs(n);return k.resolve(i)}containsKey(e,n){return k.resolve(this.vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.Ps={},this.overlays={},this.Vs=new Hn(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new XB(this),this.indexManager=new FB,this.remoteDocumentCache=function(i){return new QB(i)}(i=>this.referenceDelegate.Cs(i)),this.serializer=new wx(n),this.xs=new HB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Ps[e.toKey()];return i||(i=new YB(n,this.referenceDelegate),this.Ps[e.toKey()]=i),i}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,n,i){B("MemoryPersistence","Starting transaction:",e);const s=new ZB(this.Vs.next());return this.referenceDelegate.Ns(),i(s).next(o=>this.referenceDelegate.ks(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Os(e,n){return k.or(Object.values(this.Ps).map(i=>()=>i.containsKey(e,n)))}}class ZB extends TR{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.$s=new A0,this.Ms=null}static Fs(e){return new dm(e)}get Bs(){if(this.Ms)return this.Ms;throw te()}addReference(e,n,i){return this.$s.addReference(i,n),this.Bs.delete(i.toString()),k.resolve()}removeReference(e,n,i){return this.$s.removeReference(i,n),this.Bs.add(i.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Bs.add(n.toString()),k.resolve()}removeTarget(e,n){this.$s.hs(n.targetId).forEach(s=>this.Bs.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Bs.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ns(){this.Ms=new Set}ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Bs,i=>{const s=W.fromPath(i);return this.Ls(e,s).next(o=>{o||n.removeEntry(s,pe.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ls(e,n).next(i=>{i?this.Bs.delete(n.toString()):this.Bs.add(n.toString())})}Cs(e){return 0}Ls(e,n){return k.or([()=>k.resolve(this.$s.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.serializer=e}M(e,n,i,s){const o=new sm("createOrUpgrade",n);i<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eT,{unique:!0}),l.createObjectStore("documentMutations")}(e),FT(e),function(l){l.createObjectStore("remoteDocuments")}(e));let c=k.resolve();return i<3&&s>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),FT(e)),c=c.next(()=>function(l){const d=l.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(o))),i<4&&s>=4&&(i!==0&&(c=c.next(()=>function(l,d){return d.store("mutations").j().next(f=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eT,{unique:!0});const g=d.store("mutations"),v=f.map(w=>g.put(w));return k.waitFor(v)})}(e,o))),c=c.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&s>=5&&(c=c.next(()=>this.qs(o))),i<6&&s>=6&&(c=c.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Us(o)))),i<7&&s>=7&&(c=c.next(()=>this.Ks(o))),i<8&&s>=8&&(c=c.next(()=>this.Gs(e,o))),i<9&&s>=9&&(c=c.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&s>=10&&(c=c.next(()=>this.Qs(o))),i<11&&s>=11&&(c=c.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&s>=12&&(c=c.next(()=>{(function(l){const d=l.createObjectStore("documentOverlays",{keyPath:UV});d.createIndex("collectionPathOverlayIndex",VV,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",BV,{unique:!1})})(e)})),i<13&&s>=13&&(c=c.next(()=>function(l){const d=l.createObjectStore("remoteDocumentsV14",{keyPath:AV});d.createIndex("documentKeyIndex",kV),d.createIndex("collectionGroupIndex",RV)}(e)).next(()=>this.zs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&s>=14&&(c=c.next(()=>this.js(e,o))),i<15&&s>=15&&(c=c.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:OV}).createIndex("sequenceNumberIndex",MV,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:LV}).createIndex("documentKeyIndex",FV,{unique:!1})}(e))),c}Us(e){let n=0;return e.store("remoteDocuments").Z((i,s)=>{n+=dp(s)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next(s=>k.forEach(s,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(l=>k.forEach(l,d=>{he(d.userId===o.userId);const f=ao(this.serializer,d);return Ex(e,o.userId,f).next(()=>{})}))}))}Ks(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const o=[];return i.Z((c,l)=>{const d=new Be(c),f=function(g){return[0,Fn(g)]}(d);o.push(n.get(f).next(g=>g?k.resolve():(v=>n.put({targetId:0,path:Fn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>k.waitFor(o))})}Gs(e,n){e.createObjectStore("collectionParents",{keyPath:PV});const i=n.store("collectionParents"),s=new C0,o=c=>{if(s.add(c)){const l=c.lastSegment(),d=c.popLast();return i.put({collectionId:l,parent:Fn(d)})}};return n.store("remoteDocuments").Z({Y:!0},(c,l)=>{const d=new Be(c);return o(d.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([c,l,d],f)=>{const g=Hi(l);return o(g.popLast())}))}Qs(e){const n=e.store("targets");return n.Z((i,s)=>{const o=Il(s),c=bx(this.serializer,o);return n.put(c)})}zs(e,n){const i=n.store("remoteDocuments"),s=[];return i.Z((o,c)=>{const l=n.store("remoteDocumentsV14"),d=(f=c,f.document?new W(Be.fromString(f.document.name).popFirst(5)):f.noDocument?W.fromSegments(f.noDocument.path):f.unknownDocument?W.fromSegments(f.unknownDocument.path):te()).path.toArray();var f;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(l.put(g))}).next(()=>k.waitFor(s))}js(e,n){const i=n.store("mutations"),s=Ax(this.serializer),o=new Rx(dm.Fs,this.serializer.se);return i.j().next(c=>{const l=new Map;return c.forEach(d=>{var f;let g=(f=l.get(d.userId))!==null&&f!==void 0?f:Ce();ao(this.serializer,d).keys().forEach(v=>g=g.add(v)),l.set(d.userId,g)}),k.forEach(l,(d,f)=>{const g=new rn(f),v=lm.ie(this.serializer,g),w=o.getIndexManager(g),I=hm.ie(g,this.serializer,w,o.referenceDelegate);return new kx(s,I,v,w).recalculateAndSaveOverlaysForDocumentKeys(new Ly(n,Hn.ct),d).next()})})}}function FT(t){t.createObjectStore("targetDocuments",{keyPath:DV}).createIndex("documentTargetsIndex",NV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xV,{unique:!0}),t.createObjectStore("targetGlobal")}const jv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class k0{constructor(e,n,i,s,o,c,l,d,f,g,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Ws=o,this.window=c,this.document=l,this.Hs=f,this.Js=g,this.Ys=v,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=w=>Promise.resolve(),!k0.D())throw new V(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qB(this,s),this.si=n+"main",this.serializer=new wx(d),this.ii=new ki(this.si,this.Ys,new e4(this.serializer)),this.Ds=new VB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ax(this.serializer),this.xs=new xB,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,g===!1&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(x.FAILED_PRECONDITION,jv);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Hn(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){return this.ni=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(async()=>{this.started&&await this.oi()}))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(n=>{n||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(n=>this.isPrimary&&!n?this.di(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Rs(e))return B("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return ll(e).get("owner").next(n=>k.resolve(this._i(n)))}mi(e){return Ef(e).delete(this.clientId)}async gi(){if(this.isPrimary&&!this.yi(this.ei,18e5)){this.ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=un(n,"clientMetadata");return i.j().next(s=>{const o=this.pi(s,18e5),c=s.filter(l=>o.indexOf(l)===-1);return k.forEach(c,l=>i.delete(l.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ri)for(const n of e)this.ri.removeItem(this.Ii(n.clientId))}}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?k.resolve(!0):ll(e).get("owner").next(n=>{if(n!==null&&this.yi(n.leaseTimestampMs,5e3)&&!this.Ti(n.ownerId)){if(this._i(n)&&this.networkEnabled)return!0;if(!this._i(n)){if(!n.allowTabSynchronization)throw new V(x.FAILED_PRECONDITION,jv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(e).j().next(i=>this.pi(i,5e3).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(o||c&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),await this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ly(e,Hn.ct);return this.di(n).next(()=>this.mi(n))}),this.ii.close(),this.vi()}pi(e,n){return e.filter(i=>this.yi(i.updateTimeMs,n)&&!this.Ti(i.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Ef(e).j().next(n=>this.pi(n,18e5).map(i=>i.clientId)))}get started(){return this.Ss}getMutationQueue(e,n){return hm.ie(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UB(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return lm.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,n,i){B("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",o=(c=this.Ys)===15?$V:c===14?xR:c===13?RR:c===12?jV:c===11?kR:void te();var c;let l;return this.ii.runTransaction(e,s,o,d=>(l=new Ly(d,this.Vs?this.Vs.next():Hn.ct),n==="readwrite-primary"?this.li(l).next(f=>!!f||this.fi(l)).next(f=>{if(!f)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new V(x.FAILED_PRECONDITION,SR);return i(l)}).next(f=>this.wi(l).next(()=>f)):this.Pi(l).next(()=>i(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Pi(e){return ll(e).get("owner").next(n=>{if(n!==null&&this.yi(n.leaseTimestampMs,5e3)&&!this.Ti(n.ownerId)&&!this._i(n)&&!(this.Js||this.allowTabSynchronization&&n.allowTabSynchronization))throw new V(x.FAILED_PRECONDITION,jv)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ll(e).put("owner",n)}static D(){return ki.D()}di(e){const n=ll(e);return n.get("owner").next(i=>this._i(i)?(B("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}yi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(Ot(`Detected an update time that is in the future: ${e} > ${i}`),!1))}ui(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground=this.document.visibilityState==="visible")}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ei();const n=/(?:Version|Mobile)\/1[456]/;jF()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var n;try{const i=((n=this.ri)===null||n===void 0?void 0:n.getItem(this.Ii(e)))!==null;return B("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ot("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ll(t){return un(t,"owner")}function Ef(t){return un(t,"clientMetadata")}function R0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Vi=i,this.Si=s}static Di(e,n){let i=Ce(),s=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new x0(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Ci=!1}initialize(e,n){this.xi=e,this.indexManager=n,this.Ci=!0}getDocumentsMatchingQuery(e,n,i,s){return this.Ni(e,n).next(o=>o||this.ki(e,n,s,i)).next(o=>o||this.Oi(e,n))}Ni(e,n){if(dT(n))return k.resolve(null);let i=ei(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=up(n,null,"F"),i=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=Ce(...o);return this.xi.getDocuments(e,c).next(l=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.$i(n,l);return this.Mi(n,f,c,d.readTime)?this.Ni(e,up(n,null,"F")):this.Fi(e,f,n,d)}))})))}ki(e,n,i,s){return dT(n)||s.isEqual(pe.min())?this.Oi(e,n):this.xi.getDocuments(e,i).next(o=>{const c=this.$i(n,o);return this.Mi(n,c,i,s)?this.Oi(e,n):(Oy()<=ze.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qy(n)),this.Fi(e,c,n,_R(s,-1)))})}$i(e,n){let i=new nt(zR(e));return n.forEach((s,o)=>{Nh(e,o)&&(i=i.add(o))}),i}Mi(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Oi(e,n){return Oy()<=ze.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",qy(n)),this.xi.getDocumentsMatchingQuery(e,n,fi.min())}Fi(e,n,i,s){return this.xi.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n,i,s){this.persistence=e,this.Bi=n,this.serializer=s,this.Li=new kt(Te),this.qi=new xs(o=>No(o),xh),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(i)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kx(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Li))}}function Dx(t,e,n,i){return new t4(t,e,n,i)}async function Nx(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Gi(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],l=[];let d=Ce();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next(f=>({Qi:f,removedBatchIds:c,addedBatchIds:l}))})})}function n4(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Ki.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){const g=d.batch,v=g.keys();let w=k.resolve();return v.forEach(I=>{w=w.next(()=>f.getEntry(l,I)).next(A=>{const b=d.docVersions.get(I);he(b!==null),A.version.compareTo(b)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=Ce();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function Px(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ds.getLastRemoteSnapshotVersion(n))}function i4(t,e){const n=J(t),i=e.snapshotVersion;let s=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Ki.newChangeBuffer({trackRemovals:!0});s=n.Li;const l=[];e.targetChanges.forEach((g,v)=>{const w=s.get(v);if(!w)return;l.push(n.Ds.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.Ds.addMatchingKeys(o,g.addedDocuments,v)));let I=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.has(v)?I=I.withResumeToken(Wt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,i)),s=s.insert(v,I),function(A,b,S){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(w,I,g)&&l.push(n.Ds.updateTargetData(o,I))});let d=Yn(),f=Ce();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),l.push(Ox(o,c,e.documentUpdates).next(g=>{d=g.zi,f=g.ji})),!i.isEqual(pe.min())){const g=n.Ds.getLastRemoteSnapshotVersion(o).next(v=>n.Ds.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(g)}return k.waitFor(l).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.Li=s,o))}function Ox(t,e,n){let i=Ce(),s=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let c=Yn();return n.forEach((l,d)=>{const f=o.get(l);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),d.isNoDocument()&&d.version.isEqual(pe.min())?(e.removeEntry(l,d.readTime),c=c.insert(l,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(l,d)):B("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",d.version)}),{zi:c,ji:s}})}function r4(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function bc(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ds.getTargetData(i,e).next(o=>o?(s=o,k.resolve(s)):n.Ds.allocateTargetId(i).next(c=>(s=new fs(e,c,0,i.currentSequenceNumber),n.Ds.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Li.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Li=n.Li.insert(i.targetId,i),n.qi.set(e,i.targetId)),i})}async function Ic(t,e,n){const i=J(t),s=i.Li.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Rs(c))throw c;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.Li=i.Li.remove(e),i.qi.delete(s.target)}function fp(t,e,n){const i=J(t);let s=pe.min(),o=Ce();return i.persistence.runTransaction("Execute query","readonly",c=>function(l,d,f){const g=J(l),v=g.qi.get(f);return v!==void 0?k.resolve(g.Li.get(v)):g.Ds.getTargetData(d,f)}(i,c,ei(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Ds.getMatchingKeysForTargetId(c,l.targetId).next(d=>{o=d})}).next(()=>i.Bi.getDocumentsMatchingQuery(c,e,n?s:pe.min(),n?o:Ce())).next(l=>(Fx(i,KR(e),l),{documents:l,Wi:o})))}function Mx(t,e){const n=J(t),i=J(n.Ds),s=n.Li.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,e).next(c=>c?c.target:null))}function Lx(t,e){const n=J(t),i=n.Ui.get(e)||pe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ki.getAllFromCollectionGroup(s,e,_R(i,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Fx(n,e,s),s))}function Fx(t,e,n){let i=t.Ui.get(e)||pe.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ui.set(e,i)}async function s4(t,e,n,i){const s=J(t);let o=Ce(),c=Yn();for(const f of n){const g=e.Hi(f.metadata.name);f.document&&(o=o.add(g));const v=e.Ji(f);v.setReadTime(e.Yi(f.metadata.readTime)),c=c.insert(g,v)}const l=s.Ki.newChangeBuffer({trackRemovals:!0}),d=await bc(s,function(f){return ei(jc(Be.fromString(`__bundle__/docs/${f}`)))}(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",f=>Ox(f,l,c).next(g=>(l.apply(f),g)).next(g=>s.Ds.removeMatchingKeysForTargetId(f,d.targetId).next(()=>s.Ds.addMatchingKeys(f,o,d.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(f,g.zi,g.ji)).next(()=>g.zi)))}async function o4(t,e,n=Ce()){const i=await bc(t,ei(S0(e.bundledQuery))),s=J(t);return s.persistence.runTransaction("Save named query","readwrite",o=>{const c=Ft(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return s.xs.saveNamedQuery(o,e);const l=i.withResumeToken(Wt.EMPTY_BYTE_STRING,c);return s.Li=s.Li.insert(l.targetId,l),s.Ds.updateTargetData(o,l).next(()=>s.Ds.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>s.Ds.addMatchingKeys(o,n,i.targetId)).next(()=>s.xs.saveNamedQuery(o,e))})}function UT(t,e){return`firestore_clients_${t}_${e}`}function VT(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function $v(t,e){return`firestore_targets_${t}_${e}`}class pp{constructor(e,n,i,s){this.user=e,this.batchId=n,this.state=i,this.error=s}static Zi(e,n,i){const s=JSON.parse(i);let o,c=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return c&&s.error&&(c=typeof s.error.message=="string"&&typeof s.error.code=="string",c&&(o=new V(s.error.code,s.error.message))),c?new pp(e,n,s.state,o):(Ot("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pl{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Zi(e,n){const i=JSON.parse(n);let s,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new Pl(e,i.state,s):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const i=JSON.parse(n);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,o=am();for(let c=0;s&&c<i.activeTargetIds.length;++c)s=CR(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return s?new mp(e,o):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class D0{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new D0(n.clientId,n.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yy{constructor(){this.activeTargetIds=am()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qv{constructor(e,n,i,s,o){this.window=e,this.Ws=n,this.persistenceKey=i,this.nr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new kt(Te),this.started=!1,this.ur=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=UT(this.persistenceKey,this.nr),this.ar=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new Yy),this.hr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._r=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.bi();for(const i of e){if(i===this.nr)continue;const s=this.getItem(UT(this.persistenceKey,i));if(s){const o=mp.Zi(i,s);o&&(this.rr=this.rr.insert(o.clientId,o))}}this.mr();const n=this.storage.getItem(this.wr);if(n){const i=this.gr(n);i&&this.yr(i)}for(const i of this.ur)this.ir(i);this.ur=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let n=!1;return this.rr.forEach((i,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,n,i){this.Ir(e,n,i),this.Tr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem($v(this.persistenceKey,e));if(i){const s=Pl.Zi(e,i);s&&(n=s.state)}}return this.Er.tr(e),this.mr(),n}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($v(this.persistenceKey,e))}updateQueryState(e,n,i){this.Ar(e,n,i)}handleUserChange(e,n,i){n.forEach(s=>{this.Tr(s)}),this.currentUser=e,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B("SharedClientState","READ",e,n),n}setItem(e,n){B("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){B("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){const n=e;if(n.storageArea===this.storage){if(B("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.hr.test(n.key)){if(n.newValue==null){const i=this.br(n.key);return this.Pr(i,null)}{const i=this.Vr(n.key,n.newValue);if(i)return this.Pr(i.clientId,i)}}else if(this.lr.test(n.key)){if(n.newValue!==null){const i=this.Sr(n.key,n.newValue);if(i)return this.Dr(i)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const i=this.Cr(n.key,n.newValue);if(i)return this.Nr(i)}}else if(n.key===this.wr){if(n.newValue!==null){const i=this.gr(n.newValue);if(i)return this.yr(i)}}else if(n.key===this.ar){const i=function(s){let o=Hn.ct;if(s!=null)try{const c=JSON.parse(s);he(typeof c=="number"),o=c}catch(c){Ot("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(n.newValue);i!==Hn.ct&&this.sequenceNumberHandler(i)}else if(n.key===this._r){const i=this.kr(n.newValue);await Promise.all(i.map(s=>this.syncEngine.Or(s)))}}}else this.ur.push(n)})}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,n,i){const s=new pp(this.currentUser,e,n,i),o=VT(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Xi())}Tr(e){const n=VT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Rr(e){const n={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Ar(e,n,i){const s=$v(this.persistenceKey,e),o=new Pl(e,n,i);this.setItem(s,o.Xi())}vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this._r,n)}br(e){const n=this.hr.exec(e);return n?n[1]:null}Vr(e,n){const i=this.br(e);return mp.Zi(i,n)}Sr(e,n){const i=this.lr.exec(e),s=Number(i[1]),o=i[2]!==void 0?i[2]:null;return pp.Zi(new rn(o),s,n)}Cr(e,n){const i=this.dr.exec(e),s=Number(i[1]);return Pl.Zi(s,n)}gr(e){return D0.Zi(e)}kr(e){return JSON.parse(e)}async Dr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.$r(e.batchId,e.state,e.error);B("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,n){const i=n?this.rr.insert(e,n):this.rr.remove(e),s=this.pr(this.rr),o=this.pr(i),c=[],l=[];return o.forEach(d=>{s.has(d)||c.push(d)}),s.forEach(d=>{o.has(d)||l.push(d)}),this.syncEngine.Fr(c,l).then(()=>{this.rr=i})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let n=am();return e.forEach((i,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class Ux{constructor(){this.Br=new Yy,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,n,i){this.Lr[e]=n}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Yy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf=null;function Kv(){return Sf===null?Sf=268435456+Math.round(2147483648*Math.random()):Sf++,"0x"+Sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class l4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.ro=n+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,n,i,s,o){const c=Kv(),l=this.ao(e,n);B("RestConnection",`Sending RPC '${e}' ${c}:`,l,i);const d={};return this.ho(d,s,o),this.lo(e,l,d,i).then(f=>(B("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw Ir("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",l,"request:",i),f})}fo(e,n,i,s,o,c){return this.co(e,n,i,s,o)}ho(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}ao(e,n){const i=c4[e];return`${this.ro}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,i,s){const o=Kv();return new Promise((c,l)=>{const d=new cV;d.setWithCredentials(!0),d.listenOnce(sV.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vv.NO_ERROR:const g=d.getResponseJson();B(In,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Vv.TIMEOUT:B(In,`RPC '${e}' ${o} timed out`),l(new V(x.DEADLINE_EXCEEDED,"Request time out"));break;case Vv.HTTP_ERROR:const v=d.getStatus();if(B(In,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w==null?void 0:w.error;if(I&&I.status&&I.message){const A=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(S)>=0?S:x.UNKNOWN}(I.status);l(new V(A,I.message))}else l(new V(x.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new V(x.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{B(In,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);B(In,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,i,15)})}wo(e,n,i){const s=Kv(),o=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=iV(),l=rV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new aV({})),this.ho(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const f=o.join("");B(In,`Creating RPC '${e}' stream ${s}: ${f}`,d);const g=c.createWebChannel(f,d);let v=!1,w=!1;const I=new u4({Wr:b=>{w?B(In,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(B(In,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),B(In,`RPC '${e}' stream ${s} sending:`,b),g.send(b))},Hr:()=>g.close()}),A=(b,S,C)=>{b.listen(S,P=>{try{C(P)}catch(O){setTimeout(()=>{throw O},0)}})};return A(g,vf.EventType.OPEN,()=>{w||B(In,`RPC '${e}' stream ${s} transport opened.`)}),A(g,vf.EventType.CLOSE,()=>{w||(w=!0,B(In,`RPC '${e}' stream ${s} transport closed`),I.so())}),A(g,vf.EventType.ERROR,b=>{w||(w=!0,Ir(In,`RPC '${e}' stream ${s} transport errored:`,b),I.so(new V(x.UNAVAILABLE,"The operation could not be completed")))}),A(g,vf.EventType.MESSAGE,b=>{var S;if(!w){const C=b.data[0];he(!!C);const P=C,O=P.error||((S=P[0])===null||S===void 0?void 0:S.error);if(O){B(In,`RPC '${e}' stream ${s} received error:`,O);const Q=O.status;let Y=function(ne){const me=qt[ne];if(me!==void 0)return sx(me)}(Q),ie=O.message;Y===void 0&&(Y=x.INTERNAL,ie="Unknown error status: "+Q+" with message "+O.message),w=!0,I.so(new V(Y,ie)),g.close()}else B(In,`RPC '${e}' stream ${s} received:`,C),I.io(C)}}),A(l,oV.STAT_EVENT,b=>{b.stat===QS.PROXY?B(In,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===QS.NOPROXY&&B(In,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.no()},0),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof window<"u"?window:null}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new wB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Ws=e,this.timerId=n,this._o=i,this.mo=s,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),s=Math.max(0,n-i);s>0&&B("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,i,s,o,c,l,d){this.Ws=e,this.bo=i,this.Po=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new N0(e,n)}xo(){return this.state===1||this.state===5||this.No()}No(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.ko()}async stop(){this.xo()&&await this.close(0)}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&this.So===null&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}async Mo(){if(this.No())return this.close(0)}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}async close(e,n){this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,e!==4?this.Co.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Vo===n&&this.Ko(i,s)},i=>{e(()=>{const s=new V(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Go(s)})})}Ko(e,n){const i=this.Uo(this.Vo);this.stream=this.Qo(e,n),this.stream.Jr(()=>{i(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(s=>{i(()=>this.Go(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}ko(){this.state=5,this.Co.Ao(async()=>{this.state=0,this.start()})}Go(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return n=>{this.Ws.enqueueAndForget(()=>this.Vo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h4 extends Bx{constructor(e,n,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}Qo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.Co.reset();const n=_B(this.serializer,e),i=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?Ft(o.readTime):pe.min()}(e);return this.listener.zo(n,i)}jo(e){const n={};n.database=ah(this.serializer),n.addTarget=function(s,o){let c;const l=o.target;return c=ap(l)?{documents:fx(s,l)}:{query:px(s,l)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=cx(s,o.resumeToken):o.snapshotVersion.compareTo(pe.min())>0&&(c.readTime=wc(s,o.snapshotVersion.toTimestamp())),c}(this.serializer,e);const i=SB(this.serializer,e);i&&(n.labels=i),this.Fo(n)}Wo(e){const n={};n.database=ah(this.serializer),n.removeTarget=e,this.Fo(n)}}class d4 extends Bx{constructor(e,n,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const n=EB(e.writeResults,e.commitTime),i=Ft(e.commitTime);return this.listener.Zo(i,n)}return he(!e.writeResults||e.writeResults.length===0),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=ah(this.serializer),this.Fo(e)}Yo(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>ch(this.serializer,i))};this.Fo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4 extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.eu=!1}nu(){if(this.eu)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.co(e,n,i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(x.UNKNOWN,s.toString())})}fo(e,n,i,s){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.fo(e,n,i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(x.UNKNOWN,o.toString())})}terminate(){this.eu=!0}}class p4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){this.su===0&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){this.state==="Online"?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,e==="Online"&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Ot(n),this.ru=!1):B("OnlineStateTracker",n)}hu(){this.iu!==null&&(this.iu.cancel(),this.iu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr(c=>{i.enqueueAndForget(async()=>{Ds(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const d=J(l);d.du.add(4),await Kc(d),d.mu.set("Unknown"),d.du.delete(4),await Fh(d)}(this))})}),this.mu=new p4(i,s)}}async function Fh(t){if(Ds(t))for(const e of t.wu)await e(!0)}async function Kc(t){for(const e of t.wu)await e(!1)}function fm(t,e){const n=J(t);n.fu.has(e.targetId)||(n.fu.set(e.targetId,e),M0(n)?O0(n):Gc(n).No()&&P0(n,e))}function uh(t,e){const n=J(t),i=Gc(n);n.fu.delete(e),i.No()&&jx(n,e),n.fu.size===0&&(i.No()?i.$o():Ds(n)&&n.mu.set("Unknown"))}function P0(t,e){t.gu.Ot(e.targetId),Gc(t).jo(e)}function jx(t,e){t.gu.Ot(e),Gc(t).Wo(e)}function O0(t){t.gu=new mB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.fu.get(e)||null}),Gc(t).start(),t.mu.ou()}function M0(t){return Ds(t)&&!Gc(t).xo()&&t.fu.size>0}function Ds(t){return J(t).du.size===0}function $x(t){t.gu=void 0}async function g4(t){t.fu.forEach((e,n)=>{P0(t,e)})}async function v4(t,e){$x(t),M0(t)?(t.mu.au(e),O0(t)):t.mu.set("Unknown")}async function y4(t,e,n){if(t.mu.set("Online"),e instanceof ax&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.fu.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.fu.delete(c),i.gu.removeTarget(c))}(t,e)}catch(i){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gp(t,i)}else if(e instanceof Lf?t.gu.Kt(e):e instanceof ox?t.gu.Jt(e):t.gu.zt(e),!n.isEqual(pe.min()))try{const i=await Px(t.localStore);n.compareTo(i)>=0&&await function(s,o){const c=s.gu.Xt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.fu.get(d);f&&s.fu.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach(l=>{const d=s.fu.get(l);if(!d)return;s.fu.set(l,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),jx(s,l);const f=new fs(d.target,l,1,d.sequenceNumber);P0(s,f)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(i){B("RemoteStore","Failed to raise snapshot:",i),await gp(t,i)}}async function gp(t,e,n){if(!Rs(e))throw e;t.du.add(1),await Kc(t),t.mu.set("Offline"),n||(n=()=>Px(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.du.delete(1),await Fh(t)})}function qx(t,e){return e().catch(n=>gp(t,n,e))}async function zc(t){const e=J(t),n=_s(e);let i=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;w4(e);)try{const s=await r4(e.localStore,i);if(s===null){e.lu.length===0&&n.$o();break}i=s.batchId,b4(e,s)}catch(s){await gp(e,s)}Kx(e)&&zx(e)}function w4(t){return Ds(t)&&t.lu.length<10}function b4(t,e){t.lu.push(e);const n=_s(t);n.No()&&n.Jo&&n.Yo(e.mutations)}function Kx(t){return Ds(t)&&!_s(t).xo()&&t.lu.length>0}function zx(t){_s(t).start()}async function I4(t){_s(t).tu()}async function _4(t){const e=_s(t);for(const n of t.lu)e.Yo(n.mutations)}async function E4(t,e,n){const i=t.lu.shift(),s=b0.from(i,e,n);await qx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zc(t)}async function S4(t,e){e&&_s(t).Jo&&await async function(n,i){if(s=i.code,rx(s)&&s!==x.ABORTED){const o=n.lu.shift();_s(n).Oo(),await qx(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await zc(n)}var s}(t,e),Kx(t)&&zx(t)}async function jT(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const i=Ds(n);n.du.add(3),await Kc(n),i&&n.mu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.du.delete(3),await Fh(n)}async function Qy(t,e){const n=J(t);e?(n.du.delete(2),await Fh(n)):e||(n.du.add(2),await Kc(n),n.mu.set("Unknown"))}function Gc(t){return t.yu||(t.yu=function(e,n,i){const s=J(e);return s.nu(),new h4(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Jr:g4.bind(null,t),Zr:v4.bind(null,t),zo:y4.bind(null,t)}),t.wu.push(async e=>{e?(t.yu.Oo(),M0(t)?O0(t):t.mu.set("Unknown")):(await t.yu.stop(),$x(t))})),t.yu}function _s(t){return t.pu||(t.pu=function(e,n,i){const s=J(e);return s.nu(),new d4(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Jr:I4.bind(null,t),Zr:S4.bind(null,t),Xo:_4.bind(null,t),Zo:E4.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),await zc(t)):(await t.pu.stop(),t.lu.length>0&&(B("RemoteStore",`Stopping write stream with ${t.lu.length} pending writes`),t.lu=[]))})),t.pu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,n,i,s,o){const c=Date.now()+i,l=new L0(e,n,c,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hc(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),Rs(t))return new V(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.comparator=e?(n,i)=>e(n,i)||W.comparator(n.key,i.key):(n,i)=>W.comparator(n.key,i.key),this.keyedMap=bl(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new ic(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ic)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ic;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.Iu=new kt(W.comparator)}track(e){const n=e.doc.key,i=this.Iu.get(n);i?e.type!==0&&i.type===3?this.Iu=this.Iu.insert(n,e):e.type===3&&i.type!==1?this.Iu=this.Iu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Iu=this.Iu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Iu=this.Iu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Iu=this.Iu.remove(n):e.type===1&&i.type===2?this.Iu=this.Iu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Iu=this.Iu.insert(n,{type:2,doc:e.doc}):te():this.Iu=this.Iu.insert(n,e)}Tu(){const e=[];return this.Iu.inorderTraversal((n,i)=>{e.push(i)}),e}}class _c{constructor(e,n,i,s,o,c,l,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,o){const c=[];return n.forEach(l=>{c.push({type:0,doc:l})}),new _c(e,n,ic.emptySet(n),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Eu=void 0,this.listeners=[]}}class C4{constructor(){this.queries=new xs(e=>qR(e),Dh),this.onlineState="Unknown",this.Au=new Set}}async function F0(t,e){const n=J(t),i=e.query;let s=!1,o=n.queries.get(i);if(o||(s=!0,o=new T4),s)try{o.Eu=await n.onListen(i)}catch(c){const l=Hc(c,`Initialization of query '${qy(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.listeners.push(e),e.Ru(n.onlineState),o.Eu&&e.vu(o.Eu)&&V0(n)}async function U0(t,e){const n=J(t),i=e.query;let s=!1;const o=n.queries.get(i);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),s=o.listeners.length===0)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function A4(t,e){const n=J(t);let i=!1;for(const s of e){const o=s.query,c=n.queries.get(o);if(c){for(const l of c.listeners)l.vu(s)&&(i=!0);c.Eu=s}}i&&V0(n)}function k4(t,e,n){const i=J(t),s=i.queries.get(e);if(s)for(const o of s.listeners)o.onError(n);i.queries.delete(e)}function V0(t){t.Au.forEach(e=>{e.next()})}class B0{constructor(e,n,i){this.query=e,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new _c(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),n=!0):this.Du(e,this.onlineState)&&(this.Cu(e),n=!0),this.Vu=e,n}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let n=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),n=!0),n}Du(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.xu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Su(e){if(e.docChanges.length>0)return!0;const n=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Cu(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this.Nu=e,this.byteLength=n}ku(){return"metadata"in this.Nu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.serializer=e}Hi(e){return Ji(this.serializer,e)}Ji(e){return e.metadata.exists?dx(this.serializer,e.document,!1):ut.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Ft(e)}}class x4{constructor(e,n,i){this.Ou=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gx(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++n;const i=Be.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Mu(e){const n=new Map,i=new qT(this.serializer);for(const s of e)if(s.metadata.queries){const o=i.Hi(s.metadata.name);for(const c of s.metadata.queries){const l=(n.get(c)||Ce()).add(o);n.set(c,l)}}return n}async complete(){const e=await s4(this.localStore,new qT(this.serializer),this.documents,this.Ou.id),n=this.Mu(this.documents);for(const i of this.queries)await o4(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:e}}}function Gx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.key=e}}class Wx{constructor(e){this.key=e}}class Yx{constructor(e,n){this.query=e,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Ce(),this.mutatedKeys=Ce(),this.Ku=zR(e),this.Gu=new ic(this.Ku)}get Qu(){return this.Lu}zu(e,n){const i=n?n.ju:new $T,s=n?n.Gu:this.Gu;let o=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const w=s.get(g),I=Nh(this.query,v)?v:null,A=!!w&&this.mutatedKeys.has(w.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;w&&I?w.data.isEqual(I.data)?A!==b&&(i.track({type:3,doc:I}),S=!0):this.Wu(w,I)||(i.track({type:2,doc:I}),S=!0,(d&&this.Ku(I,d)>0||f&&this.Ku(I,f)<0)&&(l=!0)):!w&&I?(i.track({type:0,doc:I}),S=!0):w&&!I&&(i.track({type:1,doc:w}),S=!0,(d||f)&&(l=!0)),S&&(I?(c=c.add(I),o=b?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{Gu:c,ju:i,Mi:l,mutatedKeys:o}}Wu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.ju.Tu();o.sort((f,g)=>function(v,w){const I=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(v)-I(w)}(f.type,g.type)||this.Ku(f.doc,g.doc)),this.Hu(i);const c=n?this.Ju():[],l=this.Uu.size===0&&this.current?1:0,d=l!==this.qu;return this.qu=l,o.length!==0||d?{snapshot:new _c(this.query,e.Gu,s,o,e.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),Yu:c}:{Yu:c}}Ru(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new $T,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Ce(),this.Gu.forEach(i=>{this.Zu(i.key)&&(this.Uu=this.Uu.add(i.key))});const n=[];return e.forEach(i=>{this.Uu.has(i)||n.push(new Wx(i))}),this.Uu.forEach(i=>{e.has(i)||n.push(new Hx(i))}),n}Xu(e){this.Lu=e.Wi,this.Uu=Ce();const n=this.zu(e.documents);return this.applyChanges(n,!0)}tc(){return _c.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class D4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class N4{constructor(e){this.key=e,this.ec=!1}}class P4{constructor(e,n,i,s,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new xs(l=>qR(l),Dh),this.ic=new Map,this.rc=new Set,this.oc=new kt(W.comparator),this.uc=new Map,this.cc=new A0,this.ac={},this.hc=new Map,this.lc=Fo.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function O4(t,e){const n=z0(t);let i,s;const o=n.sc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),s=o.view.tc();else{const c=await bc(n.localStore,ei(e));n.isPrimaryClient&&fm(n.remoteStore,c);const l=n.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,s=await j0(n,e,i,l==="current",c.resumeToken)}return s}async function j0(t,e,n,i,s){t.dc=(v,w,I)=>async function(A,b,S,C){let P=b.view.zu(S);P.Mi&&(P=await fp(A.localStore,b.query,!1).then(({documents:Y})=>b.view.zu(Y,P)));const O=C&&C.targetChanges.get(b.targetId),Q=b.view.applyChanges(P,A.isPrimaryClient,O);return Jy(A,b.targetId,Q.Yu),Q.snapshot}(t,v,w,I);const o=await fp(t.localStore,e,!0),c=new Yx(e,o.Wi),l=c.zu(o.documents),d=Mh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=c.applyChanges(l,t.isPrimaryClient,d);Jy(t,n,f.Yu);const g=new D4(e,n,c);return t.sc.set(e,g),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),f.snapshot}async function M4(t,e){const n=J(t),i=n.sc.get(e),s=n.ic.get(i.targetId);if(s.length>1)return n.ic.set(i.targetId,s.filter(o=>!Dh(o,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ic(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),uh(n.remoteStore,i.targetId),Ec(n,i.targetId)}).catch(ks)):(Ec(n,i.targetId),await Ic(n.localStore,i.targetId,!0))}async function L4(t,e,n){const i=G0(t);try{const s=await function(o,c){const l=J(o),d=gt.now(),f=c.reduce((w,I)=>w.add(I.key),Ce());let g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=Yn(),A=Ce();return l.Ki.getEntries(w,f).next(b=>{I=b,I.forEach((S,C)=>{C.isValidDocument()||(A=A.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,I)).next(b=>{g=b;const S=[];for(const C of c){const P=fB(C,g.get(C.key).overlayedDocument);P!=null&&S.push(new kr(C.key,P,OR(P.value.mapValue),mt.exists(!0)))}return l.mutationQueue.addMutationBatch(w,d,S,c)}).next(b=>{v=b;const S=b.applyToLocalDocumentSet(g,A);return l.documentOverlayCache.saveOverlays(w,b.batchId,S)})}).then(()=>({batchId:v.batchId,changes:HR(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,c,l){let d=o.ac[o.currentUser.toKey()];d||(d=new kt(Te)),d=d.insert(c,l),o.ac[o.currentUser.toKey()]=d}(i,s.batchId,n),await Rr(i,s.changes),await zc(i.remoteStore)}catch(s){const o=Hc(s,"Failed to persist write");n.reject(o)}}async function Qx(t,e){const n=J(t);try{const i=await i4(n.localStore,e);e.targetChanges.forEach((s,o)=>{const c=n.uc.get(o);c&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?he(c.ec):s.removedDocuments.size>0&&(he(c.ec),c.ec=!1))}),await Rr(n,i,e)}catch(i){await ks(i)}}function KT(t,e,n){const i=J(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.sc.forEach((o,c)=>{const l=c.view.Ru(e);l.snapshot&&s.push(l.snapshot)}),function(o,c){const l=J(o);l.onlineState=c;let d=!1;l.queries.forEach((f,g)=>{for(const v of g.listeners)v.Ru(c)&&(d=!0)}),d&&V0(l)}(i.eventManager,e),s.length&&i.nc.zo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function F4(t,e,n){const i=J(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.uc.get(e),o=s&&s.key;if(o){let c=new kt(W.comparator);c=c.insert(o,ut.newNoDocument(o,pe.min()));const l=Ce().add(o),d=new Oh(pe.min(),new Map,new nt(Te),c,l);await Qx(i,d),i.oc=i.oc.remove(o),i.uc.delete(e),K0(i)}else await Ic(i.localStore,e,!1).then(()=>Ec(i,e,n)).catch(ks)}async function U4(t,e){const n=J(t),i=e.batch.batchId;try{const s=await n4(n.localStore,e);q0(n,i,null),$0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Rr(n,s)}catch(s){await ks(s)}}async function V4(t,e,n){const i=J(t);try{const s=await function(o,c){const l=J(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(he(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(i.localStore,e);q0(i,e,n),$0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Rr(i,s)}catch(s){await ks(s)}}async function B4(t,e){const n=J(t);Ds(n.remoteStore)||B("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(o){const c=J(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>c.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();const s=n.hc.get(i)||[];s.push(e),n.hc.set(i,s)}catch(i){const s=Hc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function $0(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function q0(t,e,n){const i=J(t);let s=i.ac[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.ac[i.currentUser.toKey()]=s}}function Ec(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.ic.get(e))t.sc.delete(i),n&&t.nc.wc(i,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.hs(e).forEach(i=>{t.cc.containsKey(i)||Jx(t,i)})}function Jx(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(uh(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),K0(t))}function Jy(t,e,n){for(const i of n)i instanceof Hx?(t.cc.addReference(i.key,e),j4(t,i)):i instanceof Wx?(B("SyncEngine","Document no longer in limbo: "+i.key),t.cc.removeReference(i.key,e),t.cc.containsKey(i.key)||Jx(t,i.key)):te()}function j4(t,e){const n=e.key,i=n.path.canonicalString();t.oc.get(n)||t.rc.has(i)||(B("SyncEngine","New document in limbo: "+n),t.rc.add(i),K0(t))}function K0(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new W(Be.fromString(e)),i=t.lc.next();t.uc.set(i,new N4(n)),t.oc=t.oc.insert(n,i),fm(t.remoteStore,new fs(ei(jc(n.path)),i,2,Hn.ct))}}async function Rr(t,e,n){const i=J(t),s=[],o=[],c=[];i.sc.isEmpty()||(i.sc.forEach((l,d)=>{c.push(i.dc(d,e,n).then(f=>{if((f||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(d.targetId,f!=null&&f.fromCache?"not-current":"current"),f){s.push(f);const g=x0.Di(d.targetId,f);o.push(g)}}))}),await Promise.all(c),i.nc.zo(s),await async function(l,d){const f=J(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(d,v=>k.forEach(v.Vi,w=>f.persistence.referenceDelegate.addReference(g,v.targetId,w)).next(()=>k.forEach(v.Si,w=>f.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))}catch(g){if(!Rs(g))throw g;B("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const v=g.targetId;if(!g.fromCache){const w=f.Li.get(v),I=w.snapshotVersion,A=w.withLastLimboFreeSnapshotVersion(I);f.Li=f.Li.insert(v,A)}}}(i.localStore,o))}async function $4(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const i=await Nx(n.localStore,e);n.currentUser=e,function(s,o){s.hc.forEach(c=>{c.forEach(l=>{l.reject(new V(x.CANCELLED,o))})}),s.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Rr(n,i.Qi)}}function q4(t,e){const n=J(t),i=n.uc.get(e);if(i&&i.ec)return Ce().add(i.key);{let s=Ce();const o=n.ic.get(e);if(!o)return s;for(const c of o){const l=n.sc.get(c);s=s.unionWith(l.view.Qu)}return s}}async function K4(t,e){const n=J(t),i=await fp(n.localStore,e.query,!0),s=e.view.Xu(i);return n.isPrimaryClient&&Jy(n,e.targetId,s.Yu),s}async function z4(t,e){const n=J(t);return Lx(n.localStore,e).then(i=>Rr(n,i))}async function G4(t,e,n,i){const s=J(t),o=await function(c,l){const d=J(c),f=J(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.In(g,l).next(v=>v?d.localDocuments.getDocuments(g,v):k.resolve(null)))}(s.localStore,e);o!==null?(n==="pending"?await zc(s.remoteStore):n==="acknowledged"||n==="rejected"?(q0(s,e,i||null),$0(s,e),function(c,l){J(J(c).mutationQueue).En(l)}(s.localStore,e)):te(),await Rr(s,o)):B("SyncEngine","Cannot apply mutation batch with id: "+e)}async function H4(t,e){const n=J(t);if(z0(n),G0(n),e===!0&&n.fc!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),s=await zT(n,i.toArray());n.fc=!0,await Qy(n.remoteStore,!0);for(const o of s)fm(n.remoteStore,o)}else if(e===!1&&n.fc!==!1){const i=[];let s=Promise.resolve();n.ic.forEach((o,c)=>{n.sharedClientState.isLocalQueryTarget(c)?i.push(c):s=s.then(()=>(Ec(n,c),Ic(n.localStore,c,!0))),uh(n.remoteStore,c)}),await s,await zT(n,i),function(o){const c=J(o);c.uc.forEach((l,d)=>{uh(c.remoteStore,d)}),c.cc.ls(),c.uc=new Map,c.oc=new kt(W.comparator)}(n),n.fc=!1,await Qy(n.remoteStore,!1)}}async function zT(t,e,n){const i=J(t),s=[],o=[];for(const c of e){let l;const d=i.ic.get(c);if(d&&d.length!==0){l=await bc(i.localStore,ei(d[0]));for(const f of d){const g=i.sc.get(f),v=await K4(i,g);v.snapshot&&o.push(v.snapshot)}}else{const f=await Mx(i.localStore,c);l=await bc(i.localStore,f),await j0(i,Xx(f),c,!1,l.resumeToken)}s.push(l)}return i.nc.zo(o),s}function Xx(t){return $R(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function W4(t){const e=J(t);return J(J(e.localStore).persistence).bi()}async function Y4(t,e,n,i){const s=J(t);if(s.fc)return void B("SyncEngine","Ignoring unexpected query state notification.");const o=s.ic.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const c=await Lx(s.localStore,KR(o[0])),l=Oh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Wt.EMPTY_BYTE_STRING);await Rr(s,c,l);break}case"rejected":await Ic(s.localStore,e,!0),Ec(s,e,i);break;default:te()}}async function Q4(t,e,n){const i=z0(t);if(i.fc){for(const s of e){if(i.ic.has(s)){B("SyncEngine","Adding an already active target "+s);continue}const o=await Mx(i.localStore,s),c=await bc(i.localStore,o);await j0(i,Xx(o),c.targetId,!1,c.resumeToken),fm(i.remoteStore,c)}for(const s of n)i.ic.has(s)&&await Ic(i.localStore,s,!1).then(()=>{uh(i.remoteStore,s),Ec(i,s)}).catch(ks)}}function z0(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F4.bind(null,e),e.nc.zo=A4.bind(null,e.eventManager),e.nc.wc=k4.bind(null,e.eventManager),e}function G0(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}function J4(t,e,n){const i=J(t);(async function(s,o,c){try{const l=await o.getMetadata();if(await function(v,w){const I=J(v),A=Ft(w.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",b=>I.xs.getBundleMetadata(b,w.id)).then(b=>!!b&&b.createTime.compareTo(A)>=0)}(s.localStore,l))return await o.close(),c._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(l)),Promise.resolve(new Set);c._updateProgress(Gx(l));const d=new x4(l,s.localStore,o.serializer);let f=await o._c();for(;f;){const v=await d.$u(f);v&&c._updateProgress(v),f=await o._c()}const g=await d.complete();return await Rr(s,g.Bu,void 0),await function(v,w){const I=J(v);return I.persistence.runTransaction("Save bundle","readwrite",A=>I.xs.saveBundleMetadata(A,w))}(s.localStore,l),c._completeWith(g.progress),Promise.resolve(g.Fu)}catch(l){return Ir("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(s=>{i.sharedClientState.notifyBundleLoaded(s)})}class Xy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Dx(this.persistence,new xx,e.initialUser,this.serializer)}createPersistence(e){return new Rx(dm.Fs,this.serializer)}createSharedClientState(e){return new Ux}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zx extends Xy{constructor(e,n,i){super(),this.mc=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.mc.initialize(this,e),await G0(this.mc.syncEngine),await zc(this.mc.remoteStore),await this.persistence.hi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Dx(this.persistence,new xx,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new jB(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new SV(n,this.persistence);return new EV(e.asyncQueue,i)}createPersistence(e){const n=R0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new k0(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,Vx(),Ff(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ux}}class X4 extends Zx{constructor(e,n){super(e,n,!1),this.mc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.mc.syncEngine;this.sharedClientState instanceof qv&&(this.sharedClientState.syncEngine={$r:G4.bind(null,n),Mr:Y4.bind(null,n),Fr:Q4.bind(null,n),bi:W4.bind(null,n),Or:z4.bind(null,n)},await this.sharedClientState.start()),await this.persistence.hi(async i=>{await H4(this.mc.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Vx();if(!qv.D(n))throw new V(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=R0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qv(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class H0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await Qy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new C4}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new l4(s));var s;return function(o,c,l,d){return new f4(o,c,l,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,s=e.asyncQueue,o=l=>KT(this.syncEngine,l,0),c=BT.D()?new BT:new a4,new m4(n,i,s,o,c);var n,i,s,o,c}createSyncEngine(e,n){return function(i,s,o,c,l,d,f){const g=new P4(i,s,o,c,l,d);return f&&(g.fc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=J(e);B("RemoteStore","RemoteStore shutting down."),n.du.add(5),await Kc(n),n._u.shutdown(),n.mu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.Ic=e,this.serializer=n,this.metadata=new sn,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(i=>{i&&i.ku()?this.metadata.resolve(i.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Nu)}`))},i=>this.metadata.reject(i))}close(){return this.Ic.cancel()}async getMetadata(){return this.metadata.promise}async _c(){return await this.getMetadata(),this.Ec()}async Ec(){const e=await this.Ac();if(e===null)return null;const n=this.Tc.decode(e),i=Number(n);isNaN(i)&&this.Rc(`length string (${n}) is not valid number`);const s=await this.vc(i);return new R4(JSON.parse(s),e.length+i)}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ac(){for(;this.bc()<0&&!await this.Pc(););if(this.buffer.length===0)return null;const e=this.bc();e<0&&this.Rc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Pc()&&this.Rc("Reached the end of bundle when more is expected.");const n=this.Tc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pc(){const e=await this.Ic.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new V(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=J(i),c=ah(o.serializer)+"/documents",l={documents:s.map(v=>oh(o.serializer,v))},d=await o.fo("BatchGetDocuments",c,l,s.length),f=new Map;d.forEach(v=>{const w=IB(o.serializer,v);f.set(w.key.toString(),w)});const g=[];return s.forEach(v=>{const w=f.get(v.toString());he(!!w),g.push(w)}),g}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=W.fromPath(i);this.mutations.push(new y0(s,this.precondition(s)))}),await async function(n,i){const s=J(n),o=ah(s.serializer)+"/documents",c={writes:i.map(l=>ch(s.serializer,l))};await s.co("Commit",o,c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw te();n=pe.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new V(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(pe.min())?mt.exists(!1):mt.updateTime(n):mt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(pe.min()))throw new V(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(n)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,i,s,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=o,this.Vc=i.maxAttempts,this.Co=new N0(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){this.Co.Ao(async()=>{const e=new ej(this.datastore),n=this.Dc(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Cc(s)}))}).catch(i=>{this.Cc(i)})})}Dc(e){try{const n=this.updateFunction(e);return!Rh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!rx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=rn.UNAUTHENTICATED,this.clientId=wR.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{B("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Hc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Uf(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Nx(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await W0(t);B("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(s=>jT(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,o)=>jT(e.remoteStore,o)),t._onlineComponents=e}function eD(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function W0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!eD(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Uf(t,new Xy)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await Uf(t,new Xy);return t._offlineComponents}async function mm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await Zy(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await Zy(t,new H0))),t._onlineComponents}function tD(t){return W0(t).then(e=>e.persistence)}function Y0(t){return W0(t).then(e=>e.localStore)}function nD(t){return mm(t).then(e=>e.remoteStore)}function Q0(t){return mm(t).then(e=>e.syncEngine)}function ij(t){return mm(t).then(e=>e.datastore)}async function Sc(t){const e=await mm(t),n=e.eventManager;return n.onListen=O4.bind(null,e.syncEngine),n.onUnlisten=M4.bind(null,e.syncEngine),n}function rj(t){return t.asyncQueue.enqueue(async()=>{const e=await tD(t),n=await nD(t);return e.setNetworkEnabled(!0),function(i){const s=J(i);return s.du.delete(0),Fh(s)}(n)})}function sj(t){return t.asyncQueue.enqueue(async()=>{const e=await tD(t),n=await nD(t);return e.setNetworkEnabled(!1),async function(i){const s=J(i);s.du.add(0),await Kc(s),s.mu.set("Offline")}(n)})}function oj(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const c=await function(l,d){const f=J(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new V(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=Hc(c,`Failed to get document '${s} from cache`);o.reject(l)}}(await Y0(t),e,n)),n.promise}function iD(t,e,n={}){const i=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,d){const f=new pm({next:v=>{o.enqueueAndForget(()=>U0(s,g));const w=v.docs.has(c);!w&&v.fromCache?d.reject(new V(x.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&l&&l.source==="server"?d.reject(new V(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new B0(jc(c.path),f,{includeMetadataChanges:!0,xu:!0});return F0(s,g)}(await Sc(t),t.asyncQueue,e,n,i)),i.promise}function aj(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const c=await fp(i,s,!0),l=new Yx(s,c.Wi),d=l.zu(c.documents),f=l.applyChanges(d,!1);o.resolve(f.snapshot)}catch(c){const l=Hc(c,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Y0(t),e,n)),n.promise}function rD(t,e,n={}){const i=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,d){const f=new pm({next:v=>{o.enqueueAndForget(()=>U0(s,g)),v.fromCache&&l.source==="server"?d.reject(new V(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),g=new B0(c,f,{includeMetadataChanges:!0,xu:!0});return F0(s,g)}(await Sc(t),t.asyncQueue,e,n,i)),i.promise}function cj(t,e){const n=new pm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){J(i).Au.add(s),s.next()}(await Sc(t),n)),()=>{n.yc(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){J(i).Au.delete(s)}(await Sc(t),n))}}function uj(t,e,n,i){const s=function(o,c){let l;return l=typeof o=="string"?new TextEncoder().encode(o):o,function(d,f){return new Z4(d,f)}(function(d,f){if(d instanceof Uint8Array)return GT(d,f);if(d instanceof ArrayBuffer)return GT(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),c)}(n,Lh(e));t.asyncQueue.enqueueAndForget(async()=>{J4(await Q0(t),s,i)})}function lj(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){const s=J(n);return s.persistence.runTransaction("Get named query","readonly",o=>s.xs.getNamedQuery(o,i))}(await Y0(t),e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e,n){if(!n)throw new V(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sD(t,e,n,i){if(e===!0&&i===!0)throw new V(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WT(t){if(!W.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YT(t){if(W.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function je(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gm(t);throw new V(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oD(t,e){if(e<=0)throw new V(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new V(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QT(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new hV;switch(n.type){case"firstParty":return new mV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new V(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=HT.get(e);n&&(B("ComponentProvider","Removing Datastore"),HT.delete(e),n.terminate())}(this),Promise.resolve()}}function aD(t,e,n,i={}){var s;const o=(t=je(t,Uh))._getSettings();if(o.host!=="firestore.googleapis.com"&&o.host!==e&&Ir("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=rn.MOCK_USER;else{c=UF(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new V(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rn(d)}t._authCredentials=new dV(new yR(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}}class wn{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wn(this.firestore,e,this._query)}}class Xi extends wn{constructor(e,n,i){super(e,n,jc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new W(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function X0(t,e,...n){if(t=ce(t),J0("collection","path",e),t instanceof Uh){const i=Be.fromString(e,...n);return YT(i),new Xi(t,null,i)}{if(!(t instanceof lt||t instanceof Xi))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return YT(i),new Xi(t.firestore,null,i)}}function hj(t,e){if(t=je(t,Uh),J0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wn(t,null,function(n){return new Ar(Be.emptyPath(),n)}(e))}function Yi(t,e,...n){if(t=ce(t),arguments.length===1&&(e=wR.A()),J0("doc","path",e),t instanceof Uh){const i=Be.fromString(e,...n);return WT(i),new lt(t,null,new W(i))}{if(!(t instanceof lt||t instanceof Xi))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return WT(i),new lt(t.firestore,t instanceof Xi?t.converter:null,new W(i))}}function cD(t,e){return t=ce(t),e=ce(e),(t instanceof lt||t instanceof Xi)&&(e instanceof lt||e instanceof Xi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function uD(t,e){return t=ce(t),e=ce(e),t instanceof wn&&e instanceof wn&&t.firestore===e.firestore&&Dh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new N0(this,"async_queue_retry"),this.qc=()=>{const n=Ff();n&&B("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Co.vo()};const e=Ff();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const n=Ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const n=new sn;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}async Gc(){if(this.kc.length!==0){try{await this.kc[0](),this.kc.shift(),this.Co.reset()}catch(e){if(!Rs(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.kc.length>0&&this.Co.Ao(()=>this.Gc())}}Kc(e){const n=this.Nc.then(()=>(this.Fc=!0,e().catch(i=>{this.Mc=i,this.Fc=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw Ot("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Fc=!1,i))));return this.Nc=n,n}enqueueAfterDelay(e,n,i){this.Uc(),this.Lc.indexOf(e)>-1&&(n=0);const s=L0.createAndSchedule(this,e,n,i,o=>this.Qc(o));return this.$c.push(s),s}Uc(){this.Mc&&te()}verifyOperationInProgress(){}async zc(){let e;do e=this.Nc,await e;while(e!==this.Nc)}jc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function ew(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class fj{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=-1;class It extends Uh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new dj,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lD(this),this._firestoreClient.terminate()}}function mj(t,e){const n=typeof t=="object"?t:qp(),i=typeof t=="string"?t:e||"(default)",s=Cr(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=MF("firestore");o&&aD(s,...o)}return s}function Yt(t){return t._firestoreClient||lD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lD(t){var e,n,i;const s=t._freezeSettings(),o=function(c,l,d,f){return new GV(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new nj(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function gj(t,e){dD(t=je(t,It));const n=Yt(t);if(n._uninitializedComponentsProvider)throw new V(x.FAILED_PRECONDITION,"SDK cache is already specified.");Ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),s=new H0;return hD(n,s,new Zx(s,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function vj(t){dD(t=je(t,It));const e=Yt(t);if(e._uninitializedComponentsProvider)throw new V(x.FAILED_PRECONDITION,"SDK cache is already specified.");Ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new H0;return hD(e,i,new X4(i,n.cacheSizeBytes))}function hD(t,e,n){const i=new sn;return t.asyncQueue.enqueue(async()=>{try{await Uf(t,n),await Zy(t,e),i.resolve()}catch(s){const o=s;if(!eD(o))throw o;Ir("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}}).then(()=>i.promise)}function yj(t){if(t._initialized&&!t._terminated)throw new V(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!ki.D())return Promise.resolve();const i=n+"main";await ki.delete(i)}(R0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function wj(t){return function(e){const n=new sn;return e.asyncQueue.enqueueAndForget(async()=>B4(await Q0(e),n)),n.promise}(Yt(t=je(t,It)))}function bj(t){return rj(Yt(t=je(t,It)))}function Ij(t){return sj(Yt(t=je(t,It)))}function _j(t,e){const n=Yt(t=je(t,It)),i=new fj;return uj(n,t._databaseId,e,i),i}function Ej(t,e){return lj(Yt(t=je(t,It)),e).then(n=>n?new wn(t,null,n.query):null)}function dD(t){if(t._initialized||t._terminated)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(Wt.fromBase64String(e))}catch(n){throw new V(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tr(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=/^__.*__$/;class Tj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $c(e,this.data,n,this.fieldTransforms)}}class fD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class ym{constructor(e,n,i,s,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new ym(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Zc({path:i,ta:!1});return s.ea(e),s}na(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Zc({path:i,ta:!1});return s.Jc(),s}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return vp(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(e.length===0)throw this.ia("Document fields must not be empty");if(pD(this.Yc)&&Sj.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class Cj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Lh(e)}ua(e,n,i,s=!1){return new ym({Yc:e,methodName:n,oa:i,path:Mt.emptyPath(),ta:!1,ra:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yo(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new Cj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wm(t,e,n,i,s,o={}){const c=t.ua(o.merge||o.mergeFields?2:0,e,n,s);nb("Data must be an object, but it was:",c,i);const l=vD(i,c);let d,f;if(o.merge)d=new Wn(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const w=tw(e,v,n);if(!c.contains(w))throw new V(x.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);wD(g,w)||g.push(w)}d=new Wn(g),f=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=c.fieldTransforms;return new Tj(new mn(l),d,f)}class Vh extends Wo{_toFieldTransform(e){if(e.Yc!==2)throw e.Yc===1?e.ia(`${this._methodName}() can only appear at the top level of your update data`):e.ia(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vh}}function mD(t,e,n){return new ym({Yc:3,oa:e.settings.oa,methodName:t._methodName,ta:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Z0 extends Wo{_toFieldTransform(e){return new Ph(e.path,new vc)}isEqual(e){return e instanceof Z0}}class Aj extends Wo{constructor(e,n){super(e),this.ca=n}_toFieldTransform(e){const n=mD(this,e,!0),i=this.ca.map(o=>Qo(o,n)),s=new Po(i);return new Ph(e.path,s)}isEqual(e){return this===e}}class kj extends Wo{constructor(e,n){super(e),this.ca=n}_toFieldTransform(e){const n=mD(this,e,!0),i=this.ca.map(o=>Qo(o,n)),s=new Oo(i);return new Ph(e.path,s)}isEqual(e){return this===e}}class Rj extends Wo{constructor(e,n){super(e),this.aa=n}_toFieldTransform(e){const n=new yc(e.serializer,JR(e.serializer,this.aa));return new Ph(e.path,n)}isEqual(e){return this===e}}function eb(t,e,n,i){const s=t.ua(1,e,n);nb("Data must be an object, but it was:",s,i);const o=[],c=mn.empty();Ho(i,(d,f)=>{const g=ib(e,d,n);f=ce(f);const v=s.na(g);if(f instanceof Vh)o.push(g);else{const w=Qo(f,v);w!=null&&(o.push(g),c.set(g,w))}});const l=new Wn(o);return new fD(c,l,s.fieldTransforms)}function tb(t,e,n,i,s,o){const c=t.ua(1,e,n),l=[tw(e,i,n)],d=[s];if(o.length%2!=0)throw new V(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)l.push(tw(e,o[w])),d.push(o[w+1]);const f=[],g=mn.empty();for(let w=l.length-1;w>=0;--w)if(!wD(f,l[w])){const I=l[w];let A=d[w];A=ce(A);const b=c.na(I);if(A instanceof Vh)f.push(I);else{const S=Qo(A,b);S!=null&&(f.push(I),g.set(I,S))}}const v=new Wn(f);return new fD(g,v,c.fieldTransforms)}function gD(t,e,n,i=!1){return Qo(n,t.ua(i?4:3,e))}function Qo(t,e){if(yD(t=ce(t)))return nb("Unsupported field value:",e,t),vD(t,e);if(t instanceof Wo)return function(n,i){if(!pD(i.Yc))throw i.ia(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ia(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ta&&e.Yc!==4)throw e.ia("Nested arrays are not supported");return function(n,i){const s=[];let o=0;for(const c of n){let l=Qo(c,i.sa(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=ce(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return JR(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=gt.fromDate(n);return{timestampValue:wc(i.serializer,s)}}if(n instanceof gt){const s=new gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wc(i.serializer,s)}}if(n instanceof vm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof tr)return{bytesValue:cx(i.serializer,n._byteString)};if(n instanceof lt){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.ia(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:E0(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.ia(`Unsupported field value: ${gm(n)}`)}(t,e)}function vD(t,e){const n={};return DR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(i,s)=>{const o=Qo(s,e.Xc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function yD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof vm||t instanceof tr||t instanceof lt||t instanceof Wo)}function nb(t,e,n){if(!yD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=gm(n);throw i==="an object"?e.ia(t+" a custom object"):e.ia(t+" "+i)}}function tw(t,e,n){if((e=ce(e))instanceof Es)return e._internalPath;if(typeof e=="string")return ib(t,e);throw vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const xj=new RegExp("[~\\*/\\[\\]]");function ib(t,e,n){if(e.search(xj)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Es(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vp(t,e,n,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${s}`),d+=")"),new V(x.INVALID_ARGUMENT,l+t+d)}function wD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Dj extends lh{data(){return super.data()}}function bm(t,e){return typeof e=="string"?ib(t,e):e instanceof Es?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rb{}class Bh extends rb{}function Zr(t,e,...n){let i=[];e instanceof rb&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof sb).length,c=s.filter(l=>l instanceof Im).length;if(o>1||o>0&&c>0)throw new V(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Im extends Bh{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Im(e,n,i)}_apply(e){const n=this._parse(e);return _D(e._query,n),new wn(e.firestore,e.converter,$y(e._query,n))}_parse(e){const n=Yo(e.firestore);return function(s,o,c,l,d,f,g){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new V(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){XT(g,f);const w=[];for(const I of g)w.push(JT(l,s,I));v={arrayValue:{values:w}}}else v=JT(l,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||XT(g,f),v=gD(c,o,g,f==="in"||f==="not-in");return Me.create(d,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Nj(t,e,n){const i=e,s=bm("where",t);return Im._create(s,i,n)}class sb extends rb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sb(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:tt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const l of c)_D(o,l),o=$y(o,l)}(e._query,n),new wn(e.firestore,e.converter,$y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ob extends Bh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ob(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new V(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new nc(s,o);return function(l,d){if(g0(l)===null){const f=om(l);f!==null&&ED(l,f,d.field)}}(i,c),c}(e._query,this._field,this._direction);return new wn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ar(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Pj(t,e="asc"){const n=e,i=bm("orderBy",t);return ob._create(i,n)}class _m extends Bh{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new _m(e,n,i)}_apply(e){return new wn(e.firestore,e.converter,up(e._query,this._limit,this._limitType))}}function Oj(t){return oD("limit",t),_m._create("limit",t,"F")}function Mj(t){return oD("limitToLast",t),_m._create("limitToLast",t,"L")}class Em extends Bh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Em(e,n,i)}_apply(e){const n=ID(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(i,s){return new Ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Lj(...t){return Em._create("startAt",t,!0)}function Fj(...t){return Em._create("startAfter",t,!1)}class Sm extends Bh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Sm(e,n,i)}_apply(e){const n=ID(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(i,s){return new Ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function Uj(...t){return Sm._create("endBefore",t,!1)}function Vj(...t){return Sm._create("endAt",t,!0)}function ID(t,e,n,i){if(n[0]=ce(n[0]),n[0]instanceof lh)return function(s,o,c,l,d){if(!l)throw new V(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const g of Eo(s))if(g.field.isKeyField())f.push(Do(o,l.key));else{const v=l.data.field(g.field);if(p0(v))throw new V(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const w=g.field.canonicalString();throw new V(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}f.push(v)}return new Is(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=Yo(t.firestore);return function(o,c,l,d,f,g){const v=o.explicitOrderBy;if(f.length>v.length)throw new V(x.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let I=0;I<f.length;I++){const A=f[I];if(v[I].field.isKeyField()){if(typeof A!="string")throw new V(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!v0(o)&&A.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const b=o.path.child(Be.fromString(A));if(!W.isDocumentKey(b))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new W(b);w.push(Do(c,S))}else{const b=gD(l,d,A);w.push(b)}}return new Is(w,g)}(t._query,t.firestore._databaseId,s,e,n,i)}}function JT(t,e,n){if(typeof(n=ce(n))=="string"){if(n==="")throw new V(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v0(e)&&n.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!W.isDocumentKey(i))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Do(t,new W(i))}if(n instanceof lt)return Do(t,n._key);throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(n)}.`)}function XT(t,e){if(!Array.isArray(t)||t.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _D(t,e){if(e.isInequality()){const i=om(t),s=e.field;if(i!==null&&!i.isEqual(s))throw new V(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const o=g0(t);o!==null&&ED(t,s,o)}const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ED(t,e,n){if(!n.isEqual(e))throw new V(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class ab{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){const i={};return Ho(e.fields,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new vm(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=NR(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const n=ys(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);he(yx(i));const s=new ws(i.get(1),i.get(3)),o=new W(i.popFirst(5));return s.isEqual(n)||Ot(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Bj extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _r extends lh{constructor(e,n,i,s,o,c){super(e,n,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(bm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Ol extends _r{data(e={}){return super.data(e)}}class Ss{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new go(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ol(this._firestore,this._userDataWriter,i.key,i,new go(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const l=new Ol(i._firestore,i._userDataWriter,c.doc.key,c.doc,new go(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const l=new Ol(i._firestore,i._userDataWriter,c.doc.key,c.doc,new go(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:jj(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function SD(t,e){return t instanceof _r&&e instanceof _r?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ss&&e instanceof Ss&&t._firestore===e._firestore&&uD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t){t=je(t,lt);const e=je(t.firestore,It);return iD(Yt(e),t._key).then(n=>ub(e,t,n))}class Jo extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function qj(t){t=je(t,lt);const e=je(t.firestore,It),n=Yt(e),i=new Jo(e);return oj(n,t._key).then(s=>new _r(e,i,t._key,s,new go(s!==null&&s.hasLocalMutations,!0),t.converter))}function Kj(t){t=je(t,lt);const e=je(t.firestore,It);return iD(Yt(e),t._key,{source:"server"}).then(n=>ub(e,t,n))}function TD(t){t=je(t,wn);const e=je(t.firestore,It),n=Yt(e),i=new Jo(e);return bD(t._query),rD(n,t._query).then(s=>new Ss(e,i,t,s))}function zj(t){t=je(t,wn);const e=je(t.firestore,It),n=Yt(e),i=new Jo(e);return aj(n,t._query).then(s=>new Ss(e,i,t,s))}function Gj(t){t=je(t,wn);const e=je(t.firestore,It),n=Yt(e),i=new Jo(e);return rD(n,t._query,{source:"server"}).then(s=>new Ss(e,i,t,s))}function yp(t,e,n){t=je(t,lt);const i=je(t.firestore,It),s=Tm(t.converter,e,n);return Wc(i,[wm(Yo(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,mt.none())])}function ZT(t,e,n,...i){t=je(t,lt);const s=je(t.firestore,It),o=Yo(s);let c;return c=typeof(e=ce(e))=="string"||e instanceof Es?tb(o,"updateDoc",t._key,e,n,i):eb(o,"updateDoc",t._key,e),Wc(s,[c.toMutation(t._key,mt.exists(!0))])}function cb(t){return Wc(je(t.firestore,It),[new qc(t._key,mt.none())])}function Hj(t,e){const n=je(t.firestore,It),i=Yi(t),s=Tm(t.converter,e);return Wc(n,[wm(Yo(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,mt.exists(!1))]).then(()=>i)}function CD(t,...e){var n,i,s;t=ce(t);let o={includeMetadataChanges:!1},c=0;typeof e[c]!="object"||ew(e[c])||(o=e[c],c++);const l={includeMetadataChanges:o.includeMetadataChanges};if(ew(e[c])){const v=e[c];e[c]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[c+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,f,g;if(t instanceof lt)f=je(t.firestore,It),g=jc(t._key.path),d={next:v=>{e[c]&&e[c](ub(f,t,v))},error:e[c+1],complete:e[c+2]};else{const v=je(t,wn);f=je(v.firestore,It),g=v._query;const w=new Jo(f);d={next:I=>{e[c]&&e[c](new Ss(f,w,v,I))},error:e[c+1],complete:e[c+2]},bD(t._query)}return function(v,w,I,A){const b=new pm(A),S=new B0(w,b,I);return v.asyncQueue.enqueueAndForget(async()=>F0(await Sc(v),S)),()=>{b.yc(),v.asyncQueue.enqueueAndForget(async()=>U0(await Sc(v),S))}}(Yt(f),g,l,d)}function Wj(t,e){return cj(Yt(t=je(t,It)),ew(e)?e:{next:e})}function Wc(t,e){return function(n,i){const s=new sn;return n.asyncQueue.enqueueAndForget(async()=>L4(await Q0(n),i,s)),s.promise}(Yt(t),e)}function ub(t,e,n){const i=n.docs.get(e._key),s=new Jo(t);return new _r(t,s,e._key,i,new go(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yo(e)}set(e,n,i){this._verifyNotCommitted();const s=os(e,this._firestore),o=Tm(s.converter,n,i),c=wm(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,mt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const o=os(e,this._firestore);let c;return c=typeof(n=ce(n))=="string"||n instanceof Es?tb(this._dataReader,"WriteBatch.update",o._key,n,i,s):eb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(c.toMutation(o._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=os(e,this._firestore);return this._mutations=this._mutations.concat(new qc(n._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function os(t,e){if((t=ce(t)).firestore!==e)throw new V(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Yo(e)}get(e){const n=os(e,this._firestore),i=new Bj(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return te();const o=s[0];if(o.isFoundDocument())return new lh(this._firestore,i,o.key,o,n.converter);if(o.isNoDocument())return new lh(this._firestore,i,n._key,null,n.converter);throw te()})}set(e,n,i){const s=os(e,this._firestore),o=Tm(s.converter,n,i),c=wm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,c),this}update(e,n,i,...s){const o=os(e,this._firestore);let c;return c=typeof(n=ce(n))=="string"||n instanceof Es?tb(this._dataReader,"Transaction.update",o._key,n,i,s):eb(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(e){const n=os(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=os(e,this._firestore),i=new Jo(this._firestore);return super.get(e).then(s=>new _r(this._firestore,i,n._key,s._document,new go(!1,!1),n.converter))}}function Jj(t,e,n){t=je(t,It);const i=Object.assign(Object.assign({},Yj),n);return function(s){if(s.maxAttempts<1)throw new V(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,c){const l=new sn;return s.asyncQueue.enqueueAndForget(async()=>{const d=await ij(s);new tj(s.asyncQueue,d,c,o,l).run()}),l.promise}(Yt(t),s=>e(new Qj(t,s)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return new Vh("deleteField")}function Zj(){return new Z0("serverTimestamp")}function e5(...t){return new Aj("arrayUnion",t)}function t5(...t){return new kj("arrayRemove",t)}function n5(t){return new Rj("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return Yt(t=je(t,It)),new AD(t,e=>Wc(t,e))}(function(t,e=!0){(function(n){Bc=n})(zo),yi(new Zn("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),c=new It(new fV(n.getProvider("auth-internal")),new vV(n.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ln(JS,"3.10.0",t),Ln(JS,"3.10.0","esm2017")})();var i5="firebase",r5="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(i5,r5,"app");function lb(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}const hl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$a={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function RD(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o5=s5,a5=RD,xD=new Tr("auth","Firebase",RD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new wh("@firebase/auth");function Vf(t,...e){eC.logLevel<=ze.ERROR&&eC.error(`Auth (${zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw hb(t,...e)}function yn(t,...e){return hb(t,...e)}function DD(t,e,n){const i=Object.assign(Object.assign({},a5()),{[e]:n});return new Tr("auth","Firebase",i).create(e,{appName:t.name})}function Yc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&an(t,"argument-error"),DD(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return xD.create(t,...e)}function q(t,e,...n){if(!t)throw hb(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vf(e),new Error(e)}function Ni(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;function li(t){Ni(t instanceof Function,"Expected a class definition");let e=tC.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tC.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){const n=Cr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Hl(o,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function u5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function db(){return nC()==="http:"||nC()==="https:"}function nC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(db()||Bw()||"connection"in navigator)?navigator.onLine:!0}function h5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=VF()||jw()}get(){return l5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=new jh(3e4,6e4);function Qt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ln(t,e,n,i,s={}){return PD(t,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const l=Fc(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),ND.fetch()(OD(t,t.config.apiHost,n,l),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},o))})}async function PD(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},d5),e);try{const s=new p5(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw _l(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const l=o.ok?c.errorMessage:c.error.message,[d,f]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _l(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw _l(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw _l(t,"user-disabled",c);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw DD(t,g,f);an(t,g)}}catch(s){if(s instanceof gn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function xr(t,e,n,i,s={}){const o=await ln(t,e,n,i,s);return"mfaPendingCredential"in o&&an(t,"multi-factor-auth-required",{_serverResponse:o}),o}function OD(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?fb(t.config,s):`${t.config.apiScheme}://${s}`}class p5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(yn(this.auth,"network-request-failed")),f5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _l(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=yn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e){return ln(t,"POST","/v1/accounts:delete",e)}async function g5(t,e){return ln(t,"POST","/v1/accounts:update",e)}async function v5(t,e){return ln(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y5(t,e=!1){const n=ce(t),i=await n.getIdToken(e),s=Cm(i);q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Ml(zv(s.auth_time)),issuedAtTime:Ml(zv(s.iat)),expirationTime:Ml(zv(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function zv(t){return Number(t)*1e3}function Cm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ek(n);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function w5(t){const e=Cm(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof gn&&b5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function b5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Er(t,v5(n,{idToken:i}));q(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?S5(o.providerUserInfo):[],l=E5(t.providerData,c),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),g=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new MD(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function _5(t){const e=ce(t);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E5(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function S5(t){return t.map(e=>{var{providerId:n}=e,i=lb(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e){const n=await PD(t,{},async()=>{const i=Fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,c=OD(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ND.fetch()(c,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await T5(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,c=new fh;return i&&(q(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(q(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(q(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fh,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class So{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=lb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new MD(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Er(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y5(this,e)}reload(){return _5(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new So(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await dh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Er(this,m5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,c,l,d,f,g;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,I=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,C=(f=n.createdAt)!==null&&f!==void 0?f:void 0,P=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:Q,isAnonymous:Y,providerData:ie,stsTokenManager:ne}=n;q(O&&ne,e,"internal-error");const me=fh.fromJSON(this.name,ne);q(typeof O=="string",e,"internal-error"),es(v,e.name),es(w,e.name),q(typeof Q=="boolean",e,"internal-error"),q(typeof Y=="boolean",e,"internal-error"),es(I,e.name),es(A,e.name),es(b,e.name),es(S,e.name),es(C,e.name),es(P,e.name);const it=new So({uid:O,auth:e,email:w,emailVerified:Q,displayName:v,isAnonymous:Y,photoURL:A,phoneNumber:I,tenantId:b,stsTokenManager:me,createdAt:C,lastLoginAt:P});return ie&&Array.isArray(ie)&&(it.providerData=ie.map(ht=>Object.assign({},ht))),S&&(it._redirectEventId=S),it}static async _fromIdTokenResponse(e,n,i=!1){const s=new fh;s.updateFromServerResponse(n);const o=new So({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await dh(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LD.type="NONE";const Tc=LD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t,e,n){return`firebase:${t}:${e}:${n}`}class rc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=To(this.userKey,s.apiKey,o),this.fullPersistenceKey=To("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?So._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new rc(li(Tc),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||li(Tc);const c=To(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const g=await f._get(c);if(g){const v=So._fromJSON(e,g);f!==o&&(l=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new rc(o,e,i):(o=d[0],l&&await o._set(c,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new rc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BD(e))return"Blackberry";if(jD(e))return"Webos";if(pb(e))return"Safari";if((e.includes("chrome/")||UD(e))&&!e.includes("edge/"))return"Chrome";if($h(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function FD(t=bt()){return/firefox\//i.test(t)}function pb(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UD(t=bt()){return/crios\//i.test(t)}function VD(t=bt()){return/iemobile/i.test(t)}function $h(t=bt()){return/android/i.test(t)}function BD(t=bt()){return/blackberry/i.test(t)}function jD(t=bt()){return/webos/i.test(t)}function Qc(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C5(t=bt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function A5(t=bt()){var e;return Qc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function k5(){return ik()&&document.documentMode===10}function $D(t=bt()){return Qc(t)||$h(t)||jD(t)||BD(t)||/windows phone/i.test(t)||VD(t)}function R5(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e=[]){let n;switch(t){case"Browser":n=iC(bt());break;case"Worker":n=`${iC(bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,l)=>{try{const d=e(o);c(d)}catch(d){l(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rC(this),this.idTokenSubscription=new rC(this),this.beforeStateQueue=new x5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xD,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await rc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===l)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ce(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&li(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await rc.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),c=this._isInitialized?Promise.resolve():this._initializationPromise;return q(c,this,"internal-error"),c.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function cn(t){return ce(t)}class rC{constructor(e){this.auth=e,this.observer=null,this.addObserver=sk(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function KD(t,e,n){const i=cn(t);q(i._canInitEmulator,i,"emulator-config-failed"),q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=zD(e),{host:c,port:l}=N5(e),d=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${c}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||P5()}function zD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N5(t){const e=zD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:sC(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:sC(c)}}}function sC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function P5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e){return ln(t,"POST","/v1/accounts:resetPassword",Qt(t,e))}async function HD(t,e){return ln(t,"POST","/v1/accounts:update",e)}async function O5(t,e){return ln(t,"POST","/v1/accounts:update",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e){return xr(t,"POST","/v1/accounts:signInWithPassword",Qt(t,e))}async function Am(t,e){return ln(t,"POST","/v1/accounts:sendOobCode",Qt(t,e))}async function L5(t,e){return Am(t,e)}async function F5(t,e){return Am(t,e)}async function U5(t,e){return Am(t,e)}async function V5(t,e){return Am(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(t,e){return xr(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}async function j5(t,e){return xr(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends Jc{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ph(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ph(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return M5(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return B5(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return HD(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return j5(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yr(t,e){return xr(t,"POST","/v1/accounts:signInWithIdp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="http://localhost";class nr extends Jc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=lb(n,["providerId","signInMethod"]);if(!i||!s)return null;const c=new nr(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}buildRequest(){const e={requestUri:$5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return ln(t,"POST","/v1/accounts:sendVerificationCode",Qt(t,e))}async function K5(t,e){return xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e))}async function z5(t,e){const n=await xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e));if(n.temporaryProof)throw _l(t,"account-exists-with-different-credential",n);return n}const G5={USER_NOT_FOUND:"user-not-found"};async function H5(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return xr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,n),G5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Jc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Co({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Co({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return K5(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return z5(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return H5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:o}=e;return!i&&!n&&!s&&!o?null:new Co({verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y5(t){const e=Ya(vl(t)).link,n=e?Ya(vl(e)).deep_link_id:null,i=Ya(vl(t)).deep_link_id;return(i?Ya(vl(i)).link:null)||i||n||e||t}class km{constructor(e){var n,i,s,o,c,l;const d=Ya(vl(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(i=d.oobCode)!==null&&i!==void 0?i:null,v=W5((s=d.mode)!==null&&s!==void 0?s:null);q(f&&g&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(l=d.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Y5(e);try{return new km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.providerId=Ns.PROVIDER_ID}static credential(e,n){return ph._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=km.parseLink(n);return q(i,"argument-error"),ph._fromEmailAndCode(e,i.code,i.tenantId)}}Ns.PROVIDER_ID="password";Ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sc extends Xc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),nr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),nr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return sc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return sc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:c,providerId:l}=e;if(!i&&!s&&!n&&!o||!l)return null;try{return new sc(l)._credential({idToken:n,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Xc{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nr._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Xc{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="http://localhost";class Cc extends Jc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,pendingToken:o}=n;return!i||!s||!o||i!==s?null:new Cc(i,o)}static _create(e,n){return new Cc(e,n)}buildRequest(){return{requestUri:Q5,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="saml.";class wp extends Dr{constructor(e){q(e.startsWith(J5),"argument-error"),super(e)}static credentialFromResult(e){return wp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Cc.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Cc._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Xc{constructor(){super("twitter.com")}static credential(e,n){return nr._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gi.credential(n,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return xr(t,"POST","/v1/accounts:signUp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await So._fromIdTokenResponse(e,i,s),c=oC(i);return new wi({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=oC(i);return new wi({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function oC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t){var e;const n=cn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new wi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await WD(n,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends gn{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,bp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new bp(e,n,i,s)}}function YD(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bp._fromErrorAndOperation(t,o,e,i):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t,e){const n=ce(t);await Rm(!0,n,e);const{providerUserInfo:i}=await g5(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=QD(i||[]);return n.providerData=n.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function mb(t,e,n=!1){const i=await Er(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",i)}async function Rm(t,e,n){await dh(e);const i=QD(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";q(i.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const o=await Er(t,YD(i,s,e,t),n);q(o.idToken,i,"internal-error");const c=Cm(o.idToken);q(c,i,"internal-error");const{sub:l}=c;return q(t.uid===l,i,"user-mismatch"),wi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&an(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e,n=!1){const i="signIn",s=await YD(t,i,e),o=await wi._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function xm(t,e){return XD(cn(t),e)}async function ZD(t,e){const n=ce(t);return await Rm(!1,n,e.providerId),mb(n,e)}async function e2(t,e){return JD(ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t,e){return xr(t,"POST","/v1/accounts:signInWithCustomToken",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){const n=cn(t),i=await e6(n,{token:e,returnSecureToken:!0}),s=await wi._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?gb._fromServerResponse(e,n):"totpInfo"in n?vb._fromServerResponse(e,n):an(e,"internal-error")}}class gb extends qh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new gb(n)}}class vb extends qh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new vb(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e,n){var i;q(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e,n){const i=ce(t),s={requestType:"PASSWORD_RESET",email:e};n&&Dm(i,s,n),await F5(i,s)}async function i6(t,e,n){await GD(ce(t),{oobCode:e,newPassword:n})}async function r6(t,e){await O5(ce(t),{oobCode:e})}async function t2(t,e){const n=ce(t),i=await GD(n,{oobCode:e}),s=i.requestType;switch(q(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(i.mfaInfo,n,"internal-error");default:q(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=qh._fromServerResponse(cn(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function s6(t,e){const{data:n}=await t2(ce(t),e);return n.email}async function o6(t,e,n){const i=cn(t),s=await WD(i,{returnSecureToken:!0,email:e,password:n}),o=await wi._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}function a6(t,e,n){return xm(ce(t),Ns.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c6(t,e,n){const i=ce(t),s={requestType:"EMAIL_SIGNIN",email:e};q(n.handleCodeInApp,i,"argument-error"),n&&Dm(i,s,n),await U5(i,s)}function u6(t,e){const n=km.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function l6(t,e,n){const i=ce(t),s=Ns.credentialWithLink(e,n||hh());return q(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),xm(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e){return ln(t,"POST","/v1/accounts:createAuthUri",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(t,e){const n=db()?hh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:s}=await h6(ce(t),i);return s||[]}async function f6(t,e){const n=ce(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Dm(n.auth,s,e);const{email:o}=await L5(n.auth,s);o!==t.email&&await t.reload()}async function p6(t,e,n){const i=ce(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Dm(i.auth,o,n);const{email:c}=await V5(i.auth,o);c!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m6(t,e){return ln(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ce(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Er(i,m6(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const l=i.providerData.find(({providerId:d})=>d==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function v6(t,e){return n2(ce(t),e,null)}function y6(t,e){return n2(ce(t),null,e)}async function n2(t,e,n){const{auth:i}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const c=await Er(t,HD(i,o));await t._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){var e,n;if(!t)return null;const{providerId:i}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const c=(n=(e=Cm(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(c){const l=c!=="anonymous"&&c!=="custom"?c:null;return new oc(o,l)}}if(!i)return null;switch(i){case"facebook.com":return new b6(o,s);case"github.com":return new I6(o,s);case"google.com":return new _6(o,s);case"twitter.com":return new E6(o,s,t.screenName||null);case"custom":case"anonymous":return new oc(o,null);default:return new oc(o,i,s)}}class oc{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class i2 extends oc{constructor(e,n,i,s){super(e,n,i),this.username=s}}class b6 extends oc{constructor(e,n){super(e,"facebook.com",n)}}class I6 extends i2{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class _6 extends oc{constructor(e,n){super(e,"google.com",n)}}class E6 extends i2{constructor(e,n,i){super(e,"twitter.com",n,i)}}function S6(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:w6(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t,e){return ce(t).setPersistence(e)}function C6(t,e,n,i){return ce(t).onIdTokenChanged(e,n,i)}function A6(t,e,n){return ce(t).beforeAuthStateChanged(e,n)}function k6(t,e,n,i){return ce(t).onAuthStateChanged(e,n,i)}function R6(t){return ce(t).signOut()}class vo{constructor(e,n,i){this.type=e,this.credential=n,this.auth=i}static _fromIdtoken(e,n){return new vo("enroll",e,n)}static _fromMfaPendingCredential(e){return new vo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return vo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return vo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=cn(e),s=n.customData._serverResponse,o=(s.mfaInfo||[]).map(l=>qh._fromServerResponse(i,l));q(s.mfaPendingCredential,i,"internal-error");const c=vo._fromMfaPendingCredential(s.mfaPendingCredential);return new yb(c,o,async l=>{const d=await l._process(i,c);delete s.mfaInfo,delete s.mfaPendingCredential;const f=Object.assign(Object.assign({},s),{idToken:d.idToken,refreshToken:d.refreshToken});switch(n.operationType){case"signIn":const g=await wi._fromIdTokenResponse(i,n.operationType,f);return await i._updateCurrentUser(g.user),g;case"reauthenticate":return q(n.user,i,"internal-error"),wi._forOperation(n.user,n.operationType,f);default:an(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function x6(t,e){var n;const i=ce(t),s=e;return q(e.customData.operationType,i,"argument-error"),q((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),yb._fromError(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:start",Qt(t,e))}function N6(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(t,e))}function P6(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(t,e))}class wb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>qh._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new wb(e)}async getSession(){return vo._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const i=e,s=await this.getSession(),o=await Er(this.user,i._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const s=await Er(this.user,P6(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Gv=new WeakMap;function O6(t){const e=ce(t);return Gv.has(e)||Gv.set(e,wb._fromUser(e)),Gv.get(e)}const Ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(){const t=bt();return pb(t)||Qc(t)}const L6=1e3,F6=10;class s2 extends r2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=M6()&&R5(),this.fallbackToPolling=$D(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(i);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);k5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,F6):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},L6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s2.type="LOCAL";const Kh=s2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2 extends r2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o2.type="SESSION";const Ts=o2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Nm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(c).map(async f=>f(n.origin,o)),d=await U6(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((l,d)=>{const f=zh("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(w.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function B6(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function j6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q6(){return bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebaseLocalStorageDb",K6=1,_p="firebaseLocalStorage",c2="fbase_key";class Gh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(t,e){return t.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function z6(){const t=indexedDB.deleteDatabase(a2);return new Gh(t).toPromise()}function nw(){const t=indexedDB.open(a2,K6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(_p,{keyPath:c2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(_p)?e(i):(i.close(),await z6(),e(await nw()))})})}async function aC(t,e,n){const i=Pm(t,!0).put({[c2]:e,value:n});return new Gh(i).toPromise()}async function G6(t,e){const n=Pm(t,!1).get(e),i=await new Gh(n).toPromise();return i===void 0?null:i.value}function cC(t,e){const n=Pm(t,!0).delete(e);return new Gh(n).toPromise()}const H6=800,W6=3;class u2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>W6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nm._getInstance(q6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await j6(),!this.activeServiceWorker)return;this.sender=new V6(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nw();return await aC(e,Ip,"1"),await cC(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>aC(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>G6(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Pm(s,!1).getAll();return new Gh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u2.type="LOCAL";const Ac=u2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t,e){return ln(t,"POST","/v2/accounts/mfaSignIn:start",Qt(t,e))}function Q6(t,e){return ln(t,"POST","/v2/accounts/mfaSignIn:finalize",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(t){return(await ln(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function l2(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=yn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",X6().appendChild(i)})}function h2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=500,e$=6e4,Tf=1e12;class t${constructor(e){this.auth=e,this.counter=Tf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new n$(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Tf;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Tf;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Tf;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class n${constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=i$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},e$)},Z6))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function i$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=h2("rcb"),r$=new jh(3e4,6e4),s$="https://www.google.com/recaptcha/api.js?";class o${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(a$(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Gt().grecaptcha):new Promise((i,s)=>{const o=Gt().setTimeout(()=>{s(yn(e,"network-request-failed"))},r$.get());Gt()[Hv]=()=>{Gt().clearTimeout(o),delete Gt()[Hv];const l=Gt().grecaptcha;if(!l){s(yn(e,"internal-error"));return}const d=l.render;l.render=(f,g)=>{const v=d(f,g);return this.counter++,v},this.hostLanguage=n,i(l)};const c=`${s$}?${Fc({onload:Hv,render:"explicit",hl:n})}`;l2(c).catch(()=>{clearTimeout(o),s(yn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Gt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function a$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class c${async load(e){return new t$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="recaptcha",u$={theme:"light",type:"image"};let l$=class{constructor(e,n=Object.assign({},u$),i){this.parameters=n,this.type=d2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(i),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new c$:new o$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(s=>{const o=c=>{c&&(this.tokenChangeListeners.delete(o),s(c))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=Gt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(db()&&!bb(),this.auth,"internal-error"),await h$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await J6(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function h$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Co._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function d$(t,e,n){const i=cn(t),s=await Om(i,e,ce(n));return new Ib(s,o=>xm(i,o))}async function f$(t,e,n){const i=ce(t);await Rm(!1,i,"phone");const s=await Om(i.auth,e,ce(n));return new Ib(s,o=>ZD(i,o))}async function p$(t,e,n){const i=ce(t),s=await Om(i.auth,e,ce(n));return new Ib(s,o=>e2(i,o))}async function Om(t,e,n){var i;const s=await n.verify();try{q(typeof s=="string",t,"argument-error"),q(n.type===d2,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const c=o.session;if("phoneNumber"in o)return q(c.type==="enroll",t,"internal-error"),(await D6(t,{idToken:c.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{q(c.type==="signin",t,"internal-error");const l=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return q(l,t,"missing-multi-factor-info"),(await Y6(t,{mfaPendingCredential:c.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:c}=await q5(t,{phoneNumber:o.phoneNumber,recaptchaToken:s});return c}}finally{n._reset()}}async function m$(t,e){await mb(ce(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class Bf{constructor(e){this.providerId=Bf.PROVIDER_ID,this.auth=cn(e)}verifyPhoneNumber(e,n){return Om(this.auth,e,ce(n))}static credential(e,n){return Co._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Bf.credentialFromTaggedObject(n)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Co._fromTokenResponse(n,i):null}};Uo.PROVIDER_ID="phone";Uo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t,e){return e?li(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends Jc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g$(t){return XD(t.auth,new _b(t),t.bypassAuthState)}function v$(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),JD(n,new _b(t),t.bypassAuthState)}async function y$(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),mb(n,new _b(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:c,type:l}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g$;case"linkViaPopup":case"linkViaRedirect":return y$;case"reauthViaPopup":case"reauthViaRedirect":return v$;default:an(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=new jh(2e3,1e4);async function p2(t,e,n){const i=cn(t);Yc(t,e,Dr);const s=Xo(i,n);return new pr(i,"signInViaPopup",e,s).executeNotNull()}async function b$(t,e,n){const i=ce(t);Yc(i.auth,e,Dr);const s=Xo(i.auth,n);return new pr(i.auth,"reauthViaPopup",e,s,i).executeNotNull()}async function I$(t,e,n){const i=ce(t);Yc(i.auth,e,Dr);const s=Xo(i.auth,n);return new pr(i.auth,"linkViaPopup",e,s,i).executeNotNull()}class pr extends f2{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,pr.currentPopupAction&&pr.currentPopupAction.cancel(),pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=zh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,w$.get())};e()}}pr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$="pendingRedirect",Ll=new Map;class E$ extends f2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ll.get(this.auth._key());if(!e){try{const i=await S$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ll.set(this.auth._key(),e)}return this.bypassAuthState||Ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S$(t,e){const n=g2(e),i=m2(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}async function Eb(t,e){return m2(t)._set(g2(e),"true")}function T$(){Ll.clear()}function Sb(t,e){Ll.set(t._key(),e)}function m2(t){return li(t._redirectPersistence)}function g2(t){return To(_$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(t,e,n){return A$(t,e,n)}async function A$(t,e,n){const i=cn(t);Yc(t,e,Dr),await i._initializationPromise;const s=Xo(i,n);return await Eb(s,i),s._openRedirect(i,e,"signInViaRedirect")}function k$(t,e,n){return R$(t,e,n)}async function R$(t,e,n){const i=ce(t);Yc(i.auth,e,Dr),await i.auth._initializationPromise;const s=Xo(i.auth,n);await Eb(s,i.auth);const o=await v2(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",o)}function x$(t,e,n){return D$(t,e,n)}async function D$(t,e,n){const i=ce(t);Yc(i.auth,e,Dr),await i.auth._initializationPromise;const s=Xo(i.auth,n);await Rm(!1,i,e.providerId),await Eb(s,i.auth);const o=await v2(i);return s._openRedirect(i.auth,e,"linkViaRedirect",o)}async function N$(t,e){return await cn(t)._initializationPromise,Mm(t,e,!1)}async function Mm(t,e,n=!1){const i=cn(t),s=Xo(i,e),c=await new E$(i,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}async function v2(t){const e=zh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$=10*60*1e3;class y2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!w2(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P$&&this.cachedEventUids.clear(),this.cachedEventUids.has(uC(e))}saveEventToCache(e){this.cachedEventUids.add(uC(e)),this.lastProcessedEventTime=Date.now()}}function uC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t,e={}){return ln(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L$=/^https?/;async function F$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b2(t);for(const n of e)try{if(U$(n))return}catch{}an(t,"unauthorized-domain")}function U$(t){const e=hh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!L$.test(n))return!1;if(M$.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=new jh(3e4,6e4);function lC(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B$(t){return new Promise((e,n)=>{var i,s,o;function c(){lC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lC(),n(yn(t,"network-request-failed"))},timeout:V$.get()})}if(!((s=(i=Gt().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Gt().gapi)===null||o===void 0)&&o.load)c();else{const l=h2("iframefcb");return Gt()[l]=()=>{gapi.load?c():n(yn(t,"network-request-failed"))},l2(`https://apis.google.com/js/api.js?onload=${l}`).catch(d=>n(d))}}).catch(e=>{throw jf=null,e})}let jf=null;function j$(t){return jf=jf||B$(t),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=new jh(5e3,15e3),q$="__/auth/iframe",K$="emulator/auth/iframe",z$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H$(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fb(e,K$):`https://${t.config.authDomain}/${q$}`,i={apiKey:e.apiKey,appName:t.name,v:zo},s=G$.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Fc(i).slice(1)}`}async function W$(t){const e=await j$(t),n=Gt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:H$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z$,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=yn(t,"network-request-failed"),l=Gt().setTimeout(()=>{o(c)},$$.get());function d(){Gt().clearTimeout(l),s(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q$=500,J$=600,X$="_blank",Z$="http://localhost";class hC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eq(t,e,n,i=Q$,s=J$){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const d=Object.assign(Object.assign({},Y$),{width:i.toString(),height:s.toString(),top:o,left:c}),f=bt().toLowerCase();n&&(l=UD(f)?X$:n),FD(f)&&(e=e||Z$,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[I,A])=>`${w}${I}=${A},`,"");if(A5(f)&&l!=="_self")return tq(e||"",l),new hC(null);const v=window.open(e||"",l,g);q(v,t,"popup-blocked");try{v.focus()}catch{}return new hC(v)}function tq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="__/auth/handler",iq="emulator/auth/handler";function iw(t,e,n,i,s,o){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zo,eventId:s};if(e instanceof Dr){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",GF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(o||{}))c[d]=f}if(e instanceof Xc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(c.scopes=d.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];return`${rq(t)}?${Fc(l).slice(1)}`}function rq({config:t}){return t.emulator?fb(t,iq):`https://${t.authDomain}/${nq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="webStorageSupport";class sq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ts,this._completeRedirectFn=Mm,this._overrideRedirectResult=Sb}async _openPopup(e,n,i,s){var o;Ni((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=iw(e,n,i,hh(),s);return eq(e,c,zh())}async _openRedirect(e,n,i,s){return await this._originValidation(e),B6(iw(e,n,i,hh(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ni(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await W$(e),i=new y2(e);return n.register("authEvent",s=>(q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wv,{type:Wv},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Wv];c!==void 0&&n(!!c),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=F$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $D()||pb()||Qc()}}const I2=sq;class oq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Qi("unexpected MultiFactorSessionType")}}}class Tb extends oq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tb(e)}_finalizeEnroll(e,n,i){return N6(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Q6(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class _2{constructor(){}static assertion(e){return Tb._fromCredential(e)}}_2.FACTOR_ID="phone";var dC="@firebase/auth",fC="0.22.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function uq(t){yi(new Zn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:o,authDomain:c}=i.options;return((l,d)=>{q(o&&!o.includes(":"),"invalid-api-key",{appName:l.name}),q(!(c!=null&&c.includes(":")),"argument-error",{appName:l.name});const f={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qD(t)},g=new D5(l,d,f);return u5(g,n),g})(i,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),yi(new Zn("auth-internal",e=>{const n=cn(e.getProvider("auth").getImmediate());return(i=>new aq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(dC,fC,cq(t)),Ln(dC,fC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=5*60,hq=nk("authIdTokenMaxAge")||lq;let pC=null;const dq=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>hq)return;const s=n==null?void 0:n.token;pC!==s&&(pC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Cb(t=qp()){const e=Cr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c5(t,{popupRedirectResolver:I2,persistence:[Ac,Kh,Ts]}),i=nk("authTokenSyncURL");if(i){const o=dq(i);A6(n,o,()=>o(n.currentUser)),C6(n,c=>o(c))}const s=tk("auth");return s&&KD(n,`http://${s}`),n}uq("Browser");const E2="@firebase/installations",Ab="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1e4,T2=`w:${Ab}`,C2="FIS_v2",fq="https://firebaseinstallations.googleapis.com/v1",pq=60*60*1e3,mq="installations",gq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Vo=new Tr(mq,gq,vq);function A2(t){return t instanceof gn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2({projectId:t}){return`${fq}/projects/${t}/installations`}function R2(t){return{token:t.token,requestStatus:2,expiresIn:wq(t.expiresIn),creationTime:Date.now()}}async function x2(t,e){const i=(await e.json()).error;return Vo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function D2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yq(t,{refreshToken:e}){const n=D2(t);return n.append("Authorization",bq(e)),n}async function N2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function wq(t){return Number(t.replace("s","000"))}function bq(t){return`${C2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=k2(t),s=D2(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:C2,appId:t.appId,sdkVersion:T2},l={method:"POST",headers:s,body:JSON.stringify(c)},d=await N2(()=>fetch(i,l));if(d.ok){const f=await d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:R2(f.authToken)}}else throw await x2("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=/^[cdef][\w-]{21}$/,rw="";function Sq(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Tq(t);return Eq.test(n)?n:rw}catch{return rw}}function Tq(t){return _q(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Map;function M2(t,e){const n=Lm(t);L2(n,e),Cq(n,e)}function L2(t,e){const n=O2.get(t);if(n)for(const i of n)i(e)}function Cq(t,e){const n=Aq();n&&n.postMessage({key:t,fid:e}),kq()}let yo=null;function Aq(){return!yo&&"BroadcastChannel"in self&&(yo=new BroadcastChannel("[Firebase] FID Change"),yo.onmessage=t=>{L2(t.data.key,t.data.fid)}),yo}function kq(){O2.size===0&&yo&&(yo.close(),yo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq="firebase-installations-database",xq=1,Bo="firebase-installations-store";let Yv=null;function kb(){return Yv||(Yv=uk(Rq,xq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bo)}}})),Yv}async function Ep(t,e){const n=Lm(t),s=(await kb()).transaction(Bo,"readwrite"),o=s.objectStore(Bo),c=await o.get(n);return await o.put(e,n),await s.done,(!c||c.fid!==e.fid)&&M2(t,e.fid),e}async function F2(t){const e=Lm(t),i=(await kb()).transaction(Bo,"readwrite");await i.objectStore(Bo).delete(e),await i.done}async function Fm(t,e){const n=Lm(t),s=(await kb()).transaction(Bo,"readwrite"),o=s.objectStore(Bo),c=await o.get(n),l=e(c);return l===void 0?await o.delete(n):await o.put(l,n),await s.done,l&&(!c||c.fid!==l.fid)&&M2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(t){let e;const n=await Fm(t.appConfig,i=>{const s=Dq(i),o=Nq(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===rw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Dq(t){const e=t||{fid:Sq(),registrationStatus:0};return U2(e)}function Nq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Pq(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Oq(t)}:{installationEntry:e}}async function Pq(t,e){try{const n=await Iq(t,e);return Ep(t.appConfig,n)}catch(n){throw A2(n)&&n.customData.serverCode===409?await F2(t.appConfig):await Ep(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Oq(t){let e=await mC(t.appConfig);for(;e.registrationStatus===1;)await P2(100),e=await mC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Rb(t);return i||n}return e}function mC(t){return Fm(t,e=>{if(!e)throw Vo.create("installation-not-found");return U2(e)})}function U2(t){return Mq(t)?{fid:t.fid,registrationStatus:0}:t}function Mq(t){return t.registrationStatus===1&&t.registrationTime+S2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lq({appConfig:t,heartbeatServiceProvider:e},n){const i=Fq(t,n),s=yq(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:T2,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},d=await N2(()=>fetch(i,l));if(d.ok){const f=await d.json();return R2(f)}else throw await x2("Generate Auth Token",d)}function Fq(t,{fid:e}){return`${k2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(t,e=!1){let n;const i=await Fm(t.appConfig,o=>{if(!V2(o))throw Vo.create("not-registered");const c=o.authToken;if(!e&&Bq(c))return o;if(c.requestStatus===1)return n=Uq(t,e),o;{if(!navigator.onLine)throw Vo.create("app-offline");const l=$q(o);return n=Vq(t,l),l}});return n?await n:i.authToken}async function Uq(t,e){let n=await gC(t.appConfig);for(;n.authToken.requestStatus===1;)await P2(100),n=await gC(t.appConfig);const i=n.authToken;return i.requestStatus===0?xb(t,e):i}function gC(t){return Fm(t,e=>{if(!V2(e))throw Vo.create("not-registered");const n=e.authToken;return qq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Vq(t,e){try{const n=await Lq(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Ep(t.appConfig,i),n}catch(n){if(A2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await F2(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ep(t.appConfig,i)}throw n}}function V2(t){return t!==void 0&&t.registrationStatus===2}function Bq(t){return t.requestStatus===2&&!jq(t)}function jq(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pq}function $q(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function qq(t){return t.requestStatus===1&&t.requestTime+S2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(t){const e=t,{installationEntry:n,registrationPromise:i}=await Rb(e);return i?i.catch(console.error):xb(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t,e=!1){const n=t;return await Gq(n),(await xb(n,e)).token}async function Gq(t){const{registrationPromise:e}=await Rb(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(t){if(!t||!t.options)throw Qv("App Configuration");if(!t.name)throw Qv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Qv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qv(t){return Vo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="installations",Wq="installations-internal",Yq=t=>{const e=t.getProvider("app").getImmediate(),n=Hq(e),i=Cr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Qq=t=>{const e=t.getProvider("app").getImmediate(),n=Cr(e,B2).getImmediate();return{getId:()=>Kq(n),getToken:s=>zq(n,s)}};function Jq(){yi(new Zn(B2,Yq,"PUBLIC")),yi(new Zn(Wq,Qq,"PRIVATE"))}Jq();Ln(E2,Ab);Ln(E2,Ab,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="analytics",Xq="firebase_id",Zq="origin",e8=60*1e3,t8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Db="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new wh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hi=new Tr("analytics","Analytics",n8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){if(!t.startsWith(Db)){const e=hi.create("invalid-gtag-resource",{gtagURL:t});return Qn.warn(e.message),""}return t}function j2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function r8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function s8(t,e){const n=r8("firebase-js-sdk-policy",{createScriptURL:i8}),i=document.createElement("script"),s=`${Db}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function o8(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function a8(t,e,n,i,s,o){const c=i[s];try{if(c)await e[c];else{const d=(await j2(n)).find(f=>f.measurementId===s);d&&await e[d.appId]}}catch(l){Qn.error(l)}t("config",s,o)}async function c8(t,e,n,i,s){try{let o=[];if(s&&s.send_to){let c=s.send_to;Array.isArray(c)||(c=[c]);const l=await j2(n);for(const d of c){const f=l.find(v=>v.measurementId===d),g=f&&e[f.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,s||{})}catch(o){Qn.error(o)}}function u8(t,e,n,i){async function s(o,c,l){try{o==="event"?await c8(t,e,n,c,l):o==="config"?await a8(t,e,n,i,c,l):o==="consent"?t("consent","update",l):t("set",c)}catch(d){Qn.error(d)}}return s}function l8(t,e,n,i,s){let o=function(...c){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=u8(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function h8(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Db)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=30,f8=1e3;class p8{constructor(e={},n=f8){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const $2=new p8;function m8(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function g8(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:m8(i)},o=t8.replace("{app-id}",n),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let l="";try{const d=await c.json();!((e=d.error)===null||e===void 0)&&e.message&&(l=d.error.message)}catch{}throw hi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:l})}return c.json()}async function v8(t,e=$2,n){const{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw hi.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw hi.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new b8;return setTimeout(async()=>{l.abort()},n!==void 0?n:e8),q2({appId:i,apiKey:s,measurementId:o},c,l,e)}async function q2(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=$2){var o;const{appId:c,measurementId:l}=t;try{await y8(i,e)}catch(d){if(l)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:c,measurementId:l};throw d}try{const d=await g8(t);return s.deleteThrottleMetadata(c),d}catch(d){const f=d;if(!w8(f)){if(s.deleteThrottleMetadata(c),l)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:l};throw d}const g=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?xS(n,s.intervalMillis,d8):xS(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(c,v),Qn.debug(`Calling attemptFetch again in ${g} millis`),q2(t,v,i,s)}}function y8(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),i(hi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function w8(t){if(!(t instanceof gn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class b8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function I8(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const o=await e,c=Object.assign(Object.assign({},i),{send_to:o});t("event",n,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(){if(dc())try{await rk()}catch(t){return Qn.warn(hi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Qn.warn(hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function E8(t,e,n,i,s,o,c){var l;const d=v8(t);d.then(I=>{n[I.measurementId]=I.appId,t.options.measurementId&&I.measurementId!==t.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Qn.error(I)),e.push(d);const f=_8().then(I=>{if(I)return i.getId()}),[g,v]=await Promise.all([d,f]);h8(o)||s8(o,g.measurementId),s("js",new Date);const w=(l=c==null?void 0:c.config)!==null&&l!==void 0?l:{};return w[Zq]="firebase",w.update=!0,v!=null&&(w[Xq]=v),s("config",g.measurementId,w),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.app=e}_delete(){return delete Fl[this.app.options.appId],Promise.resolve()}}let Fl={},vC=[];const yC={};let Jv="dataLayer",T8="gtag",wC,K2,bC=!1;function C8(){const t=[];if(Bw()&&t.push("This is a browser extension environment."),$F()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=hi.create("invalid-analytics-context",{errorInfo:e});Qn.warn(n.message)}}function A8(t,e,n){C8();const i=t.options.appId;if(!i)throw hi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hi.create("no-api-key");if(Fl[i]!=null)throw hi.create("already-exists",{id:i});if(!bC){o8(Jv);const{wrappedGtag:o,gtagCore:c}=l8(Fl,vC,yC,Jv,T8);K2=o,wC=c,bC=!0}return Fl[i]=E8(t,vC,yC,e,wC,Jv,n),new S8(t)}function k8(t=qp()){t=ce(t);const e=Cr(t,Sp);return e.isInitialized()?e.getImmediate():R8(t)}function R8(t,e={}){const n=Cr(t,Sp);if(n.isInitialized()){const s=n.getImmediate();if(Hl(e,n.getOptions()))return s;throw hi.create("already-initialized")}return n.initialize({options:e})}function x8(t,e,n,i){t=ce(t),I8(K2,Fl[t.app.options.appId],e,n,i).catch(s=>Qn.error(s))}const IC="@firebase/analytics",_C="0.9.5";function D8(){yi(new Zn(Sp,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return A8(i,s,n)},"PUBLIC")),yi(new Zn("analytics-internal",t,"PRIVATE")),Ln(IC,_C),Ln(IC,_C,"esm2017");function t(e){try{const n=e.getProvider(Sp).getImmediate();return{logEvent:(i,s,o)=>x8(n,i,s,o)}}catch(n){throw hi.create("interop-component-reg-failed",{reason:n})}}}D8();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,n){this._delegate=e,this.firebase=n,Jf(e,new Zn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),hk(this._delegate)))}_getService(e,n=ms){var i;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((i=s.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=ms){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Jf(this._delegate,e)}_addOrOverwriteComponent(e){lk(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},EC=new Tr("app-compat","Firebase",P8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){const e={},n={__esModule:!0,initializeApp:o,app:s,registerVersion:Ln,setLogLevel:fk,onLog:dk,apps:null,SDK_VERSION:zo,INTERNAL:{registerComponent:l,removeApp:i,useAsService:d,modularAPIs:o3}};n.default=n,Object.defineProperty(n,"apps",{get:c});function i(f){delete e[f]}function s(f){if(f=f||ms,!kS(e,f))throw EC.create("no-app",{appName:f});return e[f]}s.App=t;function o(f,g={}){const v=$p(f,g);if(kS(e,v.name))return e[v.name];const w=new t(v,n);return e[v.name]=w,w}function c(){return Object.keys(e).map(f=>e[f])}function l(f){const g=f.name,v=g.replace("-compat","");if(yi(f)&&f.type==="PUBLIC"){const w=(I=s())=>{if(typeof I[v]!="function")throw EC.create("invalid-app-argument",{appName:g});return I[v]()};f.serviceProps!==void 0&&Qf(w,f.serviceProps),n[v]=w,t.prototype[v]=function(...I){return this._getService.bind(this,g).apply(this,f.multipleInstances?I:[])}}return f.type==="PUBLIC"?n[v]:null}function d(f,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){const t=O8(N8);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:z2,extendNamespace:e,createSubscribe:sk,ErrorFactory:Tr,deepExtend:Qf});function e(n){Qf(t,n)}return t}const M8=z2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new wh("@firebase/app-compat"),L8="@firebase/app-compat",F8="0.2.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){Ln(L8,F8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(BF()&&self.firebase!==void 0){SC.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&SC.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const fe=M8;U8();const V8="@firebase/firestore-compat",B8="0.3.6";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function CC(){if(!KV())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}class mh{constructor(e){this._delegate=e}static fromBase64String(e){return CC(),new mh(tr.fromBase64String(e))}static fromUint8Array(e){return TC(),new mh(tr.fromUint8Array(e))}toBase64(){return CC(),this._delegate.toBase64()}toUint8Array(){return TC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){return j8(t,["next","error","complete"])}function j8(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{enableIndexedDbPersistence(e,n){return gj(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return vj(e._delegate)}clearIndexedDbPersistence(e){return yj(e._delegate)}}class G2{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ws||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){aD(this._delegate,e,n,i)}enableNetwork(){return bj(this._delegate)}disableNetwork(){return Ij(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,sD("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wj(this._delegate)}onSnapshotsInSync(e){return Wj(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kc(this,X0(this._delegate,e))}catch(n){throw Pn(n,"collection()","Firestore.collection()")}}doc(e){try{return new vi(this,Yi(this._delegate,e))}catch(n){throw Pn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Nn(this,hj(this._delegate,e))}catch(n){throw Pn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Jj(this._delegate,n=>e(new H2(this,n)))}batch(){return Yt(this._delegate),new W2(new AD(this._delegate,e=>Wc(this._delegate,e)))}loadBundle(e){return _j(this._delegate,e)}namedQuery(e){return Ej(this._delegate,e).then(n=>n?new Nn(this,n):null)}}class Um extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new mh(new tr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return vi.forKey(n,this.firestore,null)}}function q8(t){uV(t)}class H2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Um(e)}get(e){const n=wo(e);return this._delegate.get(n).then(i=>new gh(this._firestore,new _r(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const s=wo(e);return i?(Nb("Transaction.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const o=wo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...s),this}delete(e){const n=wo(e);return this._delegate.delete(n),this}}class W2{constructor(e){this._delegate=e}set(e,n,i){const s=wo(e);return i?(Nb("WriteBatch.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const o=wo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...s),this}delete(e){const n=wo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class jo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Ol(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=jo.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let o=s.get(n);return o||(o=new jo(e,new Um(e),n),s.set(n,o)),o}}jo.INSTANCES=new WeakMap;class vi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Um(e)}static forPath(e,n,i){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vi(n,new lt(n._delegate,i,new W(e)))}static forKey(e,n,i){return new vi(n,new lt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new kc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kc(this.firestore,X0(this._delegate,e))}catch(n){throw Pn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ce(e),e instanceof lt?cD(this._delegate,e):!1}set(e,n){n=Nb("DocumentReference.set",n);try{return n?yp(this._delegate,e,n):yp(this._delegate,e)}catch(i){throw Pn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?ZT(this._delegate,e):ZT(this._delegate,e,n,...i)}catch(s){throw Pn(s,"updateDoc()","DocumentReference.update()")}}delete(){return cb(this._delegate)}onSnapshot(...e){const n=Y2(e),i=Q2(e,s=>new gh(this.firestore,new _r(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return CD(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=qj(this._delegate):(e==null?void 0:e.source)==="server"?n=Kj(this._delegate):n=$j(this._delegate),n.then(i=>new gh(this.firestore,new _r(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new vi(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pn(t,e,n){return t.message=t.message.replace(e,n),t}function Y2(t){for(const e of t)if(typeof e=="object"&&!sw(e))return e;return{}}function Q2(t,e){var n,i;let s;return sw(t[0])?s=t[0]:sw(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:o=>{s.next&&s.next(e(o))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(i=s.complete)===null||i===void 0?void 0:i.bind(s)}}class gh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new vi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return SD(this._delegate,e._delegate)}}class vh extends gh{data(e){const n=this._delegate.data(e);return lV(n!==void 0),n}}class Nn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Um(e)}where(e,n,i){try{return new Nn(this.firestore,Zr(this._delegate,Nj(e,n,i)))}catch(s){throw Pn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Nn(this.firestore,Zr(this._delegate,Pj(e,n)))}catch(i){throw Pn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Nn(this.firestore,Zr(this._delegate,Oj(e)))}catch(n){throw Pn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Nn(this.firestore,Zr(this._delegate,Mj(e)))}catch(n){throw Pn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Nn(this.firestore,Zr(this._delegate,Lj(...e)))}catch(n){throw Pn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Nn(this.firestore,Zr(this._delegate,Fj(...e)))}catch(n){throw Pn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Nn(this.firestore,Zr(this._delegate,Uj(...e)))}catch(n){throw Pn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Nn(this.firestore,Zr(this._delegate,Vj(...e)))}catch(n){throw Pn(n,"endAt()","Query.endAt()")}}isEqual(e){return uD(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=zj(this._delegate):(e==null?void 0:e.source)==="server"?n=Gj(this._delegate):n=TD(this._delegate),n.then(i=>new ow(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=Y2(e),i=Q2(e,s=>new ow(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return CD(this._delegate,n,i)}withConverter(e){return new Nn(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class K8{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new vh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ow{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Nn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new K8(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new vh(this._firestore,i))})}isEqual(e){return SD(this._delegate,e._delegate)}}class kc extends Nn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vi(this.firestore,e):null}doc(e){try{return e===void 0?new vi(this.firestore,Yi(this._delegate)):new vi(this.firestore,Yi(this._delegate,e))}catch(n){throw Pn(n,"doc()","CollectionReference.doc()")}}add(e){return Hj(this._delegate,e).then(n=>new vi(this.firestore,n))}isEqual(e){return cD(this._delegate,e._delegate)}withConverter(e){return new kc(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wo(t){return je(t,lt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(...e){this._delegate=new Es(...e)}static documentId(){return new Pb(Mt.keyField().canonicalString())}isEqual(e){return e=ce(e),e instanceof Es?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._delegate=e}static serverTimestamp(){const e=Zj();return e._methodName="FieldValue.serverTimestamp",new lo(e)}static delete(){const e=Xj();return e._methodName="FieldValue.delete",new lo(e)}static arrayUnion(...e){const n=e5(...e);return n._methodName="FieldValue.arrayUnion",new lo(n)}static arrayRemove(...e){const n=t5(...e);return n._methodName="FieldValue.arrayRemove",new lo(n)}static increment(e){const n=n5(e);return n._methodName="FieldValue.increment",new lo(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8={Firestore:G2,GeoPoint:vm,Timestamp:gt,Blob:mh,Transaction:H2,WriteBatch:W2,DocumentReference:vi,DocumentSnapshot:gh,Query:Nn,QueryDocumentSnapshot:vh,QuerySnapshot:ow,CollectionReference:kc,FieldPath:Pb,FieldValue:lo,setLogLevel:q8,CACHE_SIZE_UNLIMITED:pj};function G8(t,e){t.INTERNAL.registerComponent(new Zn("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(Object.assign({},z8)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){G8(t,(e,n)=>new G2(e,n,new $8)),t.registerVersion(V8,B8)}H8(fe);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=2e3;async function Y8(t,e,n){var i;const{BuildInfo:s}=$o();Ni(e.sessionId,"AuthEvent did not contain a session ID");const o=await e9(e.sessionId),c={};return Qc()?c.ibi=s.packageName:$h()?c.apn=s.packageName:an(t,"operation-not-supported-in-this-environment"),s.displayName&&(c.appDisplayName=s.displayName),c.sessionId=o,iw(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,c)}async function Q8(t){const{BuildInfo:e}=$o(),n={};Qc()?n.iosBundleId=e.packageName:$h()?n.androidPackageName=e.packageName:an(t,"operation-not-supported-in-this-environment"),await b2(t,n)}function J8(t){const{cordova:e}=$o();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let s=null;i?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,C5()?"_blank":"_system","location=yes"),n(s)})})}async function X8(t,e,n){const{cordova:i}=$o();let s=()=>{};try{await new Promise((o,c)=>{let l=null;function d(){var v;o();const w=(v=i.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){l||(l=window.setTimeout(()=>{c(yn(t,"redirect-cancelled-by-user"))},W8))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(d),document.addEventListener("resume",f,!1),$h()&&document.addEventListener("visibilitychange",g,!1),s=()=>{e.removePassiveListener(d),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",g,!1),l&&window.clearTimeout(l)}})}finally{s()}}function Z8(t){var e,n,i,s,o,c,l,d,f,g;const v=$o();q(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((n=v==null?void 0:v.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((o=(s=(i=v==null?void 0:v.cordova)===null||i===void 0?void 0:i.plugins)===null||s===void 0?void 0:s.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((d=(l=(c=v==null?void 0:v.cordova)===null||c===void 0?void 0:c.plugins)===null||l===void 0?void 0:l.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((g=(f=v==null?void 0:v.cordova)===null||f===void 0?void 0:f.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function e9(t){const e=t9(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function t9(t){if(Ni(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=20;class i9 extends y2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function r9(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:a9(),postBody:null,tenantId:t.tenantId,error:yn(t,"no-auth-event")}}function s9(t,e){return aw()._set(cw(t),e)}async function AC(t){const e=await aw()._get(cw(t));return e&&await aw()._remove(cw(t)),e}function o9(t,e){var n,i;const s=u9(e);if(s.includes("/__/auth/callback")){const o=$f(s),c=o.firebaseError?c9(decodeURIComponent(o.firebaseError)):null,l=(i=(n=c==null?void 0:c.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],d=l?yn(l):null;return d?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function a9(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<n9;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function aw(){return li(Kh)}function cw(t){return To("authEvent",t.config.apiKey,t.name)}function c9(t){try{return JSON.parse(t)}catch{return null}}function u9(t){const e=$f(t),n=e.link?decodeURIComponent(e.link):void 0,i=$f(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return $f(s).link||s||i||n||t}function $f(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ya(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=500;class h9{constructor(){this._redirectPersistence=Ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mm,this._overrideRedirectResult=Sb}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new i9(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){an(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,s){Z8(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),T$(),await this._originValidation(e);const c=r9(e,i,s);await s9(e,c);const l=await Y8(e,c,n),d=await J8(l);return X8(e,o,d)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q8(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:s,BuildInfo:o}=$o(),c=setTimeout(async()=>{await AC(e),n.onEvent(kC())},l9),l=async g=>{clearTimeout(c);const v=await AC(e);let w=null;v&&(g!=null&&g.url)&&(w=o9(v,g.url)),n.onEvent(w||kC())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,l);const d=s,f=`${o.packageName.toLowerCase()}://`;$o().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(f)&&l({url:g}),typeof d=="function")try{d(g)}catch(v){console.error(v)}}}}const d9=h9;function kC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e){cn(t)._logFramework(e)}var p9="@firebase/auth-compat",m9="0.3.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=1e3;function Ul(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function v9(){return Ul()==="http:"||Ul()==="https:"}function J2(t=bt()){return!!((Ul()==="file:"||Ul()==="ionic:"||Ul()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function y9(){return jw()||Vw()}function w9(){return ik()&&(document==null?void 0:document.documentMode)===11}function b9(t=bt()){return/Edge\/\d+/.test(t)}function I9(t=bt()){return w9()||b9(t)}function X2(){try{const t=self.localStorage,e=zh();if(t)return t.setItem(e,"1"),t.removeItem(e),I9()?dc():!0}catch{return Ob()&&dc()}return!1}function Ob(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xv(){return(v9()||Bw()||J2())&&!y9()&&X2()&&!Ob()}function Z2(){return J2()&&typeof document<"u"}async function _9(){return Z2()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},g9);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function E9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci={LOCAL:"local",NONE:"none",SESSION:"session"},dl=q,eN="persistence";function S9(t,e){if(dl(Object.values(ci).includes(e),t,"invalid-persistence-type"),jw()){dl(e!==ci.SESSION,t,"unsupported-persistence-type");return}if(Vw()){dl(e===ci.NONE,t,"unsupported-persistence-type");return}if(Ob()){dl(e===ci.NONE||e===ci.LOCAL&&dc(),t,"unsupported-persistence-type");return}dl(e===ci.NONE||X2(),t,"unsupported-persistence-type")}async function uw(t){await t._initializationPromise;const e=tN(),n=To(eN,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function T9(t,e){const n=tN();if(!n)return[];const i=To(eN,t,e);switch(n.getItem(i)){case ci.NONE:return[Tc];case ci.LOCAL:return[Ac,Ts];case ci.SESSION:return[Ts];default:return[]}}function tN(){var t;try{return((t=E9())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=q;class cs{constructor(){this.browserResolver=li(I2),this.cordovaResolver=li(d9),this.underlyingResolver=null,this._redirectPersistence=Ts,this._completeRedirectFn=Mm,this._overrideRedirectResult=Sb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,s)}async _openRedirect(e,n,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Z2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return C9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await _9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){return t.unwrap()}function A9(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){return iN(t)}function R9(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new x9(t,x6(t,e))}else if(i){const s=iN(e),o=e;s&&(o.credential=s,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function iN(t){const{_tokenResponse:e}=t instanceof gn?t.customData:t;if(!e)return null;if(!(t instanceof gn)&&"temporaryProof"in e&&"phoneNumber"in e)return Uo.credentialFromResult(t);const n=e.providerId;if(!n||n===hl.PASSWORD)return null;let i;switch(n){case hl.GOOGLE:i=gi;break;case hl.FACEBOOK:i=Ki;break;case hl.GITHUB:i=zi;break;case hl.TWITTER:i=Gi;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:c,pendingToken:l,nonce:d}=e;return!o&&!c&&!s&&!l?null:l?n.startsWith("saml.")?Cc._create(n,l):nr._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:s,accessToken:o}):new sc(n).credential({idToken:s,accessToken:o,rawNonce:d})}return t instanceof gn?i.credentialFromError(t):i.credentialFromResult(t)}function Kn(t,e){return e.catch(n=>{throw n instanceof gn&&R9(t,n),n}).then(n=>{const i=n.operationType,s=n.user;return{operationType:i,credential:k9(n),additionalUserInfo:S6(n),user:mr.getOrCreate(s)}})}async function lw(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>Kn(t,n.confirm(i))}}class x9{constructor(e,n){this.resolver=n,this.auth=A9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Kn(nN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._delegate=e,this.multiFactor=O6(e)}static getOrCreate(e){return mr.USER_MAP.has(e)||mr.USER_MAP.set(e,new mr(e)),mr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Kn(this.auth,ZD(this._delegate,e))}async linkWithPhoneNumber(e,n){return lw(this.auth,f$(this._delegate,e,n))}async linkWithPopup(e){return Kn(this.auth,I$(this._delegate,e,cs))}async linkWithRedirect(e){return await uw(cn(this.auth)),x$(this._delegate,e,cs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Kn(this.auth,e2(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return lw(this.auth,p$(this._delegate,e,n))}reauthenticateWithPopup(e){return Kn(this.auth,b$(this._delegate,e,cs))}async reauthenticateWithRedirect(e){return await uw(cn(this.auth)),k$(this._delegate,e,cs)}sendEmailVerification(e){return f6(this._delegate,e)}async unlink(e){return await Z5(this._delegate,e),this}updateEmail(e){return v6(this._delegate,e)}updatePassword(e){return y6(this._delegate,e)}updatePhoneNumber(e){return m$(this._delegate,e)}updateProfile(e){return g6(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return p6(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=q;class hw{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;fl(i,"invalid-api-key",{appName:e.name}),fl(i,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?cs:void 0;this._delegate=n.initialize({options:{persistence:D9(i,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(o5),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){KD(this._delegate,e,n)}applyActionCode(e){return r6(this._delegate,e)}checkActionCode(e){return t2(this._delegate,e)}confirmPasswordReset(e,n){return i6(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Kn(this._delegate,o6(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return d6(this._delegate,e)}isSignInWithEmailLink(e){return u6(this._delegate,e)}async getRedirectResult(){fl(Xv(),this._delegate,"operation-not-supported-in-this-environment");const e=await N$(this._delegate,cs);return e?Kn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){f9(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:s,error:o,complete:c}=RC(e,n,i);return this._delegate.onAuthStateChanged(s,o,c)}onIdTokenChanged(e,n,i){const{next:s,error:o,complete:c}=RC(e,n,i);return this._delegate.onIdTokenChanged(s,o,c)}sendSignInLinkToEmail(e,n){return c6(this._delegate,e,n)}sendPasswordResetEmail(e,n){return n6(this._delegate,e,n||void 0)}async setPersistence(e){S9(this._delegate,e);let n;switch(e){case ci.SESSION:n=Ts;break;case ci.LOCAL:n=await li(Ac)._isAvailable()?Ac:Kh;break;case ci.NONE:n=Tc;break;default:return an("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Kn(this._delegate,X5(this._delegate))}signInWithCredential(e){return Kn(this._delegate,xm(this._delegate,e))}signInWithCustomToken(e){return Kn(this._delegate,t6(this._delegate,e))}signInWithEmailAndPassword(e,n){return Kn(this._delegate,a6(this._delegate,e,n))}signInWithEmailLink(e,n){return Kn(this._delegate,l6(this._delegate,e,n))}signInWithPhoneNumber(e,n){return lw(this._delegate,d$(this._delegate,e,n))}async signInWithPopup(e){return fl(Xv(),this._delegate,"operation-not-supported-in-this-environment"),Kn(this._delegate,p2(this._delegate,e,cs))}async signInWithRedirect(e){return fl(Xv(),this._delegate,"operation-not-supported-in-this-environment"),await uw(this._delegate),C$(this._delegate,e,cs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s6(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}hw.Persistence=ci;function RC(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const s=i;return{next:c=>s(c&&mr.getOrCreate(c)),error:e,complete:n}}function D9(t,e){const n=T9(t,e);if(typeof self<"u"&&!n.includes(Ac)&&n.push(Ac),typeof window<"u")for(const i of[Kh,Ts])n.includes(i)||n.push(i);return n.includes(Tc)||n.push(Tc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.providerId="phone",this._delegate=new Uo(nN(fe.auth()))}static credential(e,n){return Uo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Mb.PHONE_SIGN_IN_METHOD=Uo.PHONE_SIGN_IN_METHOD;Mb.PROVIDER_ID=Uo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=q;class P9{constructor(e,n,i=fe.app()){var s;N9((s=i.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new l$(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="auth-compat";function M9(t){t.INTERNAL.registerComponent(new Zn(O9,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new hw(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$a.EMAIL_SIGNIN,PASSWORD_RESET:$a.PASSWORD_RESET,RECOVER_EMAIL:$a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:$a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:$a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:$a.VERIFY_EMAIL}},EmailAuthProvider:Ns,FacebookAuthProvider:Ki,GithubAuthProvider:zi,GoogleAuthProvider:gi,OAuthProvider:sc,SAMLAuthProvider:wp,PhoneAuthProvider:Mb,PhoneMultiFactorGenerator:_2,RecaptchaVerifier:P9,TwitterAuthProvider:Gi,Auth:hw,AuthCredential:Jc,Error:gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(p9,m9)}M9(fe);var L9="firebase",F9="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.registerVersion(L9,F9,"app-compat");var dw={},U9={get exports(){return dw},set exports(t){dw=t}};(function(t){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(S,C){C=C||{};var P=document.createEvent("CustomEvent");return P.initCustomEvent(S,!!C.bubbles,!!C.cancelable,C.detail||null),P},e.prototype=window.Event.prototype);function n(b){for(;b&&b!==document.body;){var S=window.getComputedStyle(b),C=function(P,O){return!(S[P]===void 0||S[P]===O)};if(S.opacity<1||C("zIndex","auto")||C("transform","none")||C("mixBlendMode","normal")||C("filter","none")||C("perspective","none")||S.isolation==="isolate"||S.position==="fixed"||S.webkitOverflowScrolling==="touch")return!0;b=b.parentElement}return!1}function i(b){for(;b;){if(b.localName==="dialog")return b;b=b.parentElement}return null}function s(b){b&&b.blur&&b!==document.body&&b.blur()}function o(b,S){for(var C=0;C<b.length;++C)if(b[C]===S)return!0;return!1}function c(b){return!b||!b.hasAttribute("method")?!1:b.getAttribute("method").toLowerCase()==="dialog"}function l(b){if(this.dialog_=b,this.replacedStyleTop_=!1,this.openAsModal_=!1,b.hasAttribute("role")||b.setAttribute("role","dialog"),b.show=this.show.bind(this),b.showModal=this.showModal.bind(this),b.close=this.close.bind(this),"returnValue"in b||(b.returnValue=""),"MutationObserver"in window){var S=new MutationObserver(this.maybeHideModal.bind(this));S.observe(b,{attributes:!0,attributeFilter:["open"]})}else{var C=!1,P=function(){C?this.downgradeModal():this.maybeHideModal(),C=!1}.bind(this),O,Q=function(Y){if(Y.target===b){var ie="DOMNodeRemoved";C|=Y.type.substr(0,ie.length)===ie,window.clearTimeout(O),O=window.setTimeout(P,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(Y){b.addEventListener(Y,Q)})}Object.defineProperty(b,"open",{set:this.setOpen.bind(this),get:b.hasAttribute.bind(b,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}l.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),d.dm.removeDialog(this))},setOpen:function(b){b?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(b){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var S=document.createElement("div");this.dialog_.insertBefore(S,this.dialog_.firstChild),S.tabIndex=-1,S.focus(),this.dialog_.removeChild(S)}var C=document.createEvent("MouseEvents");C.initMouseEvent(b.type,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget),this.dialog_.dispatchEvent(C),b.stopPropagation()},focus_:function(){var b=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!b&&this.dialog_.tabIndex>=0&&(b=this.dialog_),!b){var S=["button","input","keygen","select","textarea"],C=S.map(function(P){return P+":not([disabled])"});C.push('[tabindex]:not([disabled]):not([tabindex=""])'),b=this.dialog_.querySelector(C.join(", "))}s(document.activeElement),b&&b.focus()},updateZIndex:function(b,S){if(b<S)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=b,this.backdrop_.style.zIndex=S},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!d.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");n(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,d.needsCentering(this.dialog_)?(d.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(b){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),b!==void 0&&(this.dialog_.returnValue=b);var S=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(S)}};var d={};if(d.reposition=function(b){var S=document.body.scrollTop||document.documentElement.scrollTop,C=S+(window.innerHeight-b.offsetHeight)/2;b.style.top=Math.max(S,C)+"px"},d.isInlinePositionSetByStylesheet=function(b){for(var S=0;S<document.styleSheets.length;++S){var C=document.styleSheets[S],P=null;try{P=C.cssRules}catch{}if(P)for(var O=0;O<P.length;++O){var Q=P[O],Y=null;try{Y=document.querySelectorAll(Q.selectorText)}catch{}if(!(!Y||!o(Y,b))){var ie=Q.style.getPropertyValue("top"),ne=Q.style.getPropertyValue("bottom");if(ie&&ie!=="auto"||ne&&ne!=="auto")return!0}}}return!1},d.needsCentering=function(b){var S=window.getComputedStyle(b);return S.position!=="absolute"||b.style.top!=="auto"&&b.style.top!==""||b.style.bottom!=="auto"&&b.style.bottom!==""?!1:!d.isInlinePositionSetByStylesheet(b)},d.forceRegisterDialog=function(b){if((window.HTMLDialogElement||b.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",b),b.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new l(b)},d.registerDialog=function(b){b.showModal||d.forceRegisterDialog(b)},d.DialogManager=function(){this.pendingDialogStack=[];var b=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(S){this.forwardTab_=void 0,S.stopPropagation(),b([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=1e5+150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(S){var C=[];S.forEach(function(P){for(var O=0,Q;Q=P.removedNodes[O];++O){if(Q instanceof Element)Q.localName==="dialog"&&C.push(Q);else continue;C=C.concat(Q.querySelectorAll("dialog"))}}),C.length&&b(C)}))},d.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},d.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},d.DialogManager.prototype.updateStacking=function(){for(var b=this.zIndexHigh_,S=0,C;C=this.pendingDialogStack[S];++S)C.updateZIndex(--b,--b),S===0&&(this.overlay.style.zIndex=--b);var P=this.pendingDialogStack[0];if(P){var O=P.dialog.parentNode||document.body;O.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},d.DialogManager.prototype.containedByTopDialog_=function(b){for(;b=i(b);){for(var S=0,C;C=this.pendingDialogStack[S];++S)if(C.dialog===b)return S===0;b=b.parentElement}return!1},d.DialogManager.prototype.handleFocus_=function(b){if(!this.containedByTopDialog_(b.target)&&(b.preventDefault(),b.stopPropagation(),s(b.target),this.forwardTab_!==void 0)){var S=this.pendingDialogStack[0],C=S.dialog,P=C.compareDocumentPosition(b.target);return P&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?S.focus_():document.documentElement.focus()),!1}},d.DialogManager.prototype.handleKey_=function(b){if(this.forwardTab_=void 0,b.keyCode===27){b.preventDefault(),b.stopPropagation();var S=new e("cancel",{bubbles:!1,cancelable:!0}),C=this.pendingDialogStack[0];C&&C.dialog.dispatchEvent(S)&&C.dialog.close()}else b.keyCode===9&&(this.forwardTab_=!b.shiftKey)},d.DialogManager.prototype.checkDOM_=function(b){var S=this.pendingDialogStack.slice();S.forEach(function(C){b.indexOf(C.dialog)!==-1?C.downgradeModal():C.maybeHideModal()})},d.DialogManager.prototype.pushDialog=function(b){var S=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=S?!1:(this.pendingDialogStack.unshift(b)===1&&this.blockDocument(),this.updateStacking(),!0)},d.DialogManager.prototype.removeDialog=function(b){var S=this.pendingDialogStack.indexOf(b);S!==-1&&(this.pendingDialogStack.splice(S,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},d.dm=new d.DialogManager,d.formSubmitter=null,d.useValue=null,window.HTMLDialogElement===void 0){var f=document.createElement("form");if(f.setAttribute("method","dialog"),f.method!=="dialog"){var g=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(g){var v=g.get;g.get=function(){return c(this)?"dialog":v.call(this)};var w=g.set;g.set=function(b){return typeof b=="string"&&b.toLowerCase()==="dialog"?this.setAttribute("method",b):w.call(this,b)},Object.defineProperty(HTMLFormElement.prototype,"method",g)}}document.addEventListener("click",function(b){if(d.formSubmitter=null,d.useValue=null,!b.defaultPrevented){var S=b.target;if(!(!S||!c(S.form))){var C=S.type==="submit"&&["button","input"].indexOf(S.localName)>-1;if(!C){if(!(S.localName==="input"&&S.type==="image"))return;d.useValue=b.offsetX+","+b.offsetY}var P=i(S);P&&(d.formSubmitter=S)}}},!1);var I=HTMLFormElement.prototype.submit,A=function(){if(!c(this))return I.call(this);var b=i(this);b&&b.close()};HTMLFormElement.prototype.submit=A,document.addEventListener("submit",function(b){var S=b.target;if(c(S)){b.preventDefault();var C=i(S);if(C){var P=d.formSubmitter;P&&P.form===S?C.close(d.useValue||P.value):C.close(),d.formSubmitter=null}}},!0)}d.forceRegisterDialog=d.forceRegisterDialog,d.registerDialog=d.registerDialog,typeof t.exports=="object"?t.exports=d:window.dialogPolyfill=d})()})(U9);const V9=dw;/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};wt=function(){var t=[],e=[],n="mdlComponentConfigInternal_";function i(b,S){for(var C=0;C<t.length;C++)if(t[C].className===b)return typeof S<"u"&&(t[C]=S),t[C];return!1}function s(b){var S=b.getAttribute("data-upgraded");return S===null?[""]:S.split(",")}function o(b,S){var C=s(b);return C.indexOf(S)!==-1}function c(b,S,C){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(b,{bubbles:S,cancelable:C});var P=document.createEvent("Events");return P.initEvent(b,S,C),P}function l(b,S){if(typeof b>"u"&&typeof S>"u")for(var C=0;C<t.length;C++)l(t[C].className,t[C].cssClass);else{var P=b;if(typeof S>"u"){var O=i(P);O&&(S=O.cssClass)}for(var Q=document.querySelectorAll("."+S),Y=0;Y<Q.length;Y++)d(Q[Y],P)}}function d(b,S){if(!(typeof b=="object"&&b instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var C=c("mdl-componentupgrading",!0,!0);if(b.dispatchEvent(C),!C.defaultPrevented){var P=s(b),O=[];if(S)o(b,S)||O.push(i(S));else{var Q=b.classList;t.forEach(function(ot){Q.contains(ot.cssClass)&&O.indexOf(ot)===-1&&!o(b,ot.className)&&O.push(ot)})}for(var Y=0,ie=O.length,ne;Y<ie;Y++){if(ne=O[Y],ne){P.push(ne.className),b.setAttribute("data-upgraded",P.join(","));var me=new ne.classConstructor(b);me[n]=ne,e.push(me);for(var it=0,ht=ne.callbacks.length;it<ht;it++)ne.callbacks[it](b);ne.widget&&(b[ne.className]=me)}else throw new Error("Unable to find a registered component for the given class.");var be=c("mdl-componentupgraded",!0,!1);b.dispatchEvent(be)}}}function f(b){Array.isArray(b)||(b instanceof Element?b=[b]:b=Array.prototype.slice.call(b));for(var S=0,C=b.length,P;S<C;S++)P=b[S],P instanceof HTMLElement&&(d(P),P.children.length>0&&f(P.children))}function g(b){var S=typeof b.widget>"u"&&typeof b.widget>"u",C=!0;S||(C=b.widget||b.widget);var P={classConstructor:b.constructor||b.constructor,className:b.classAsString||b.classAsString,cssClass:b.cssClass||b.cssClass,widget:C,callbacks:[]};if(t.forEach(function(Q){if(Q.cssClass===P.cssClass)throw new Error("The provided cssClass has already been registered: "+Q.cssClass);if(Q.className===P.className)throw new Error("The provided className has already been registered")}),b.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");var O=i(b.classAsString,P);O||t.push(P)}function v(b,S){var C=i(b);C&&C.callbacks.push(S)}function w(){for(var b=0;b<t.length;b++)l(t[b].className)}function I(b){if(b){var S=e.indexOf(b);e.splice(S,1);var C=b.element_.getAttribute("data-upgraded").split(","),P=C.indexOf(b[n].classAsString);C.splice(P,1),b.element_.setAttribute("data-upgraded",C.join(","));var O=c("mdl-componentdowngraded",!0,!1);b.element_.dispatchEvent(O)}}function A(b){var S=function(P){e.filter(function(O){return O.element_===P}).forEach(I)};if(b instanceof Array||b instanceof NodeList)for(var C=0;C<b.length;C++)S(b[C]);else if(b instanceof Node)S(b);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:l,upgradeElement:d,upgradeElements:f,upgradeAllRegistered:w,registerUpgradedCallback:v,register:g,downgradeElements:A}}();wt.ComponentConfigPublic;wt.ComponentConfig;wt.Component;wt.upgradeDom=wt.upgradeDom;wt.upgradeElement=wt.upgradeElement;wt.upgradeElements=wt.upgradeElements;wt.upgradeAllRegistered=wt.upgradeAllRegistered;wt.registerUpgradedCallback=wt.registerUpgradedCallback;wt.register=wt.register;wt.downgradeElements=wt.downgradeElements;window.componentHandler=wt;window.componentHandler=wt;window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),wt.upgradeAllRegistered()):(wt.upgradeElement=function(){},wt.register=function(){})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialButton=t,t.prototype.Constant_={},t.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},t.prototype.blurHandler_=function(e){e&&this.element_.blur()},t.prototype.disable=function(){this.element_.disabled=!0},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.element_.disabled=!1},t.prototype.enable=t.prototype.enable,t.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:t,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialSpinner=t,t.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},t.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},t.prototype.createLayer=function(e){var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),o.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var c=[i,s,o],l=0;l<c.length;l++){var d=document.createElement("div");d.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),c[l].appendChild(d)}n.appendChild(i),n.appendChild(s),n.appendChild(o),this.element_.appendChild(n)},t.prototype.createLayer=t.prototype.createLayer,t.prototype.stop=function(){this.element_.classList.remove("is-active")},t.prototype.stop=t.prototype.stop,t.prototype.start=function(){this.element_.classList.add("is-active")},t.prototype.start=t.prototype.start,t.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=t,t.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},t.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},t.prototype.onKeyDown_=function(e){var n=e.target.value.split(`
`).length;e.keyCode===13&&n>=this.maxRows&&e.preventDefault()},t.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},t.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.onReset_=function(e){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:t,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var t,e=typeof Object.create=="function"?Object.create:function(r){function a(){}return a.prototype=r,new a},n;if(typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var i;e:{var s={xb:!0},o={};try{o.__proto__=s,i=o.xb;break e}catch{}i=!1}n=i?function(r,a){if(r.__proto__=a,r.__proto__!==a)throw new TypeError(r+" is not extensible");return r}:null}var c=n;function l(r,a){if(r.prototype=e(a.prototype),r.prototype.constructor=r,c)c(r,a);else for(var u in a)if(u!="prototype")if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(a,u);h&&Object.defineProperty(r,u,h)}else r[u]=a[u];r.K=a.prototype}var d=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,u){r!=Array.prototype&&r!=Object.prototype&&(r[a]=u.value)},f=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function g(r,a){if(a){var u=f;r=r.split(".");for(var h=0;h<r.length-1;h++){var p=r[h];p in u||(u[p]={}),u=u[p]}r=r[r.length-1],h=u[r],a=a(h),a!=h&&a!=null&&d(u,r,{configurable:!0,writable:!0,value:a})}}g("Object.is",function(r){return r||function(a,u){return a===u?a!==0||1/a===1/u:a!==a&&u!==u}}),g("Array.prototype.includes",function(r){return r||function(a,u){var h=this;h instanceof String&&(h=String(h));var p=h.length;for(u=u||0,0>u&&(u=Math.max(u+p,0));u<p;u++){var m=h[u];if(m===a||Object.is(m,a))return!0}return!1}});var v=this;function w(r){return r!==void 0}function I(r){return typeof r=="string"}var A=/^[\w+/_-]+[=]{0,2}$/,b=null;function S(){}function C(r){r.W=void 0,r.Xa=function(){return r.W?r.W:r.W=new r}}function P(r){var a=typeof r;if(a=="object")if(r){if(r instanceof Array)return"array";if(r instanceof Object)return a;var u=Object.prototype.toString.call(r);if(u=="[object Window]")return"object";if(u=="[object Array]"||typeof r.length=="number"&&typeof r.splice<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("splice"))return"array";if(u=="[object Function]"||typeof r.call<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("call"))return"function"}else return"null";else if(a=="function"&&typeof r.call>"u")return"object";return a}function O(r){return P(r)=="array"}function Q(r){var a=P(r);return a=="array"||a=="object"&&typeof r.length=="number"}function Y(r){return P(r)=="function"}function ie(r){var a=typeof r;return a=="object"&&r!=null||a=="function"}var ne="closure_uid_"+(1e9*Math.random()>>>0),me=0;function it(r,a,u){return r.call.apply(r.bind,arguments)}function ht(r,a,u){if(!r)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,h),r.apply(a,p)}}return function(){return r.apply(a,arguments)}}function be(r,a,u){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?be=it:be=ht,be.apply(null,arguments)}function ot(r,a){var u=Array.prototype.slice.call(arguments,1);return function(){var h=u.slice();return h.push.apply(h,arguments),r.apply(this,h)}}function Ue(r,a){for(var u in a)r[u]=a[u]}var Rt=Date.now||function(){return+new Date};function Ee(r,a){r=r.split(".");var u=v;r[0]in u||typeof u.execScript>"u"||u.execScript("var "+r[0]);for(var h;r.length&&(h=r.shift());)!r.length&&w(a)?u[h]=a:u[h]&&u[h]!==Object.prototype[h]?u=u[h]:u=u[h]={}}function oe(r,a){function u(){}u.prototype=a.prototype,r.K=a.prototype,r.prototype=new u,r.prototype.constructor=r,r.vc=function(h,p,m){for(var y=Array(arguments.length-2),E=2;E<arguments.length;E++)y[E-2]=arguments[E];return a.prototype[p].apply(h,y)}}function ke(r){if(Error.captureStackTrace)Error.captureStackTrace(this,ke);else{var a=Error().stack;a&&(this.stack=a)}r&&(this.message=String(r))}oe(ke,Error),ke.prototype.name="CustomError";var He;function Cn(r,a){r=r.split("%s");for(var u="",h=r.length-1,p=0;p<h;p++)u+=r[p]+(p<a.length?a[p]:"%s");ke.call(this,u+r[h])}oe(Cn,ke),Cn.prototype.name="AssertionError";function hn(r,a){throw new Cn("Failure"+(r?": "+r:""),Array.prototype.slice.call(arguments,1))}var Vn=Array.prototype.indexOf?function(r,a){return Array.prototype.indexOf.call(r,a,void 0)}:function(r,a){if(I(r))return I(a)&&a.length==1?r.indexOf(a,0):-1;for(var u=0;u<r.length;u++)if(u in r&&r[u]===a)return u;return-1},Ut=Array.prototype.forEach?function(r,a,u){Array.prototype.forEach.call(r,a,u)}:function(r,a,u){for(var h=r.length,p=I(r)?r.split(""):r,m=0;m<h;m++)m in p&&a.call(u,p[m],m,r)};function Nr(r,a){for(var u=I(r)?r.split(""):r,h=r.length-1;0<=h;--h)h in u&&a.call(void 0,u[h],h,r)}var ea=Array.prototype.filter?function(r,a){return Array.prototype.filter.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=[],p=0,m=I(r)?r.split(""):r,y=0;y<u;y++)if(y in m){var E=m[y];a.call(void 0,E,y,r)&&(h[p++]=E)}return h},L=Array.prototype.map?function(r,a){return Array.prototype.map.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=Array(u),p=I(r)?r.split(""):r,m=0;m<u;m++)m in p&&(h[m]=a.call(void 0,p[m],m,r));return h},Z=Array.prototype.some?function(r,a){return Array.prototype.some.call(r,a,void 0)}:function(r,a){for(var u=r.length,h=I(r)?r.split(""):r,p=0;p<u;p++)if(p in h&&a.call(void 0,h[p],p,r))return!0;return!1};function z(r,a){return 0<=Vn(r,a)}function de(r,a){a=Vn(r,a);var u;return(u=0<=a)&&Ne(r,a),u}function Ne(r,a){return Array.prototype.splice.call(r,a,1).length==1}function at(r,a){e:{for(var u=r.length,h=I(r)?r.split(""):r,p=0;p<u;p++)if(p in h&&a.call(void 0,h[p],p,r)){a=p;break e}a=-1}0<=a&&Ne(r,a)}function Re(r,a){var u=0;Nr(r,function(h,p){a.call(void 0,h,p,r)&&Ne(r,p)&&u++})}function _(r){return Array.prototype.concat.apply([],arguments)}function T(r){var a=r.length;if(0<a){for(var u=Array(a),h=0;h<a;h++)u[h]=r[h];return u}return[]}function D(r,a,u){return 2>=arguments.length?Array.prototype.slice.call(r,a):Array.prototype.slice.call(r,a,u)}var N=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]},U=/&/g,G=/</g,X=/>/g,K=/"/g,H=/'/g,j=/\x00/g,ge=/[\x00&<>"']/;function re(r,a){return r<a?-1:r>a?1:0}function ue(r){return ge.test(r)&&(r.indexOf("&")!=-1&&(r=r.replace(U,"&amp;")),r.indexOf("<")!=-1&&(r=r.replace(G,"&lt;")),r.indexOf(">")!=-1&&(r=r.replace(X,"&gt;")),r.indexOf('"')!=-1&&(r=r.replace(K,"&quot;")),r.indexOf("'")!=-1&&(r=r.replace(H,"&#39;")),r.indexOf("\0")!=-1&&(r=r.replace(j,"&#0;"))),r}function we(r,a,u){for(var h in r)a.call(u,r[h],h,r)}function xe(r){var a={},u;for(u in r)a[u]=r[u];return a}var Xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(r,a){for(var u,h,p=1;p<arguments.length;p++){h=arguments[p];for(u in h)r[u]=h[u];for(var m=0;m<Xe.length;m++)u=Xe[m],Object.prototype.hasOwnProperty.call(h,u)&&(r[u]=h[u])}}var rt="StopIteration"in v?v.StopIteration:{message:"StopIteration",stack:""};function Kt(){}Kt.prototype.next=function(){throw rt},Kt.prototype.ha=function(){return this};function ir(r){if(r instanceof Kt)return r;if(typeof r.ha=="function")return r.ha(!1);if(Q(r)){var a=0,u=new Kt;return u.next=function(){for(;;){if(a>=r.length)throw rt;if(a in r)return r[a++];a++}},u}throw Error("Not implemented")}function Hh(r,a){if(Q(r))try{Ut(r,a,void 0)}catch(u){if(u!==rt)throw u}else{r=ir(r);try{for(;;)a.call(void 0,r.next(),void 0,r)}catch(u){if(u!==rt)throw u}}}function Os(r){if(Q(r))return T(r);r=ir(r);var a=[];return Hh(r,function(u){a.push(u)}),a}function Ms(r,a){this.g={},this.a=[],this.j=this.h=0;var u=arguments.length;if(1<u){if(u%2)throw Error("Uneven number of arguments");for(var h=0;h<u;h+=2)this.set(arguments[h],arguments[h+1])}else if(r)if(r instanceof Ms)for(u=r.ja(),h=0;h<u.length;h++)this.set(u[h],r.get(u[h]));else for(h in r)this.set(h,r[h])}t=Ms.prototype,t.la=function(){Jt(this);for(var r=[],a=0;a<this.a.length;a++)r.push(this.g[this.a[a]]);return r},t.ja=function(){return Jt(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0};function Jt(r){if(r.h!=r.a.length){for(var a=0,u=0;a<r.a.length;){var h=r.a[a];Xt(r.g,h)&&(r.a[u++]=h),a++}r.a.length=u}if(r.h!=r.a.length){var p={};for(u=a=0;a<r.a.length;)h=r.a[a],Xt(p,h)||(r.a[u++]=h,p[h]=1),a++;r.a.length=u}}t.get=function(r,a){return Xt(this.g,r)?this.g[r]:a},t.set=function(r,a){Xt(this.g,r)||(this.h++,this.a.push(r),this.j++),this.g[r]=a},t.forEach=function(r,a){for(var u=this.ja(),h=0;h<u.length;h++){var p=u[h],m=this.get(p);r.call(a,m,p,this)}},t.ha=function(r){Jt(this);var a=0,u=this.j,h=this,p=new Kt;return p.next=function(){if(u!=h.j)throw Error("The map has changed since the iterator was created");if(a>=h.a.length)throw rt;var m=h.a[a++];return r?m:h.g[m]},p};function Xt(r,a){return Object.prototype.hasOwnProperty.call(r,a)}var Wh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bN(r,a){if(r){r=r.split("&");for(var u=0;u<r.length;u++){var h=r[u].indexOf("="),p=null;if(0<=h){var m=r[u].substring(0,h);p=r[u].substring(h+1)}else m=r[u];a(m,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}function Bb(r,a,u,h){for(var p=u.length;0<=(a=r.indexOf(u,a))&&a<h;){var m=r.charCodeAt(a-1);if((m==38||m==63)&&(m=r.charCodeAt(a+p),!m||m==61||m==38||m==35))return a;a+=p+1}return-1}var jb=/#|$/;function Yh(r,a){var u=r.search(jb),h=Bb(r,0,a,u);if(0>h)return null;var p=r.indexOf("&",h);return(0>p||p>u)&&(p=u),h+=a.length+1,decodeURIComponent(r.substr(h,p-h).replace(/\+/g," "))}var IN=/[?&]($|#)/;function Pr(r,a){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var u;r instanceof Pr?(this.i=w(a)?a:r.i,qm(this,r.j),this.A=r.A,this.h=r.h,Km(this,r.C),this.g=r.g,zm(this,Kb(r.a)),this.s=r.s):r&&(u=String(r).match(Wh))?(this.i=!!a,qm(this,u[1]||"",!0),this.A=Zc(u[2]||""),this.h=Zc(u[3]||"",!0),Km(this,u[4]),this.g=Zc(u[5]||"",!0),zm(this,u[6]||"",!0),this.s=Zc(u[7]||"")):(this.i=!!a,this.a=new tu(null,this.i))}Pr.prototype.toString=function(){var r=[],a=this.j;a&&r.push(eu(a,$b,!0),":");var u=this.h;return(u||a=="file")&&(r.push("//"),(a=this.A)&&r.push(eu(a,$b,!0),"@"),r.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.C,u!=null&&r.push(":",String(u))),(u=this.g)&&(this.h&&u.charAt(0)!="/"&&r.push("/"),r.push(eu(u,u.charAt(0)=="/"?SN:EN,!0))),(u=this.a.toString())&&r.push("?",u),(u=this.s)&&r.push("#",eu(u,CN)),r.join("")};function qm(r,a,u){r.j=u?Zc(a,!0):a,r.j&&(r.j=r.j.replace(/:$/,""))}function Km(r,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);r.C=a}else r.C=null}function zm(r,a,u){a instanceof tu?(r.a=a,AN(r.a,r.i)):(u||(a=eu(a,TN)),r.a=new tu(a,r.i))}function Gm(r){return r instanceof Pr?new Pr(r):new Pr(r,void 0)}function Zc(r,a){return r?a?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function eu(r,a,u){return I(r)?(r=encodeURI(r).replace(a,_N),u&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function _N(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var $b=/[#\/\?@]/g,EN=/[#\?:]/g,SN=/[#\?]/g,TN=/[#\?@]/g,CN=/#/g;function tu(r,a){this.g=this.a=null,this.h=r||null,this.j=!!a}function Or(r){r.a||(r.a=new Ms,r.g=0,r.h&&bN(r.h,function(a,u){r.add(decodeURIComponent(a.replace(/\+/g," ")),u)}))}t=tu.prototype,t.add=function(r,a){Or(this),this.h=null,r=ta(this,r);var u=this.a.get(r);return u||this.a.set(r,u=[]),u.push(a),this.g+=1,this};function Ls(r,a){Or(r),a=ta(r,a),Xt(r.a.g,a)&&(r.h=null,r.g-=r.a.get(a).length,r=r.a,Xt(r.g,a)&&(delete r.g[a],r.h--,r.j++,r.a.length>2*r.h&&Jt(r)))}t.clear=function(){this.a=this.h=null,this.g=0};function qb(r,a){return Or(r),a=ta(r,a),Xt(r.a.g,a)}t.forEach=function(r,a){Or(this),this.a.forEach(function(u,h){Ut(u,function(p){r.call(a,p,h,this)},this)},this)},t.ja=function(){Or(this);for(var r=this.a.la(),a=this.a.ja(),u=[],h=0;h<a.length;h++)for(var p=r[h],m=0;m<p.length;m++)u.push(a[h]);return u},t.la=function(r){Or(this);var a=[];if(I(r))qb(this,r)&&(a=_(a,this.a.get(ta(this,r))));else{r=this.a.la();for(var u=0;u<r.length;u++)a=_(a,r[u])}return a},t.set=function(r,a){return Or(this),this.h=null,r=ta(this,r),qb(this,r)&&(this.g-=this.a.get(r).length),this.a.set(r,[a]),this.g+=1,this},t.get=function(r,a){return r?(r=this.la(r),0<r.length?String(r[0]):a):a},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var r=[],a=this.a.ja(),u=0;u<a.length;u++){var h=a[u],p=encodeURIComponent(String(h));h=this.la(h);for(var m=0;m<h.length;m++){var y=p;h[m]!==""&&(y+="="+encodeURIComponent(String(h[m]))),r.push(y)}}return this.h=r.join("&")};function Kb(r){var a=new tu;return a.h=r.h,r.a&&(a.a=new Ms(r.a),a.g=r.g),a}function ta(r,a){return a=String(a),r.j&&(a=a.toLowerCase()),a}function AN(r,a){a&&!r.j&&(Or(r),r.h=null,r.a.forEach(function(u,h){var p=h.toLowerCase();h!=p&&(Ls(this,h),Ls(this,p),0<u.length&&(this.h=null,this.a.set(ta(this,p),T(u)),this.g+=u.length))},r)),r.j=a}function Fs(r){this.a=Gm(r)}function kN(r,a){a?r.a.a.set(Vt.Sa,a):Ls(r.a.a,Vt.Sa)}function RN(r,a){a!==null?r.a.a.set(Vt.Qa,a?"1":"0"):Ls(r.a.a,Vt.Qa)}function zb(r){return r.a.a.get(Vt.Pa)||null}function Gb(r,a){a?r.a.a.set(Vt.PROVIDER_ID,a):Ls(r.a.a,Vt.PROVIDER_ID)}Fs.prototype.toString=function(){return this.a.toString()};var Vt={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},na;e:{var Hb=v.navigator;if(Hb){var Wb=Hb.userAgent;if(Wb){na=Wb;break e}}na=""}function Pe(r){return na.indexOf(r)!=-1}function Yb(){return(Pe("Chrome")||Pe("CriOS"))&&!Pe("Edge")}function Hm(r){return Hm[" "](r),r}Hm[" "]=S;function xN(r,a){var u=PN;return Object.prototype.hasOwnProperty.call(u,r)?u[r]:u[r]=a(r)}var Qb=Pe("Opera"),_t=Pe("Trident")||Pe("MSIE"),Mr=Pe("Edge"),DN=Mr||_t,bi=Pe("Gecko")&&!(na.toLowerCase().indexOf("webkit")!=-1&&!Pe("Edge"))&&!(Pe("Trident")||Pe("MSIE"))&&!Pe("Edge"),An=na.toLowerCase().indexOf("webkit")!=-1&&!Pe("Edge"),NN=An&&Pe("Mobile"),Lr=Pe("Macintosh");function Jb(){var r=v.document;return r?r.documentMode:void 0}var Qh;e:{var Wm="",Ym=function(){var r=na;if(bi)return/rv:([^\);]+)(\)|;)/.exec(r);if(Mr)return/Edge\/([\d\.]+)/.exec(r);if(_t)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r);if(An)return/WebKit\/(\S+)/.exec(r);if(Qb)return/(?:Version)[ \/]?(\S+)/.exec(r)}();if(Ym&&(Wm=Ym?Ym[1]:""),_t){var Qm=Jb();if(Qm!=null&&Qm>parseFloat(Wm)){Qh=String(Qm);break e}}Qh=Wm}var PN={};function Us(r){return xN(r,function(){for(var a=0,u=N(String(Qh)).split("."),h=N(String(r)).split("."),p=Math.max(u.length,h.length),m=0;a==0&&m<p;m++){var y=u[m]||"",E=h[m]||"";do{if(y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],E=/(\d*)(\D*)(.*)/.exec(E)||["","","",""],y[0].length==0&&E[0].length==0)break;a=re(y[1].length==0?0:parseInt(y[1],10),E[1].length==0?0:parseInt(E[1],10))||re(y[2].length==0,E[2].length==0)||re(y[2],E[2]),y=y[3],E=E[3]}while(a==0)}return 0<=a})}var nu,Xb=v.document;nu=Xb&&_t?Jb()||(Xb.compatMode=="CSS1Compat"?parseInt(Qh,10):5):void 0;function ia(r,a){this.a=r===eI&&a||"",this.g=Zb}ia.prototype.ma=!0,ia.prototype.ka=function(){return this.a},ia.prototype.toString=function(){return"Const{"+this.a+"}"};var Zb={},eI={};function Vs(){this.a="",this.h=nI}Vs.prototype.ma=!0,Vs.prototype.ka=function(){return this.a.toString()},Vs.prototype.g=function(){return 1},Vs.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function tI(r){return r instanceof Vs&&r.constructor===Vs&&r.h===nI?r.a:(hn("expected object of type TrustedResourceUrl, got '"+r+"' of type "+P(r)),"type_error:TrustedResourceUrl")}function ON(){var r=TP;r instanceof ia&&r.constructor===ia&&r.g===Zb?r=r.a:(hn("expected object of type Const, got '"+r+"'"),r="type_error:Const");var a=new Vs;return a.a=r,a}var nI={};function ti(){this.a="",this.h=sI}ti.prototype.ma=!0,ti.prototype.ka=function(){return this.a.toString()},ti.prototype.g=function(){return 1},ti.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Fr(r){return r instanceof ti&&r.constructor===ti&&r.h===sI?r.a:(hn("expected object of type SafeUrl, got '"+r+"' of type "+P(r)),"type_error:SafeUrl")}var iI=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Jh(r){return r instanceof ti?r:(r=typeof r=="object"&&r.ma?r.ka():String(r),iI.test(r)||(r="about:invalid#zClosurez"),Jm(r))}function rI(r){return r instanceof ti?r:(r=typeof r=="object"&&r.ma?r.ka():String(r),iI.test(r)||(r="about:invalid#zClosurez"),Jm(r))}var sI={};function Jm(r){var a=new ti;return a.a=r,a}Jm("about:blank");function ra(){this.a="",this.g=oI}ra.prototype.ma=!0;var oI={};ra.prototype.ka=function(){return this.a},ra.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function Ur(){this.a="",this.j=aI,this.h=null}Ur.prototype.g=function(){return this.h},Ur.prototype.ma=!0,Ur.prototype.ka=function(){return this.a.toString()},Ur.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Xh(r){return r instanceof Ur&&r.constructor===Ur&&r.j===aI?r.a:(hn("expected object of type SafeHtml, got '"+r+"' of type "+P(r)),"type_error:SafeHtml")}var aI={};function iu(r,a){var u=new Ur;return u.a=r,u.h=a,u}iu("<!DOCTYPE html>",0);var MN=iu("",0);iu("<br>",0);var LN=function(r){var a=!1,u;return function(){return a||(u=r(),a=!0),u}}(function(){if(typeof document>"u")return!1;var r=document.createElement("div"),a=document.createElement("div");return a.appendChild(document.createElement("div")),r.appendChild(a),r.firstChild?(a=r.firstChild.firstChild,r.innerHTML=Xh(MN),!a.parentElement):!1});function FN(r,a){if(r.src=tI(a),b===null)e:{if(a=v.document,(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&A.test(a)){b=a;break e}b=""}a=b,a&&r.setAttribute("nonce",a)}function sa(r,a){a=a instanceof ti?a:rI(a),r.assign(Fr(a))}function Vr(r,a){this.a=w(r)?r:0,this.g=w(a)?a:0}Vr.prototype.toString=function(){return"("+this.a+", "+this.g+")"},Vr.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},Vr.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},Vr.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function Xm(r,a){this.width=r,this.height=a}t=Xm.prototype,t.toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function Zh(r){return r?new ng(ru(r)):He||(He=new ng)}function Zm(r,a){var u=a||document;return u.querySelectorAll&&u.querySelector?u.querySelectorAll("."+r):cI(document,r,a)}function eg(r,a){var u=a||document;if(u.getElementsByClassName)r=u.getElementsByClassName(r)[0];else{u=document;var h=a||u;r=h.querySelectorAll&&h.querySelector&&r?h.querySelector(r?"."+r:""):cI(u,r,a)[0]||null}return r||null}function cI(r,a,u){var h;if(r=u||r,r.querySelectorAll&&r.querySelector&&a)return r.querySelectorAll(a?"."+a:"");if(a&&r.getElementsByClassName){var p=r.getElementsByClassName(a);return p}if(p=r.getElementsByTagName("*"),a){var m={};for(u=h=0;r=p[u];u++){var y=r.className;typeof y.split=="function"&&z(y.split(/\s+/),a)&&(m[h++]=r)}return m.length=h,m}return p}function UN(r,a){we(a,function(u,h){u&&typeof u=="object"&&u.ma&&(u=u.ka()),h=="style"?r.style.cssText=u:h=="class"?r.className=u:h=="for"?r.htmlFor=u:uI.hasOwnProperty(h)?r.setAttribute(uI[h],u):h.lastIndexOf("aria-",0)==0||h.lastIndexOf("data-",0)==0?r.setAttribute(h,u):r[h]=u})}var uI={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ed(r){return r.scrollingElement?r.scrollingElement:(An||r.compatMode!="CSS1Compat")&&r.body||r.documentElement}function Bs(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function ru(r){return r.nodeType==9?r:r.ownerDocument||r.document}function tg(r,a){if("textContent"in r)r.textContent=a;else if(r.nodeType==3)r.data=String(a);else if(r.firstChild&&r.firstChild.nodeType==3){for(;r.lastChild!=r.firstChild;)r.removeChild(r.lastChild);r.firstChild.data=String(a)}else{for(var u;u=r.firstChild;)r.removeChild(u);r.appendChild(ru(r).createTextNode(String(a)))}}function lI(r,a){return a?VN(r,function(u){return!a||I(u.className)&&z(u.className.split(/\s+/),a)}):null}function VN(r,a){for(var u=0;r;){if(a(r))return r;r=r.parentNode,u++}return null}function ng(r){this.a=r||v.document||document}ng.prototype.N=function(){return I(void 0)?this.a.getElementById(void 0):void 0};var td={Fc:!0},hI={Hc:!0},BN={Ec:!0},dI={Gc:!0};function Br(){throw Error("Do not instantiate directly")}Br.prototype.va=null,Br.prototype.toString=function(){return this.content};function su(r,a,u,h){if(r=r(a||qN,void 0,u),h=(h||Zh()).a.createElement("DIV"),r=jN(r),r.match($N),r=iu(r,null),LN())for(;h.lastChild;)h.removeChild(h.lastChild);return h.innerHTML=Xh(r),h.childNodes.length==1&&(r=h.firstChild,r.nodeType==1&&(h=r)),h}function jN(r){if(!ie(r))return ue(String(r));if(r instanceof Br){if(r.fa===td)return r.content;if(r.fa===dI)return ue(r.content)}return hn("Soy template output is unsafe for use as HTML: "+r),"zSoyz"}var $N=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,qN={};function KN(r){if(r!=null)switch(r.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function nd(){Br.call(this)}oe(nd,Br),nd.prototype.fa=td;function ye(r){return r!=null&&r.fa===td?r:r instanceof Ur?ee(Xh(r).toString(),r.g()):ee(ue(String(String(r))),KN(r))}function id(){Br.call(this)}oe(id,Br),id.prototype.fa=hI,id.prototype.va=1;function rd(r,a){this.content=String(r),this.va=a??null}oe(rd,Br),rd.prototype.fa=dI;function qe(r){return new rd(r,void 0)}var ee=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u,h){return u=new a(String(u)),h!==void 0&&(u.va=h),u}}(nd),zN=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u){return new a(String(u))}}(id);function GN(r){function a(){}var u={label:Et("New password")};a.prototype=r,r=new a;for(var h in u)r[h]=u[h];return r}function Et(r){return(r=String(r))?new rd(r,void 0):""}var fI=function(r){function a(u){this.content=u}return a.prototype=r.prototype,function(u,h){return u=String(u),u?(u=new a(u),h!==void 0&&(u.va=h),u):""}}(nd);function kn(r){return r!=null&&r.fa===td?String(String(r.content).replace(ZN,"").replace(eP,"&lt;")).replace(QN,WN):ue(String(r))}function js(r){return r!=null&&r.fa===hI?r=String(r).replace(rg,ig):r instanceof ti?r=String(Fr(r).toString()).replace(rg,ig):(r=String(r),XN.test(r)?r=r.replace(rg,ig):(hn("Bad value `%s` for |filterNormalizeUri",[r]),r="#zSoyz")),r}function pI(r){return r!=null&&r.fa===BN?r=r.content:r==null?r="":r instanceof ra?r instanceof ra&&r.constructor===ra&&r.g===oI?r=r.a:(hn("expected object of type SafeStyle, got '"+r+"' of type "+P(r)),r="type_error:SafeStyle"):(r=String(r),JN.test(r)||(hn("Bad value `%s` for |filterCssValue",[r]),r="zSoyz")),r}var HN={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function WN(r){return HN[r]}var YN={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function ig(r){return YN[r]}var QN=/[\x00\x22\x27\x3c\x3e]/g,rg=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,JN=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,XN=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,ZN=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,eP=/</g;function sg(){return qe("Enter a valid phone number")}function mI(){return qe("Unable to send password reset code to specified email")}function gI(){return qe("Something went wrong. Please try again.")}function vI(){return qe("This email already exists without any means of sign-in. Please reset the password to recover.")}function yI(r){r=r||{};var a="";switch(r.code){case"invalid-argument":a+="Client specified an invalid argument.";break;case"invalid-configuration":a+="Client specified an invalid project configuration.";break;case"failed-precondition":a+="Request can not be executed in the current system state.";break;case"out-of-range":a+="Client specified an invalid range.";break;case"unauthenticated":a+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":a+="Client does not have sufficient permission.";break;case"not-found":a+="Specified resource is not found.";break;case"aborted":a+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":a+="The resource that a client tried to create already exists.";break;case"resource-exhausted":a+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":a+="Request cancelled by the client.";break;case"data-loss":a+="Unrecoverable data loss or data corruption.";break;case"unknown":a+="Unknown server error.";break;case"internal":a+="Internal server error.";break;case"not-implemented":a+="API method not implemented by the server.";break;case"unavailable":a+="Service unavailable.";break;case"deadline-exceeded":a+="Request deadline exceeded.";break;case"auth/user-disabled":a+="The user account has been disabled by an administrator.";break;case"auth/timeout":a+="The operation has timed out.";break;case"auth/too-many-requests":a+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":a+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":a+="A network error has occurred. Try again later.";break;case"restart-process":a+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":a+="No sign-in provider is available for the given email, please try with a different email."}return qe(a)}function wI(){return qe("Please login again to perform this operation")}function ou(r,a,u){var h=Error.call(this);if(this.message=h.message,"stack"in h&&(this.stack=h.stack),this.code=tP+r,!(r=a)){switch(r="",this.code){case"firebaseui/merge-conflict":r+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:r+=gI()}r=qe(r).toString()}this.message=r||"",this.credential=u||null}l(ou,Error),ou.prototype.toJSON=function(){return{code:this.code,message:this.message}};var tP="firebaseui/";function $s(){this.T=this.T,this.C=this.C}var nP=0;$s.prototype.T=!1,$s.prototype.m=function(){!this.T&&(this.T=!0,this.o(),nP!=0)&&(this[ne]||(this[ne]=++me))};function au(r,a){r.T?w(void 0)?a.call(void 0):a():(r.C||(r.C=[]),r.C.push(w(void 0)?be(a,void 0):a))}$s.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function cu(r){r&&typeof r.m=="function"&&r.m()}var iP=Object.freeze||function(r){return r},bI=!_t||9<=Number(nu),rP=_t&&!Us("9"),sP=function(){if(!v.addEventListener||!Object.defineProperty)return!1;var r=!1,a=Object.defineProperty({},"passive",{get:function(){r=!0}});try{v.addEventListener("test",S,a),v.removeEventListener("test",S,a)}catch{}return r}();function rr(r,a){this.type=r,this.g=this.target=a,this.h=!1,this.qb=!0}rr.prototype.stopPropagation=function(){this.h=!0},rr.prototype.preventDefault=function(){this.qb=!1};function Rn(r,a){if(rr.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,r){var u=this.type=r.type,h=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=a,a=r.relatedTarget){if(bi){e:{try{Hm(a.nodeName);var p=!0;break e}catch{}p=!1}p||(a=null)}}else u=="mouseover"?a=r.fromElement:u=="mouseout"&&(a=r.toElement);this.relatedTarget=a,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.keyCode=r.keyCode||0,this.key=r.key||"",this.j=r.charCode||(u=="keypress"?r.keyCode:0),this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=I(r.pointerType)?r.pointerType:oP[r.pointerType]||"",this.a=r,r.defaultPrevented&&this.preventDefault()}}oe(Rn,rr);var oP=iP({2:"touch",3:"pen",4:"mouse"});Rn.prototype.stopPropagation=function(){Rn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Rn.prototype.preventDefault=function(){Rn.K.preventDefault.call(this);var r=this.a;if(r.preventDefault)r.preventDefault();else if(r.returnValue=!1,rP)try{(r.ctrlKey||112<=r.keyCode&&123>=r.keyCode)&&(r.keyCode=-1)}catch{}};var uu="closure_listenable_"+(1e6*Math.random()|0),aP=0;function cP(r,a,u,h,p){this.listener=r,this.proxy=null,this.src=a,this.type=u,this.capture=!!h,this.La=p,this.key=++aP,this.sa=this.Ia=!1}function sd(r){r.sa=!0,r.listener=null,r.proxy=null,r.src=null,r.La=null}function od(r){this.src=r,this.a={},this.g=0}od.prototype.add=function(r,a,u,h,p){var m=r.toString();r=this.a[m],r||(r=this.a[m]=[],this.g++);var y=ag(r,a,h,p);return-1<y?(a=r[y],u||(a.Ia=!1)):(a=new cP(a,this.src,m,!!h,p),a.Ia=u,r.push(a)),a};function og(r,a){var u=a.type;u in r.a&&de(r.a[u],a)&&(sd(a),r.a[u].length==0&&(delete r.a[u],r.g--))}function ag(r,a,u,h){for(var p=0;p<r.length;++p){var m=r[p];if(!m.sa&&m.listener==a&&m.capture==!!u&&m.La==h)return p}return-1}var cg="closure_lm_"+(1e6*Math.random()|0),ug={};function Ii(r,a,u,h,p){if(h&&h.once)return lu(r,a,u,h,p);if(O(a)){for(var m=0;m<a.length;m++)Ii(r,a[m],u,h,p);return null}return u=hg(u),r&&r[uu]?r.J.add(String(a),u,!1,ie(h)?!!h.capture:!!h,p):II(r,a,u,!1,h,p)}function II(r,a,u,h,p,m){if(!a)throw Error("Invalid event type");var y=ie(p)?!!p.capture:!!p,E=ad(r);if(E||(r[cg]=E=new od(r)),u=E.add(a,u,h,y,m),u.proxy)return u;if(h=uP(),u.proxy=h,h.src=r,h.listener=u,r.addEventListener)sP||(p=y),p===void 0&&(p=!1),r.addEventListener(a.toString(),h,p);else if(r.attachEvent)r.attachEvent(_I(a.toString()),h);else if(r.addListener&&r.removeListener)r.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");return u}function uP(){var r=lP,a=bI?function(u){return r.call(a.src,a.listener,u)}:function(u){if(u=r.call(a.src,a.listener,u),!u)return u};return a}function lu(r,a,u,h,p){if(O(a)){for(var m=0;m<a.length;m++)lu(r,a[m],u,h,p);return null}return u=hg(u),r&&r[uu]?r.J.add(String(a),u,!0,ie(h)?!!h.capture:!!h,p):II(r,a,u,!0,h,p)}function qs(r,a,u,h,p){if(O(a))for(var m=0;m<a.length;m++)qs(r,a[m],u,h,p);else h=ie(h)?!!h.capture:!!h,u=hg(u),r&&r[uu]?(r=r.J,a=String(a).toString(),a in r.a&&(m=r.a[a],u=ag(m,u,h,p),-1<u&&(sd(m[u]),Ne(m,u),m.length==0&&(delete r.a[a],r.g--)))):r&&(r=ad(r))&&(a=r.a[a.toString()],r=-1,a&&(r=ag(a,u,h,p)),(u=-1<r?a[r]:null)&&jr(u))}function jr(r){if(typeof r!="number"&&r&&!r.sa){var a=r.src;if(a&&a[uu])og(a.J,r);else{var u=r.type,h=r.proxy;a.removeEventListener?a.removeEventListener(u,h,r.capture):a.detachEvent?a.detachEvent(_I(u),h):a.addListener&&a.removeListener&&a.removeListener(h),(u=ad(a))?(og(u,r),u.g==0&&(u.src=null,a[cg]=null)):sd(r)}}}function _I(r){return r in ug?ug[r]:ug[r]="on"+r}function EI(r,a,u,h){var p=!0;if((r=ad(r))&&(a=r.a[a.toString()]))for(a=a.concat(),r=0;r<a.length;r++){var m=a[r];m&&m.capture==u&&!m.sa&&(m=SI(m,h),p=p&&m!==!1)}return p}function SI(r,a){var u=r.listener,h=r.La||r.src;return r.Ia&&jr(r),u.call(h,a)}function lP(r,a){if(r.sa)return!0;if(!bI){if(!a)e:{a=["window","event"];for(var u=v,h=0;h<a.length;h++)if(u=u[a[h]],u==null){a=null;break e}a=u}if(h=a,a=new Rn(h,this),u=!0,!(0>h.keyCode||h.returnValue!=null)){e:{var p=!1;if(h.keyCode==0)try{h.keyCode=-1;break e}catch{p=!0}(p||h.returnValue==null)&&(h.returnValue=!0)}for(h=[],p=a.g;p;p=p.parentNode)h.push(p);for(r=r.type,p=h.length-1;!a.h&&0<=p;p--){a.g=h[p];var m=EI(h[p],r,!0,a);u=u&&m}for(p=0;!a.h&&p<h.length;p++)a.g=h[p],m=EI(h[p],r,!1,a),u=u&&m}return u}return SI(r,new Rn(a,this))}function ad(r){return r=r[cg],r instanceof od?r:null}var lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function hg(r){return Y(r)?r:(r[lg]||(r[lg]=function(a){return r.handleEvent(a)}),r[lg])}function Bt(){$s.call(this),this.J=new od(this),this.wb=this,this.Ha=null}oe(Bt,$s),Bt.prototype[uu]=!0,Bt.prototype.Za=function(r){this.Ha=r},Bt.prototype.removeEventListener=function(r,a,u,h){qs(this,r,a,u,h)};function $r(r,a){var u,h=r.Ha;if(h)for(u=[];h;h=h.Ha)u.push(h);if(r=r.wb,h=a.type||a,I(a))a=new rr(a,r);else if(a instanceof rr)a.target=a.target||r;else{var p=a;a=new rr(h,r),$e(a,p)}if(p=!0,u)for(var m=u.length-1;!a.h&&0<=m;m--){var y=a.g=u[m];p=cd(y,h,!0,a)&&p}if(a.h||(y=a.g=r,p=cd(y,h,!0,a)&&p,a.h||(p=cd(y,h,!1,a)&&p)),u)for(m=0;!a.h&&m<u.length;m++)y=a.g=u[m],p=cd(y,h,!1,a)&&p;return p}Bt.prototype.o=function(){if(Bt.K.o.call(this),this.J){var r=this.J,a;for(a in r.a){for(var u=r.a[a],h=0;h<u.length;h++)sd(u[h]);delete r.a[a],r.g--}}this.Ha=null};function cd(r,a,u,h){if(a=r.J.a[String(a)],!a)return!0;a=a.concat();for(var p=!0,m=0;m<a.length;++m){var y=a[m];if(y&&!y.sa&&y.capture==u){var E=y.listener,R=y.La||y.src;y.Ia&&og(r.J,y),p=E.call(R,h)!==!1&&p}}return p&&h.qb!=0}var ni={},TI=0;function CI(r,a){if(!r)throw Error("Event target element must be provided!");if(r=dg(r),ni[r]&&ni[r].length)for(var u=0;u<ni[r].length;u++)$r(ni[r][u],a)}function hP(r){var a=dg(r.N());ni[a]&&ni[a].length&&(at(ni[a],function(u){return u==r}),ni[a].length||delete ni[a])}function dg(r){return typeof r.a>"u"&&(r.a=TI,TI++),r.a}function ud(r){if(!r)throw Error("Event target element must be provided!");Bt.call(this),this.a=r}l(ud,Bt),ud.prototype.N=function(){return this.a},ud.prototype.register=function(){var r=dg(this.N());ni[r]?z(ni[r],this)||ni[r].push(this):ni[r]=[this]};function AI(r){if(!r)return!1;try{return!!r.$goog_Thenable}catch{return!1}}function fg(r,a){this.h=r,this.j=a,this.g=0,this.a=null}fg.prototype.get=function(){if(0<this.g){this.g--;var r=this.a;this.a=r.next,r.next=null}else r=this.h();return r};function kI(r,a){r.j(a),100>r.g&&(r.g++,a.next=r.a,r.a=a)}function RI(){this.g=this.a=null}var xI=new fg(function(){return new pg},function(r){r.reset()});RI.prototype.add=function(r,a){var u=xI.get();u.set(r,a),this.g?this.g.next=u:this.a=u,this.g=u};function dP(){var r=NI,a=null;return r.a&&(a=r.a,r.a=r.a.next,r.a||(r.g=null),a.next=null),a}function pg(){this.next=this.g=this.a=null}pg.prototype.set=function(r,a){this.a=r,this.g=a,this.next=null},pg.prototype.reset=function(){this.next=this.g=this.a=null};function DI(r){v.setTimeout(function(){throw r},0)}var mg;function fP(){var r=v.MessageChannel;if(typeof r>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Pe("Presto")&&(r=function(){var p=document.createElement("IFRAME");p.style.display="none",p.src="",document.documentElement.appendChild(p);var m=p.contentWindow;p=m.document,p.open(),p.write(""),p.close();var y="callImmediate"+Math.random(),E=m.location.protocol=="file:"?"*":m.location.protocol+"//"+m.location.host;p=be(function(R){(E=="*"||R.origin==E)&&R.data==y&&this.port1.onmessage()},this),m.addEventListener("message",p,!1),this.port1={},this.port2={postMessage:function(){m.postMessage(y,E)}}}),typeof r<"u"&&!Pe("Trident")&&!Pe("MSIE")){var a=new r,u={},h=u;return a.port1.onmessage=function(){if(w(u.next)){u=u.next;var p=u.gb;u.gb=null,p()}},function(p){h.next={gb:p},h=h.next,a.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(p){var m=document.createElement("SCRIPT");m.onreadystatechange=function(){m.onreadystatechange=null,m.parentNode.removeChild(m),m=null,p(),p=null},document.documentElement.appendChild(m)}:function(p){v.setTimeout(p,0)}}function gg(r,a){ld||pP(),vg||(ld(),vg=!0),NI.add(r,a)}var ld;function pP(){if(v.Promise&&v.Promise.resolve){var r=v.Promise.resolve(void 0);ld=function(){r.then(PI)}}else ld=function(){var a=PI;!Y(v.setImmediate)||v.Window&&v.Window.prototype&&!Pe("Edge")&&v.Window.prototype.setImmediate==v.setImmediate?(mg||(mg=fP()),mg(a)):v.setImmediate(a)}}var vg=!1,NI=new RI;function PI(){for(var r;r=dP();){try{r.a.call(r.g)}catch(a){DI(a)}kI(xI,r)}vg=!1}function jt(r){if(this.a=Ks,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,r!=S)try{var a=this;r.call(void 0,function(u){zs(a,hu,u)},function(u){if(!(u instanceof aa))try{throw u instanceof Error?u:Error("Promise rejected.")}catch{}zs(a,sr,u)})}catch(u){zs(this,sr,u)}}var Ks=0,hu=2,sr=3;function OI(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}OI.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var MI=new fg(function(){return new OI},function(r){r.reset()});function yg(r,a,u){var h=MI.get();return h.s=r,h.g=a,h.j=u,h}function St(r){if(r instanceof jt)return r;var a=new jt(S);return zs(a,hu,r),a}function oa(r){return new jt(function(a,u){u(r)})}jt.prototype.then=function(r,a,u){return FI(this,Y(r)?r:null,Y(a)?a:null,u)},jt.prototype.$goog_Thenable=!0,t=jt.prototype,t.fc=function(r,a){return r=yg(r,r,a),r.h=!0,wg(this,r),this},t.Ca=function(r,a){return FI(this,null,r,a)},t.cancel=function(r){this.a==Ks&&gg(function(){var a=new aa(r);LI(this,a)},this)};function LI(r,a){if(r.a==Ks)if(r.h){var u=r.h;if(u.g){for(var h=0,p=null,m=null,y=u.g;y&&(y.h||(h++,y.a==r&&(p=y),!(p&&1<h)));y=y.next)p||(m=y);p&&(u.a==Ks&&h==1?LI(u,a):(m?(h=m,h.next==u.j&&(u.j=h),h.next=h.next.next):VI(u),BI(u,p,sr,a)))}r.h=null}else zs(r,sr,a)}function wg(r,a){r.g||r.a!=hu&&r.a!=sr||UI(r),r.j?r.j.next=a:r.g=a,r.j=a}function FI(r,a,u,h){var p=yg(null,null,null);return p.a=new jt(function(m,y){p.s=a?function(E){try{var R=a.call(h,E);m(R)}catch($){y($)}}:m,p.g=u?function(E){try{var R=u.call(h,E);!w(R)&&E instanceof aa?y(E):m(R)}catch($){y($)}}:y}),p.a.h=r,wg(r,p),p.a}t.hc=function(r){this.a=Ks,zs(this,hu,r)},t.ic=function(r){this.a=Ks,zs(this,sr,r)};function zs(r,a,u){if(r.a==Ks){r===u&&(a=sr,u=new TypeError("Promise cannot resolve to itself")),r.a=1;e:{var h=u,p=r.hc,m=r.ic;if(h instanceof jt){wg(h,yg(p||S,m||null,r));var y=!0}else if(AI(h))h.then(p,m,r),y=!0;else{if(ie(h))try{var E=h.then;if(Y(E)){mP(h,E,p,m,r),y=!0;break e}}catch(R){m.call(r,R),y=!0;break e}y=!1}}y||(r.A=u,r.a=a,r.h=null,UI(r),a!=sr||u instanceof aa||gP(r,u))}}function mP(r,a,u,h,p){function m(R){E||(E=!0,h.call(p,R))}function y(R){E||(E=!0,u.call(p,R))}var E=!1;try{a.call(r,y,m)}catch(R){m(R)}}function UI(r){r.i||(r.i=!0,gg(r.Hb,r))}function VI(r){var a=null;return r.g&&(a=r.g,r.g=a.next,a.next=null),r.g||(r.j=null),a}t.Hb=function(){for(var r;r=VI(this);)BI(this,r,this.a,this.A);this.i=!1};function BI(r,a,u,h){if(u==sr&&a.g&&!a.h)for(;r&&r.s;r=r.h)r.s=!1;if(a.a)a.a.h=null,jI(a,u,h);else try{a.h?a.s.call(a.j):jI(a,u,h)}catch(p){$I.call(null,p)}kI(MI,a)}function jI(r,a,u){a==hu?r.s.call(r.j,u):r.g&&r.g.call(r.j,u)}function gP(r,a){r.s=!0,gg(function(){r.s&&$I.call(null,a)})}var $I=DI;function aa(r){ke.call(this,r)}oe(aa,ke),aa.prototype.name="cancel";function qI(r,a,u){a||(a={}),u=u||window;var h=r instanceof ti?r:Jh(typeof r.href<"u"?r.href:String(r));r=a.target||r.target;var p=[];for(m in a)switch(m){case"width":case"height":case"top":case"left":p.push(m+"="+a[m]);break;case"target":case"noopener":case"noreferrer":break;default:p.push(m+"="+(a[m]?1:0))}var m=p.join(",");return(Pe("iPhone")&&!Pe("iPod")&&!Pe("iPad")||Pe("iPad")||Pe("iPod"))&&u.navigator&&u.navigator.standalone&&r&&r!="_self"?(m=u.document.createElement("A"),h=h instanceof ti?h:rI(h),m.href=Fr(h),m.setAttribute("target",r),a.noreferrer&&m.setAttribute("rel","noreferrer"),a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,u,1),m.dispatchEvent(a),u={}):a.noreferrer?(u=u.open("",r,m),a=Fr(h).toString(),u&&(DN&&a.indexOf(";")!=-1&&(a="'"+a.replace(/'/g,"%27")+"'"),u.opener=null,a=iu('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ue(a)+'">',null),u.document.write(Xh(a)),u.document.close())):(u=u.open(Fr(h).toString(),r,m))&&a.noopener&&(u.opener=null),u}function KI(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function ca(r){qI(r,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function hd(r,a){if(r=ie(r)&&r.nodeType==1?r:document.querySelector(String(r)),r==null)throw Error(a||"Cannot find element.");return r}function or(){return window.location.href}function vP(){var r=null;return new jt(function(a){v.document.readyState=="complete"?a():(r=function(){a()},lu(window,"load",r))}).Ca(function(a){throw qs(window,"load",r),a})}function yP(){for(var r=32,a=[];0<r;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),r--;return a.join("")}function wP(r,a,u){return u=u===void 0?{}:u,Object.keys(r).filter(function(h){return a.includes(h)}).reduce(function(h,p){return h[p]=r[p],h},u)}function qr(r){var a=_P;this.s=[],this.T=a,this.O=r||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}qr.prototype.cancel=function(r){if(this.a)this.h instanceof qr&&this.h.cancel();else{if(this.g){var a=this.g;delete this.g,r?a.cancel(r):(a.C--,0>=a.C&&a.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(r=new fu,dd(this),du(this,!1,r))}},qr.prototype.L=function(r,a){this.A=!1,du(this,r,a)};function du(r,a,u){r.a=!0,r.h=u,r.j=!a,HI(r)}function dd(r){if(r.a){if(!r.J)throw new fd;r.J=!1}}qr.prototype.callback=function(r){dd(this),du(this,!0,r)};function zI(r,a,u){r.s.push([a,u,void 0]),r.a&&HI(r)}qr.prototype.then=function(r,a,u){var h,p,m=new jt(function(y,E){h=y,p=E});return zI(this,h,function(y){y instanceof fu?m.cancel():p(y)}),m.then(r,a,u)},qr.prototype.$goog_Thenable=!0;function GI(r){return Z(r.s,function(a){return Y(a[1])})}function HI(r){if(r.i&&r.a&&GI(r)){var a=r.i,u=pd[a];u&&(v.clearTimeout(u.a),delete pd[a]),r.i=0}r.g&&(r.g.C--,delete r.g),a=r.h;for(var h=u=!1;r.s.length&&!r.A;){var p=r.s.shift(),m=p[0],y=p[1];if(p=p[2],m=r.j?y:m)try{var E=m.call(p||r.O,a);w(E)&&(r.j=r.j&&(E==a||E instanceof Error),r.h=a=E),(AI(a)||typeof v.Promise=="function"&&a instanceof v.Promise)&&(h=!0,r.A=!0)}catch(R){a=R,r.j=!0,GI(r)||(u=!0)}}r.h=a,h&&(E=be(r.L,r,!0),h=be(r.L,r,!1),a instanceof qr?(zI(a,E,h),a.l=!0):a.then(E,h)),u&&(a=new WI(a),pd[a.a]=a,r.i=a.a)}function fd(){ke.call(this)}oe(fd,ke),fd.prototype.message="Deferred has already fired",fd.prototype.name="AlreadyCalledError";function fu(){ke.call(this)}oe(fu,ke),fu.prototype.message="Deferred was canceled",fu.prototype.name="CanceledError";function WI(r){this.a=v.setTimeout(be(this.h,this),0),this.g=r}WI.prototype.h=function(){throw delete pd[this.a],this.g};var pd={};function bP(r){var a={},u=a.document||document,h=tI(r).toString(),p=document.createElement("SCRIPT"),m={rb:p,sb:void 0},y=new qr(m),E=null,R=a.timeout!=null?a.timeout:5e3;return 0<R&&(E=window.setTimeout(function(){md(p,!0);var $=new bg(SP,"Timeout reached for loading script "+h);dd(y),du(y,!1,$)},R),m.sb=E),p.onload=p.onreadystatechange=function(){p.readyState&&p.readyState!="loaded"&&p.readyState!="complete"||(md(p,a.xc||!1,E),y.callback(null))},p.onerror=function(){md(p,!0,E);var $=new bg(EP,"Error while loading script "+h);dd(y),du(y,!1,$)},m=a.attributes||{},$e(m,{type:"text/javascript",charset:"UTF-8"}),UN(p,m),FN(p,r),IP(u).appendChild(p),y}function IP(r){var a=(r||document).getElementsByTagName("HEAD");return a&&a.length!=0?a[0]:r.documentElement}function _P(){if(this&&this.rb){var r=this.rb;r&&r.tagName=="SCRIPT"&&md(r,!0,this.sb)}}function md(r,a,u){u!=null&&v.clearTimeout(u),r.onload=S,r.onerror=S,r.onreadystatechange=S,a&&window.setTimeout(function(){Bs(r)},0)}var EP=0,SP=1;function bg(r,a){var u="Jsloader error (code #"+r+")";a&&(u+=": "+a),ke.call(this,u),this.code=r}oe(bg,ke);function pu(){return v.google&&v.google.accounts&&v.google.accounts.id||null}function Ig(r){this.a=r||pu(),this.h=!1,this.g=null}Ig.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function YI(r,a,u){if(r.a&&a)return function(){return r.h=!0,new jt(function(p){r.g=p,r.a.initialize({client_id:a,callback:p,auto_select:!u}),r.a.prompt()})}();if(a){var h=_g.Xa().load().then(function(){return r.a=pu(),YI(r,a,u)}).Ca(function(){return null});return St(h)}return St(null)}C(Ig);var TP=new ia(eI,"https://accounts.google.com/gsi/client");function _g(){this.a=null}_g.prototype.load=function(){var r=this;if(this.a)return this.a;var a=ON();return pu()?St():this.a=vP().then(function(){if(!pu())return new jt(function(u,h){var p=setTimeout(function(){r.a=null,h(Error("Network error!"))},1e4);v.onGoogleLibraryLoad=function(){clearTimeout(p),u()},St(bP(a)).then(function(){pu()&&u()}).Ca(function(m){clearTimeout(p),r.a=null,h(m)})})})},C(_g);function Eg(r,a){this.a=r,this.g=a||function(u){throw u}}Eg.prototype.confirm=function(r){return St(this.a.confirm(r)).Ca(this.g)};function Sg(r,a,u){this.reset(r,a,u,void 0,void 0)}Sg.prototype.a=null,Sg.prototype.reset=function(r,a,u,h,p){this.h=h||Rt(),this.j=r,this.s=a,this.g=u,delete this.a};function Tg(r){this.s=r,this.a=this.h=this.j=this.g=null}function gd(r,a){this.name=r,this.value=a}gd.prototype.toString=function(){return this.name};var QI=new gd("SEVERE",1e3),JI=new gd("WARNING",900),XI=new gd("CONFIG",700);function ZI(r){return r.j?r.j:r.g?ZI(r.g):(hn("Root logger has no level set."),null)}Tg.prototype.log=function(r,a,u){if(r.value>=ZI(this).value)for(Y(a)&&(a=a()),r=new Sg(r,String(a),this.s),u&&(r.a=u),u=this;u;){var h=u,p=r;if(h.a)for(var m=0;a=h.a[m];m++)a(p);u=u.g}};var Cg={},mu=null;function e1(){mu||(mu=new Tg(""),Cg[""]=mu,mu.j=XI)}function t1(r){e1();var a;if(!(a=Cg[r])){a=new Tg(r);var u=r.lastIndexOf("."),h=r.substr(u+1);u=t1(r.substr(0,u)),u.h||(u.h={}),u.h[h]=a,a.g=u,Cg[r]=a}return a}function vd(){this.a=Rt()}var Ag=null;vd.prototype.set=function(r){this.a=r},vd.prototype.reset=function(){this.set(Rt())},vd.prototype.get=function(){return this.a};function gu(r){this.j=r||"",Ag||(Ag=new vd),this.s=Ag}gu.prototype.a=!0,gu.prototype.g=!0,gu.prototype.h=!1;function Gs(r){return 10>r?"0"+r:String(r)}function CP(r,a){r=(r.h-a)/1e3,a=r.toFixed(3);var u=0;if(1>r)u=2;else for(;100>r;)u++,r*=10;for(;0<u--;)a=" "+a;return a}function n1(r){gu.call(this,r)}oe(n1,gu);function AP(r,a){var u=[];if(u.push(r.j," "),r.g){var h=new Date(a.h);u.push("[",Gs(h.getFullYear()-2e3)+Gs(h.getMonth()+1)+Gs(h.getDate())+" "+Gs(h.getHours())+":"+Gs(h.getMinutes())+":"+Gs(h.getSeconds())+"."+Gs(Math.floor(h.getMilliseconds()/10)),"] ")}return u.push("[",CP(a,r.s.get()),"s] "),u.push("[",a.g,"] "),u.push(a.s),r.h&&(a=a.a)&&u.push(`
`,a instanceof Error?a.message:a.toString()),r.a&&u.push(`
`),u.join("")}function i1(){this.s=be(this.h,this),this.a=new n1,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}i1.prototype.h=function(r){function a(m){if(m){if(m.value>=QI.value)return"error";if(m.value>=JI.value)return"warn";if(m.value>=XI.value)return"log"}return"debug"}if(!this.j[r.g]){var u=AP(this.a,r),h=kP;if(h){var p=a(r.j);RP(h,p,u,r.a)}}};var kP=v.console;function RP(r,a,u,h){r[a]?r[a](u,h||""):r.log(u,h||"")}function ii(r,a){var u=kg;u&&u.log(QI,r,a)}var kg;kg=t1("firebaseui");var Rg=new i1;if(Rg.g!=1){var yd;e1(),yd=mu;var xP=Rg.s;yd.a||(yd.a=[]),yd.a.push(xP),Rg.g=!0}function Kr(r){var a=kg;a&&a.log(JI,r,void 0)}function r1(){this.a=(typeof document>"u"?null:document)||{cookie:""}}t=r1.prototype,t.set=function(r,a,u,h,p,m){if(/[;=\s]/.test(r))throw Error('Invalid cookie name "'+r+'"');if(/[;\r\n]/.test(a))throw Error('Invalid cookie value "'+a+'"');w(u)||(u=-1),p=p?";domain="+p:"",h=h?";path="+h:"",m=m?";secure":"",u=0>u?"":u==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(Rt()+1e3*u).toUTCString(),this.a.cookie=r+"="+a+p+h+u+m},t.get=function(r,a){for(var u=r+"=",h=(this.a.cookie||"").split(";"),p=0,m;p<h.length;p++){if(m=N(h[p]),m.lastIndexOf(u,0)==0)return m.substr(u.length);if(m==r)return""}return a},t.ja=function(){return xg(this).keys},t.la=function(){return xg(this).values},t.clear=function(){for(var r=xg(this).keys,a=r.length-1;0<=a;a--){var u=r[a];this.get(u),this.set(u,"",0,void 0,void 0)}};function xg(r){r=(r.a.cookie||"").split(";");for(var a=[],u=[],h,p,m=0;m<r.length;m++)p=N(r[m]),h=p.indexOf("="),h==-1?(a.push(""),u.push(p)):(a.push(p.substring(0,h)),u.push(p.substring(h+1)));return{keys:a,values:u}}var wd=new r1;function s1(){}function ua(r,a,u,h){this.h=typeof r<"u"&&r!==null?r:-1,this.g=a||null,this.a=u||null,this.j=!!h}l(ua,s1),ua.prototype.set=function(r,a){wd.set(r,a,this.h,this.g,this.a,this.j)},ua.prototype.get=function(r){return wd.get(r)||null},ua.prototype.ra=function(r){var a=this.g,u=this.a;wd.get(r),wd.set(r,"",0,a,u)};function Dg(r,a){this.g=r,this.a=a||null}function o1(r){return{email:r.g,credential:r.a&&r.a.toJSON()}}function a1(r){if(r&&r.email){var a=r.credential&&fe.auth.AuthCredential.fromJSON(r.credential);return new Dg(r.email,a)}return null}function c1(r){this.a=r||null}function u1(r){for(var a=[],u=0,h=0;h<r.length;h++){var p=r.charCodeAt(h);255<p&&(a[u++]=p&255,p>>=8),a[u++]=p}return a}function DP(r){return L(r,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}function bd(r){for(this.i=r,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(la*(this.j+1)),r=0;r<this.g;r++)this.a[r]=[this.i[4*r],this.i[4*r+1],this.i[4*r+2],this.i[4*r+3]];var a=Array(4);for(r=this.g;r<la*(this.j+1);r++){if(a[0]=this.a[r-1][0],a[1]=this.a[r-1][1],a[2]=this.a[r-1][2],a[3]=this.a[r-1][3],r%this.g==0){var u=a,h=u[0];u[0]=u[1],u[1]=u[2],u[2]=u[3],u[3]=h,p1(a),a[0]^=_d[r/this.g][0],a[1]^=_d[r/this.g][1],a[2]^=_d[r/this.g][2],a[3]^=_d[r/this.g][3]}else 6<this.g&&r%this.g==4&&p1(a);this.a[r]=Array(4),this.a[r][0]=this.a[r-this.g][0]^a[0],this.a[r][1]=this.a[r-this.g][1]^a[1],this.a[r][2]=this.a[r-this.g][2]^a[2],this.a[r][3]=this.a[r-this.g][3]^a[3]}}bd.prototype.A=16;var la=bd.prototype.A/4;function l1(r,a){for(var u,h=0;h<la;h++)for(var p=0;4>p;p++)u=4*p+h,u=a[u],r.h[h][p]=u}function h1(r){for(var a=[],u=0;u<la;u++)for(var h=0;4>h;h++)a[4*h+u]=r.h[u][h];return a}function ha(r,a){for(var u=0;4>u;u++)for(var h=0;4>h;h++)r.h[u][h]^=r.a[4*a+h][u]}function Id(r,a){for(var u=0;4>u;u++)for(var h=0;4>h;h++)r.h[u][h]=a[r.h[u][h]]}function d1(r){for(var a=1;4>a;a++)for(var u=0;4>u;u++)r.s[a][u]=r.h[a][u];for(a=1;4>a;a++)for(u=0;4>u;u++)r.h[a][u]=r.s[a][(u+a)%la]}function f1(r){for(var a=1;4>a;a++)for(var u=0;4>u;u++)r.s[a][(u+a)%la]=r.h[a][u];for(a=1;4>a;a++)for(u=0;4>u;u++)r.h[a][u]=r.s[a][u]}function p1(r){r[0]=da[r[0]],r[1]=da[r[1]],r[2]=da[r[2]],r[3]=da[r[3]]}var da=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],m1=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],_d=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ed=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Sd=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Td=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Cd=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ad=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],kd=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function g1(r,a){r=new bd(y1(r)),a=u1(a);for(var u=a.splice(0,16),h="",p;u.length;){p=16-u.length;for(var m=0;m<p;m++)u.push(0);for(p=r,l1(p,u),ha(p,0),u=1;u<p.j;++u){Id(p,da),d1(p),m=p.h;for(var y=p.s[0],E=0;4>E;E++)y[0]=m[0][E],y[1]=m[1][E],y[2]=m[2][E],y[3]=m[3][E],m[0][E]=Ed[y[0]]^Sd[y[1]]^y[2]^y[3],m[1][E]=y[0]^Ed[y[1]]^Sd[y[2]]^y[3],m[2][E]=y[0]^y[1]^Ed[y[2]]^Sd[y[3]],m[3][E]=Sd[y[0]]^y[1]^y[2]^Ed[y[3]];ha(p,u)}Id(p,da),d1(p),ha(p,p.j),h+=DP(h1(p)),u=a.splice(0,16)}return h}function v1(r,a){r=new bd(y1(r));for(var u=[],h=0;h<a.length;h+=2)u.push(parseInt(a.substring(h,h+2),16));var p=u.splice(0,16);for(a="";p.length;){for(h=r,l1(h,p),ha(h,h.j),p=1;p<h.j;++p){f1(h),Id(h,m1),ha(h,h.j-p);for(var m=h.h,y=h.s[0],E=0;4>E;E++)y[0]=m[0][E],y[1]=m[1][E],y[2]=m[2][E],y[3]=m[3][E],m[0][E]=kd[y[0]]^Cd[y[1]]^Ad[y[2]]^Td[y[3]],m[1][E]=Td[y[0]]^kd[y[1]]^Cd[y[2]]^Ad[y[3]],m[2][E]=Ad[y[0]]^Td[y[1]]^kd[y[2]]^Cd[y[3]],m[3][E]=Cd[y[0]]^Ad[y[1]]^Td[y[2]]^kd[y[3]]}if(f1(h),Id(h,m1),ha(h,0),h=h1(h),8192>=h.length)h=String.fromCharCode.apply(null,h);else{for(p="",m=0;m<h.length;m+=8192)p+=String.fromCharCode.apply(null,D(h,m,m+8192));h=p}a+=h,p=u.splice(0,16)}return a.replace(/(\x00)+$/,"")}function y1(r){r=u1(r.substring(0,32));for(var a=32-r.length,u=0;u<a;u++)r.push(0);return r}function w1(r){var a=[];return Ng(new NP,r,a),a.join("")}function NP(){}function Ng(r,a,u){if(a==null)u.push("null");else{if(typeof a=="object"){if(O(a)){var h=a;a=h.length,u.push("[");for(var p="",m=0;m<a;m++)u.push(p),Ng(r,h[m],u),p=",";u.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{u.push("{"),p="";for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(m=a[h],typeof m!="function"&&(u.push(p),I1(h,u),u.push(":"),Ng(r,m,u),p=","));u.push("}");return}}switch(typeof a){case"string":I1(a,u);break;case"number":u.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":u.push(String(a));break;case"function":u.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var b1={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},PP=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function I1(r,a){a.push('"',r.replace(PP,function(u){var h=b1[u];return h||(h="\\u"+(u.charCodeAt(0)|65536).toString(16).substr(1),b1[u]=h),h}),'"')}function vu(r){this.a=r}vu.prototype.set=function(r,a){w(a)?this.a.set(r,w1(a)):this.a.ra(r)},vu.prototype.get=function(r){try{var a=this.a.get(r)}catch{return}if(a!==null)try{return JSON.parse(a)}catch{throw"Storage: Invalid value was encountered"}};function Rd(){}oe(Rd,s1),Rd.prototype.clear=function(){var r=Os(this.ha(!0)),a=this;Ut(r,function(u){a.ra(u)})};function xd(r){this.a=r}oe(xd,Rd);function Dd(r){if(!r.a)return!1;try{return r.a.setItem("__sak","1"),r.a.removeItem("__sak"),!0}catch{return!1}}t=xd.prototype,t.set=function(r,a){try{this.a.setItem(r,a)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},t.get=function(r){if(r=this.a.getItem(r),!I(r)&&r!==null)throw"Storage mechanism: Invalid value was encountered";return r},t.ra=function(r){this.a.removeItem(r)},t.ha=function(r){var a=0,u=this.a,h=new Kt;return h.next=function(){if(a>=u.length)throw rt;var p=u.key(a++);if(r)return p;if(p=u.getItem(p),!I(p))throw"Storage mechanism: Invalid value was encountered";return p},h},t.clear=function(){this.a.clear()},t.key=function(r){return this.a.key(r)};function Pg(){var r=null;try{r=window.localStorage||null}catch{}this.a=r}oe(Pg,xd);function Og(){var r=null;try{r=window.sessionStorage||null}catch{}this.a=r}oe(Og,xd);function fa(r,a){this.g=r,this.a=a+"::"}oe(fa,Rd),fa.prototype.set=function(r,a){this.g.set(this.a+r,a)},fa.prototype.get=function(r){return this.g.get(this.a+r)},fa.prototype.ra=function(r){this.g.ra(this.a+r)},fa.prototype.ha=function(r){var a=this.g.ha(!0),u=this,h=new Kt;return h.next=function(){for(var p=a.next();p.substr(0,u.a.length)!=u.a;)p=a.next();return r?p.substr(u.a.length):u.g.get(p)},h},Dd(new Pg);var _1,E1=new Og;_1=Dd(E1)?new fa(E1,"firebaseui"):null;var Mg=new vu(_1),Lg={name:"pendingEmailCredential",storage:Mg},Hs={name:"redirectStatus",storage:Mg},yu={name:"redirectUrl",storage:Mg},pa={name:"emailForSignIn",storage:new vu(new ua(3600,"/"))},wu={name:"pendingEncryptedCredential",storage:new vu(new ua(3600,"/"))};function ma(r,a){return r.storage.get(a?r.name+":"+a:r.name)}function Bn(r,a){r.storage.a.ra(a?r.name+":"+a:r.name)}function ga(r,a,u){r.storage.set(u?r.name+":"+u:r.name,a)}function S1(r){return ma(yu,r)||null}function Oi(r){return r=ma(Lg,r)||null,a1(r)}function Mi(r){Bn(Lg,r)}function T1(r,a){ga(Lg,o1(r),a)}function Fg(r){return(r=ma(Hs,r)||null)&&typeof r.tenantId<"u"?new c1(r.tenantId):null}function OP(r,a){ga(Hs,{tenantId:r.a},a)}function MP(r,a){a=ma(pa,a);var u=null;if(a)try{var h=v1(r,a),p=JSON.parse(h);u=p&&p.email||null}catch{}return u}function LP(r,a){a=ma(wu,a);var u=null;if(a)try{var h=v1(r,a);u=JSON.parse(h)}catch{}return a1(u||null)}function FP(r,a,u){ga(wu,g1(r,JSON.stringify(o1(a))),u)}function Ug(){this.W={}}function xt(r,a,u){if(a.toLowerCase()in r.W)throw Error("Configuration "+a+" has already been defined.");r.W[a.toLowerCase()]=u}function Vg(r,a,u){if(!(a.toLowerCase()in r.W))throw Error("Configuration "+a+" is not defined.");r.W[a.toLowerCase()]=u}Ug.prototype.get=function(r){if(!(r.toLowerCase()in this.W))throw Error("Configuration "+r+" is not defined.");return this.W[r.toLowerCase()]};function Bg(r,a){if(r=r.get(a),!r)throw Error("Configuration "+a+" is required.");return r}function jg(){this.g=void 0,this.a={}}t=jg.prototype,t.set=function(r,a){C1(this,r,a,!1)},t.add=function(r,a){C1(this,r,a,!0)};function C1(r,a,u,h){for(var p=0;p<a.length;p++){var m=a.charAt(p);r.a[m]||(r.a[m]=new jg),r=r.a[m]}if(h&&r.g!==void 0)throw Error('The collection already contains the key "'+a+'"');r.g=u}t.get=function(r){e:{for(var a=this,u=0;u<r.length;u++)if(a=a.a[r.charAt(u)],!a){r=void 0;break e}r=a}return r?r.g:void 0},t.la=function(){var r=[];return A1(this,r),r};function A1(r,a){r.g!==void 0&&a.push(r.g);for(var u in r.a)A1(r.a[u],a)}t.ja=function(){var r=[];return k1(this,"",r),r};function k1(r,a,u){r.g!==void 0&&u.push(a);for(var h in r.a)k1(r.a[h],a+h,u)}t.clear=function(){this.a={},this.g=void 0};function R1(r){for(this.a=r,this.g=new jg,r=0;r<this.a.length;r++){var a=this.g.get("+"+this.a[r].b);a?a.push(this.a[r]):this.g.add("+"+this.a[r].b,[this.a[r]])}}function Nd(r,a){r=r.g;var u={},h=0;for(r.g!==void 0&&(u[h]=r.g);h<a.length;h++){var p=a.charAt(h);if(!(p in r.a))break;r=r.a[p],r.g!==void 0&&(u[h]=r.g)}for(var m in u)if(u.hasOwnProperty(m))return u[m];return[]}function Ws(r){for(var a=0;a<xn.length;a++)if(xn[a].c===r)return xn[a];return null}function x1(r){r=r.toUpperCase();for(var a=[],u=0;u<xn.length;u++)xn[u].f===r&&a.push(xn[u]);return a}function D1(r){if(0<r.length&&r.charAt(0)=="+"){r=r.substring(1);for(var a=[],u=0;u<xn.length;u++)xn[u].b==r&&a.push(xn[u]);r=a}else r=x1(r);return r}function N1(r){r.sort(function(a,u){return a.name.localeCompare(u.name,"en")})}var xn=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];N1(xn);var bu=new R1(xn);function P1(r,a){this.a=r,this.Aa=a}function O1(r){r=N(r);var a=Nd(bu,r);return 0<a.length?new P1(a[0].b=="1"?"1-US-0":a[0].c,N(r.substr(a[0].b.length+1))):null}function $g(r){var a=Ws(r.a);if(!a)throw Error("Country ID "+r.a+" not found.");return"+"+a.b+r.Aa}function M1(r,a){for(var u=0;u<r.length;u++)if(!z(L1,r[u])&&(va!==null&&r[u]in va||z(a,r[u])))return r[u];return null}var L1=["emailLink","password","phone"],va={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function UP(){this.a=new Ug,xt(this.a,"autoUpgradeAnonymousUsers"),xt(this.a,"callbacks"),xt(this.a,"credentialHelper",Md),xt(this.a,"immediateFederatedRedirect",!1),xt(this.a,"popupMode",!1),xt(this.a,"privacyPolicyUrl"),xt(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),xt(this.a,"queryParameterForWidgetMode","mode"),xt(this.a,"signInFlow"),xt(this.a,"signInOptions"),xt(this.a,"signInSuccessUrl"),xt(this.a,"siteName"),xt(this.a,"tosUrl"),xt(this.a,"widgetUrl"),xt(this.a,"adminRestrictedOperation")}function Pd(r){var a=!!r.a.get("autoUpgradeAnonymousUsers");return a&&!G1(r)&&ii('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),a}function Od(r){r=r.a.get("signInOptions")||[];for(var a=[],u=0;u<r.length;u++){var h=r[u];h=ie(h)?h:{provider:h},h.provider&&a.push(h)}return a}function ri(r,a){r=Od(r);for(var u=0;u<r.length;u++)if(r[u].provider===a)return r[u];return null}function ya(r){return Od(r).map(function(a){return a.provider})}function Iu(r,a){r=F1(r);for(var u=0;u<r.length;u++)if(r[u].providerId===a)return r[u];return null}function F1(r){return Od(r).map(function(a){if(va[a.provider]||z(WP,a.provider)){a={providerId:a.provider,S:a.providerName||null,V:a.fullLabel||null,ta:a.buttonColor||null,za:a.iconUrl?Fr(Jh(a.iconUrl)).toString():null};for(var u in a)a[u]===null&&delete a[u];return a}return{providerId:a.provider,S:a.providerName||null,V:a.fullLabel||null,ta:a.buttonColor||null,za:a.iconUrl?Fr(Jh(a.iconUrl)).toString():null,Ob:a.loginHintKey||null}})}function U1(r){var a=ri(r,fe.auth.GoogleAuthProvider.PROVIDER_ID),u;if(u=a&&a.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(h in r=r.a.get("credentialHelper"),Hg)if(Hg[h]===r){var h=Hg[h];break e}}h=Md}u=h===Gg}return u&&a.clientId||null}function V1(r){return r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID),!!(r&&r.disableSignUp&&r.disableSignUp.status)}function Ys(r){return r=r.a.get("adminRestrictedOperation")||null,!(!r||!r.status)}function VP(r){var a=null;if(Od(r).forEach(function(h){h.provider==fe.auth.PhoneAuthProvider.PROVIDER_ID&&ie(h.recaptchaParameters)&&!Array.isArray(h.recaptchaParameters)&&(a=xe(h.recaptchaParameters))}),a){var u=[];YP.forEach(function(h){typeof a[h]<"u"&&(u.push(h),delete a[h])}),u.length&&Kr('The following provided "recaptchaParameters" keys are not allowed: '+u.join(", "))}return a}function BP(r){return(r=r.a.get("adminRestrictedOperation"))&&r.adminEmail?r.adminEmail:null}function jP(r){if(r=r.a.get("adminRestrictedOperation")||null){var a=r.helpLink||null;if(a&&typeof a=="string")return function(){ca(a)}}return null}function $P(r){return(r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID))&&r.disableSignUp&&r.disableSignUp.adminEmail||null}function qP(r){if((r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID))&&r.disableSignUp){var a=r.disableSignUp.helpLink||null;if(a&&typeof a=="string")return function(){ca(a)}}return null}function B1(r,a){return r=(r=ri(r,a))&&r.scopes,Array.isArray(r)?r:[]}function j1(r,a){return r=(r=ri(r,a))&&r.customParameters,ie(r)?(r=xe(r),a===fe.auth.GoogleAuthProvider.PROVIDER_ID&&delete r.login_hint,a===fe.auth.GithubAuthProvider.PROVIDER_ID&&delete r.login,r):null}function KP(r){r=ri(r,fe.auth.PhoneAuthProvider.PROVIDER_ID);var a=null;return r&&typeof r.loginHint=="string"&&(a=O1(r.loginHint)),r&&r.defaultNationalNumber||a&&a.Aa||null}function zP(r){var a=(r=ri(r,fe.auth.PhoneAuthProvider.PROVIDER_ID))&&r.defaultCountry||null;a=a&&x1(a);var u=null;return r&&typeof r.loginHint=="string"&&(u=O1(r.loginHint)),a&&a[0]||u&&Ws(u.a)||null}function qg(r){if(r=ri(r,fe.auth.PhoneAuthProvider.PROVIDER_ID),!r)return null;var a=r.whitelistedCountries,u=r.blacklistedCountries;if(typeof a<"u"&&(!Array.isArray(a)||a.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof u<"u"&&!Array.isArray(u))throw Error("BlacklistedCountries must be an array.");if(a&&u)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!a&&!u)return xn;if(r=[],a){u={};for(var h=0;h<a.length;h++)for(var p=D1(a[h]),m=0;m<p.length;m++)u[p[m].c]=p[m];for(var y in u)u.hasOwnProperty(y)&&r.push(u[y])}else{for(y={},a=0;a<u.length;a++)for(p=D1(u[a]),h=0;h<p.length;h++)y[p[h].c]=p[h];for(p=0;p<xn.length;p++)y!==null&&xn[p].c in y||r.push(xn[p])}return r}function $1(r){return Bg(r.a,"queryParameterForWidgetMode")}function Dt(r){var a=r.a.get("tosUrl")||null;if(r=r.a.get("privacyPolicyUrl")||null,a&&!r&&Kr("Privacy Policy URL is missing, the link will not be displayed."),a&&r){if(typeof a=="function")return a;if(typeof a=="string")return function(){ca(a)}}return null}function Nt(r){var a=r.a.get("tosUrl")||null,u=r.a.get("privacyPolicyUrl")||null;if(u&&!a&&Kr("Term of Service URL is missing, the link will not be displayed."),a&&u){if(typeof u=="function")return u;if(typeof u=="string")return function(){ca(u)}}return null}function q1(r){return(r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof r.requireDisplayName<"u"?!!r.requireDisplayName:!0}function wa(r){return r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID),!(!r||r.signInMethod!==fe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function GP(r){return r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID),!(!r||!r.forceSameDevice)}function HP(r){if(wa(r)){var a={url:or(),handleCodeInApp:!0};(r=ri(r,fe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof r.emailLinkSignIn=="function"&&$e(a,r.emailLinkSignIn()),r=a.url;var u=or();u instanceof Pr||(u=Gm(u)),r instanceof Pr||(r=Gm(r));var h=u;u=new Pr(h);var p=!!r.j;p?qm(u,r.j):p=!!r.A,p?u.A=r.A:p=!!r.h,p?u.h=r.h:p=r.C!=null;var m=r.g;if(p)Km(u,r.C);else if(p=!!r.g){if(m.charAt(0)!="/"&&(h.h&&!h.g?m="/"+m:(h=u.g.lastIndexOf("/"),h!=-1&&(m=u.g.substr(0,h+1)+m))),m==".."||m==".")m="";else if(m.indexOf("./")!=-1||m.indexOf("/.")!=-1){h=m.lastIndexOf("/",0)==0,m=m.split("/");for(var y=[],E=0;E<m.length;){var R=m[E++];R=="."?h&&E==m.length&&y.push(""):R==".."?((1<y.length||y.length==1&&y[0]!="")&&y.pop(),h&&E==m.length&&y.push("")):(y.push(R),h=!0)}m=y.join("/")}}return p?u.g=m:p=r.a.toString()!=="",p?zm(u,Kb(r.a)):p=!!r.s,p&&(u.s=r.s),a.url=u.toString(),a}return null}function Kg(r){var a=!!r.a.get("immediateFederatedRedirect"),u=ya(r);return r=K1(r),a&&u.length==1&&!z(L1,u[0])&&r==Ld}function K1(r){r=r.a.get("signInFlow");for(var a in Wg)if(Wg[a]==r)return Wg[a];return Ld}function zg(r){return _u(r).signInSuccess||null}function z1(r){return _u(r).signInSuccessWithAuthResult||null}function G1(r){return _u(r).signInFailure||null}function _u(r){return r.a.get("callbacks")||{}}var Gg="googleyolo",Md="none",Hg={nc:Gg,NONE:Md},Ld="redirect",Wg={qc:"popup",rc:Ld},Yg={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},WP=["anonymous"],YP=["sitekey","tabindex","callback","expired-callback"],Eu,ba,Qg,H1,We={};function se(r,a,u,h){We[r].apply(null,Array.prototype.slice.call(arguments,1))}function W1(r){return r.classList?r.classList:(r=r.className,I(r)&&r.match(/\S+/g)||[])}function Su(r,a){return r.classList?r.classList.contains(a):z(W1(r),a)}function Li(r,a){r.classList?r.classList.add(a):Su(r,a)||(r.className+=0<r.className.length?" "+a:a)}function Fi(r,a){r.classList?r.classList.remove(a):Su(r,a)&&(r.className=ea(W1(r),function(u){return u!=a}).join(" "))}function Zt(r){var a=r.type;switch(I(a)&&a.toLowerCase()){case"checkbox":case"radio":return r.checked?r.value:null;case"select-one":return a=r.selectedIndex,0<=a?r.options[a].value:null;case"select-multiple":a=[];for(var u,h=0;u=r.options[h];h++)u.selected&&a.push(u.value);return a.length?a:null;default:return r.value!=null?r.value:null}}function Y1(r,a){var u=r.type;switch(I(u)&&u.toLowerCase()){case"checkbox":case"radio":r.checked=a;break;case"select-one":if(r.selectedIndex=-1,I(a)){for(var h=0;u=r.options[h];h++)if(u.value==a){u.selected=!0;break}}break;case"select-multiple":for(I(a)&&(a=[a]),h=0;u=r.options[h];h++)if(u.selected=!1,a)for(var p,m=0;p=a[m];m++)u.value==p&&(u.selected=!0);break;default:r.value=a??""}}function QP(r){if(r.altKey&&!r.ctrlKey||r.metaKey||112<=r.keyCode&&123>=r.keyCode)return!1;if(Tu(r.keyCode))return!0;switch(r.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!bi;default:return 166>r.keyCode||183<r.keyCode}}function Q1(r,a,u,h,p,m){if(An&&!Us("525"))return!0;if(Lr&&p)return Tu(r);if(p&&!h)return!1;if(!bi){typeof a=="number"&&(a=Jg(a));var y=a==17||a==18||Lr&&a==91;if((!u||Lr)&&y||Lr&&a==16&&(h||m))return!1}if((An||Mr)&&h&&u)switch(r){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(_t&&h&&a==r)return!1;switch(r){case 13:return bi?m||p?!1:!(u&&h):!0;case 27:return!(An||Mr||bi)}return bi&&(h||p||m)?!1:Tu(r)}function Tu(r){if(48<=r&&57>=r||96<=r&&106>=r||65<=r&&90>=r||(An||Mr)&&r==0)return!0;switch(r){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return bi;default:return!1}}function Jg(r){if(bi)r=JP(r);else if(Lr&&An)switch(r){case 93:r=91}return r}function JP(r){switch(r){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return r}}function Ia(r){Bt.call(this),this.a=r,Ii(r,"keydown",this.g,!1,this),Ii(r,"click",this.h,!1,this)}oe(Ia,Bt),Ia.prototype.g=function(r){(r.keyCode==13||An&&r.keyCode==3)&&J1(this,r)},Ia.prototype.h=function(r){J1(this,r)};function J1(r,a){var u=new Z1(a);if($r(r,u)){u=new X1(a);try{$r(r,u)}finally{a.stopPropagation()}}}Ia.prototype.o=function(){Ia.K.o.call(this),qs(this.a,"keydown",this.g,!1,this),qs(this.a,"click",this.h,!1,this),delete this.a};function X1(r){Rn.call(this,r.a),this.type="action"}oe(X1,Rn);function Z1(r){Rn.call(this,r.a),this.type="beforeaction"}oe(Z1,Rn);function _a(r){Bt.call(this),this.a=r,r=_t?"focusout":"blur",this.g=Ii(this.a,_t?"focusin":"focus",this,!_t),this.h=Ii(this.a,r,this,!_t)}oe(_a,Bt),_a.prototype.handleEvent=function(r){var a=new Rn(r.a);a.type=r.type=="focusin"||r.type=="focus"?"focusin":"focusout",$r(this,a)},_a.prototype.o=function(){_a.K.o.call(this),jr(this.g),jr(this.h),delete this.a};function Fd(r,a){Bt.call(this),this.g=r||1,this.a=a||v,this.h=be(this.gc,this),this.j=Rt()}oe(Fd,Bt),t=Fd.prototype,t.Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var r=Rt()-this.j;0<r&&r<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-r):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),$r(this,"tick"),this.Ka&&(Ud(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=Rt())};function Ud(r){r.Ka=!1,r.aa&&(r.a.clearTimeout(r.aa),r.aa=null)}t.o=function(){Fd.K.o.call(this),Ud(this),delete this.a};function XP(r,a){if(Y(r))a&&(r=be(r,a));else if(r&&typeof r.handleEvent=="function")r=be(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<0?-1:v.setTimeout(r,0)}function Ea(r){$s.call(this),this.g=r,this.a={}}oe(Ea,$s);var e_=[];function Sa(r,a,u,h){O(u)||(u&&(e_[0]=u.toString()),u=e_);for(var p=0;p<u.length;p++){var m=Ii(a,u[p],h||r.handleEvent,!1,r.g||r);if(!m)break;r.a[m.key]=m}}function t_(r){we(r.a,function(a,u){this.a.hasOwnProperty(u)&&jr(a)},r),r.a={}}Ea.prototype.o=function(){Ea.K.o.call(this),t_(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Cu(r){Bt.call(this),this.a=null,this.g=r,r=_t||Mr||An&&!Us("531")&&r.tagName=="TEXTAREA",this.h=new Ea(this),Sa(this.h,this.g,r?["keydown","paste","cut","drop","input"]:"input",this)}oe(Cu,Bt),Cu.prototype.handleEvent=function(r){if(r.type=="input")_t&&Us(10)&&r.keyCode==0&&r.j==0||(Xg(this),$r(this,n_(r)));else if(r.type!="keydown"||QP(r)){var a=r.type=="keydown"?this.g.value:null;_t&&r.keyCode==229&&(a=null);var u=n_(r);Xg(this),this.a=XP(function(){this.a=null,this.g.value!=a&&$r(this,u)},this)}};function Xg(r){r.a!=null&&(v.clearTimeout(r.a),r.a=null)}function n_(r){return r=new Rn(r.a),r.type="input",r}Cu.prototype.o=function(){Cu.K.o.call(this),this.h.m(),Xg(this),delete this.g};function Au(r,a){Bt.call(this),r&&(this.Oa&&a_(this),this.qa=r,this.Na=Ii(this.qa,"keypress",this,a),this.Ya=Ii(this.qa,"keydown",this.Jb,a,this),this.Oa=Ii(this.qa,"keyup",this.Kb,a,this))}oe(Au,Bt),t=Au.prototype,t.qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var i_={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},r_={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},s_=!An||Us("525"),o_=Lr&&bi;t=Au.prototype,t.Jb=function(r){(An||Mr)&&(this.R==17&&!r.ctrlKey||this.R==18&&!r.altKey||Lr&&this.R==91&&!r.metaKey)&&(this.X=this.R=-1),this.R==-1&&(r.ctrlKey&&r.keyCode!=17?this.R=17:r.altKey&&r.keyCode!=18?this.R=18:r.metaKey&&r.keyCode!=91&&(this.R=91)),s_&&!Q1(r.keyCode,this.R,r.shiftKey,r.ctrlKey,r.altKey,r.metaKey)?this.handleEvent(r):(this.X=Jg(r.keyCode),o_&&(this.Ua=r.altKey))},t.Kb=function(r){this.X=this.R=-1,this.Ua=r.altKey},t.handleEvent=function(r){var a=r.a,u=a.altKey;if(_t&&r.type=="keypress")var h=this.X,p=h!=13&&h!=27?a.keyCode:0;else(An||Mr)&&r.type=="keypress"?(h=this.X,p=0<=a.charCode&&63232>a.charCode&&Tu(h)?a.charCode:0):Qb&&!An?(h=this.X,p=Tu(h)?a.keyCode:0):(r.type=="keypress"?(o_&&(u=this.Ua),a.keyCode==a.charCode?32>a.keyCode?(h=a.keyCode,p=0):(h=this.X,p=a.charCode):(h=a.keyCode||this.X,p=a.charCode||0)):(h=a.keyCode||this.X,p=a.charCode||0),Lr&&p==63&&h==224&&(h=191));var m=h=Jg(h);h?63232<=h&&h in i_?m=i_[h]:h==25&&r.shiftKey&&(m=9):a.keyIdentifier&&a.keyIdentifier in r_&&(m=r_[a.keyIdentifier]),bi&&s_&&r.type=="keypress"&&!Q1(m,this.R,r.shiftKey,r.ctrlKey,u,r.metaKey)||(r=m==this.R,this.R=m,a=new c_(m,p,r,a),a.altKey=u,$r(this,a))},t.N=function(){return this.qa};function a_(r){r.Na&&(jr(r.Na),jr(r.Ya),jr(r.Oa),r.Na=null,r.Ya=null,r.Oa=null),r.qa=null,r.R=-1,r.X=-1}t.o=function(){Au.K.o.call(this),a_(this)};function c_(r,a,u,h){Rn.call(this,h),this.type="key",this.keyCode=r,this.j=a,this.repeat=u}oe(c_,Rn);function Ta(r,a,u,h){this.top=r,this.right=a,this.bottom=u,this.left=h}Ta.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Ta.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Ta.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Ta.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function Vd(r,a){var u=ru(r);return u.defaultView&&u.defaultView.getComputedStyle&&(r=u.defaultView.getComputedStyle(r,null))&&(r[a]||r.getPropertyValue(a))||""}function u_(r){try{var a=r.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return _t&&r.ownerDocument.body&&(r=r.ownerDocument,a.left-=r.documentElement.clientLeft+r.body.clientLeft,a.top-=r.documentElement.clientTop+r.body.clientTop),a}function ZP(r,a){a=a||ed(document);var u=a||ed(document),h=l_(r),p=l_(u);if(!_t||9<=Number(nu)){y=Vd(u,"borderLeftWidth");var m=Vd(u,"borderRightWidth");E=Vd(u,"borderTopWidth"),R=Vd(u,"borderBottomWidth"),m=new Ta(parseFloat(E),parseFloat(m),parseFloat(R),parseFloat(y))}else{var y=Bd(u,"borderLeft");m=Bd(u,"borderRight");var E=Bd(u,"borderTop"),R=Bd(u,"borderBottom");m=new Ta(E,m,R,y)}u==ed(document)?(y=h.a-u.scrollLeft,h=h.g-u.scrollTop,!_t||10<=Number(nu)||(y+=m.left,h+=m.top)):(y=h.a-p.a-m.left,h=h.g-p.g-m.top),p=r.offsetWidth,m=r.offsetHeight,E=An&&!p&&!m,w(p)&&!E||!r.getBoundingClientRect?r=new Xm(p,m):(r=u_(r),r=new Xm(r.right-r.left,r.bottom-r.top)),p=u.clientHeight-r.height,m=u.scrollLeft,E=u.scrollTop,m+=Math.min(y,Math.max(y-(u.clientWidth-r.width),0)),E+=Math.min(h,Math.max(h-p,0)),u=new Vr(m,E),a.scrollLeft=u.a,a.scrollTop=u.g}function l_(r){var a=ru(r),u=new Vr(0,0),h=a?ru(a):document;return h=!_t||9<=Number(nu)||Zh(h).a.compatMode=="CSS1Compat"?h.documentElement:h.body,r==h||(r=u_(r),h=Zh(a).a,a=ed(h),h=h.parentWindow||h.defaultView,a=_t&&Us("10")&&h.pageYOffset!=a.scrollTop?new Vr(a.scrollLeft,a.scrollTop):new Vr(h.pageXOffset||a.scrollLeft,h.pageYOffset||a.scrollTop),u.a=r.left+a.a,u.g=r.top+a.g),u}var h_={thin:2,medium:4,thick:6};function Bd(r,a){if((r.currentStyle?r.currentStyle[a+"Style"]:null)=="none")return 0;var u=r.currentStyle?r.currentStyle[a+"Width"]:null;if(u in h_)r=h_[u];else if(/^\d+px?$/.test(u))r=parseInt(u,10);else{a=r.style.left;var h=r.runtimeStyle.left;r.runtimeStyle.left=r.currentStyle.left,r.style.left=u,u=r.style.pixelLeft,r.style.left=a,r.runtimeStyle.left=h,r=+u}return r}function Zg(){}C(Zg),Zg.prototype.a=0;function Qs(r){Bt.call(this),this.s=r||Zh(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}oe(Qs,Bt),t=Qs.prototype,t.Lb=Zg.Xa(),t.N=function(){return this.g};function Le(r,a){return r.g?eg(a,r.g||r.s.a):null}function ku(r){return r.L||(r.L=new Ea(r)),r.L}t.Za=function(r){if(this.Y&&this.Y!=r)throw Error("Method not supported");Qs.K.Za.call(this,r)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(r){if(this.na)throw Error("Component already rendered");this.g||this.kb(),r?r.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,ev(this,function(r){!r.na&&r.N()&&r.v()})},t.ya=function(){ev(this,function(r){r.na&&r.ya()}),this.L&&t_(this.L),this.na=!1},t.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),ev(this,function(r){r.m()}),this.g&&Bs(this.g),this.Y=this.g=this.oa=this.Ea=null,Qs.K.o.call(this)};function ev(r,a){r.Ea&&Ut(r.Ea,a,void 0)}t.removeChild=function(r,a){if(r){var u=I(r)?r:r.cb||(r.cb=":"+(r.Lb.a++).toString(36));if(this.oa&&u?(r=this.oa,r=(r!==null&&u in r?r[u]:void 0)||null):r=null,u&&r){var h=this.oa;if(u in h&&delete h[u],de(this.Ea,r),a&&(r.ya(),r.g&&Bs(r.g)),a=r,a==null)throw Error("Unable to set parent component");a.Y=null,Qs.K.Za.call(a,null)}}if(!r)throw Error("Child is not in parent component");return r};function Tt(r,a){var u=lI(r,"firebaseui-textfield");a?(Fi(r,"firebaseui-input-invalid"),Li(r,"firebaseui-input"),u&&Fi(u,"firebaseui-textfield-invalid")):(Fi(r,"firebaseui-input"),Li(r,"firebaseui-input-invalid"),u&&Li(u,"firebaseui-textfield-invalid"))}function Ca(r,a,u){a=new Cu(a),au(r,ot(cu,a)),Sa(ku(r),a,"input",u)}function Ru(r,a,u){a=new Au(a),au(r,ot(cu,a)),Sa(ku(r),a,"key",function(h){h.keyCode==13&&(h.stopPropagation(),h.preventDefault(),u(h))})}function eO(r,a,u){a=new _a(a),au(r,ot(cu,a)),Sa(ku(r),a,"focusin",u)}function tO(r,a,u){a=new _a(a),au(r,ot(cu,a)),Sa(ku(r),a,"focusout",u)}function yt(r,a,u){a=new Ia(a),au(r,ot(cu,a)),Sa(ku(r),a,"action",function(h){h.stopPropagation(),h.preventDefault(),u(h)})}function si(r){Li(r,"firebaseui-hidden")}function en(r,a){a&&tg(r,a),Fi(r,"firebaseui-hidden")}function Aa(r){return!Su(r,"firebaseui-hidden")&&r.style.display!="none"}function ka(r){r=r||{};var a=r.email,u=r.disabled,h='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return h=r.wc?h+"Enter new email address":h+"Email",h+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+kn(a??"")+'"'+(u?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ee(h)}function jn(r){r=r||{},r=r.label;var a='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return a=r?a+ye(r):a+"Next",ee(a+"</button>")}function tv(){var r=""+jn({label:Et("Sign In")});return ee(r)}function d_(){var r=""+jn({label:Et("Save")});return ee(r)}function _i(){var r=""+jn({label:Et("Continue")});return ee(r)}function f_(r){r=r||{},r=r.label;var a='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return a=r?a+ye(r):a+"Choose password",ee(a+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function p_(){var r={},a='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return a=r.current?a+"Current password":a+"Password",ee(a+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function m_(){return ee('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function oi(r){r=r||{},r=r.label;var a='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return a=r?a+ye(r):a+"Cancel",ee(a+"</button>")}function dn(r){var a="";return r.F&&r.D&&(a+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ee(a)}function Ra(r){var a="";return r.F&&r.D&&(a+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ee(a)}function g_(r){return r='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+ye(r.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ee(r)}g_.a="firebaseui.auth.soy2.element.infoBar";function v_(r){var a=r.content;return r=r.Ab,ee('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(r?" "+kn(r):"")+'">'+ye(a)+"</dialog>")}function y_(r){var a=r.message;return ee(v_({content:fI('<div class="firebaseui-dialog-icon-wrapper"><div class="'+kn(r.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+ye(a)+"</div>")}))}y_.a="firebaseui.auth.soy2.element.progressDialog";function w_(r){var a='<div class="firebaseui-list-box-actions">';r=r.items;for(var u=r.length,h=0;h<u;h++){var p=r[h];a+='<button type="button" data-listboxid="'+kn(p.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(p.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+kn(p.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+ye(p.label)+"</div></button>"}return a=""+v_({Ab:Et("firebaseui-list-box-dialog"),content:fI(a+"</div>")}),ee(a)}w_.a="firebaseui.auth.soy2.element.listBoxDialog";function jd(r){return r=r||{},ee(r.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}jd.a="firebaseui.auth.soy2.element.busyIndicator";function zr(r,a){return r=r||{},r=r.ga,qe(r.S?r.S:a.hb[r.providerId]?""+a.hb[r.providerId]:r.providerId&&r.providerId.indexOf("saml.")==0||r.providerId&&r.providerId.indexOf("oidc.")==0?r.providerId.substring(5):""+r.providerId)}function nv(r){b_(r,"upgradeElement")}function iv(r){b_(r,"downgradeElements")}var nO=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function b_(r,a){r&&window.componentHandler&&window.componentHandler[a]&&nO.forEach(function(u){Su(r,u)&&window.componentHandler[a](r),Ut(Zm(u,r),function(h){window.componentHandler[a](h)})})}function I_(r,a,u){if($d.call(this),document.body.appendChild(r),r.showModal||window.dialogPolyfill.registerDialog(r),r.showModal(),nv(r),a&&yt(this,r,function(m){var y=r.getBoundingClientRect();(m.clientX<y.left||y.left+y.width<m.clientX||m.clientY<y.top||y.top+y.height<m.clientY)&&$d.call(this)}),!u){var h=this.N().parentElement||this.N().parentNode;if(h){var p=this;this.da=function(){if(r.open){var m=r.getBoundingClientRect().height,y=h.getBoundingClientRect().height,E=h.getBoundingClientRect().top-document.body.getBoundingClientRect().top,R=h.getBoundingClientRect().left-document.body.getBoundingClientRect().left,$=r.getBoundingClientRect().width,ae=h.getBoundingClientRect().width;r.style.top=(E+(y-m)/2).toString()+"px",m=R+(ae-$)/2,r.style.left=m.toString()+"px",r.style.right=(document.body.getBoundingClientRect().width-m-$).toString()+"px"}else window.removeEventListener("resize",p.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function $d(){var r=rv.call(this);r&&(iv(r),r.open&&r.close(),Bs(r),this.da&&window.removeEventListener("resize",this.da))}function rv(){return eg("firebaseui-id-dialog")}function __(){Bs(E_.call(this))}function E_(){return Le(this,"firebaseui-id-info-bar")}function S_(){return Le(this,"firebaseui-id-dismiss-info-bar")}var iO={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function sv(r,a,u){rr.call(this,r,a);for(var h in u)this[h]=u[h]}oe(sv,rr);function M(r,a,u,h,p){Qs.call(this,u),this.fb=r,this.eb=a,this.Fa=!1,this.Ga=h||null,this.A=this.ca=null,this.Z=xe(iO),$e(this.Z,p||{})}oe(M,Qs),t=M.prototype,t.kb=function(){var r=su(this.fb,this.eb,this.Z,this.s);nv(r),this.g=r},t.v=function(){if(M.K.v.call(this),CI(dt(this),new sv("pageEnter",dt(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var r=this.Z.F;yt(this,this.bb(),function(){r()})}if(this.ab()&&this.Z.D){var a=this.Z.D;yt(this,this.ab(),function(){a()})}},t.ya=function(){CI(dt(this),new sv("pageExit",dt(this),{pageId:this.Ga})),M.K.ya.call(this)},t.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,iv(this.N()),M.K.o.call(this)};function rO(r){r.Fa=!0;var a=Su(r.N(),"firebaseui-use-spinner");r.ca=window.setTimeout(function(){r.N()&&r.A===null&&(r.A=su(jd,{tb:a},null,r.s),r.N().appendChild(r.A),nv(r.A))},500)}t.I=function(r,a,u,h){function p(){if(m.T)return null;m.Fa=!1,window.clearTimeout(m.ca),m.ca=null,m.A&&(iv(m.A),Bs(m.A),m.A=null)}var m=this;return m.Fa?null:(rO(m),r.apply(null,a).then(u,h).then(p,p))};function dt(r){return r.N().parentElement||r.N().parentNode}function xu(r,a,u){Ru(r,a,function(){u.focus()})}function xa(r,a,u){Ru(r,a,function(){u()})}Ue(M.prototype,{a:function(r){__.call(this);var a=su(g_,{message:r},null,this.s);this.N().appendChild(a),yt(this,S_.call(this),function(){Bs(a)})},yc:__,Ac:E_,zc:S_,$:function(r,a){r=su(y_,{Ma:r,message:a},null,this.s),I_.call(this,r)},h:$d,Cb:rv,Cc:function(){return Le(this,"firebaseui-tos")},bb:function(){return Le(this,"firebaseui-tos-link")},ab:function(){return Le(this,"firebaseui-pp-link")},Dc:function(){return Le(this,"firebaseui-tos-list")}});function T_(r,a,u){r=r||{},a=r.Va;var h=r.ia;return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ka(r)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?oi(null):"")+jn(null)+'</div></div><div class="firebaseui-card-footer">'+(h?Ra(u):dn(u))+"</div></form></div>",ee(r)}T_.a="firebaseui.auth.soy2.page.signIn";function C_(r,a,u){return r=r||{},a=r.ia,r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+ka(r)+p_()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+m_()+'</div><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+(a?Ra(u):dn(u))+"</div></form></div>",ee(r)}C_.a="firebaseui.auth.soy2.page.passwordSignIn";function A_(r,a,u){r=r||{};var h=r.Tb;a=r.Ta;var p=r.ia,m='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+ka(r);return h?(r=r||{},r=r.name,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+kn(r??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',r=ee(r)):r="",u=m+r+f_(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?oi(null):"")+d_()+'</div></div><div class="firebaseui-card-footer">'+(p?Ra(u):dn(u))+"</div></form></div>",ee(u)}A_.a="firebaseui.auth.soy2.page.passwordSignUp";function k_(r,a,u){return r=r||{},a=r.Ta,r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+ka(r)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?oi(null):"")+jn({label:Et("Send")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(r)}k_.a="firebaseui.auth.soy2.page.passwordRecovery";function R_(r,a,u){a=r.G;var h="";return r="Follow the instructions sent to <strong>"+(ye(r.email)+"</strong> to recover your password"),h+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions">',a&&(h+='<div class="firebaseui-form-actions">'+jn({label:Et("Done")})+"</div>"),h+='</div><div class="firebaseui-card-footer">'+dn(u)+"</div></div>",ee(h)}R_.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function x_(r,a,u){return ee('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+jd(null)+"</div></div>")}x_.a="firebaseui.auth.soy2.page.callback";function D_(r,a,u){return ee('<div class="firebaseui-container firebaseui-id-page-spinner">'+jd({tb:!0})+"</div>")}D_.a="firebaseui.auth.soy2.page.spinner";function N_(){return ee('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}N_.a="firebaseui.auth.soy2.page.blank";function P_(r,a,u){a="",r="A sign-in email with additional instructions was sent to <strong>"+(ye(r.email)+"</strong>. Check your email to complete sign-in.");var h=ee('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+h+'</div><div class="firebaseui-form-actions">'+oi({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}P_.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function O_(r,a,u){return r=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+ee('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+oi({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(r)}O_.a="firebaseui.auth.soy2.page.emailNotReceived";function M_(r,a,u){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+ka(r)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi(null)+jn(null)+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(r)}M_.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function L_(){var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi({label:Et("Dismiss")})+"</div></div></div>";return ee(r)}L_.a="firebaseui.auth.soy2.page.differentDeviceError";function F_(){var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi({label:Et("Dismiss")})+"</div></div></div>";return ee(r)}F_.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function U_(r,a,u){return a="",r="You’ve already used <strong>"+(ye(r.email)+"</strong> to sign in. Enter your password for that account."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+r+"</p>"+p_()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+m_()+'</div><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}U_.a="firebaseui.auth.soy2.page.passwordLinking";function V_(r,a,u){var h=r.email;return a="",r=""+zr(r,u),r=Et(r),h="You’ve already used <strong>"+(ye(h)+("</strong>. You can connect your <strong>"+(ye(r)+("</strong> account with <strong>"+(ye(h)+"</strong> by signing in with email link below."))))),r="For this flow to successfully connect your "+(ye(r)+" account with this email, you have to open the link on the same device or browser."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+h+'<p class="firebaseui-text firebaseui-text-justify">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+tv()+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}V_.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function B_(r,a,u){a="";var h=""+zr(r,u);return h=Et(h),r="You originally intended to connect <strong>"+(ye(h)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),h="If you still want to connect your <strong>"+(ye(h)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+r+'</p><p class="firebaseui-text firebaseui-text-justify">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+_i()+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}B_.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function j_(r,a,u){var h=r.email;return a="",r=""+zr(r,u),r=Et(r),h="You’ve already used <strong>"+(ye(h)+("</strong>. Sign in with "+(ye(r)+" to continue."))),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+jn({label:Et("Sign in with "+r)})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}j_.a="firebaseui.auth.soy2.page.federatedLinking";function $_(r,a,u){r=r||{};var h=r.kc;a=r.yb,r=r.Eb;var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return h?(h="<strong>"+(ye(h)+"</strong> is not authorized to view the requested page."),p+=h):p+="User is not authorized to view the requested page.",p+="</p>",a&&(a="Please contact <strong>"+(ye(a)+"</strong> for authorization."),p+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+a+"</p>"),p+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',r&&(p+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),p+='</div><div class="firebaseui-form-actions">'+oi({label:Et("Back")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(p)}$_.a="firebaseui.auth.soy2.page.unauthorizedUser";function q_(r,a,u){return a="",r="To continue sign in with <strong>"+(ye(r.email)+"</strong> on this device, you have to recover the password."),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi(null)+jn({label:Et("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}q_.a="firebaseui.auth.soy2.page.unsupportedProvider";function K_(r){var a="",u='<p class="firebaseui-text">for <strong>'+(ye(r.email)+"</strong></p>");return a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+u+f_(GN(r))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+d_()+"</div></div></form></div>",ee(a)}K_.a="firebaseui.auth.soy2.page.passwordReset";function z_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}z_.a="firebaseui.auth.soy2.page.passwordResetSuccess";function G_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}G_.a="firebaseui.auth.soy2.page.passwordResetFailure";function H_(r){var a=r.G,u="";return r="Your sign-in email address has been changed back to <strong>"+(ye(r.email)+"</strong>."),u+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(a?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></form></div>",ee(u)}H_.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function W_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}W_.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function Y_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}Y_.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function Q_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}Q_.a="firebaseui.auth.soy2.page.emailVerificationFailure";function J_(r){var a=r.G,u="";return r="You can now sign in with your new email <strong>"+(ye(r.email)+"</strong>."),u+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions">'+(a?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(u)}J_.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function X_(r){return r=r||{},r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}X_.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function Z_(r){var a=r.factorId,u=r.phoneNumber;r=r.G;var h='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(a){case"phone":a="The <strong>"+(ye(a)+(" "+(ye(u)+"</strong> was removed as a second authentication step."))),h+=a;break;default:h+="The device or app was removed as a second authentication step."}return h+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(r?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></form></div>",ee(h)}Z_.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function eE(r){return r=r||{},r=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(r.G?'<div class="firebaseui-form-actions">'+_i()+"</div>":"")+"</div></div>",ee(r)}eE.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function tE(r){var a=r.zb;return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(r.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',a&&(r+=jn({label:Et("Retry")})),ee(r+"</div></div></div>")}tE.a="firebaseui.auth.soy2.page.recoverableError";function nE(r){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(r.errorMessage)+"</p></div></div>",ee(r)}nE.a="firebaseui.auth.soy2.page.unrecoverableError";function iE(r,a,u){var h=r.Qb;return a="",r="Continue with "+(ye(r.jc)+"?"),h="You originally wanted to sign in with "+ye(h),a+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+r+'</h2><p class="firebaseui-text">'+h+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi(null)+jn({label:Et("Continue")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form></div>",ee(a)}iE.a="firebaseui.auth.soy2.page.emailMismatch";function rE(r,a,u){var h='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';r=r.Sb,a=r.length;for(var p=0;p<a;p++){var m={ga:r[p]},y=u;m=m||{};var E=m.ga,R=m;R=R||{};var $="";switch(R.ga.providerId){case"google.com":$+="firebaseui-idp-google";break;case"github.com":$+="firebaseui-idp-github";break;case"facebook.com":$+="firebaseui-idp-facebook";break;case"twitter.com":$+="firebaseui-idp-twitter";break;case"phone":$+="firebaseui-idp-phone";break;case"anonymous":$+="firebaseui-idp-anonymous";break;case"password":$+="firebaseui-idp-password";break;default:$+="firebaseui-idp-generic"}R='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+kn(qe($))+' firebaseui-id-idp-button" data-provider-id="'+kn(E.providerId)+'" style="background-color:',$=($=m)||{},$=$.ga,R=R+kn(pI(qe($.ta?$.ta:y.wa[$.providerId]?""+y.wa[$.providerId]:$.providerId.indexOf("saml.")==0?""+y.wa.saml:$.providerId.indexOf("oidc.")==0?""+y.wa.oidc:""+y.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var ae=m;$=y,ae=ae||{},ae=ae.ga,$=zN(ae.za?js(ae.za):$.xa[ae.providerId]?js($.xa[ae.providerId]):ae.providerId.indexOf("saml.")==0?js($.xa.saml):ae.providerId.indexOf("oidc.")==0?js($.xa.oidc):js($.xa.password)),R=R+kn(js($))+'"></span>',E.providerId=="password"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=ye(E.V):E.S?(m="Sign in with "+ye(zr(m,y)),R+=m):R+="Sign in with email",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+ye(E.S):R+"Email",R+="</span>"):E.providerId=="phone"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=ye(E.V):E.S?(m="Sign in with "+ye(zr(m,y)),R+=m):R+="Sign in with phone",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+ye(E.S):R+"Phone",R+="</span>"):E.providerId=="anonymous"?(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=ye(E.V):E.S?(m="Sign in with "+ye(zr(m,y)),R+=m):R+="Continue as guest",R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',R=E.S?R+ye(E.S):R+"Guest",R+="</span>"):(R+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',E.V?R+=ye(E.V):($="Sign in with "+ye(zr(m,y)),R+=$),R+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(E.S?ye(E.S):ye(zr(m,y)))+"</span>"),E=ee(R+"</button>"),h+='<li class="firebaseui-list-item">'+E+"</li>"}return h+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Ra(u)+"</div></div>",ee(h)}rE.a="firebaseui.auth.soy2.page.providerSignIn";function sE(r,a,u){r=r||{};var h=r.Gb,p=r.Va;a=r.ia,r=r||{},r=r.Aa,r='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+kn(r??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ee(r);var m;return h?m=ee('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):m="",m=r+m+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(p?oi(null):"")+jn({label:Et("Verify")})+'</div></div><div class="firebaseui-card-footer">',a?(a='<p class="firebaseui-tos firebaseui-phone-tos">',a=u.F&&u.D?a+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':a+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",u=ee(a+"</p>")):u=ee('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+dn(u),ee(m+u+"</div></form></div>")}sE.a="firebaseui.auth.soy2.page.phoneSignInStart";function oE(r,a,u){r=r||{},a=r.phoneNumber;var h="";return r='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(ye(a)+"</a>"),ye(a),a=h,h=ee('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),u='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+r+"</p>"+h+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+oi(null)+jn({label:Et("Continue")})+'</div></div><div class="firebaseui-card-footer">'+dn(u)+"</div></form>",r=ee('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ee(a+(u+r+"</div>"))}oE.a="firebaseui.auth.soy2.page.phoneSignInFinish";function aE(){return ee('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}aE.a="firebaseui.auth.soy2.page.signOut";function cE(r,a,u){var h='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';r=r.ec,a=r.length;for(var p=0;p<a;p++){var m=r[p],y="",E=ye(m.displayName),R=m.tenantId?m.tenantId:"top-level-project";R=Et(R),y+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+kn(R)+' firebaseui-id-tenant-selection-button"'+(m.tenantId?'data-tenant-id="'+kn(m.tenantId)+'"':"")+'style="background-color:'+kn(pI(m.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+kn(js(m.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',m.V?y+=ye(m.V):(m="Sign in to "+ye(m.displayName),y+=m),y=ee(y+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+E+"</span></button>")),h+='<li class="firebaseui-list-item">'+y+"</li>"}return h+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Ra(u)+"</div></div>",ee(h)}cE.a="firebaseui.auth.soy2.page.selectTenant";function uE(r,a,u){return r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ka(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+jn(null)+'</div></div><div class="firebaseui-card-footer">'+Ra(u)+"</div></form></div>",ee(r)}uE.a="firebaseui.auth.soy2.page.providerMatchByEmail";function zt(){return Le(this,"firebaseui-id-submit")}function $t(){return Le(this,"firebaseui-id-secondary-link")}function tn(r,a){yt(this,zt.call(this),function(h){r(h)});var u=$t.call(this);u&&a&&yt(this,u,function(h){a(h)})}function qd(){return Le(this,"firebaseui-id-password")}function Kd(){return Le(this,"firebaseui-id-password-error")}function lE(){var r=qd.call(this),a=Kd.call(this);Ca(this,r,function(){Aa(a)&&(Tt(r,!0),si(a))})}function hE(){var r=qd.call(this),a=Kd.call(this);return Zt(r)?(Tt(r,!0),si(a),a=!0):(Tt(r,!1),en(a,qe("Enter your password").toString()),a=!1),a?Zt(r):null}function Da(r,a,u,h,p,m){M.call(this,U_,{email:r},m,"passwordLinking",{F:h,D:p}),this.w=a,this.H=u}l(Da,M),Da.prototype.v=function(){this.P(),this.M(this.w,this.H),xa(this,this.i(),this.w),this.i().focus(),M.prototype.v.call(this)},Da.prototype.o=function(){this.w=null,M.prototype.o.call(this)},Da.prototype.j=function(){return Zt(Le(this,"firebaseui-id-email"))},Ue(Da.prototype,{i:qd,B:Kd,P:lE,u:hE,ea:zt,ba:$t,M:tn});var sO=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function ar(){return Le(this,"firebaseui-id-email")}function Gr(){return Le(this,"firebaseui-id-email-error")}function Na(r){var a=ar.call(this),u=Gr.call(this);Ca(this,a,function(){Aa(u)&&(Tt(a,!0),si(u))}),r&&Ru(this,a,function(){r()})}function Pa(){return N(Zt(ar.call(this))||"")}function Oa(){var r=ar.call(this),a=Gr.call(this),u=Zt(r)||"";return u?sO.test(u)?(Tt(r,!0),si(a),a=!0):(Tt(r,!1),en(a,qe("That email address isn't correct").toString()),a=!1):(Tt(r,!1),en(a,qe("Enter your email address to continue").toString()),a=!1),a?N(Zt(r)):null}function Du(r,a,u,h,p,m,y){M.call(this,C_,{email:u,ia:!!m},y,"passwordSignIn",{F:h,D:p}),this.w=r,this.H=a}l(Du,M),Du.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),xu(this,this.l(),this.i()),xa(this,this.i(),this.w),Zt(this.l())?this.i().focus():this.l().focus(),M.prototype.v.call(this)},Du.prototype.o=function(){this.H=this.w=null,M.prototype.o.call(this)},Ue(Du.prototype,{l:ar,U:Gr,P:Na,M:Pa,j:Oa,i:qd,B:Kd,ea:lE,u:hE,ua:zt,pa:$t,ba:tn});function Qe(r,a,u,h,p,m){M.call(this,r,a,h,p||"notice",m),this.i=u||null}oe(Qe,M),Qe.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Qe.K.v.call(this)},Qe.prototype.o=function(){this.i=null,Qe.K.o.call(this)},Ue(Qe.prototype,{l:zt,w:$t,u:tn});function zd(r,a,u,h,p){Qe.call(this,R_,{email:r,G:!!a},a,p,"passwordRecoveryEmailSent",{F:u,D:h})}oe(zd,Qe);function dE(r,a){Qe.call(this,Y_,{G:!!r},r,a,"emailVerificationSuccess")}oe(dE,Qe);function fE(r,a){Qe.call(this,Q_,{G:!!r},r,a,"emailVerificationFailure")}oe(fE,Qe);function pE(r,a,u){Qe.call(this,J_,{email:r,G:!!a},a,u,"verifyAndChangeEmailSuccess")}oe(pE,Qe);function mE(r,a){Qe.call(this,X_,{G:!!r},r,a,"verifyAndChangeEmailFailure")}oe(mE,Qe);function gE(r,a){Qe.call(this,eE,{G:!!r},r,a,"revertSecondFactorAdditionFailure")}oe(gE,Qe);function vE(r){Qe.call(this,aE,void 0,void 0,r,"signOut")}oe(vE,Qe);function yE(r,a){Qe.call(this,z_,{G:!!r},r,a,"passwordResetSuccess")}oe(yE,Qe);function wE(r,a){Qe.call(this,G_,{G:!!r},r,a,"passwordResetFailure")}oe(wE,Qe);function bE(r,a){Qe.call(this,W_,{G:!!r},r,a,"emailChangeRevokeFailure")}oe(bE,Qe);function IE(r,a,u){Qe.call(this,tE,{errorMessage:r,zb:!!a},a,u,"recoverableError")}oe(IE,Qe);function _E(r,a){Qe.call(this,nE,{errorMessage:r},void 0,a,"unrecoverableError")}oe(_E,Qe);function Nu(r){if(r.code==="auth/invalid-credential"&&r.message&&r.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(r.message&&r.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var a=JSON.parse(r.message.substring(r.message.indexOf("{"),r.message.lastIndexOf("}")+1));return{code:r.code,message:a&&a.error&&a.error.message||r.message}}return r}function cr(r,a,u,h){function p(y){if(!y.name||y.name!="cancel"){e:{var E=y.message;try{var R=((JSON.parse(E).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(R&&R.length){var $=!0;break e}}catch{}$=!1}if($)y=dt(a),a.m(),st(r,y,void 0,qe("Your sign-in session has expired. Please try again.").toString());else{if($=y&&y.message||"",y.code){if(y.code=="auth/email-already-in-use"||y.code=="auth/credential-already-in-use")return;$=Ze(y)}a.a($)}}}if(KE(r),h)return EE(r,u),St();if(!u.credential)throw Error("No credential found!");if(!Oe(r).currentUser&&!u.user)throw Error("User not logged in.");try{var m=FO(r,u)}catch(y){return ii(y.code||y.message,y),a.a(y.code||y.message),St()}return u=m.then(function(y){EE(r,y)},p).then(void 0,p),Se(r,m),St(u)}function EE(r,a){if(!a.user)throw Error("No user found");var u=z1(F(r));if(zg(F(r))&&u&&Kr("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),u){u=z1(F(r));var h=S1(ve(r))||void 0;Bn(yu,ve(r));var p=!1;KI()?((!u||u(a,h))&&(p=!0,sa(window.opener.location,Gd(r,h))),u||window.close()):(!u||u(a,h))&&(p=!0,sa(window.location,Gd(r,h))),p||r.reset()}else{u=a.user,a=a.credential,h=zg(F(r)),p=S1(ve(r))||void 0,Bn(yu,ve(r));var m=!1;KI()?((!h||h(u,a,p))&&(m=!0,sa(window.opener.location,Gd(r,p))),h||window.close()):(!h||h(u,a,p))&&(m=!0,sa(window.location,Gd(r,p))),m||r.reset()}}function Gd(r,a){if(r=a||F(r).a.get("signInSuccessUrl"),!r)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return r}function Ze(r){var a={code:r.code};a=a||{};var u="";switch(a.code){case"auth/email-already-in-use":u+="The email address is already used by another account";break;case"auth/requires-recent-login":u+=wI();break;case"auth/too-many-requests":u+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":u+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":u+="That email address doesn't match an existing account";break;case"auth/user-token-expired":u+=wI();break;case"auth/weak-password":u+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":u+="The email and password you entered don't match";break;case"auth/network-request-failed":u+="A network error has occurred";break;case"auth/invalid-phone-number":u+=sg();break;case"auth/invalid-verification-code":u+=qe("Wrong code. Try again.");break;case"auth/code-expired":u+="This code is no longer valid";break;case"auth/expired-action-code":u+="This code has expired.";break;case"auth/invalid-action-code":u+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(a=qe(u).toString())return a;try{return JSON.parse(r.message),ii("Internal error: "+r.message,void 0),gI().toString()}catch{return r.message}}function oO(r,a,u){var h=va[a]&&fe.auth[va[a]]?new fe.auth[va[a]]:a.indexOf("saml.")==0?new fe.auth.SAMLAuthProvider(a):new fe.auth.OAuthProvider(a);if(!h)throw Error("Invalid Firebase Auth provider!");var p=B1(F(r),a);if(h.addScope)for(var m=0;m<p.length;m++)h.addScope(p[m]);return p=j1(F(r),a)||{},u&&(a==fe.auth.GoogleAuthProvider.PROVIDER_ID?r="login_hint":a==fe.auth.GithubAuthProvider.PROVIDER_ID?r="login":r=(r=Iu(F(r),a))&&r.Ob,r&&(p[r]=u)),h.setCustomParameters&&h.setCustomParameters(p),h}function Pu(r,a,u,h){function p(){OP(new c1(r.h.tenantId||null),ve(r)),Se(r,a.I(be(r.dc,r),[R],function(){if((window.location&&window.location.protocol)==="file:")return Se(r,VE(r).then(function($){a.m(),Bn(Hs,ve(r)),se("callback",r,E,St($))},m))},y))}function m($){if(Bn(Hs,ve(r)),!$.name||$.name!="cancel")switch($=Nu($),$.code){case"auth/popup-blocked":p();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":a.a(Ze($));break;case"auth/admin-restricted-operation":a.m(),Ys(F(r))?se("handleUnauthorizedUser",r,E,null,u):se("callback",r,E,oa($));break;default:a.m(),se("callback",r,E,oa($))}}function y($){Bn(Hs,ve(r)),$.name&&$.name=="cancel"||(ii("signInWithRedirect: "+$.code,void 0),$=Ze($),a.Ga=="blank"&&Kg(F(r))?(a.m(),se("providerSignIn",r,E,$)):a.a($))}var E=dt(a),R=oO(r,u,h);K1(F(r))==Ld?p():Se(r,LO(r,R).then(function($){a.m(),se("callback",r,E,St($))},m))}function aO(r,a){Se(r,a.I(be(r.$b,r),[],function(u){return a.m(),cr(r,a,u,!0)},function(u){u.name&&u.name=="cancel"||(ii("ContinueAsGuest: "+u.code,void 0),u=Ze(u),a.a(u))}))}function cO(r,a,u){function h(m){var y=!1;return m=a.I(be(r.ac,r),[m],function(E){var R=dt(a);a.m(),se("callback",r,R,St(E)),y=!0},function(E){if((!E.name||E.name!="cancel")&&(!E||E.code!="auth/credential-already-in-use"))if(E&&E.code=="auth/email-already-in-use"&&E.email&&E.credential){var R=dt(a);a.m(),se("callback",r,R,oa(E))}else E&&E.code=="auth/admin-restricted-operation"&&Ys(F(r))?(E=dt(a),a.m(),se("handleUnauthorizedUser",r,E,null,fe.auth.GoogleAuthProvider.PROVIDER_ID)):(E=Ze(E),a.a(E))}),Se(r,m),m.then(function(){return y},function(){return!1})}if(u&&u.credential&&u.clientId===U1(F(r))){if(B1(F(r),fe.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var p=JSON.parse(atob(u.credential.split(".")[1])).email}catch{}return Pu(r,a,fe.auth.GoogleAuthProvider.PROVIDER_ID,p),St(!0)}return h(fe.auth.GoogleAuthProvider.credential(u.credential))}return u&&a.a(qe("The selected credential for the authentication provider is not supported!").toString()),St(!1)}function uO(r,a){var u=a.j(),h=a.u();if(u)if(h){var p=fe.auth.EmailAuthProvider.credential(u,h);Se(r,a.I(be(r.bc,r),[u,h],function(m){return cr(r,a,{user:m.user,credential:p,operationType:m.operationType,additionalUserInfo:m.additionalUserInfo})},function(m){if(!m.name||m.name!="cancel")switch(m.code){case"auth/email-already-in-use":break;case"auth/email-exists":Tt(a.l(),!1),en(a.U(),Ze(m));break;case"auth/too-many-requests":case"auth/wrong-password":Tt(a.i(),!1),en(a.B(),Ze(m));break;default:ii("verifyPassword: "+m.message,void 0),a.a(Ze(m))}}))}else a.i().focus();else a.l().focus()}function Hd(r){return r=ya(F(r)),r.length==1&&r[0]==fe.auth.EmailAuthProvider.PROVIDER_ID}function SE(r){return r=ya(F(r)),r.length==1&&r[0]==fe.auth.PhoneAuthProvider.PROVIDER_ID}function st(r,a,u,h){Hd(r)?h?se("signIn",r,a,u,h):av(r,a,u):r&&SE(r)&&!h?se("phoneSignInStart",r,a):r&&Kg(F(r))&&!h?se("federatedRedirect",r,a,u):se("providerSignIn",r,a,h,u)}function TE(r,a,u,h){var p=dt(a);Se(r,a.I(be(Oe(r).fetchSignInMethodsForEmail,Oe(r)),[u],function(m){a.m(),CE(r,p,m,u,h)},function(m){m=Ze(m),a.a(m)}))}function CE(r,a,u,h,p,m){u.length||wa(F(r))&&!wa(F(r))?z(u,fe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?se("passwordSignIn",r,a,h,m):u.length==1&&u[0]===fe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?wa(F(r))?se("sendEmailLinkForSignIn",r,a,h,function(){se("signIn",r,a)}):se("unsupportedProvider",r,a,h):(u=M1(u,ya(F(r))))?(T1(new Dg(h),ve(r)),se("federatedSignIn",r,a,h,u,p)):se("unsupportedProvider",r,a,h):V1(F(r))?se("handleUnauthorizedUser",r,a,h,fe.auth.EmailAuthProvider.PROVIDER_ID):wa(F(r))?se("sendEmailLinkForSignIn",r,a,h,function(){se("signIn",r,a)}):se("passwordSignUp",r,a,h,void 0,void 0,m)}function ov(r,a,u,h,p,m){var y=dt(a);Se(r,a.I(be(r.Ib,r),[u,m],function(){a.m(),se("emailLinkSignInSent",r,y,u,h,m)},p))}function av(r,a,u){u?se("prefilledEmailSignIn",r,a,u):se("signIn",r,a)}function Ou(){return Yh(or(),"oobCode")}function cv(){var r=Yh(or(),"continueUrl");return r?function(){sa(window.location,r)}:null}function Mu(r,a){M.call(this,F_,void 0,a,"anonymousUserMismatch"),this.i=r}l(Mu,M),Mu.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),this.l().focus(),M.prototype.v.call(this)},Mu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(Mu.prototype,{l:$t}),We.anonymousUserMismatch=function(r,a){var u=new Mu(function(){u.m(),st(r,a)});u.render(a),De(r,u)};function Wd(r){M.call(this,x_,void 0,r,"callback")}l(Wd,M),Wd.prototype.I=function(r,a,u,h){return r.apply(null,a).then(u,h)};function AE(r,a,u){if(u.user){var h={user:u.user,credential:u.credential,operationType:u.operationType,additionalUserInfo:u.additionalUserInfo},p=Oi(ve(r)),m=p&&p.g;if(m&&!hO(u.user,m))lO(r,a,h);else{var y=p&&p.a;y?Se(r,u.user.linkWithCredential(y).then(function(E){h={user:E.user,credential:y,operationType:E.operationType,additionalUserInfo:E.additionalUserInfo},kE(r,a,h)},function(E){Yd(r,a,E)})):kE(r,a,h)}}else u=dt(a),a.m(),Mi(ve(r)),st(r,u)}function kE(r,a,u){Mi(ve(r)),cr(r,a,u)}function Yd(r,a,u){var h=dt(a);Mi(ve(r)),u=Ze(u),a.m(),st(r,h,void 0,u)}function RE(r,a,u,h){var p=dt(a);Se(r,Oe(r).fetchSignInMethodsForEmail(u).then(function(m){a.m(),m.length?z(m,fe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?se("passwordLinking",r,p,u):m.length==1&&m[0]===fe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?se("emailLinkSignInLinking",r,p,u):(m=M1(m,ya(F(r))))?se("federatedLinking",r,p,u,m,h):(Mi(ve(r)),se("unsupportedProvider",r,p,u)):(Mi(ve(r)),se("passwordRecovery",r,p,u,!1,vI().toString()))},function(m){Yd(r,a,m)}))}function lO(r,a,u){var h=dt(a);Se(r,Hr(r).then(function(){a.m(),se("emailMismatch",r,h,u)},function(p){p.name&&p.name=="cancel"||(p=Ze(p.code),a.a(p))}))}function hO(r,a){if(a==r.email)return!0;if(r.providerData){for(var u=0;u<r.providerData.length;u++)if(a==r.providerData[u].email)return!0}return!1}We.callback=function(r,a,u){var h=new Wd;h.render(a),De(r,h),u=u||VE(r),Se(r,u.then(function(p){AE(r,h,p)},function(p){if((p=Nu(p))&&(p.code=="auth/account-exists-with-different-credential"||p.code=="auth/email-already-in-use")&&p.email&&p.credential)T1(new Dg(p.email,p.credential),ve(r)),RE(r,h,p.email);else if(p&&p.code=="auth/user-cancelled"){var m=Oi(ve(r)),y=Ze(p);m&&m.a?RE(r,h,m.g,y):m?TE(r,h,m.g,y):Yd(r,h,p)}else p&&p.code=="auth/credential-already-in-use"||(p&&p.code=="auth/operation-not-supported-in-this-environment"&&Hd(r)?AE(r,h,{user:null,credential:null}):p&&p.code=="auth/admin-restricted-operation"&&Ys(F(r))?(h.m(),Mi(ve(r)),se("handleUnauthorizedUser",r,a,null,null)):Yd(r,h,p))}))};function Lu(r,a){M.call(this,L_,void 0,a,"differentDeviceError"),this.i=r}l(Lu,M),Lu.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),this.l().focus(),M.prototype.v.call(this)},Lu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(Lu.prototype,{l:$t}),We.differentDeviceError=function(r,a){var u=new Lu(function(){u.m(),st(r,a)});u.render(a),De(r,u)};function Fu(r,a,u,h){M.call(this,H_,{email:r,G:!!u},h,"emailChangeRevoke"),this.l=a,this.i=u||null}l(Fu,M),Fu.prototype.v=function(){var r=this;yt(this,Le(this,"firebaseui-id-reset-password-link"),function(){r.l()}),this.i&&(this.w(this.i),this.u().focus()),M.prototype.v.call(this)},Fu.prototype.o=function(){this.l=this.i=null,M.prototype.o.call(this)},Ue(Fu.prototype,{u:zt,B:$t,w:tn});function Uu(){return Le(this,"firebaseui-id-new-password")}function Qd(){return Le(this,"firebaseui-id-password-toggle")}function dO(){this.Ra=!this.Ra;var r=Qd.call(this),a=Uu.call(this);this.Ra?(a.type="text",Li(r,"firebaseui-input-toggle-off"),Fi(r,"firebaseui-input-toggle-on")):(a.type="password",Li(r,"firebaseui-input-toggle-on"),Fi(r,"firebaseui-input-toggle-off")),a.focus()}function Jd(){return Le(this,"firebaseui-id-new-password-error")}function xE(){this.Ra=!1;var r=Uu.call(this);r.type="password";var a=Jd.call(this);Ca(this,r,function(){Aa(a)&&(Tt(r,!0),si(a))});var u=Qd.call(this);Li(u,"firebaseui-input-toggle-on"),Fi(u,"firebaseui-input-toggle-off"),eO(this,r,function(){Li(u,"firebaseui-input-toggle-focus"),Fi(u,"firebaseui-input-toggle-blur")}),tO(this,r,function(){Li(u,"firebaseui-input-toggle-blur"),Fi(u,"firebaseui-input-toggle-focus")}),yt(this,u,be(dO,this))}function DE(){var r=Uu.call(this),a=Jd.call(this);return Zt(r)?(Tt(r,!0),si(a),a=!0):(Tt(r,!1),en(a,qe("Enter your password").toString()),a=!1),a?Zt(r):null}function Vu(r,a,u){M.call(this,K_,{email:r},u,"passwordReset"),this.l=a}l(Vu,M),Vu.prototype.v=function(){this.H(),this.B(this.l),xa(this,this.i(),this.l),this.i().focus(),M.prototype.v.call(this)},Vu.prototype.o=function(){this.l=null,M.prototype.o.call(this)},Ue(Vu.prototype,{i:Uu,w:Jd,M:Qd,H:xE,u:DE,U:zt,P:$t,B:tn});function Bu(r,a,u,h,p){M.call(this,Z_,{factorId:r,phoneNumber:u||null,G:!!h},p,"revertSecondFactorAdditionSuccess"),this.l=a,this.i=h||null}l(Bu,M),Bu.prototype.v=function(){var r=this;yt(this,Le(this,"firebaseui-id-reset-password-link"),function(){r.l()}),this.i&&(this.w(this.i),this.u().focus()),M.prototype.v.call(this)},Bu.prototype.o=function(){this.l=this.i=null,M.prototype.o.call(this)},Ue(Bu.prototype,{u:zt,B:$t,w:tn});function fO(r,a,u,h,p){var m=u.u();m&&Se(r,u.I(be(Oe(r).confirmPasswordReset,Oe(r)),[h,m],function(){u.m();var y=new yE(p);y.render(a),De(r,y)},function(y){NE(r,a,u,y)}))}function NE(r,a,u,h){(h&&h.code)=="auth/weak-password"?(r=Ze(h),Tt(u.i(),!1),en(u.w(),r),u.i().focus()):(u&&u.m(),u=new wE,u.render(a),De(r,u))}function pO(r,a,u){var h=new Fu(u,function(){Se(r,h.I(be(Oe(r).sendPasswordResetEmail,Oe(r)),[u],function(){h.m(),h=new zd(u,void 0,Dt(F(r)),Nt(F(r))),h.render(a),De(r,h)},function(){h.a(mI().toString())}))});h.render(a),De(r,h)}function mO(r,a,u,h){var p=new Bu(h.factorId,function(){p.I(be(Oe(r).sendPasswordResetEmail,Oe(r)),[u],function(){p.m(),p=new zd(u,void 0,Dt(F(r)),Nt(F(r))),p.render(a),De(r,p)},function(){p.a(mI().toString())})},h.phoneNumber);p.render(a),De(r,p)}We.passwordReset=function(r,a,u,h){Se(r,Oe(r).verifyPasswordResetCode(u).then(function(p){var m=new Vu(p,function(){fO(r,a,m,u,h)});m.render(a),De(r,m)},function(){NE(r,a)}))},We.emailChangeRevocation=function(r,a,u){var h=null;Se(r,Oe(r).checkActionCode(u).then(function(p){return h=p.data.email,Oe(r).applyActionCode(u)}).then(function(){pO(r,a,h)},function(){var p=new bE;p.render(a),De(r,p)}))},We.emailVerification=function(r,a,u,h){Se(r,Oe(r).applyActionCode(u).then(function(){var p=new dE(h);p.render(a),De(r,p)},function(){var p=new fE;p.render(a),De(r,p)}))},We.revertSecondFactorAddition=function(r,a,u){var h=null,p=null;Se(r,Oe(r).checkActionCode(u).then(function(m){return h=m.data.email,p=m.data.multiFactorInfo,Oe(r).applyActionCode(u)}).then(function(){mO(r,a,h,p)},function(){var m=new gE;m.render(a),De(r,m)}))},We.verifyAndChangeEmail=function(r,a,u,h){var p=null;Se(r,Oe(r).checkActionCode(u).then(function(m){return p=m.data.email,Oe(r).applyActionCode(u)}).then(function(){var m=new pE(p,h);m.render(a),De(r,m)},function(){var m=new mE;m.render(a),De(r,m)}))};function Xd(r,a){try{var u=typeof r.selectionStart=="number"}catch{u=!1}u?(r.selectionStart=a,r.selectionEnd=a):_t&&!Us("9")&&(r.type=="textarea"&&(a=r.value.substring(0,a).replace(/(\r\n|\r|\n)/g,`
`).length),r=r.createTextRange(),r.collapse(!0),r.move("character",a),r.select())}function ju(r,a,u,h,p,m){M.call(this,M_,{email:u},m,"emailLinkSignInConfirmation",{F:h,D:p}),this.l=r,this.u=a}l(ju,M),ju.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Xd(this.i(),(this.i().value||"").length),M.prototype.v.call(this)},ju.prototype.o=function(){this.u=this.l=null,M.prototype.o.call(this)},Ue(ju.prototype,{i:ar,M:Gr,w:Na,H:Pa,j:Oa,U:zt,P:$t,B:tn}),We.emailLinkConfirmation=function(r,a,u,h,p,m){var y=new ju(function(){var E=y.j();E?(y.m(),h(r,a,E,u)):y.i().focus()},function(){y.m(),st(r,a,p||void 0)},p||void 0,Dt(F(r)),Nt(F(r)));y.render(a),De(r,y),m&&y.a(m)};function $u(r,a,u,h,p){M.call(this,B_,{ga:r},p,"emailLinkSignInLinkingDifferentDevice",{F:u,D:h}),this.i=a}l($u,M),$u.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},$u.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue($u.prototype,{l:zt,u:tn}),We.emailLinkNewDeviceLinking=function(r,a,u,h){var p=new Fs(u);if(u=p.a.a.get(Vt.PROVIDER_ID)||null,Gb(p,null),u){var m=new $u(Iu(F(r),u),function(){m.m(),h(r,a,p.toString())},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m)}else st(r,a)};function Zd(r){M.call(this,N_,void 0,r,"blank")}l(Zd,M);function uv(r,a,u,h,p){var m=new Zd,y=new Fs(u),E=y.a.a.get(Vt.$a)||"",R=y.a.a.get(Vt.Sa)||"",$=y.a.a.get(Vt.Qa)==="1",ae=zb(y),Je=y.a.a.get(Vt.PROVIDER_ID)||null;y=y.a.a.get(Vt.vb)||null,zE(r,y);var Ti=!ma(pa,ve(r)),QE=h||MP(R,ve(r)),tl=(h=LP(R,ve(r)))&&h.a;Je&&tl&&tl.providerId!==Je&&(tl=null),m.render(a),De(r,m),Se(r,m.I(function(){var pi=St(null);pi=ae&&Ti||Ti&&$?oa(Error("anonymous-user-not-found")):PO(r,u).then(function(bv){if(Je&&!tl)throw Error("pending-credential-not-found");return bv});var nl=null;return pi.then(function(bv){return nl=bv,p?null:Oe(r).checkActionCode(E)}).then(function(){return nl})},[],function(pi){QE?vO(r,m,QE,u,tl,pi):$?(m.m(),se("differentDeviceError",r,a)):(m.m(),se("emailLinkConfirmation",r,a,u,PE))},function(pi){var nl=void 0;if(!pi||!pi.name||pi.name!="cancel")switch(m.m(),pi&&pi.message){case"anonymous-user-not-found":se("differentDeviceError",r,a);break;case"anonymous-user-mismatch":se("anonymousUserMismatch",r,a);break;case"pending-credential-not-found":se("emailLinkNewDeviceLinking",r,a,u,gO);break;default:pi&&(nl=Ze(pi)),st(r,a,void 0,nl)}}))}function PE(r,a,u,h){uv(r,a,h,u,!0)}function gO(r,a,u){uv(r,a,u)}function vO(r,a,u,h,p,m){var y=dt(a);a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",qe("Signing in...").toString());var E=null;p=(m?OO(r,m,u,h,p):MO(r,u,h,p)).then(function(R){Bn(wu,ve(r)),Bn(pa,ve(r)),a.h(),a.$("firebaseui-icon-done",qe("Signed in!").toString()),E=setTimeout(function(){a.h(),cr(r,a,R,!0)},1e3),Se(r,function(){a&&(a.h(),a.m()),clearTimeout(E)})},function(R){if(a.h(),a.m(),!R.name||R.name!="cancel"){R=Nu(R);var $=Ze(R);R.code=="auth/email-already-in-use"||R.code=="auth/credential-already-in-use"?(Bn(wu,ve(r)),Bn(pa,ve(r))):R.code=="auth/invalid-email"?($=qe("The email provided does not match the current sign-in session.").toString(),se("emailLinkConfirmation",r,y,h,PE,null,$)):st(r,y,u,$)}}),Se(r,p)}We.emailLinkSignInCallback=uv;function qu(r,a,u,h,p,m){M.call(this,V_,{email:r,ga:a},m,"emailLinkSignInLinking",{F:h,D:p}),this.i=u}l(qu,M),qu.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},qu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(qu.prototype,{l:zt,u:tn});function yO(r,a,u,h){var p=dt(a);ov(r,a,u,function(){st(r,p,u)},function(m){if(!m.name||m.name!="cancel"){var y=Ze(m);m&&m.code=="auth/network-request-failed"?a.a(y):(a.m(),st(r,p,u,y))}},h)}We.emailLinkSignInLinking=function(r,a,u){var h=Oi(ve(r));if(Mi(ve(r)),h){var p=h.a.providerId,m=new qu(u,Iu(F(r),p),function(){yO(r,m,u,h)},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m)}else st(r,a)};function Ku(r,a,u,h,p,m){M.call(this,P_,{email:r},m,"emailLinkSignInSent",{F:h,D:p}),this.u=a,this.i=u}l(Ku,M),Ku.prototype.v=function(){var r=this;yt(this,this.l(),function(){r.i()}),yt(this,Le(this,"firebaseui-id-trouble-getting-email-link"),function(){r.u()}),this.l().focus(),M.prototype.v.call(this)},Ku.prototype.o=function(){this.i=this.u=null,M.prototype.o.call(this)},Ue(Ku.prototype,{l:$t}),We.emailLinkSignInSent=function(r,a,u,h,p){var m=new Ku(u,function(){m.m(),se("emailNotReceived",r,a,u,h,p)},function(){m.m(),h()},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m)};function zu(r,a,u,h,p,m,y){M.call(this,iE,{jc:r,Qb:a},y,"emailMismatch",{F:p,D:m}),this.l=u,this.i=h}l(zu,M),zu.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),M.prototype.v.call(this)},zu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(zu.prototype,{u:zt,B:$t,w:tn}),We.emailMismatch=function(r,a,u){var h=Oi(ve(r));if(h){var p=new zu(u.user.email,h.g,function(){var m=p;Mi(ve(r)),cr(r,m,u)},function(){var m=u.credential.providerId,y=dt(p);p.m(),h.a?se("federatedLinking",r,y,h.g,m):se("federatedSignIn",r,y,h.g,m)},Dt(F(r)),Nt(F(r)));p.render(a),De(r,p)}else st(r,a)};function Ma(r,a,u,h,p){M.call(this,O_,void 0,p,"emailNotReceived",{F:u,D:h}),this.l=r,this.i=a}l(Ma,M),Ma.prototype.v=function(){var r=this;yt(this,this.u(),function(){r.i()}),yt(this,this.Da(),function(){r.l()}),this.u().focus(),M.prototype.v.call(this)},Ma.prototype.Da=function(){return Le(this,"firebaseui-id-resend-email-link")},Ma.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Ue(Ma.prototype,{u:$t}),We.emailNotReceived=function(r,a,u,h,p){var m=new Ma(function(){ov(r,m,u,h,function(y){y=Ze(y),m.a(y)},p)},function(){m.m(),st(r,a,u)},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m)};function La(r,a,u,h,p,m){M.call(this,j_,{email:r,ga:a},m,"federatedLinking",{F:h,D:p}),this.i=u}l(La,M),La.prototype.v=function(){this.u(this.i),this.l().focus(),M.prototype.v.call(this)},La.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(La.prototype,{l:zt,u:tn}),We.federatedLinking=function(r,a,u,h,p){var m=Oi(ve(r));if(m&&m.a){var y=new La(u,Iu(F(r),h),function(){Pu(r,y,h,u)},Dt(F(r)),Nt(F(r)));y.render(a),De(r,y),p&&y.a(p)}else st(r,a)},We.federatedRedirect=function(r,a,u){var h=new Zd;h.render(a),De(r,h),a=ya(F(r))[0],Pu(r,h,a,u)},We.federatedSignIn=function(r,a,u,h,p){var m=new La(u,Iu(F(r),h),function(){Pu(r,m,h,u)},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m),p&&m.a(p)};function wO(r,a,u,h){var p=a.u();p?Se(r,a.I(be(r.Xb,r),[u,p],function(m){return m=m.user.linkWithCredential(h).then(function(y){return cr(r,a,{user:y.user,credential:h,operationType:y.operationType,additionalUserInfo:y.additionalUserInfo})}),Se(r,m),m},function(m){if(!m.name||m.name!="cancel")switch(m.code){case"auth/wrong-password":Tt(a.i(),!1),en(a.B(),Ze(m));break;case"auth/too-many-requests":a.a(Ze(m));break;default:ii("signInWithEmailAndPassword: "+m.message,void 0),a.a(Ze(m))}})):a.i().focus()}We.passwordLinking=function(r,a,u){var h=Oi(ve(r));Mi(ve(r));var p=h&&h.a;if(p){var m=new Da(u,function(){wO(r,m,u,p)},function(){m.m(),se("passwordRecovery",r,a,u)},Dt(F(r)),Nt(F(r)));m.render(a),De(r,m)}else st(r,a)};function Gu(r,a,u,h,p,m){M.call(this,k_,{email:u,Ta:!!a},m,"passwordRecovery",{F:h,D:p}),this.l=r,this.u=a}l(Gu,M),Gu.prototype.v=function(){this.B(),this.H(this.l,this.u),Zt(this.i())||this.i().focus(),xa(this,this.i(),this.l),M.prototype.v.call(this)},Gu.prototype.o=function(){this.u=this.l=null,M.prototype.o.call(this)},Ue(Gu.prototype,{i:ar,w:Gr,B:Na,M:Pa,j:Oa,U:zt,P:$t,H:tn});function bO(r,a){var u=a.j();if(u){var h=dt(a);Se(r,a.I(be(Oe(r).sendPasswordResetEmail,Oe(r)),[u],function(){a.m();var p=new zd(u,function(){p.m(),st(r,h)},Dt(F(r)),Nt(F(r)));p.render(h),De(r,p)},function(p){Tt(a.i(),!1),en(a.w(),Ze(p))}))}else a.i().focus()}We.passwordRecovery=function(r,a,u,h,p){var m=new Gu(function(){bO(r,m)},h?void 0:function(){m.m(),st(r,a)},u,Dt(F(r)),Nt(F(r)));m.render(a),De(r,m),p&&m.a(p)},We.passwordSignIn=function(r,a,u,h){var p=new Du(function(){uO(r,p)},function(){var m=p.M();p.m(),se("passwordRecovery",r,a,m)},u,Dt(F(r)),Nt(F(r)),h);p.render(a),De(r,p)};function lv(){return Le(this,"firebaseui-id-name")}function hv(){return Le(this,"firebaseui-id-name-error")}function Hu(r,a,u,h,p,m,y,E,R){M.call(this,A_,{email:h,Tb:r,name:p,Ta:!!u,ia:!!E},R,"passwordSignUp",{F:m,D:y}),this.w=a,this.H=u,this.B=r}l(Hu,M),Hu.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(xu(this,this.i(),this.u()),xu(this,this.u(),this.l())):xu(this,this.i(),this.l()),this.w&&xa(this,this.l(),this.w),Zt(this.i())?this.B&&!Zt(this.u())?this.u().focus():this.l().focus():this.i().focus(),M.prototype.v.call(this)},Hu.prototype.o=function(){this.H=this.w=null,M.prototype.o.call(this)},Ue(Hu.prototype,{i:ar,U:Gr,ea:Na,jb:Pa,j:Oa,u:lv,Bc:hv,Ja:function(){var r=lv.call(this),a=hv.call(this);Ca(this,r,function(){Aa(a)&&(Tt(r,!0),si(a))})},M:function(){var r=lv.call(this),a=hv.call(this),u=Zt(r);return u=!/^[\s\xa0]*$/.test(u==null?"":String(u)),Tt(r,u),u?(si(a),a=!0):(en(a,qe("Enter your account name").toString()),a=!1),a?N(Zt(r)):null},l:Uu,ba:Jd,lb:Qd,ua:xE,P:DE,Nb:zt,Mb:$t,pa:tn});function IO(r,a){var u=q1(F(r)),h=a.j(),p=null;u&&(p=a.M());var m=a.P();if(h){if(u)if(p)p=ue(p);else{a.u().focus();return}if(m){var y=fe.auth.EmailAuthProvider.credential(h,m);Se(r,a.I(be(r.Yb,r),[h,m],function(E){var R={user:E.user,credential:y,operationType:E.operationType,additionalUserInfo:E.additionalUserInfo};return u?(E=E.user.updateProfile({displayName:p}).then(function(){return cr(r,a,R)}),Se(r,E),E):cr(r,a,R)},function(E){if(!E.name||E.name!="cancel"){var R=Nu(E);switch(E=Ze(R),R.code){case"auth/email-already-in-use":return _O(r,a,h,R);case"auth/too-many-requests":E=qe("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Tt(a.l(),!1),en(a.ba(),E);break;case"auth/admin-restricted-operation":Ys(F(r))?(E=dt(a),a.m(),se("handleUnauthorizedUser",r,E,h,fe.auth.EmailAuthProvider.PROVIDER_ID)):a.a(E);break;default:R="setAccountInfo: "+w1(R),ii(R,void 0),a.a(E)}}}))}else a.l().focus()}else a.i().focus()}function _O(r,a,u,h){function p(){var y=Ze(h);Tt(a.i(),!1),en(a.U(),y),a.i().focus()}var m=Oe(r).fetchSignInMethodsForEmail(u).then(function(y){y.length?p():(y=dt(a),a.m(),se("passwordRecovery",r,y,u,!1,vI().toString()))},function(){p()});return Se(r,m),m}We.passwordSignUp=function(r,a,u,h,p,m){function y(){E.m(),st(r,a)}var E=new Hu(q1(F(r)),function(){IO(r,E)},p?void 0:y,u,h,Dt(F(r)),Nt(F(r)),m);E.render(a),De(r,E)};function dv(){return Le(this,"firebaseui-id-phone-confirmation-code")}function OE(){return Le(this,"firebaseui-id-phone-confirmation-code-error")}function ME(){return Le(this,"firebaseui-id-resend-countdown")}function Fa(r,a,u,h,p,m,y,E,R){M.call(this,oE,{phoneNumber:p},R,"phoneSignInFinish",{F:y,D:E}),this.jb=m,this.i=new Fd(1e3),this.B=m,this.P=r,this.l=a,this.H=u,this.M=h}l(Fa,M),Fa.prototype.v=function(){var r=this;this.U(this.jb),Ii(this.i,"tick",this.w,!1,this),this.i.start(),yt(this,Le(this,"firebaseui-id-change-phone-number-link"),function(){r.P()}),yt(this,this.Da(),function(){r.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),M.prototype.v.call(this)},Fa.prototype.o=function(){this.M=this.H=this.l=this.P=null,Ud(this.i),qs(this.i,"tick",this.w),this.i=null,M.prototype.o.call(this)},Fa.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Ud(this.i),qs(this.i,"tick",this.w),this.ua(),this.lb())},Ue(Fa.prototype,{u:dv,pa:OE,Ja:function(r){var a=dv.call(this),u=OE.call(this);Ca(this,a,function(){Aa(u)&&(Tt(a,!0),si(u))}),r&&Ru(this,a,function(){r()})},ba:function(){var r=N(Zt(dv.call(this))||"");return/^\d{6}$/.test(r)?r:null},Fb:ME,U:function(r){tg(ME.call(this),qe("Resend code in "+((9<r?"0:":"0:0")+r)).toString())},ua:function(){si(this.Fb())},Da:function(){return Le(this,"firebaseui-id-resend-link")},lb:function(){en(this.Da())},Nb:zt,Mb:$t,ea:tn});function EO(r,a,u,h){function p(y){a.u().focus(),Tt(a.u(),!1),en(a.pa(),y)}var m=a.ba();m?(a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",qe("Verifying...").toString()),Se(r,a.I(be(h.confirm,h),[m],function(y){a.h(),a.$("firebaseui-icon-done",qe("Verified!").toString());var E=setTimeout(function(){a.h(),a.m();var R={user:Ei(r).currentUser,credential:null,operationType:y.operationType,additionalUserInfo:y.additionalUserInfo};cr(r,a,R,!0)},1e3);Se(r,function(){a&&a.h(),clearTimeout(E)})},function(y){if(y.name&&y.name=="cancel")a.h();else{var E=Nu(y);switch(y=Ze(E),E.code){case"auth/credential-already-in-use":a.h();break;case"auth/code-expired":E=dt(a),a.h(),a.m(),se("phoneSignInStart",r,E,u,y);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":a.h(),p(y);break;default:a.h(),a.a(y)}}}))):p(qe("Wrong code. Try again.").toString())}We.phoneSignInFinish=function(r,a,u,h,p,m){var y=new Fa(function(){y.m(),se("phoneSignInStart",r,a,u)},function(){EO(r,y,u,p)},function(){y.m(),st(r,a)},function(){y.m(),se("phoneSignInStart",r,a,u)},$g(u),h,Dt(F(r)),Nt(F(r)));y.render(a),De(r,y),m&&y.a(m)};var SO=!_t&&!(Pe("Safari")&&!(Yb()||Pe("Coast")||Pe("Opera")||Pe("Edge")||Pe("Firefox")||Pe("FxiOS")||Pe("Silk")||Pe("Android")));function ef(r,a){return/-[a-z]/.test(a)?null:SO&&r.dataset?!Pe("Android")||Yb()||Pe("Firefox")||Pe("FxiOS")||Pe("Opera")||Pe("Silk")||a in r.dataset?(r=r.dataset[a],r===void 0?null:r):null:r.getAttribute("data-"+String(a).replace(/([A-Z])/g,"-$1").toLowerCase())}function TO(r,a,u){var h=this;r=su(w_,{items:r},null,this.s),I_.call(this,r,!0,!0),u&&(u=CO(r,u))&&(u.focus(),ZP(u,r)),yt(this,r,function(p){(p=(p=lI(p.target,"firebaseui-id-list-box-dialog-button"))&&ef(p,"listboxid"))&&($d.call(h),a(p))})}function CO(r,a){r=(r||document).getElementsByTagName("BUTTON");for(var u=0;u<r.length;u++)if(ef(r[u],"listboxid")===a)return r[u];return null}function Js(){return Le(this,"firebaseui-id-phone-number")}function LE(){return Le(this,"firebaseui-id-country-selector")}function fv(){return Le(this,"firebaseui-id-phone-number-error")}function AO(r,a){var u=r.a,h=pv("1-US-0",u),p=null;if(a&&pv(a,u)?p=a:h?p="1-US-0":p=0<u.length?u[0].c:null,!p)throw Error("No available default country");tf.call(this,p,r)}function pv(r,a){return r=Ws(r),!(!r||!z(a,r))}function kO(r){return r.map(function(a){return{id:a.c,Ma:"firebaseui-flag "+mv(a),label:a.name+" "+("‎+"+a.b)}})}function mv(r){return"firebaseui-flag-"+r.f}function RO(r){var a=this;TO.call(this,kO(r.a),function(u){tf.call(a,u,r,!0),a.O().focus()},this.Ba)}function tf(r,a,u){var h=Ws(r);h&&(u&&(u=N(Zt(Js.call(this))||""),a=Nd(a,u),a.length&&a[0].b!=h.b&&(u="+"+h.b+u.substr(a[0].b.length+1),Y1(Js.call(this),u))),a=Ws(this.Ba),this.Ba=r,r=Le(this,"firebaseui-id-country-selector-flag"),a&&Fi(r,mv(a)),Li(r,mv(h)),tg(Le(this,"firebaseui-id-country-selector-code"),"‎+"+h.b))}function Wu(r,a,u,h,p,m,y,E,R,$){M.call(this,sE,{Gb:a,Aa:R||null,Va:!!u,ia:!!m},$,"phoneSignInStart",{F:h,D:p}),this.H=E||null,this.M=a,this.l=r,this.w=u||null,this.pa=y||null}l(Wu,M),Wu.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||xu(this,this.O(),this.i()),xa(this,this.i(),this.l),this.O().focus(),Xd(this.O(),(this.O().value||"").length),M.prototype.v.call(this)},Wu.prototype.o=function(){this.w=this.l=null,M.prototype.o.call(this)},Ue(Wu.prototype,{Cb:rv,O:Js,B:fv,ea:function(r,a,u){var h=this,p=Js.call(this),m=LE.call(this),y=fv.call(this),E=r||bu,R=E.a;if(R.length==0)throw Error("No available countries provided.");AO.call(h,E,a),yt(this,m,function(){RO.call(h,E)}),Ca(this,p,function(){Aa(y)&&(Tt(p,!0),si(y));var $=N(Zt(p)||""),ae=Ws(this.Ba),Je=Nd(E,$);$=pv("1-US-0",R),Je.length&&Je[0].b!=ae.b&&(ae=Je[0],tf.call(h,ae.b=="1"&&$?"1-US-0":ae.c,E))}),u&&Ru(this,p,function(){u()})},U:function(r){var a=N(Zt(Js.call(this))||"");r=r||bu;var u=r.a,h=Nd(bu,a);if(h.length&&!z(u,h[0]))throw Y1(Js.call(this)),Js.call(this).focus(),en(fv.call(this),qe("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return u=Ws(this.Ba),h.length&&h[0].b!=u.b&&tf.call(this,h[0].c,r),h.length&&(a=a.substr(h[0].b.length+1)),a?new P1(this.Ba,a):null},Ja:LE,ba:function(){return Le(this,"firebaseui-recaptcha-container")},u:function(){return Le(this,"firebaseui-id-recaptcha-error")},i:zt,ua:$t,P:tn});function FE(r,a,u,h){try{var p=a.U(Qg)}catch{return}p?Eu?(a.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",qe("Verifying...").toString()),Se(r,a.I(be(r.cc,r),[$g(p),u],function(m){var y=dt(a);a.$("firebaseui-icon-done",qe("Code sent!").toString());var E=setTimeout(function(){a.h(),a.m(),se("phoneSignInFinish",r,y,p,15,m)},1e3);Se(r,function(){a&&a.h(),clearTimeout(E)})},function(m){if(a.h(),!m.name||m.name!="cancel"){grecaptcha.reset(H1),Eu=null;var y=m&&m.message||"";if(m.code)switch(m.code){case"auth/too-many-requests":y=qe("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":a.O().focus(),en(a.B(),sg().toString());return;case"auth/admin-restricted-operation":if(Ys(F(r))){m=dt(a),a.m(),se("handleUnauthorizedUser",r,m,$g(p),fe.auth.PhoneAuthProvider.PROVIDER_ID);return}y=Ze(m);break;default:y=Ze(m)}a.a(y)}}))):ba?en(a.u(),qe("Solve the reCAPTCHA").toString()):!ba&&h&&a.i().click():(a.O().focus(),en(a.B(),sg().toString()))}We.phoneSignInStart=function(r,a,u,h){var p=VP(F(r))||{};Eu=null,ba=!(p&&p.size==="invisible");var m=SE(r),y=zP(F(r)),E=m?KP(F(r)):null;y=u&&u.a||y&&y.c||null,u=u&&u.Aa||E,(E=qg(F(r)))&&N1(E),Qg=E?new R1(qg(F(r))):bu;var R=new Wu(function(ae){FE(r,R,$,!(!ae||!ae.keyCode))},ba,m?null:function(){$.clear(),R.m(),st(r,a)},Dt(F(r)),Nt(F(r)),m,Qg,y,u);R.render(a),De(r,R),h&&R.a(h),p.callback=function(ae){R.u()&&si(R.u()),Eu=ae,ba||FE(r,R,$)},p["expired-callback"]=function(){Eu=null};var $=new fe.auth.RecaptchaVerifier(ba?R.ba():R.i(),p,Ei(r).app);Se(r,R.I(be($.render,$),[],function(ae){H1=ae},function(ae){ae.name&&ae.name=="cancel"||(ae=Ze(ae),R.m(),st(r,a,void 0,ae))}))},We.prefilledEmailSignIn=function(r,a,u){var h=new Zd;h.render(a),De(r,h),Se(r,h.I(be(Oe(r).fetchSignInMethodsForEmail,Oe(r)),[u],function(p){h.m();var m=!(!Hd(r)||!BE(r));CE(r,a,p,u,void 0,m)},function(p){p=Ze(p),h.m(),se("signIn",r,a,u,p)}))};function Yu(r,a,u,h,p){M.call(this,rE,{Sb:a},p,"providerSignIn",{F:u,D:h}),this.i=r}l(Yu,M),Yu.prototype.v=function(){this.l(this.i),M.prototype.v.call(this)},Yu.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(Yu.prototype,{l:function(r){function a(y){r(y)}for(var u=this.g?Zm("firebaseui-id-idp-button",this.g||this.s.a):[],h=0;h<u.length;h++){var p=u[h],m=ef(p,"providerId");yt(this,p,ot(a,m))}}}),We.providerSignIn=function(r,a,u,h){var p=new Yu(function(m){m==fe.auth.EmailAuthProvider.PROVIDER_ID?(p.m(),av(r,a,h)):m==fe.auth.PhoneAuthProvider.PROVIDER_ID?(p.m(),se("phoneSignInStart",r,a)):m=="anonymous"?aO(r,p):Pu(r,p,m,h),Fe(r),r.l.cancel()},F1(F(r)),Dt(F(r)),Nt(F(r)));p.render(a),De(r,p),u&&p.a(u),NO(r)},We.sendEmailLinkForSignIn=function(r,a,u,h){var p=new Wd;p.render(a),De(r,p),ov(r,p,u,h,function(m){p.m(),m&&m.code=="auth/admin-restricted-operation"&&Ys(F(r))?se("handleUnauthorizedUser",r,a,u,fe.auth.EmailAuthProvider.PROVIDER_ID):(m=Ze(m),se("signIn",r,a,u,m))})};function Qu(r,a,u,h,p,m,y){M.call(this,T_,{email:u,Va:!!a,ia:!!m},y,"signIn",{F:h,D:p}),this.i=r,this.u=a}l(Qu,M),Qu.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Xd(this.l(),(this.l().value||"").length),M.prototype.v.call(this)},Qu.prototype.o=function(){this.u=this.i=null,M.prototype.o.call(this)},Ue(Qu.prototype,{l:ar,M:Gr,w:Na,H:Pa,j:Oa,U:zt,P:$t,B:tn}),We.signIn=function(r,a,u,h){var p=Hd(r),m=new Qu(function(){var y=m,E=y.j()||"";E&&TE(r,y,E)},p?null:function(){m.m(),st(r,a,u)},u,Dt(F(r)),Nt(F(r)),p);m.render(a),De(r,m),h&&m.a(h)};function Ju(r,a,u,h,p,m,y){M.call(this,$_,{kc:r,yb:u,Eb:!!h},y,"unauthorizedUser",{F:p,D:m}),this.l=a,this.i=h}l(Ju,M),Ju.prototype.v=function(){var r=this,a=Le(this,"firebaseui-id-unauthorized-user-help-link");this.i&&a&&yt(this,a,function(){r.i()}),yt(this,this.u(),function(){r.l()}),this.u().focus(),M.prototype.v.call(this)},Ju.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Ue(Ju.prototype,{u:$t}),We.handleUnauthorizedUser=function(r,a,u,h){function p(){st(r,a)}h===fe.auth.EmailAuthProvider.PROVIDER_ID?p=function(){av(r,a)}:h===fe.auth.PhoneAuthProvider.PROVIDER_ID&&(p=function(){se("phoneSignInStart",r,a)});var m=null,y=null;h===fe.auth.EmailAuthProvider.PROVIDER_ID&&V1(F(r))?(m=$P(F(r)),y=qP(F(r))):Ys(F(r))&&(m=BP(F(r)),y=jP(F(r)));var E=new Ju(u,function(){E.m(),p()},m,y,Dt(F(r)),Nt(F(r)));E.render(a),De(r,E)};function Xu(r,a,u,h,p,m){M.call(this,q_,{email:r},m,"unsupportedProvider",{F:h,D:p}),this.l=a,this.i=u}l(Xu,M),Xu.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),M.prototype.v.call(this)},Xu.prototype.o=function(){this.i=this.l=null,M.prototype.o.call(this)},Ue(Xu.prototype,{u:zt,B:$t,w:tn}),We.unsupportedProvider=function(r,a,u){var h=new Xu(u,function(){h.m(),se("passwordRecovery",r,a,u)},function(){h.m(),st(r,a,u)},Dt(F(r)),Nt(F(r)));h.render(a),De(r,h)};function Ui(r,a){this.$=!1;var u=gv(a);if(Zu[u])throw Error('An AuthUI instance already exists for the key "'+u+'"');Zu[u]=this,this.a=r,this.u=null,this.Y=!1,UE(this.a),this.h=fe.initializeApp({apiKey:r.app.options.apiKey,authDomain:r.app.options.authDomain},r.app.name+"-firebaseui-temp").auth(),(r=r.emulatorConfig)&&(u=r.port,this.h.useEmulator(r.protocol+"://"+r.host+(u===null?"":":"+u),r.options)),UE(this.h),this.h.setPersistence&&this.h.setPersistence(fe.auth.Auth.Persistence.SESSION),this.oa=a,this.ca=new UP,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Ig.Xa(),this.j=this.C=null,this.da=this.A=!1}function UE(r){r&&r.INTERNAL&&r.INTERNAL.logFramework&&r.INTERNAL.logFramework("FirebaseUI-web")}var Zu={};function gv(r){return r||"[DEFAULT]"}function VE(r){return Fe(r),r.i||(r.i=ur(r,function(a){return a&&!Oi(ve(r))?St(Ei(r).getRedirectResult().then(function(u){return u},function(u){if(u&&u.code=="auth/email-already-in-use"&&u.email&&u.credential)throw u;return Wr(r,u)})):St(Oe(r).getRedirectResult().then(function(u){return Pd(F(r))&&!u.user&&r.j&&!r.j.isAnonymous?Ei(r).getRedirectResult():u}))})),r.i}function De(r,a){Fe(r),r.g=a}var Ua=null;function Oe(r){return Fe(r),r.h}function Ei(r){return Fe(r),r.a}function ve(r){return Fe(r),r.oa}function BE(r){return Fe(r),r.O?r.O.emailHint:void 0}t=Ui.prototype,t.nb=function(){return Fe(this),!!Fg(ve(this))||jE(or())};function jE(r){return r=new Fs(r),(r.a.a.get(Vt.ub)||null)==="signIn"&&!!r.a.a.get(Vt.$a)}t.start=function(r,a){$E(this,r,a)};function $E(r,a,u,h){Fe(r),typeof r.a.languageCode<"u"&&(r.u=r.a.languageCode);var p="en".replace(/_/g,"-");r.a.languageCode=p,r.h.languageCode=p,r.Y=!0,typeof r.a.tenantId<"u"&&(r.h.tenantId=r.a.tenantId),r.ib(u),r.O=h||null;var m=v.document;r.C?r.C.then(function(){m.readyState=="complete"?nf(r,a):lu(window,"load",function(){nf(r,a)})}):m.readyState=="complete"?nf(r,a):lu(window,"load",function(){nf(r,a)})}function nf(r,a){var u=hd(a,"Could not find the FirebaseUI widget element on the page.");if(u.setAttribute("lang","en".replace(/_/g,"-")),Ua){var h=Ua;Fe(h),Oi(ve(h))&&Kr("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),Ua.reset()}if(Ua=r,r.T=u,DO(r,u),Dd(new Pg)&&Dd(new Og)){a=hd(a,"Could not find the FirebaseUI widget element on the page."),u=or(),h=Bg(F(r).a,"queryParameterForSignInSuccessUrl"),u=(u=Yh(u,h))?Fr(Jh(u)).toString():null;e:{h=or();var p=$1(F(r));h=Yh(h,p)||"";for(m in Yg)if(Yg[m].toLowerCase()==h.toLowerCase()){var m=Yg[m];break e}m="callback"}switch(m){case"callback":u&&(m=ve(r),ga(yu,u,m)),r.nb()?se("callback",r,a):st(r,a,BE(r));break;case"resetPassword":se("passwordReset",r,a,Ou(),cv());break;case"recoverEmail":se("emailChangeRevocation",r,a,Ou());break;case"revertSecondFactorAddition":se("revertSecondFactorAddition",r,a,Ou());break;case"verifyEmail":se("emailVerification",r,a,Ou(),cv());break;case"verifyAndChangeEmail":se("verifyAndChangeEmail",r,a,Ou(),cv());break;case"signIn":se("emailLinkSignInCallback",r,a,or()),GE();break;case"select":u&&(m=ve(r),ga(yu,u,m)),st(r,a);break;default:throw Error("Unhandled widget operation.")}a=F(r),(a=_u(a).uiShown||null)&&a()}else a=hd(a,"Could not find the FirebaseUI widget element on the page."),m=new _E(qe("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),m.render(a),De(r,m);a=r.g&&r.g.Ga=="blank"&&Kg(F(r)),Fg(ve(r))&&!a&&(a=Fg(ve(r)),zE(r,a.a),Bn(Hs,ve(r)))}function ur(r,a){if(r.A)return a(qE(r));if(Se(r,function(){r.A=!1}),Pd(F(r))){var u=new jt(function(h){Se(r,r.a.onAuthStateChanged(function(p){r.j=p,r.A||(r.A=!0,h(a(qE(r))))}))});return Se(r,u),u}return r.A=!0,a(null)}function qE(r){return Fe(r),Pd(F(r))&&r.j&&r.j.isAnonymous?r.j:null}function Se(r,a){if(Fe(r),a){r.s.push(a);var u=function(){Re(r.s,function(h){return h==a})};typeof a!="function"&&a.then(u,u)}}t.Db=function(){Fe(this),this.Z=!0};function xO(r){Fe(r);var a;return(a=r.Z)||(r=F(r),r=j1(r,fe.auth.GoogleAuthProvider.PROVIDER_ID),a=!(!r||r.prompt!=="select_account")),a}function KE(r){typeof r.a.languageCode<"u"&&r.Y&&(r.Y=!1,r.a.languageCode=r.u)}function zE(r,a){r.a.tenantId=a,r.h.tenantId=a}t.reset=function(){Fe(this);var r=this;this.T&&this.T.removeAttribute("lang"),this.J&&hP(this.J),KE(this),this.O=null,GE(),Bn(Hs,ve(this)),Fe(this),this.l.cancel(),this.i=St({user:null,credential:null}),Ua==this&&(Ua=null),this.T=null;for(var a=0;a<this.s.length;a++)typeof this.s[a]=="function"?this.s[a]():this.s[a].cancel&&this.s[a].cancel();this.s=[],Mi(ve(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Hr(this).then(function(){r.C=null},function(){r.C=null}))};function DO(r,a){r.L=null,r.J=new ud(a),r.J.register(),Ii(r.J,"pageEnter",function(u){if(u=u&&u.pageId,r.L!=u){var h=F(r);(h=_u(h).uiChanged||null)&&h(r.L,u),r.L=u}})}t.ib=function(r){Fe(this);var a=this.ca,u;for(u in r)try{Vg(a.a,u,r[u])}catch{ii('Invalid config: "'+u+'"',void 0)}NN&&Vg(a.a,"popupMode",!1),qg(a),!this.da&&zg(F(this))&&(Kr("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function F(r){return Fe(r),r.ca}t.Wb=function(){Fe(this);var r=F(this),a=Bg(r.a,"widgetUrl");r=$1(r);for(var u=a.search(jb),h=0,p,m=[];0<=(p=Bb(a,h,r,u));)m.push(a.substring(h,p)),h=Math.min(a.indexOf("&",p)+1||u,u);m.push(a.substr(h)),a=m.join("").replace(IN,"$1"),u="="+encodeURIComponent("select"),(r+=u)?(u=a.indexOf("#"),0>u&&(u=a.length),h=a.indexOf("?"),0>h||h>u?(h=u,p=""):p=a.substring(h+1,u),a=[a.substr(0,h),p,a.substr(u)],u=a[1],a[1]=r?u?u+"&"+r:r:u,u=a[0]+(a[1]?"?"+a[1]:"")+a[2]):u=a,F(this).a.get("popupMode")?(r=(window.screen.availHeight-600)/2,a=(window.screen.availWidth-500)/2,u=u||"about:blank",r={width:500,height:600,top:0<r?r:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},r.target=r.target||u.target||"google_popup",r.width=r.width||690,r.height=r.height||500,(r=qI(u,r))&&r.focus()):sa(window.location,u)};function Fe(r){if(r.$)throw Error("AuthUI instance is deleted!")}t.Wa=function(){var r=this;return Fe(this),this.h.app.delete().then(function(){var a=gv(ve(r));delete Zu[a],r.reset(),r.$=!0})};function NO(r){Fe(r);try{YI(r.l,U1(F(r)),xO(r)).then(function(a){return r.g?cO(r,r.g,a):!1})}catch{}}t.Ib=function(r,a){Fe(this);var u=this,h=yP();if(!wa(F(this)))return oa(Error("Email link sign-in should be enabled to trigger email sending."));var p=HP(F(this)),m=new Fs(p.url);return kN(m,h),a&&a.a&&(FP(h,a,ve(this)),Gb(m,a.a.providerId)),RN(m,GP(F(this))),ur(this,function(y){return y&&((y=y.uid)?m.a.a.set(Vt.Pa,y):Ls(m.a.a,Vt.Pa)),p.url=m.toString(),Oe(u).sendSignInLinkToEmail(r,p)}).then(function(){var y=ve(u),E={};E.email=r,ga(pa,g1(h,JSON.stringify(E)),y)},function(y){throw Bn(wu,ve(u)),Bn(pa,ve(u)),y})};function PO(r,a){var u=zb(new Fs(a));return u?(a=new jt(function(h,p){var m=Ei(r).onAuthStateChanged(function(y){m(),y&&y.isAnonymous&&y.uid===u?h(y):y&&y.isAnonymous&&y.uid!==u?p(Error("anonymous-user-mismatch")):p(Error("anonymous-user-not-found"))});Se(r,m)}),Se(r,a),a):St(null)}function OO(r,a,u,h,p){Fe(r);var m=p||null,y=fe.auth.EmailAuthProvider.credentialWithLink(u,h);return u=m?Oe(r).signInWithEmailLink(u,h).then(function(E){return E.user.linkWithCredential(m)}).then(function(){return Hr(r)}).then(function(){return Wr(r,{code:"auth/email-already-in-use"},m)}):Oe(r).fetchSignInMethodsForEmail(u).then(function(E){return E.length?Wr(r,{code:"auth/email-already-in-use"},y):a.linkWithCredential(y)}),Se(r,u),u}function MO(r,a,u,h){Fe(r);var p=h||null,m;return a=Oe(r).signInWithEmailLink(a,u).then(function(y){if(m={user:y.user,credential:null,operationType:y.operationType,additionalUserInfo:y.additionalUserInfo},p)return y.user.linkWithCredential(p).then(function(E){m={user:E.user,credential:p,operationType:m.operationType,additionalUserInfo:E.additionalUserInfo}})}).then(function(){Hr(r)}).then(function(){return Ei(r).updateCurrentUser(m.user)}).then(function(){return m.user=Ei(r).currentUser,m}),Se(r,a),a}function GE(){var r=or();if(jE(r)){r=new Fs(r);for(var a in Vt)Vt.hasOwnProperty(a)&&Ls(r.a.a,Vt[a]);a={state:"signIn",mode:"emailLink",operation:"clear"};var u=v.document.title;v.history&&v.history.replaceState&&v.history.replaceState(a,u,r.toString())}}t.bc=function(r,a){Fe(this);var u=this;return Oe(this).signInWithEmailAndPassword(r,a).then(function(h){return ur(u,function(p){return p?Hr(u).then(function(){return Wr(u,{code:"auth/email-already-in-use"},fe.auth.EmailAuthProvider.credential(r,a))}):h})})},t.Yb=function(r,a){Fe(this);var u=this;return ur(this,function(h){if(h){var p=fe.auth.EmailAuthProvider.credential(r,a);return h.linkWithCredential(p)}return Oe(u).createUserWithEmailAndPassword(r,a)})},t.ac=function(r){Fe(this);var a=this;return ur(this,function(u){return u?u.linkWithCredential(r).then(function(h){return h},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Wr(a,h,r)}):Oe(a).signInWithCredential(r)})};function LO(r,a){return Fe(r),ur(r,function(u){return u&&!Oi(ve(r))?u.linkWithPopup(a).then(function(h){return h},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Wr(r,h)}):Oe(r).signInWithPopup(a)})}t.dc=function(r){Fe(this);var a=this,u=this.i;return this.i=null,ur(this,function(h){return h&&!Oi(ve(a))?h.linkWithRedirect(r):Oe(a).signInWithRedirect(r)}).then(function(){},function(h){throw a.i=u,h})},t.cc=function(r,a){Fe(this);var u=this;return ur(this,function(h){return h?h.linkWithPhoneNumber(r,a).then(function(p){return new Eg(p,function(m){if(m.code=="auth/credential-already-in-use")return Wr(u,m);throw m})}):Ei(u).signInWithPhoneNumber(r,a).then(function(p){return new Eg(p)})})},t.$b=function(){return Fe(this),Ei(this).signInAnonymously()};function FO(r,a){return Fe(r),ur(r,function(u){if(r.j&&!r.j.isAnonymous&&Pd(F(r))&&!Oe(r).currentUser)return Hr(r).then(function(){return a.credential.providerId=="password"&&(a.credential=null),a});if(u)return Hr(r).then(function(){return u.linkWithCredential(a.credential)}).then(function(h){return a.user=h.user,a.credential=h.credential,a.operationType=h.operationType,a.additionalUserInfo=h.additionalUserInfo,a},function(h){if(h&&h.code=="auth/email-already-in-use"&&h.email&&h.credential)throw h;return Wr(r,h,a.credential)});if(!a.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Hr(r).then(function(){return Ei(r).updateCurrentUser(a.user)}).then(function(){return a.user=Ei(r).currentUser,a.operationType="signIn",a.credential&&a.credential.providerId&&a.credential.providerId=="password"&&(a.credential=null),a})})}t.Xb=function(r,a){return Fe(this),Oe(this).signInWithEmailAndPassword(r,a)};function Hr(r){return Fe(r),Oe(r).signOut()}function Wr(r,a,u){if(Fe(r),a&&a.code&&(a.code=="auth/email-already-in-use"||a.code=="auth/credential-already-in-use")){var h=G1(F(r));return St().then(function(){return h(new ou("anonymous-upgrade-merge-conflict",null,u||a.credential))}).then(function(){throw r.g&&(r.g.m(),r.g=null),a})}return oa(a)}function el(r,a,u,h){M.call(this,uE,void 0,h,"providerMatchByEmail",{F:a,D:u}),this.i=r}l(el,M),el.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Xd(this.l(),(this.l().value||"").length),M.prototype.v.call(this)},el.prototype.o=function(){this.i=null,M.prototype.o.call(this)},Ue(el.prototype,{l:ar,H:Gr,u:Na,B:Pa,j:Oa,M:zt,w:tn});function rf(r,a,u,h,p){M.call(this,cE,{ec:a},p,"selectTenant",{F:u,D:h}),this.i=r}l(rf,M),rf.prototype.v=function(){UO(this,this.i),M.prototype.v.call(this)},rf.prototype.o=function(){this.i=null,M.prototype.o.call(this)};function UO(r,a){function u(E){a(E)}for(var h=r.g?Zm("firebaseui-id-tenant-selection-button",r.g||r.s.a):[],p=0;p<h.length;p++){var m=h[p],y=ef(m,"tenantId");yt(r,m,ot(u,y))}}function vv(r){M.call(this,D_,void 0,r,"spinner")}l(vv,M);function VO(r){this.a=new Ug,xt(this.a,"authDomain"),xt(this.a,"displayMode",of),xt(this.a,"tenants"),xt(this.a,"callbacks"),xt(this.a,"tosUrl"),xt(this.a,"privacyPolicyUrl");for(var a in r)if(r.hasOwnProperty(a))try{Vg(this.a,a,r[a])}catch{ii('Invalid config: "'+a+'"',void 0)}}function BO(r){r=r.a.get("displayMode");for(var a in wv)if(wv[a]===r)return wv[a];return of}function sf(r){return r.a.get("callbacks")||{}}function HE(r){var a=r.a.get("tosUrl")||null;if(r=r.a.get("privacyPolicyUrl")||null,a&&!r&&Kr("Privacy Policy URL is missing, the link will not be displayed."),a&&r){if(typeof a=="function")return a;if(typeof a=="string")return function(){ca(a)}}return null}function WE(r){var a=r.a.get("tosUrl")||null,u=r.a.get("privacyPolicyUrl")||null;if(u&&!a&&Kr("Terms of Service URL is missing, the link will not be displayed."),a&&u){if(typeof u=="function")return u;if(typeof u=="string")return function(){ca(u)}}return null}function yv(r,a){if(r=r.a.get("tenants"),!r||!r.hasOwnProperty(a)&&!r.hasOwnProperty(af))throw Error("Invalid tenant configuration!")}function YE(r,a,u){if(r=r.a.get("tenants"),!r)throw Error("Invalid tenant configuration!");var h=[];if(r=r[a]||r[af],!r)return ii("Invalid tenant configuration: "+(a+" is not configured!"),void 0),h;if(a=r.signInOptions,!a)throw Error("Invalid tenant configuration: signInOptions are invalid!");return a.forEach(function(p){if(typeof p=="string")h.push(p);else if(typeof p.provider=="string"){var m=p.hd;m&&u?(m instanceof RegExp?m:new RegExp("@"+m.replace(".","\\.")+"$")).test(u)&&h.push(p.provider):h.push(p.provider)}else p="Invalid tenant configuration: signInOption "+(JSON.stringify(p)+" is invalid!"),ii(p,void 0)}),h}function jO(r,a,u){return r=$O(r,a),(a=r.signInOptions)&&u&&(a=a.filter(function(h){return typeof h=="string"?u.includes(h):u.includes(h.provider)}),r.signInOptions=a),r}function $O(r,a){var u=qO,h=h===void 0?{}:h;return yv(r,a),r=r.a.get("tenants"),wP(r[a]||r[af],u,h)}var qO=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],of="optionFirst",wv={pc:of,oc:"identifierFirst"},af="*";function Si(r,a){var u=this;this.s=hd(r),this.a={},Object.keys(a).forEach(function(h){u.a[h]=new VO(a[h])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(h){this.ob=h||null},enumerable:!1})}t=Si.prototype,t.Ub=function(r,a){var u=this;Yr(this);var h=r.apiKey;return new jt(function(p,m){if(u.a.hasOwnProperty(h)){var y=sf(u.a[h]).selectTenantUiHidden||null;if(BO(u.a[h])===of){var E=[];a.forEach(function(ae){ae=ae||"_";var Je=u.a[h].a.get("tenants");if(!Je)throw Error("Invalid tenant configuration!");(Je=Je[ae]||Je[af])?ae={tenantId:ae!=="_"?ae:null,V:Je.fullLabel||null,displayName:Je.displayName,za:Je.iconUrl,ta:Je.buttonColor}:(ii("Invalid tenant configuration: "+(ae+" is not configured!"),void 0),ae=null),ae&&E.push(ae)});var R=function(ae){ae={tenantId:ae,providerIds:YE(u.a[h],ae||"_")},p(ae)};if(E.length===1){R(E[0].tenantId);return}u.g=new rf(function(ae){Yr(u),y&&y(),R(ae)},E,HE(u.a[h]),WE(u.a[h]))}else u.g=new el(function(){var ae=u.g.j();if(ae){for(var Je=0;Je<a.length;Je++){var Ti=YE(u.a[h],a[Je]||"_",ae);if(Ti.length!==0){ae={tenantId:a[Je],providerIds:Ti,email:ae},Yr(u),y&&y(),p(ae);return}}u.g.a(yI({code:"no-matching-tenant-for-email"}).toString())}},HE(u.a[h]),WE(u.a[h]));u.g.render(u.s),(m=sf(u.a[h]).selectTenantUiShown||null)&&m()}else{var $=Error("Invalid project configuration: API key is invalid!");$.code="invalid-configuration",u.pb($),m($)}})},t.Pb=function(r,a){if(!this.a.hasOwnProperty(r))throw Error("Invalid project configuration: API key is invalid!");var u=a||void 0;yv(this.a[r],a||"_");try{this.i=fe.app(u).auth()}catch{var h=this.a[r].a.get("authDomain");if(!h)throw Error("Invalid project configuration: authDomain is required!");r=fe.initializeApp({apiKey:r,authDomain:h},u),r.auth().tenantId=a,this.i=r.auth()}return this.i},t.Zb=function(r,a){var u=this;return new jt(function(h,p){function m(Je,Ti){u.j=new Ui(r),$E(u.j,u.s,Je,Ti)}var y=r.app.options.apiKey;u.a.hasOwnProperty(y)||p(Error("Invalid project configuration: API key is invalid!"));var E=jO(u.a[y],r.tenantId||"_",a&&a.providerIds);Yr(u),p={signInSuccessWithAuthResult:function(Je){return h(Je),!1}};var R=sf(u.a[y]).signInUiShown||null,$=!1;p.uiChanged=function(Je,Ti){Je===null&&Ti==="callback"?((Je=eg("firebaseui-id-page-callback",u.s))&&si(Je),u.h=new vv,u.h.render(u.s)):$||Je===null&&Ti==="spinner"||Ti==="blank"||(u.h&&(u.h.m(),u.h=null),$=!0,R&&R(r.tenantId))},E.callbacks=p,E.credentialHelper="none";var ae;a&&a.email&&(ae={emailHint:a.email}),u.j?u.j.Wa().then(function(){m(E,ae)}):m(E,ae)})},t.reset=function(){var r=this;return St().then(function(){r.j&&r.j.Wa()}).then(function(){r.j=null,Yr(r)})},t.Vb=function(){var r=this;this.h||this.A||(this.A=window.setTimeout(function(){Yr(r),r.h=new vv,r.g=r.h,r.h.render(r.s),r.A=null},500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},t.Bb=function(){return Yr(this),this.g=new vE,this.g.render(this.s),St()};function Yr(r){r.j&&r.j.reset(),r.mb(),r.g&&r.g.m()}t.pb=function(r){var a=this,u=yI({code:r.code}).toString()||r.message;Yr(this);var h;r.retry&&typeof r.retry=="function"&&(h=function(){a.reset(),r.retry()}),this.g=new IE(u,h),this.g.render(this.s)},t.Rb=function(r){var a=this;return St().then(function(){var u=a.i&&a.i.app.options.apiKey;if(!a.a.hasOwnProperty(u))throw Error("Invalid project configuration: API key is invalid!");if(yv(a.a[u],r.tenantId||"_"),!a.i.currentUser||a.i.currentUser.uid!==r.uid)throw Error("The user being processed does not match the signed in user!");return(u=sf(a.a[u]).beforeSignInSuccess||null)?u(r):r}).then(function(u){if(u.uid!==r.uid)throw Error("User with mismatching UID returned.");return u})},Ee("firebaseui.auth.FirebaseUiHandler",Si),Ee("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Si.prototype.Ub),Ee("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Si.prototype.Pb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Si.prototype.Zb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.reset",Si.prototype.reset),Ee("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Si.prototype.Vb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Si.prototype.mb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Si.prototype.Bb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Si.prototype.pb),Ee("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Si.prototype.Rb),Ee("firebaseui.auth.AuthUI",Ui),Ee("firebaseui.auth.AuthUI.getInstance",function(r){return r=gv(r),Zu[r]?Zu[r]:null}),Ee("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Ui.prototype.Db),Ee("firebaseui.auth.AuthUI.prototype.start",Ui.prototype.start),Ee("firebaseui.auth.AuthUI.prototype.setConfig",Ui.prototype.ib),Ee("firebaseui.auth.AuthUI.prototype.signIn",Ui.prototype.Wb),Ee("firebaseui.auth.AuthUI.prototype.reset",Ui.prototype.reset),Ee("firebaseui.auth.AuthUI.prototype.delete",Ui.prototype.Wa),Ee("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Ui.prototype.nb),Ee("firebaseui.auth.AuthUIError",ou),Ee("firebaseui.auth.AuthUIError.prototype.toJSON",ou.prototype.toJSON),Ee("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",Gg),Ee("firebaseui.auth.CredentialHelper.NONE",Md),Ee("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),jt.prototype.catch=jt.prototype.Ca,jt.prototype.finally=jt.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}).apply(typeof global<"u"?global:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=V9);var B9=firebaseui.auth;const j9={apiKey:"AIzaSyASUUhv96yP8JuJ1YcFY-yl9w8AwqtoBc8",authDomain:"potion-14662.firebaseapp.com",projectId:"potion-14662",storageBucket:"potion-14662.appspot.com",messagingSenderId:"1063584598591",appId:"1:1063584598591:web:953af8a3b6f835bb2e868a",measurementId:"G-01KL92CGGC"},Vm=$p(j9);k8(Vm);new B9.AuthUI(Cb(Vm));const _n=Cb(Vm);new gi;const dr=mj(Vm);T6(_n,Kh);const xC=Cb(),$9=new gi,qf=JA({id:"user",state:()=>({user:null}),actions:{setUser(t){this.user=t},async signInWithGoogle(){try{const e=(await p2(xC,$9)).user;console.log("User signed in:",e),this.user=e}catch(t){console.error("Error signing in:",t)}},async signOut(){try{await R6(xC),this.user=null}catch(t){console.error("Error signing out:",t)}}}});let Cf;const q9=new Uint8Array(16);function K9(){if(!Cf&&(Cf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cf(q9)}const fn=[];for(let t=0;t<256;++t)fn.push((t+256).toString(16).slice(1));function z9(t,e=0){return(fn[t[e+0]]+fn[t[e+1]]+fn[t[e+2]]+fn[t[e+3]]+"-"+fn[t[e+4]]+fn[t[e+5]]+"-"+fn[t[e+6]]+fn[t[e+7]]+"-"+fn[t[e+8]]+fn[t[e+9]]+"-"+fn[t[e+10]]+fn[t[e+11]]+fn[t[e+12]]+fn[t[e+13]]+fn[t[e+14]]+fn[t[e+15]]).toLowerCase()}const G9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DC={randomUUID:G9};function H9(t,e,n){if(DC.randomUUID&&!e&&!t)return DC.randomUUID();t=t||{};const i=t.random||(t.rng||K9)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=i[s];return e}return z9(i)}const Bm=JA("pages",{state:()=>({pages:[],loading:!1,title:"",content:"",isSidebarVisible:!0,rotate:!1}),actions:{async fetchUserData(){if(_n.currentUser){this.loading=!0;try{const t=X0(dr,"users",_n.currentUser.uid,"pages"),e=await TD(t);this.pages=e.docs.map(n=>{const{id:i,title:s,content:o}=n.data();return{id:i,title:s,content:o}})}catch(t){console.error("Error fetching user data:",t)}finally{this.loading=!1}}},getPageById(t){return this.pages.find(e=>e.id===t)},async addPage(){if(!_n.currentUser){alert("Sign in to create notes");return}const t={id:H9(),title:`Page ${this.pages.length+1}`,content:""};return this.pages.push(t),await yp(Yi(dr,"users",_n.currentUser.uid,"pages",t.id),t),t.id},async deletePage(t){if(!_n.currentUser)return;const e=this.pages[t].id;this.pages.splice(t,1),await cb(Yi(dr,"users",_n.currentUser.uid,"pages",e))},async clearAll(){if(!_n.currentUser)return;const t=kD(dr);for(const e of this.pages)t.delete(Yi(dr,"users",_n.currentUser.uid,"pages",e.id));await t.commit(),this.pages=[]},async saveData(t,e,n){if(!_n.currentUser)return;this.loading=!0;const i=Yi(dr,"users",_n.currentUser.uid,"pages",t);try{await yp(i,{title:e,content:n})}catch(s){console.error("Error while saving data to Firestore:",s)}finally{this.loading=!1}}}});Lp(()=>{Bm().fetchUserData()});const Ps=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},W9={},Y9={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Q9=Ye("path",{fill:"currentColor",d:"m16.9 17.3l-4.6-4.6q-.15-.15-.213-.325T12.026 12q0-.2.063-.375t.212-.325l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L14.425 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Zm-6.6 0l-4.6-4.6q-.15-.15-.213-.325T5.425 12q0-.2.063-.375T5.7 11.3l4.6-4.6q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7L7.825 12l3.875 3.9q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275Z"},null,-1),J9=[Q9];function X9(t,e){return On(),Gn("svg",Y9,J9)}const Z9=Ps(W9,[["render",X9]]),eK={},tK={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},nK=Ye("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[Ye("circle",{cx:"12",cy:"12",r:"10"}),Ye("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),iK=[nK];function rK(t,e){return On(),Gn("svg",tK,iK)}const sK=Ps(eK,[["render",rK]]),oK={},aK={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},cK=Ye("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[Ye("circle",{cx:"12",cy:"12",r:"10"}),Ye("path",{"stroke-linecap":"round",d:"M15 12h-3m0 0H9m3 0V9m0 3v3"})],-1),uK=[cK];function lK(t,e){return On(),Gn("svg",aK,uK)}const hK=Ps(oK,[["render",lK]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Wa=typeof window<"u";function dK(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const et=Object.assign;function Zv(t,e){const n={};for(const i in e){const s=e[i];n[i]=Pi(s)?s.map(t):t(s)}return n}const Vl=()=>{},Pi=Array.isArray,fK=/\/$/,pK=t=>t.replace(fK,"");function ey(t,e,n="/"){let i,s={},o="",c="";const l=e.indexOf("#");let d=e.indexOf("?");return l<d&&l>=0&&(d=-1),d>-1&&(i=e.slice(0,d),o=e.slice(d+1,l>-1?l:e.length),s=t(o)),l>-1&&(i=i||e.slice(0,l),c=e.slice(l,e.length)),i=yK(i??e,n),{fullPath:i+(o&&"?")+o+c,path:i,query:s,hash:c}}function mK(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function NC(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function gK(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Rc(e.matched[i],n.matched[s])&&rN(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Rc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rN(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!vK(t[n],e[n]))return!1;return!0}function vK(t,e){return Pi(t)?PC(t,e):Pi(e)?PC(e,t):t===e}function PC(t,e){return Pi(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function yK(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let s=n.length-1,o,c;for(o=0;o<i.length;o++)if(c=i[o],c!==".")if(c==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var yh;(function(t){t.pop="pop",t.push="push"})(yh||(yh={}));var Bl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Bl||(Bl={}));function wK(t){if(!t)if(Wa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),pK(t)}const bK=/^[^#]+#/;function IK(t,e){return t.replace(bK,"#")+e}function _K(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const jm=()=>({left:window.pageXOffset,top:window.pageYOffset});function EK(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=_K(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function OC(t,e){return(history.state?history.state.position-e:-1)+t}const fw=new Map;function SK(t,e){fw.set(t,e)}function TK(t){const e=fw.get(t);return fw.delete(t),e}let CK=()=>location.protocol+"//"+location.host;function sN(t,e){const{pathname:n,search:i,hash:s}=e,o=t.indexOf("#");if(o>-1){let l=s.includes(t.slice(o))?t.slice(o).length:1,d=s.slice(l);return d[0]!=="/"&&(d="/"+d),NC(d,"")}return NC(n,t)+i+s}function AK(t,e,n,i){let s=[],o=[],c=null;const l=({state:w})=>{const I=sN(t,location),A=n.value,b=e.value;let S=0;if(w){if(n.value=I,e.value=w,c&&c===A){c=null;return}S=b?w.position-b.position:0}else i(I);s.forEach(C=>{C(n.value,A,{delta:S,type:yh.pop,direction:S?S>0?Bl.forward:Bl.back:Bl.unknown})})};function d(){c=n.value}function f(w){s.push(w);const I=()=>{const A=s.indexOf(w);A>-1&&s.splice(A,1)};return o.push(I),I}function g(){const{history:w}=window;w.state&&w.replaceState(et({},w.state,{scroll:jm()}),"")}function v(){for(const w of o)w();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",g),{pauseListeners:d,listen:f,destroy:v}}function MC(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?jm():null}}function kK(t){const{history:e,location:n}=window,i={value:sN(t,n)},s={value:e.state};s.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(d,f,g){const v=t.indexOf("#"),w=v>-1?(n.host&&document.querySelector("base")?t:t.slice(v))+d:CK()+t+d;try{e[g?"replaceState":"pushState"](f,"",w),s.value=f}catch(I){console.error(I),n[g?"replace":"assign"](w)}}function c(d,f){const g=et({},e.state,MC(s.value.back,d,s.value.forward,!0),f,{position:s.value.position});o(d,g,!0),i.value=d}function l(d,f){const g=et({},s.value,e.state,{forward:d,scroll:jm()});o(g.current,g,!0);const v=et({},MC(i.value,d,null),{position:g.position+1},f);o(d,v,!1),i.value=d}return{location:i,state:s,push:l,replace:c}}function RK(t){t=wK(t);const e=kK(t),n=AK(t,e.state,e.location,e.replace);function i(o,c=!0){c||n.pauseListeners(),history.go(o)}const s=et({location:"",base:t,go:i,createHref:IK.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function xK(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),RK(t)}function DK(t){return typeof t=="string"||t&&typeof t=="object"}function oN(t){return typeof t=="string"||typeof t=="symbol"}const ts={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},aN=Symbol("");var LC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(LC||(LC={}));function xc(t,e){return et(new Error,{type:t,[aN]:!0},e)}function lr(t,e){return t instanceof Error&&aN in t&&(e==null||!!(t.type&e))}const FC="[^/]+?",NK={sensitive:!1,strict:!1,start:!0,end:!0},PK=/[.+*?^${}()[\]/\\]/g;function OK(t,e){const n=et({},NK,e),i=[];let s=n.start?"^":"";const o=[];for(const f of t){const g=f.length?[]:[90];n.strict&&!f.length&&(s+="/");for(let v=0;v<f.length;v++){const w=f[v];let I=40+(n.sensitive?.25:0);if(w.type===0)v||(s+="/"),s+=w.value.replace(PK,"\\$&"),I+=40;else if(w.type===1){const{value:A,repeatable:b,optional:S,regexp:C}=w;o.push({name:A,repeatable:b,optional:S});const P=C||FC;if(P!==FC){I+=10;try{new RegExp(`(${P})`)}catch(Q){throw new Error(`Invalid custom RegExp for param "${A}" (${P}): `+Q.message)}}let O=b?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(O=S&&f.length<2?`(?:/${O})`:"/"+O),S&&(O+="?"),s+=O,I+=20,S&&(I+=-8),b&&(I+=-20),P===".*"&&(I+=-50)}g.push(I)}i.push(g)}if(n.strict&&n.end){const f=i.length-1;i[f][i[f].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function l(f){const g=f.match(c),v={};if(!g)return null;for(let w=1;w<g.length;w++){const I=g[w]||"",A=o[w-1];v[A.name]=I&&A.repeatable?I.split("/"):I}return v}function d(f){let g="",v=!1;for(const w of t){(!v||!g.endsWith("/"))&&(g+="/"),v=!1;for(const I of w)if(I.type===0)g+=I.value;else if(I.type===1){const{value:A,repeatable:b,optional:S}=I,C=A in f?f[A]:"";if(Pi(C)&&!b)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const P=Pi(C)?C.join("/"):C;if(!P)if(S)w.length<2&&(g.endsWith("/")?g=g.slice(0,-1):v=!0);else throw new Error(`Missing required param "${A}"`);g+=P}}return g||"/"}return{re:c,score:i,keys:o,parse:l,stringify:d}}function MK(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function LK(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const o=MK(i[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-i.length)===1){if(UC(i))return 1;if(UC(s))return-1}return s.length-i.length}function UC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const FK={type:0,value:""},UK=/[a-zA-Z0-9_]/;function VK(t){if(!t)return[[]];if(t==="/")return[[FK]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(I){throw new Error(`ERR (${n})/"${f}": ${I}`)}let n=0,i=n;const s=[];let o;function c(){o&&s.push(o),o=[]}let l=0,d,f="",g="";function v(){f&&(n===0?o.push({type:0,value:f}):n===1||n===2||n===3?(o.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:g,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),f="")}function w(){f+=d}for(;l<t.length;){if(d=t[l++],d==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:d==="/"?(f&&v(),c()):d===":"?(v(),n=1):w();break;case 4:w(),n=i;break;case 1:d==="("?n=2:UK.test(d)?w():(v(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&l--);break;case 2:d===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+d:n=3:g+=d;break;case 3:v(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&l--,g="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${f}"`),v(),c(),s}function BK(t,e,n){const i=OK(VK(t.path),n),s=et(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function jK(t,e){const n=[],i=new Map;e=jC({strict:!1,end:!0,sensitive:!1},e);function s(g){return i.get(g)}function o(g,v,w){const I=!w,A=$K(g);A.aliasOf=w&&w.record;const b=jC(e,g),S=[A];if("alias"in g){const O=typeof g.alias=="string"?[g.alias]:g.alias;for(const Q of O)S.push(et({},A,{components:w?w.record.components:A.components,path:Q,aliasOf:w?w.record:A}))}let C,P;for(const O of S){const{path:Q}=O;if(v&&Q[0]!=="/"){const Y=v.record.path,ie=Y[Y.length-1]==="/"?"":"/";O.path=v.record.path+(Q&&ie+Q)}if(C=BK(O,v,b),w?w.alias.push(C):(P=P||C,P!==C&&P.alias.push(C),I&&g.name&&!BC(C)&&c(g.name)),A.children){const Y=A.children;for(let ie=0;ie<Y.length;ie++)o(Y[ie],C,w&&w.children[ie])}w=w||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&d(C)}return P?()=>{c(P)}:Vl}function c(g){if(oN(g)){const v=i.get(g);v&&(i.delete(g),n.splice(n.indexOf(v),1),v.children.forEach(c),v.alias.forEach(c))}else{const v=n.indexOf(g);v>-1&&(n.splice(v,1),g.record.name&&i.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function l(){return n}function d(g){let v=0;for(;v<n.length&&LK(g,n[v])>=0&&(g.record.path!==n[v].record.path||!cN(g,n[v]));)v++;n.splice(v,0,g),g.record.name&&!BC(g)&&i.set(g.record.name,g)}function f(g,v){let w,I={},A,b;if("name"in g&&g.name){if(w=i.get(g.name),!w)throw xc(1,{location:g});b=w.record.name,I=et(VC(v.params,w.keys.filter(P=>!P.optional).map(P=>P.name)),g.params&&VC(g.params,w.keys.map(P=>P.name))),A=w.stringify(I)}else if("path"in g)A=g.path,w=n.find(P=>P.re.test(A)),w&&(I=w.parse(A),b=w.record.name);else{if(w=v.name?i.get(v.name):n.find(P=>P.re.test(v.path)),!w)throw xc(1,{location:g,currentLocation:v});b=w.record.name,I=et({},v.params,g.params),A=w.stringify(I)}const S=[];let C=w;for(;C;)S.unshift(C.record),C=C.parent;return{name:b,path:A,params:I,matched:S,meta:KK(S)}}return t.forEach(g=>o(g)),{addRoute:o,resolve:f,removeRoute:c,getRoutes:l,getRecordMatcher:s}}function VC(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function $K(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:qK(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function qK(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="boolean"?n:n[i];return e}function BC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function KK(t){return t.reduce((e,n)=>et(e,n.meta),{})}function jC(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function cN(t,e){return e.children.some(n=>n===t||cN(t,n))}const uN=/#/g,zK=/&/g,GK=/\//g,HK=/=/g,WK=/\?/g,lN=/\+/g,YK=/%5B/g,QK=/%5D/g,hN=/%5E/g,JK=/%60/g,dN=/%7B/g,XK=/%7C/g,fN=/%7D/g,ZK=/%20/g;function Lb(t){return encodeURI(""+t).replace(XK,"|").replace(YK,"[").replace(QK,"]")}function ez(t){return Lb(t).replace(dN,"{").replace(fN,"}").replace(hN,"^")}function pw(t){return Lb(t).replace(lN,"%2B").replace(ZK,"+").replace(uN,"%23").replace(zK,"%26").replace(JK,"`").replace(dN,"{").replace(fN,"}").replace(hN,"^")}function tz(t){return pw(t).replace(HK,"%3D")}function nz(t){return Lb(t).replace(uN,"%23").replace(WK,"%3F")}function iz(t){return t==null?"":nz(t).replace(GK,"%2F")}function Tp(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function rz(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const o=i[s].replace(lN," "),c=o.indexOf("="),l=Tp(c<0?o:o.slice(0,c)),d=c<0?null:Tp(o.slice(c+1));if(l in e){let f=e[l];Pi(f)||(f=e[l]=[f]),f.push(d)}else e[l]=d}return e}function $C(t){let e="";for(let n in t){const i=t[n];if(n=tz(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Pi(i)?i.map(o=>o&&pw(o)):[i&&pw(i)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function sz(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Pi(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const oz=Symbol(""),qC=Symbol(""),Fb=Symbol(""),Ub=Symbol(""),mw=Symbol("");function pl(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function rs(t,e,n,i,s){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const d=v=>{v===!1?l(xc(4,{from:n,to:e})):v instanceof Error?l(v):DK(v)?l(xc(2,{from:e,to:v})):(o&&i.enterCallbacks[s]===o&&typeof v=="function"&&o.push(v),c())},f=t.call(i&&i.instances[s],e,n,d);let g=Promise.resolve(f);t.length<3&&(g=g.then(d)),g.catch(v=>l(v))})}function ty(t,e,n,i){const s=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(az(l)){const f=(l.__vccOpts||l)[e];f&&s.push(rs(f,n,i,o,c))}else{let d=l();s.push(()=>d.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${o.path}"`));const g=dK(f)?f.default:f;o.components[c]=g;const w=(g.__vccOpts||g)[e];return w&&rs(w,n,i,o,c)()}))}}return s}function az(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function KC(t){const e=Di(Fb),n=Di(Ub),i=zn(()=>e.resolve(ec(t.to))),s=zn(()=>{const{matched:d}=i.value,{length:f}=d,g=d[f-1],v=n.matched;if(!g||!v.length)return-1;const w=v.findIndex(Rc.bind(null,g));if(w>-1)return w;const I=zC(d[f-2]);return f>1&&zC(g)===I&&v[v.length-1].path!==I?v.findIndex(Rc.bind(null,d[f-2])):w}),o=zn(()=>s.value>-1&&hz(n.params,i.value.params)),c=zn(()=>s.value>-1&&s.value===n.matched.length-1&&rN(n.params,i.value.params));function l(d={}){return lz(d)?e[ec(t.replace)?"replace":"push"](ec(t.to)).catch(Vl):Promise.resolve()}return{route:i,href:zn(()=>i.value.href),isActive:o,isExactActive:c,navigate:l}}const cz=kA({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:KC,setup(t,{slots:e}){const n=Lc(KC(t)),{options:i}=Di(Fb),s=zn(()=>({[GC(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[GC(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:GA("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),uz=cz;function lz(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function hz(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Pi(s)||s.length!==i.length||i.some((o,c)=>o!==s[c]))return!1}return!0}function zC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const GC=(t,e,n)=>t??e??n,dz=kA({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Di(mw),s=zn(()=>t.route||i.value),o=Di(qC,0),c=zn(()=>{let f=ec(o);const{matched:g}=s.value;let v;for(;(v=g[f])&&!v.components;)f++;return f}),l=zn(()=>s.value.matched[c.value]);Rf(qC,zn(()=>c.value+1)),Rf(oz,l),Rf(mw,s);const d=Nw();return Sl(()=>[d.value,l.value,t.name],([f,g,v],[w,I,A])=>{g&&(g.instances[v]=f,I&&I!==g&&f&&f===w&&(g.leaveGuards.size||(g.leaveGuards=I.leaveGuards),g.updateGuards.size||(g.updateGuards=I.updateGuards))),f&&g&&(!I||!Rc(g,I)||!w)&&(g.enterCallbacks[v]||[]).forEach(b=>b(f))},{flush:"post"}),()=>{const f=s.value,g=t.name,v=l.value,w=v&&v.components[g];if(!w)return HC(n.default,{Component:w,route:f});const I=v.props[g],A=I?I===!0?f.params:typeof I=="function"?I(f):I:null,S=GA(w,et({},A,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(v.instances[g]=null)},ref:d}));return HC(n.default,{Component:S,route:f})||S}}});function HC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const fz=dz;function pz(t){const e=jK(t.routes,t),n=t.parseQuery||rz,i=t.stringifyQuery||$C,s=t.history,o=pl(),c=pl(),l=pl(),d=OM(ts);let f=ts;Wa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=Zv.bind(null,L=>""+L),v=Zv.bind(null,iz),w=Zv.bind(null,Tp);function I(L,Z){let z,de;return oN(L)?(z=e.getRecordMatcher(L),de=Z):de=L,e.addRoute(de,z)}function A(L){const Z=e.getRecordMatcher(L);Z&&e.removeRoute(Z)}function b(){return e.getRoutes().map(L=>L.record)}function S(L){return!!e.getRecordMatcher(L)}function C(L,Z){if(Z=et({},Z||d.value),typeof L=="string"){const _=ey(n,L,Z.path),T=e.resolve({path:_.path},Z),D=s.createHref(_.fullPath);return et(_,T,{params:w(T.params),hash:Tp(_.hash),redirectedFrom:void 0,href:D})}let z;if("path"in L)z=et({},L,{path:ey(n,L.path,Z.path).path});else{const _=et({},L.params);for(const T in _)_[T]==null&&delete _[T];z=et({},L,{params:v(L.params)}),Z.params=v(Z.params)}const de=e.resolve(z,Z),Ne=L.hash||"";de.params=g(w(de.params));const at=mK(i,et({},L,{hash:ez(Ne),path:de.path})),Re=s.createHref(at);return et({fullPath:at,hash:Ne,query:i===$C?sz(L.query):L.query||{}},de,{redirectedFrom:void 0,href:Re})}function P(L){return typeof L=="string"?ey(n,L,d.value.path):et({},L)}function O(L,Z){if(f!==L)return xc(8,{from:Z,to:L})}function Q(L){return ne(L)}function Y(L){return Q(et(P(L),{replace:!0}))}function ie(L){const Z=L.matched[L.matched.length-1];if(Z&&Z.redirect){const{redirect:z}=Z;let de=typeof z=="function"?z(L):z;return typeof de=="string"&&(de=de.includes("?")||de.includes("#")?de=P(de):{path:de},de.params={}),et({query:L.query,hash:L.hash,params:"path"in de?{}:L.params},de)}}function ne(L,Z){const z=f=C(L),de=d.value,Ne=L.state,at=L.force,Re=L.replace===!0,_=ie(z);if(_)return ne(et(P(_),{state:typeof _=="object"?et({},Ne,_.state):Ne,force:at,replace:Re}),Z||z);const T=z;T.redirectedFrom=Z;let D;return!at&&gK(i,de,z)&&(D=xc(16,{to:T,from:de}),hn(de,de,!0,!1)),(D?Promise.resolve(D):it(T,de)).catch(N=>lr(N)?lr(N,2)?N:Cn(N):ke(N,T,de)).then(N=>{if(N){if(lr(N,2))return ne(et({replace:Re},P(N.to),{state:typeof N.to=="object"?et({},Ne,N.to.state):Ne,force:at}),Z||T)}else N=be(T,de,!0,Re,Ne);return ht(T,de,N),N})}function me(L,Z){const z=O(L,Z);return z?Promise.reject(z):Promise.resolve()}function it(L,Z){let z;const[de,Ne,at]=mz(L,Z);z=ty(de.reverse(),"beforeRouteLeave",L,Z);for(const _ of de)_.leaveGuards.forEach(T=>{z.push(rs(T,L,Z))});const Re=me.bind(null,L,Z);return z.push(Re),qa(z).then(()=>{z=[];for(const _ of o.list())z.push(rs(_,L,Z));return z.push(Re),qa(z)}).then(()=>{z=ty(Ne,"beforeRouteUpdate",L,Z);for(const _ of Ne)_.updateGuards.forEach(T=>{z.push(rs(T,L,Z))});return z.push(Re),qa(z)}).then(()=>{z=[];for(const _ of L.matched)if(_.beforeEnter&&!Z.matched.includes(_))if(Pi(_.beforeEnter))for(const T of _.beforeEnter)z.push(rs(T,L,Z));else z.push(rs(_.beforeEnter,L,Z));return z.push(Re),qa(z)}).then(()=>(L.matched.forEach(_=>_.enterCallbacks={}),z=ty(at,"beforeRouteEnter",L,Z),z.push(Re),qa(z))).then(()=>{z=[];for(const _ of c.list())z.push(rs(_,L,Z));return z.push(Re),qa(z)}).catch(_=>lr(_,8)?_:Promise.reject(_))}function ht(L,Z,z){for(const de of l.list())de(L,Z,z)}function be(L,Z,z,de,Ne){const at=O(L,Z);if(at)return at;const Re=Z===ts,_=Wa?history.state:{};z&&(de||Re?s.replace(L.fullPath,et({scroll:Re&&_&&_.scroll},Ne)):s.push(L.fullPath,Ne)),d.value=L,hn(L,Z,z,Re),Cn()}let ot;function Ue(){ot||(ot=s.listen((L,Z,z)=>{if(!ea.listening)return;const de=C(L),Ne=ie(de);if(Ne){ne(et(Ne,{replace:!0}),de).catch(Vl);return}f=de;const at=d.value;Wa&&SK(OC(at.fullPath,z.delta),jm()),it(de,at).catch(Re=>lr(Re,12)?Re:lr(Re,2)?(ne(Re.to,de).then(_=>{lr(_,20)&&!z.delta&&z.type===yh.pop&&s.go(-1,!1)}).catch(Vl),Promise.reject()):(z.delta&&s.go(-z.delta,!1),ke(Re,de,at))).then(Re=>{Re=Re||be(de,at,!1),Re&&(z.delta&&!lr(Re,8)?s.go(-z.delta,!1):z.type===yh.pop&&lr(Re,20)&&s.go(-1,!1)),ht(de,at,Re)}).catch(Vl)}))}let Rt=pl(),Ee=pl(),oe;function ke(L,Z,z){Cn(L);const de=Ee.list();return de.length?de.forEach(Ne=>Ne(L,Z,z)):console.error(L),Promise.reject(L)}function He(){return oe&&d.value!==ts?Promise.resolve():new Promise((L,Z)=>{Rt.add([L,Z])})}function Cn(L){return oe||(oe=!L,Ue(),Rt.list().forEach(([Z,z])=>L?z(L):Z()),Rt.reset()),L}function hn(L,Z,z,de){const{scrollBehavior:Ne}=t;if(!Wa||!Ne)return Promise.resolve();const at=!z&&TK(OC(L.fullPath,0))||(de||!z)&&history.state&&history.state.scroll||null;return Ow().then(()=>Ne(L,Z,at)).then(Re=>Re&&EK(Re)).catch(Re=>ke(Re,L,Z))}const Vn=L=>s.go(L);let Ut;const Nr=new Set,ea={currentRoute:d,listening:!0,addRoute:I,removeRoute:A,hasRoute:S,getRoutes:b,resolve:C,options:t,push:Q,replace:Y,go:Vn,back:()=>Vn(-1),forward:()=>Vn(1),beforeEach:o.add,beforeResolve:c.add,afterEach:l.add,onError:Ee.add,isReady:He,install(L){const Z=this;L.component("RouterLink",uz),L.component("RouterView",fz),L.config.globalProperties.$router=Z,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>ec(d)}),Wa&&!Ut&&d.value===ts&&(Ut=!0,Q(s.location).catch(Ne=>{}));const z={};for(const Ne in ts)z[Ne]=zn(()=>d.value[Ne]);L.provide(Fb,Z),L.provide(Ub,Lc(z)),L.provide(mw,d);const de=L.unmount;Nr.add(L),L.unmount=function(){Nr.delete(L),Nr.size<1&&(f=ts,ot&&ot(),ot=null,d.value=ts,Ut=!1,oe=!1),de()}}};return ea}function qa(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function mz(t,e){const n=[],i=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let c=0;c<o;c++){const l=e.matched[c];l&&(t.matched.find(f=>Rc(f,l))?i.push(l):n.push(l));const d=t.matched[c];d&&(e.matched.find(f=>Rc(f,d))||s.push(d))}return[n,i,s]}function gz(){return Di(Ub)}const vz={name:"Home"},yz="/potion-productivity/assets/logo-13530169.svg";const wz={class:"home"},bz=Ye("div",{class:"header-section"},[Ye("img",{src:yz,alt:"",class:"logo"}),Ye("h1",{class:"header"},"Welcome to Potion."),Ye("p",{class:"page-content"},[my(" here, you can write notes that automatically save as you type them."),Ye("br"),my(' Open the sidebar and click "New Page" to start writing! ')])],-1),Iz=[bz];function _z(t,e,n,i,s,o){return On(),Gn("div",wz,Iz)}const Ez=Ps(vz,[["render",_z]]),Sz={props:["page","id"],data(){return{title:"",content:""}},setup(){const t=Bm(),e=gz();return Lp(()=>{t.fetchUserData()}),{page:zn(()=>t.getPageById(e.params.id)),saveData:(s,o,c)=>{t.saveData(s,o,c)},pagesStore:t}}};const Tz={class:"home"},Cz={class:"page"},Az={class:"page-header"},kz={class:"page-content"},Rz={key:0};function xz(t,e,n,i,s,o){return On(),Gn("div",Tz,[Ye("div",Cz,[Ye("h1",Az,[cy(Ye("textarea",{"onUpdate:modelValue":e[0]||(e[0]=c=>s.title=c),key:"title",id:"title",placeholder:"Title...",onInput:e[1]||(e[1]=c=>i.saveData(i.page.id,s.title,s.content))},null,544),[[TS,s.title]])]),Ye("p",kz,[cy(Ye("textarea",{"onUpdate:modelValue":e[2]||(e[2]=c=>s.content=c),key:"content",id:"content",placeholder:"Write your note...",oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"',onInput:e[3]||(e[3]=c=>i.saveData(i.page.id,s.title,s.content))},null,544),[[TS,s.content]]),i.pagesStore.loading?(On(),Gn("span",Rz,"Loading...")):gy("",!0)])])])}const Dz=Ps(Sz,[["render",xz],["__scopeId","data-v-140c254e"]]),Nz=[{path:"/",name:"home",component:Ez,props:!0},{path:"/page/:id",name:"Page",component:Dz,props:!0}],pN=pz({history:xK(),routes:Nz}),Pz={components:{close:Z9,DeleteButton:sK,AddButton:hK},setup(){const t=Bm(),e=async()=>{const n=await t.addPage();pN.push({name:"Page",params:{id:n}})};return Lp(()=>{t.fetchUserData()}),{pages:t.pages,addPage:e,isSidebarVisible:!0,rotate:!1}},methods:{toggleSidebar(){console.log("sidebar toggled"),this.isSidebarVisible=!this.isSidebarVisible,this.rotate=!this.rotate,this.rotate?(this.$refs.closeButton.classList.add("rotate"),this.$refs.sidebar.classList.add("slide-out")):(this.$refs.closeButton.classList.remove("rotate"),this.$refs.sidebar.classList.remove("slide-out"))},clearAllAndToggleSidebar(){this.clearAll(),this.toggleSidebar()},async deletePage(t){if(!_n.currentUser)return;const e=this.pages[t].id;this.pages.splice(t,1),await cb(Yi(dr,"users",_n.currentUser.uid,"pages",e))},async clearAll(){if(!_n.currentUser)return;const t=kD(dr);for(const e of this.pages)t.delete(Yi(dr,"users",_n.currentUser.uid,"pages",e.id));await t.commit(),this.pages=[]}}};const Oz=Ye("h1",{class:"sidebar-header"},"Potion",-1),Mz={class:"menu"},Lz={class:"page-title"},Fz={class:"button-wrapper"},Uz=["onClick"],Vz={class:"buttons"},Bz=Ye("p",null,"Clear all",-1),jz=Ye("p",null,"New Page",-1);function $z(t,e,n,i,s,o){const c=fo("close"),l=fo("router-link"),d=fo("delete-button"),f=fo("add-button"),g=pL("auto-animate");return On(),Gn(mi,null,[Ye("button",{ref:"closeButton",class:"close",onClick:e[0]||(e[0]=(...v)=>o.toggleSidebar&&o.toggleSidebar(...v))},[ft(c)],512),Ye("ul",{class:Ap(["sidebar",{"slide-out":!i.isSidebarVisible}]),ref:"sidebar"},[ft(l,{to:"/"},{default:gl(()=>[Oz]),_:1}),cy((On(),Gn("span",Mz,[(On(!0),Gn(mi,null,mL(i.pages,(v,w)=>(On(),Gn("li",{class:"menu-item",key:v.id},[ft(l,{to:`/page/${v.id}`,class:"menu-item",onClick:o.toggleSidebar},{default:gl(()=>[Ye("p",Lz,QO(v.title),1),Ye("div",Fz,[ft(l,{to:"/"},{default:gl(()=>[Ye("button",{class:"delete",onClick:gF(I=>o.deletePage(w),["stop"])},[ft(d)],8,Uz)]),_:2},1024)])]),_:2},1032,["to","onClick"])]))),128))])),[[g]]),Ye("div",Vz,[ft(l,{to:"/"},{default:gl(()=>[Ye("button",{onClick:e[1]||(e[1]=(...v)=>o.clearAllAndToggleSidebar&&o.clearAllAndToggleSidebar(...v)),class:"clear-all"},[ft(d,{class:"clear-button"}),Bz])]),_:1}),Ye("button",{onClick:e[2]||(e[2]=(...v)=>i.addPage&&i.addPage(...v)),class:"new-page"},[ft(f,{class:"add-button"}),jz])])],2)],64)}const qz=Ps(Pz,[["render",$z]]);const Kz={data(){return{user:qf().user}},methods:{signInWithGoogle(){qf().signInWithGoogle(),console.log("signed in")},signOut(){qf().signOut(),console.log("signed out")}}},zz={class:"user"};function Gz(t,e,n,i,s,o){return On(),Gn("nav",null,[Ye("ul",zz,[s.user?gy("",!0):(On(),Gn("button",{key:0,onClick:e[0]||(e[0]=(...c)=>o.signInWithGoogle&&o.signInWithGoogle(...c)),class:"sign-in"}," Sign in ")),s.user?(On(),Gn("button",{key:1,onClick:e[1]||(e[1]=(...c)=>o.signOut&&o.signOut(...c)),class:"sign-out"},"Sign Out")):gy("",!0)])])}const Hz=Ps(Kz,[["render",Gz],["__scopeId","data-v-f18b139d"]]),Wz={name:"App",components:{Sidebar:qz,Navbar:Hz},created(){Bm().fetchUserData(),k6(_n,e=>{const n=qf();e?(console.log("User is signed in."),n.setUser(e)):(console.log("User is signed out."),n.setUser(null))})}};function Yz(t,e,n,i,s,o){const c=fo("navbar"),l=fo("sidebar"),d=fo("router-view");return On(),Gn(mi,null,[ft(c),ft(l),ft(d)],64)}const Qz=Ps(Wz,[["render",Yz],["__scopeId","data-v-3de3dd6c"]]),mN=new Set,Jn=new WeakMap,ac=new WeakMap,qo=new WeakMap,gw=new WeakMap,Jz=new WeakMap,Dc=new WeakMap,Cp=new WeakMap,El=new WeakSet;let Ko;const gr="__aa_tgt",vw="__aa_del",Xz=t=>{const e=iG(t);e&&e.forEach(n=>rG(n))},Zz=t=>{t.forEach(e=>{e.target===Ko&&tG(),Jn.has(e.target)&&Zo(e.target)})};function eG(t){const e=gw.get(t);e==null||e.disconnect();let n=Jn.get(t),i=0;const s=5;n||(n=Nc(t),Jn.set(t,n));const{offsetWidth:o,offsetHeight:c}=Ko,d=[n.top-s,o-(n.left+s+n.width),c-(n.top+s+n.height),n.left-s].map(g=>`${-1*Math.floor(g)}px`).join(" "),f=new IntersectionObserver(()=>{++i>1&&Zo(t)},{root:Ko,threshold:1,rootMargin:d});f.observe(t),gw.set(t,f)}function Zo(t){clearTimeout(Cp.get(t));const e=$m(t),n=typeof e=="function"?500:e.duration;Cp.set(t,setTimeout(async()=>{const i=qo.get(t);try{await(i==null?void 0:i.finished),Jn.set(t,Nc(t)),eG(t)}catch{}},n))}function tG(){clearTimeout(Cp.get(Ko)),Cp.set(Ko,setTimeout(()=>{mN.forEach(t=>wN(t,e=>gN(()=>Zo(e))))},100))}function nG(t){setTimeout(()=>{Jz.set(t,setInterval(()=>gN(Zo.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function gN(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let yw,Ja;typeof window<"u"&&(Ko=document.documentElement,yw=new MutationObserver(Xz),Ja=new ResizeObserver(Zz),Ja.observe(Ko));function iG(t){return t.reduce((i,s)=>[...i,...Array.from(s.addedNodes),...Array.from(s.removedNodes)],[]).every(i=>i.nodeName==="#comment")?!1:t.reduce((i,s)=>{if(i===!1)return!1;if(s.target instanceof Element){if(ny(s.target),!i.has(s.target)){i.add(s.target);for(let o=0;o<s.target.children.length;o++){const c=s.target.children.item(o);if(c){if(vw in c)return!1;ny(s.target,c),i.add(c)}}}if(s.removedNodes.length)for(let o=0;o<s.removedNodes.length;o++){const c=s.removedNodes[o];if(vw in c)return!1;c instanceof Element&&(i.add(c),ny(s.target,c),ac.set(c,[s.previousSibling,s.nextSibling]))}}return i},new Set)}function ny(t,e){!e&&!(gr in t)?Object.defineProperty(t,gr,{value:t}):e&&!(gr in e)&&Object.defineProperty(e,gr,{value:t})}function rG(t){var e;const n=t.isConnected,i=Jn.has(t);n&&ac.has(t)&&ac.delete(t),qo.has(t)&&((e=qo.get(t))===null||e===void 0||e.cancel()),i&&n?sG(t):i&&!n?aG(t):oG(t)}function Bi(t){return Number(t.replace(/[^0-9.\-]/g,""))}function Nc(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX,width:e.width,height:e.height}}function vN(t,e,n){let i=e.width,s=e.height,o=n.width,c=n.height;const l=getComputedStyle(t);if(l.getPropertyValue("box-sizing")==="content-box"){const f=Bi(l.paddingTop)+Bi(l.paddingBottom)+Bi(l.borderTopWidth)+Bi(l.borderBottomWidth),g=Bi(l.paddingLeft)+Bi(l.paddingRight)+Bi(l.borderRightWidth)+Bi(l.borderLeftWidth);i-=g,o-=g,s-=f,c-=f}return[i,o,s,c].map(Math.round)}function $m(t){return gr in t&&Dc.has(t[gr])?Dc.get(t[gr]):{duration:250,easing:"ease-in-out"}}function yN(t){if(gr in t)return t[gr]}function Vb(t){const e=yN(t);return e?El.has(e):!1}function wN(t,...e){e.forEach(n=>n(t,Dc.has(t)));for(let n=0;n<t.children.length;n++){const i=t.children.item(n);i&&e.forEach(s=>s(i,Dc.has(i)))}}function sG(t){const e=Jn.get(t),n=Nc(t);if(!Vb(t))return Jn.set(t,n);let i;if(!e)return;const s=$m(t);if(typeof s!="function"){const o=e.left-n.left,c=e.top-n.top,[l,d,f,g]=vN(t,e,n),v={transform:`translate(${o}px, ${c}px)`},w={transform:"translate(0, 0)"};l!==d&&(v.width=`${l}px`,w.width=`${d}px`),f!==g&&(v.height=`${f}px`,w.height=`${g}px`),i=t.animate([v,w],{duration:s.duration,easing:s.easing})}else i=new Animation(s(t,"remain",e,n)),i.play();qo.set(t,i),Jn.set(t,n),i.addEventListener("finish",Zo.bind(null,t))}function oG(t){const e=Nc(t);Jn.set(t,e);const n=$m(t);if(!Vb(t))return;let i;typeof n!="function"?i=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"}):(i=new Animation(n(t,"add",e)),i.play()),qo.set(t,i),i.addEventListener("finish",Zo.bind(null,t))}function aG(t){var e;if(!ac.has(t)||!Jn.has(t))return;const[n,i]=ac.get(t);Object.defineProperty(t,vw,{value:!0}),i&&i.parentNode&&i.parentNode instanceof Element?i.parentNode.insertBefore(t,i):n&&n.parentNode?n.parentNode.appendChild(t):(e=yN(t))===null||e===void 0||e.appendChild(t);function s(){var w;t.remove(),Jn.delete(t),ac.delete(t),qo.delete(t),(w=gw.get(t))===null||w===void 0||w.disconnect()}if(!Vb(t))return s();const[o,c,l,d]=cG(t),f=$m(t),g=Jn.get(t);let v;Object.assign(t.style,{position:"absolute",top:`${o}px`,left:`${c}px`,width:`${l}px`,height:`${d}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof f!="function"?v=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:f.duration,easing:"ease-out"}):(v=new Animation(f(t,"remove",g)),v.play()),qo.set(t,v),v.addEventListener("finish",s)}function cG(t){const e=Jn.get(t),[n,,i]=vN(t,e,Nc(t));let s=t.parentElement;for(;s&&(getComputedStyle(s).position==="static"||s instanceof HTMLBodyElement);)s=s.parentElement;s||(s=document.body);const o=getComputedStyle(s),c=Jn.get(s)||Nc(s),l=Math.round(e.top-c.top)-Bi(o.borderTopWidth),d=Math.round(e.left-c.left)-Bi(o.borderLeftWidth);return[l,d,n,i]}function uG(t,e={}){return yw&&Ja&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof e!="function"&&!e.disrespectUserMotionPreference||(El.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),wN(t,Zo,nG,s=>Ja==null?void 0:Ja.observe(s)),typeof e=="function"?Dc.set(t,e):Dc.set(t,{duration:250,easing:"ease-in-out",...e}),yw.observe(t,{childList:!0}),mN.add(t))),Object.freeze({parent:t,enable:()=>{El.add(t)},disable:()=>{El.delete(t)},isEnabled:()=>El.has(t)})}const lG={mounted:(t,e)=>{uG(t,e.value||{})}},hG={install(t){t.directive("auto-animate",lG)}},dG=_F(),fG=wF(Qz).use(dG).use(pN).use(hG);fG.mount("#app");
